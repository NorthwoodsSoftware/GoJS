
<h1>SVG Drawing Context</h1>
<p>
  By default, <b>GoJS</b> renders to an HTML Canvas.
  This is more performant, especially with larger graphs, and is the right choice for most users.
  However, a few use-cases may require an SVG rendering context instead.
  Some examples:
</p>
<ul>
  <li>
    <strong>Animated GIFs:</strong>
    The SVG context can display animated GIF content, unlike the default Canvas renderer.
  </li>
  <li>
    <strong>Selectability:</strong>
    When pointer events are turned off via CSS, users have the option of selecting text within TextBlocks.
  </li>
  <li>
    <strong>Testing:</strong>
    Test code can examine the SVG DOM to determine the visual state of the diagram.
    However the SVG DOM might not include Parts that are outside of the viewport.
  </li>
</ul>
<p>
  Unless you have a specific use case in mind, usage of the default Canvas context is recommended instead.
  SVG content is more susceptible to interference from other content on the site such as CSS rules.
</p>
<p>
  Note that <b>GoJS</b> also has <a href="./makingSVG.html">SVG export</a>, which a can be useful for generating
  static SVG diagrams or content for a PDF, and its usage is more common.
</p>

<p>
  Enabling SVG rendering of the viewport is done by setting <a>Diagram.renderer</a> to <code>'svg'</code>:
</p>
<pre class="lang-js"><code>
  const diagram = new go.Diagram('myDiagramDiv', { renderer: 'svg' });
</code></pre>

<h2 id="AnimatedGIFs">Animated GIFs</h2>
<p>
  Due to limitations in the HTML Canvas, GIF image frames beyond the first cannot be displayed.
  The SVG context avoids this problem, and will show GIF animations:
</p>
<pre class="lang-js" id="gif-bad"><code>
// Using HTML Canvas, the GIF cannot animate
diagram.add(
  new go.Part("Vertical")
    .add(new go.Picture("./images/caffeine.gif", { width: 100, height: 100 }))
    .add(new go.TextBlock("caffeine")))
</code></pre>
<script>goCode("gif-bad", 200, 200)</script>

<pre class="lang-js" id="gif"><code>
// Set the renderer to use SVG:
diagram.renderer = 'svg';
diagram.add(
  new go.Part("Vertical")
    .add(new go.Picture("./images/caffeine.gif", { width: 100, height: 100 }))
    .add(new go.TextBlock("caffeine")))
</code></pre>
<script>goCode("gif", 200, 200)</script>


<h2 id="ContentSecurityPolicy">Content Security Policy</h2>
<p>
  Rendering SVG requires dynamically creating, modifying, and deleting SVG DOM elements.
  If your app must run on a server with a
  <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CSP" target="_blank">Content Security Policy</a>,
  you will need to allow rendering SVG DOM.
</p>
<p>
  This is an example of a policy directive that is restrictive to only allow same-origin sources but still allows SVG to be rendered:
</p>
<code>
  Content-Security-Policy: default-src 'self'; style-src-attr 'self' 'unsafe-inline'
</code>
<p>
  If the browsers that you need to operate on might not support the
  <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy/style-src-attr" target="_blank">style-src-attr</a>
  directive, you can use the less restrictive "style-src" directive:
</p>
<code>
  Content-Security-Policy: default-src 'self'; style-src 'self' 'unsafe-inline'
</code>