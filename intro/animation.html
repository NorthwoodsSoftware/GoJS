
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/>


<link rel="preconnect" href="https://rsms.me/">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css">
<link rel="stylesheet" href="../assets/css/style.css">
<!-- Copyright 1998-2024 by Northwoods Software Corporation. -->


<meta itemprop="name" content=Animation />
<meta property="og:title" content=Animation />
<meta name="twitter:title" content=Animation />


<meta property="og:image" content="https://gojs.net/3.0.2/assets/images/fp/defaultCard.png" />
<meta itemprop="image" content="https://gojs.net/3.0.2/assets/images/fp/defaultCard.png" />
<meta name="twitter:image" content="https://gojs.net/3.0.2/assets/images/fp/defaultCard.png" />

<meta property="og:url" content="https://gojs.net/3.0.2/intro/animation.html" />
<meta property="twitter:url" content="https://gojs.net/3.0.2/intro/animation.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta property="og:type" content="website" />
<meta property="twitter:domain" content="gojs.net" />

    <title>
      Animation | GoJS
    </title>
    <link rel="stylesheet" href="../assets/css/prism.css"/>
  </head>
  <script>
    window.diagrams = [];
    window.goCode = function (pre, w, h, parentid, animation) {
      window
        .diagrams
        .push([pre, w, h, parentid, animation]);
    }
  </script>
  <body>
    <nav id="navTop" class=" w-full h-[var(--topnav-h)] z-30 bg-white border-b border-b-gray-200">
  <div class="max-w-screen-xl mx-auto flex flex-wrap items-start justify-between px-4">
    <a class="text-white bg-nwoods-primary font-bold !leading-[calc(var(--topnav-h)_-_1px)] my-0 px-2 text-4xl lg:text-5xl logo"
       href="../">
      GoJS
    </a>
    <div class="relative">
      <button id="topnavButton" class="h-[calc(var(--topnav-h)_-_1px)] px-2 m-0 text-gray-900 bg-inherit shadow-none md:hidden hover:!bg-inherit hover:!text-nwoods-accent hover:!shadow-none" aria-label="Navigation">
        <svg class="h-7 w-7 block" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <div id="topnavList" class="hidden md:block">
        <div class="absolute right-0 z-30 flex flex-col items-end rounded border border-gray-200 p-4 pl-12 shadow bg-white text-gray-900 font-semibold
                    md:flex-row md:space-x-4 md:items-start md:border-0 md:p-0 md:shadow-none md:bg-inherit">
          <a href="../learn/">Learn</a>
          <a href="../samples/">Samples</a>
          <a href="../intro/">Intro</a>
          <a href="../api/">API</a>
          <a href="../download.html">Download</a>
          <a href="https://forum.nwoods.com/c/gojs/11" target="_blank" rel="noopener">Forum</a>
          <a href="https://www.nwoods.com/contact.html"
            target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/contact.html', 'contact');">Contact</a>
          <a href="https://www.nwoods.com/sales/index.html"
            target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/sales/index.html', 'buy');">Buy</a>
        </div>
      </div>
    </div>
  </div>
</nav>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    // topnav
    var topButton = document.getElementById("topnavButton");
    var topnavList = document.getElementById("topnavList");
    if (topButton && topnavList) {
      topButton.addEventListener("click", function (e) {
        topnavList
          .classList
          .toggle("hidden");
        e.stopPropagation();
      });
      document.addEventListener("click", function (e) {
        // if the clicked element isn't the list, close the list
        if (!topnavList.classList.contains("hidden") && !e.target.closest("#topnavList")) {
          topButton.click();
        }
      });

      // set active <a> element
      var url = window
        .location
        .href
        .toLowerCase();
      var aTags = topnavList.getElementsByTagName('a');
      for (var i = 0; i < aTags.length; i++) {
        var lowerhref = aTags[i]
          .href
          .toLowerCase();
        if (url.startsWith(lowerhref)) {
          aTags[i]
            .classList
            .add('active');
          break;
        }
      }
    }
  });
</script>
    <div class="sticky top-0 left-0 z-10 px-2 w-full bg-white border-b border-b-gray-200 md:hidden">
  <button id="sidenavButton" class="flex p-2 text-gray-900 bg-inherit shadow-none items-center text-sm font-semibold hover:!bg-inherit hover:!text-nwoods-accent hover:!shadow-none" aria-label="Navigation">
    <svg class="h-7 w-7 block mr-2" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span>Menu</span>
  </button>
</div>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    // sidenav
    var sideButton = document.getElementById("sidenavButton");
    var sidenav = document.getElementById("sidenav");
    if (sideButton && sidenav) {
      sideButton.addEventListener("click", function (e) {
        sidenav
          .classList
          .toggle("hidden");
        e.stopPropagation();
      });
      document.addEventListener("click", function (e) {
        // if the clicked element isn't the list, close the list
        if (!sidenav.classList.contains("hidden") && !e.target.closest("#sidenavList")) {
          sideButton.click();
        }
      });
    }
  });
</script>
    
    <div class="flex flex-row md:min-h-screen w-full max-w-screen-xl mx-auto">
      
      <aside id="sidenav"
  class="hidden fixed top-0 left-0 z-10 w-full bg-black/10 min-h-screen max-h-screen overflow-x-hidden overflow-y-auto flex-shrink-0
         md:block md:sticky md:w-52 md:min-h-0 md:bg-inherit md:border-r md:border-r-gray-200 md:overscroll-auto">
  <nav id="sidenavList" class="flex flex-col bg-white w-52 min-h-screen pl-2 pt-4 pb-24 md:w-full md:min-h-0">
    
  <a href="index.html">Basics</a>
  <a href="buildingObjects.html">Building Parts</a>
  <a href="usingModels.html">Using Models</a>
  <a href="dataBinding.html">Data Binding</a>
  <a href="react.html">GoJS with React</a>
  <a href="svelte.html">GoJS with Svelte</a>
  <a href="angular.html">GoJS with Angular</a>
  <a href="textBlocks.html">TextBlocks</a>
  <a href="shapes.html">Shapes</a>
  <a href="pictures.html">Pictures</a>
  <a href="panels.html">Panels</a>
  <a href="tablePanels.html">Table Panels</a>
  <a href="brush.html">Brushes</a>
  <a href="sizing.html">Sizing Objects</a>
  <a href="itemArrays.html">Item Arrays</a>
  <a href="changedEvents.html">Changed Events</a>
  <a href="transactions.html">Transactions</a>
  <a href="viewport.html">Coordinates</a>
  <a href="initialView.html">Initial View</a>
  <a href="collections.html">Collections</a>
  <a href="links.html">Links</a>
  <a href="linkLabels.html">Link Labels</a>
  <a href="connectionPoints.html">Link Points</a>
  <a href="ports.html">Ports</a>
  <a href="nodes.html">Nodes</a>
  <a href="typings.html">Typings</a>
  <a href="debugging.html">Debugging</a>
  <a href="layouts.html">Layouts</a>
  <a href="trees.html">Trees</a>
  <a href="subtrees.html">SubTrees</a>
  <a href="groups.html">Groups</a>
  <a href="subgraphs.html">SubGraphs</a>
  <a href="sizedGroups.html">Sized Groups</a>
  <a href="selection.html">Selection</a>
  <a href="highlighting.html">Highlighting</a>
  <a href="theming.html">Theming</a>
  <a href="routers.html">Routers</a>
  <a href="animation.html">Animation</a>
  <a href="toolTips.html">ToolTips</a>
  <a href="contextmenus.html">Context Menus</a>
  <a href="events.html">Diagram Events</a>
  <a href="tools.html">Tools</a>
  <a href="commands.html">Commands</a>
  <a href="permissions.html">Permissions</a>
  <a href="validation.html">Validation</a>
  <a href="HTMLInteraction.html">HTML Interaction</a>
  <a href="layers.html">Layers &amp; Z-ordering</a>
  <a href="palette.html">Palette</a>
  <a href="overview.html">Overview</a>
  <a href="replacingDeleting.html">Replacing and Deleting</a>
  <a href="buttons.html">Buttons</a>
  <a href="templateMaps.html">Template Maps</a>
  <a href="legends.html">Legends and Titles</a>
  <a href="extensions.html">Extensions</a>
  <a href="geometry.html">Geometry Strings</a>
  <a href="grids.html">Grid Patterns</a>
  <a href="graduatedPanels.html">Graduated Panels</a>
  <a href="SVGcontext.html">Rendering to SVG</a>
  <a href="makingSVG.html">Snapshot to SVG</a>
  <a href="makingImages.html">Diagram Images</a>
  <a href="printing.html">Printing</a>
  <a href="serverSideImages.html">Server-side Images</a>
  <a href="nodeScript.html">GoJS in Node.js</a>
  <a href="testing.html">Testing</a>
  <a href="performance.html">Performance</a>
  <a href="platforms.html">Platforms</a>
  <a href="deployment.html">Deployment</a>

  </nav>
</aside>
<script>
  var navList = document.getElementById('sidenavList');
  if (navList !== null) {
    var url = window.location.href;
    var lindex = url.lastIndexOf('/');
    url = url
      .slice(lindex + 1)
      .toLowerCase();
    var aTags = navList.getElementsByTagName('a');
    var currentindex = -1;
    for (var i = 0; i < aTags.length; i++) {
      var lowerhref = aTags[i]
        .href
        .toLowerCase();
      if (lowerhref.indexOf('/' + url) !== -1) {
        currentindex = i;
        aTags[i]
          .classList
          .add('active');
        break;
      }
    }
  }
</script>
      
      <div class="px-4 pb-16 w-full overflow-hidden prose">
        
<h1>GoJS Animation</h1>
<p>
  <b>GoJS</b> offers several built-in animations, enabled by default, as well as the ability to create arbitrary animations.
</p>
<p>
  The <a>Diagram.animationManager</a> handles animations within a <a>Diagram</a>.
  The <a>AnimationManager</a> automatically sets up and dispatches default animations, and has properties to customize and disable them.
  Custom animations are possible by creating instances of <a>Animation</a> or <a>AnimationTrigger</a>.
</p>

<div class="box" style="background-color: lightgoldenrodyellow; padding: 10px;">
  <p>This introduction page details the different classes used for GoJS animation.</p>
  <p>To see more demonstrations of custom animations, visit the <a href="../samples/customAnimations.html">Custom Animations extension sample</a>.</p>
</div>


<h2 id="DefaultAnimations">Default Animations</h2>

<p>
  By default, the AnimationManager creates and runs several animations for its Diagram using a single
  instance of Animation, the <a>AnimationManager.defaultAnimation</a>.
  These animations occur on various commands, by the <a>Diagram.model</a> setter, and upon layouts.
  Unlike other Animations, they will be stopped if a new transaction is started during animation.
</p>
<p>
  GoJS will begin an animation automatically for these reasons:
</p>

<p>Invoked by <a>CommandHandler</a>:</p>
<ul>
  <li>"Collapse SubGraph" - Animates the collapsing nodes by "disappearing" them, animating their scales and positions into their group.
  <li>"Expand SubGraph" - Expands groups by animating the scales and positions of nodes starting within the collapsed group.
  <li>"Collapse Tree" - Animates the collapsing nodes by "disappearing" them, animating their scales and positions into the root node.
  <li>"Expand Tree" - Expands subtrees by animating the scales and positions of descendant nodes starting within the collapsed root node.
  <li>"Scroll To Part" - Animates the <a>Diagram.position</a> and may expand groups or expand subtrees to make the node visible.
  <li>"Zoom To Fit" - Animates the <a>Diagram.position</a> and <a>Diagram.scale</a>.
</ul>

<p>Invoked by <a>Diagram</a>:</p>
<ul>
<li>"Model" - Animates all node positions when a new model is set.
<li>"Layout" - Animates all changed node positions on a layout.
</ul>


<p>Invoked by <a>AnimationTrigger</a>s, if any are declared.

<p>
The above quoted names are strings passed to <a>AnimationManager.canStart</a>
This method can be overridden to return <code>false</code> if you wish to stop specific automatic animations.
</p>

<h3 id="DefaultAnimations">Default Initial Animation</h3>

<p>
  As of GoJS 2.1, the default initial animation fades the diagram upwards into view. Prior versions animated Part locations separately.
  To control the initial animation behavior, there now exists <a>AnimationManager.initialAnimationStyle</a>, which is set to <a>AnimationStyle.Default</a>
  by default, but can be set to <a>AnimationStyle.AnimateLocations</a> to use the animation style from GoJS 2.0.
  You can also set this property to <a>AnimationStyle.None</a> and define your own initial animation using the <code>"InitialAnimationStarting"</code> <a>DiagramEvent</a>.
</p>

<p>
  Here is an example with buttons which set <a>AnimationManager.initialAnimationStyle</a> to the three different values, then reload the Diagram.
  A fourth button illustrates how one might use the <code>"InitialAnimationStarting"</code> <a>DiagramEvent</a> to make a custom "zoom in" animation.
</p>


<pre class="lang-js" id="animationStyles"><code>
    diagram.nodeTemplate =
      new go.Node("Auto").add(
        new go.Shape("RoundedRectangle", { strokeWidth: 0, fill: "lightblue" }),
        new go.TextBlock({ margin: 8, font: "bold 14px sans-serif", stroke: '#333' })
          .bind("text", "key")
      );
    diagram.model = new go.GraphLinksModel([{ key: 'Alpha' }, { key: 'Beta' }, { key: 'Delta' }, { key: 'Gamma' }]);

    // only needed for this demonstration, this flag is used to stop
    // the "InitialAnimationStarting" listener when other buttons are pressed
    window.custom = false;

    window.animateDefault = () => {
      window.custom = false;
      diagram.animationManager.initialAnimationStyle = go.AnimationStyle.Default;
      diagram.model = go.Model.fromJson(diagram.model.toJson());
    }
    window.animateLocations = () => {
      window.custom = false;
      diagram.animationManager.initialAnimationStyle = go.AnimationStyle.AnimateLocations;
      diagram.model = go.Model.fromJson(diagram.model.toJson());
    }
    window.animateNone = () => {
      window.custom = false;
      diagram.animationManager.initialAnimationStyle = go.AnimationStyle.None;
      diagram.model = go.Model.fromJson(diagram.model.toJson());
    }
    window.animateCustom = () => {
      window.custom = true;
      diagram.animationManager.initialAnimationStyle = go.AnimationStyle.None;
      // Customer listener zooms-in the Diagram on load:
      diagram.addDiagramListener("InitialAnimationStarting", e => {
        const animation = e.subject.defaultAnimation;
        if (window.custom === false) {
          // a different button was pressed, restore default values on the default animation:
          animation.easing = go.Animation.EaseInOutQuad;
          animation.duration = NaN;
          return;
        }
        animation.easing = go.Animation.EaseOutExpo;
        animation.duration = 1500;
        animation.add(e.diagram, 'scale', 0.1, 1);
        animation.add(e.diagram, 'opacity', 0, 1);
      })
      diagram.model = go.Model.fromJson(diagram.model.toJson());
    }

    </code></pre>
    <script>goCode("animationStyles", 600, 200, null, true)</script>
    <p>
      <button id="Animate Colors" onclick="animateDefault()">animationStyle: Default</button>
      <button id="Animate Colors" onclick="animateLocations()">animationStyle: AnimateLocations</button>
      <button id="Animate Colors" onclick="animateNone()">animationStyle: None (does nothing!)</button>
      <button id="Animate Colors" onclick="animateCustom()">animationStyle: None + Custom Animation</button>



<h3 id="Limitations">Limitations of Default Animations</h3>

<p>
  The AnimationManager can be turned off by setting <a>AnimationManager.isEnabled</a> to <code>false</code>.
  Specific default animations can be turned off or modified by overriding <a>AnimationManager.canStart</a>
  and returning <code>false</code> as desired.
</p>

<p>
  The default animation will be stopped if a new transaction begins during the animation.
  The same is not true of other <a>Animation</a>s, which are not stopped by new transactions, and can continue indefinitely.
</p>


<h2 id="AnimatableProperties">Animatable Properties</h2>
<p>
  By default, <a>AnimationTriggers</a> and <a>Animation</a>s can animate these properties of GraphObjects:
</p>
<ul>
  <li><code>position</code>
  <li><code>location</code> (on Parts)
  <li><code>scale</code>
  <li><code>opacity</code>
  <li><code>angle</code>
  <li><code>desiredSize</code>
  <li><code>width</code>
  <li><code>height</code>
  <li><code>background</code> (for solid string colors only)
  <li><code>fill</code> (on Shapes, for solid string colors only)
  <li><code>strokeWidth</code> (on Shapes)
  <li><code>strokeDashOffset</code> (on Shapes)
  <li><code>stroke</code> (on Shapes, TextBlocks, for solid string colors only)
</ul>

<p>
  Additionally <a>Animation</a>s (but not <a>AnimationTriggers</a>) can animate these properties of Diagram:
</p>
<ul>
  <li><code>position</code>
  <li><code>scale</code>
  <li><code>opacity</code>
</ul>

<p>
It is possible to animate other properties if they are defined by the programmer -- see the section "Custom Animation Effects" below.
</p>

<h2 id="AnimationTriggerClass">The AnimationTrigger Class</h2>

<p class="box" style="background-color: lightgoldenrodyellow;">
  <em>New in 2.1</em>
</p>

<p>
  An <a>AnimationTrigger</a> is used to declare GraphObject properties to animate when their value has changed.
  When a trigger is defined, changes to the target property will animate from the old value to the new value.
  In templates, triggers are defined in a similar fashion to Bindings:
</p>

<pre class="lang-js"><code>
// In this shape definition, one trigger is defined on a Shape.
// It will cause all changes to Shape.fill to animate
// from their old values to their new values.
new go.Shape("Rectangle", { strokeWidth: 12, stroke: 'black', fill: 'white' })
  .trigger(new go.AnimationTrigger('fill'))
</code></pre>

<p>
Here is an example, with an HTML button that sets the Shape's <code>stroke</code> and <code>fill</code> to new random values:
</p>

<pre class="lang-js" id="animateTrigger1"><code>
diagram.nodeTemplate =
  new go.Node().add(
    new go.Shape("Rectangle", { strokeWidth: 12, stroke: 'black', fill: 'white' })
      .trigger(new go.AnimationTrigger('stroke'))
      .trigger(new go.AnimationTrigger('fill'))
  );

diagram.model = new go.GraphLinksModel([{ key: 'Alpha' }]); // One node

// attach this Diagram to the window to use a button
window.animateTrigger1 = () => {
  diagram.commit(diag => {
    const node = diag.nodes.first();
    node.elt(0).stroke = go.Brush.randomColor();
    node.elt(0).fill = go.Brush.randomColor();
  });
}

</code></pre>
<script>goCode("animateTrigger1", 600, 200, null, true)</script>
<p><button id="Animate Colors" onclick="animateTrigger1()">Animate Colors</button>

<p>
  AnimationTriggers can invoke an animation immediately, starting a new animation with each property of each GraphObject that has been modified,
  or they can (much more efficiently) be bundled together into the default
  animation (<a>AnimationManager.defaultAnimation</a>) and begin at the end of the next transaction.
  These behaviors can be set with <a>AnimationTrigger.startCondition</a> by the values
  <a>TriggerStart.Immediate</a> and <a>TriggerStart.Bundled</a>, respectively.
  The default value, <a>TriggerStart.Default</a>, attempts to infer which is best.
  It will start immediately if there is no ongoing transaction or if <a>Diagram.skipsUndoManager</a> is true.
</p>

<p>
  AnimationTriggers are only definable on GraphObjects in templates, and cannot be used on RowColumnDefinitions or Diagrams.
</p>

<h2 id="AnimationClass">The Animation Class</h2>

<p class="box" style="background-color: lightgoldenrodyellow">
  <em>New in 2.1</em>
</p>
<p>
  General animation of GraphObject and Diagram properties is possible by creating one or more instances of the <a>Animation</a> class.
</p>

<pre class="lang-js"><code>
const animation = new go.Animation();
// Animate the node's angle from its current value to a random value between 0 and 180 degrees
animation.add(node, "angle", node.angle, Math.random() * 180);
animation.duration = 1000; // Animate over 1 second, instead of the default 600 milliseconds
animation.start(); // starts the animation immediately
</code></pre>

<p>
  <a>Animation.add</a> is used to specify which objects should animate, their properties to animate,
  and for each property the starting and ending values:
</p>

<pre class="lang-js"><code>
  animation.add(GraphObjectOrDiagram, "EffectName", StartingValue, EndingValue);
</code></pre>

<p>
  Here's the above animation in an example, where each node is animated by an HTML button.
  Note carefully that each node is added to the same animation. The same effect would be had with one animation per node,
  but it is always more efficient to group the properties you are animating into a single animation, if possible
  (for instance, it is possible if they are all going to start at the same time and have the same duration).
</p>

<pre id="animate1" class="lang-js"><code>
// define a simple Node template
diagram.nodeTemplate =
  new go.Node("Spot", { locationSpot: go.Spot.Center })
    .bind("angle")
    .add(
      new go.Shape("Diamond", { strokeWidth: 0, width: 75, height: 75 })
        .bind("fill", "color"),
      new go.TextBlock({ margin: 8, font: 'bold 12pt sans-serif' })
        .bind("text", "key")
    );

diagram.model = new go.GraphLinksModel(
  [
    { key: "Alpha", color: "lightblue" },
    { key: "Beta", color: "orange" },
    { key: "Gamma", group: 'G1',  color: "lightgreen" },
    { key: "Delta", group: 'G1',  color: "pink", angle: 45 }
  ],
  [
    { from: "Alpha", to: "Beta" },
    { from: "Gamma", to: "Delta" }
  ]);

window.animate1 = () => {
  const animation = new go.Animation();
  diagram.nodes.each(node => {
    // Animate the clockwise turning of a node from its current angle to a random value
    animation.add(node, "angle", node.angle, node.angle + Math.random() * 180);
  });
  animation.duration = 1000; // Animate over 1 second, instead of the default 600 milliseconds
  animation.start(); // starts the animation immediately
}
</code></pre>
<script>goCode("animate1", 600, 250, null, true)</script>
<p><button id="Animate Nodes" onclick="animate1()">Animate Node Angles</button>

<p>
  Animating the Diagram is possible by passing it as the object to be animated:
</p>
<pre class="lang-js"><code>
  animation.add(myDiagram, "position", myDiagram.position, myDiagram.position.copy().offset(200, 15));
  ...
  animation.add(myDiagram, "scale", myDiagram.scale, 0.2);
</code></pre>

<p>
  Animations can also be reversed, as is common with animations that are intended to be cosmetic in nature, by setting <a>Animation.reversible</a> to true.
  This doubles the effective duration of the Animation.
</p>
<p>
  Below are several example Animations, all with <a>Animation.reversible</a> set to true. The first animates Nodes, the other three animate Diagram position and scale.
</p>

<pre class="lang-js" id="animate2"><code>
    // define a simple Node template
    diagram.nodeTemplate =
      new go.Node("Spot", { locationSpot: go.Spot.Center })
        .bind("angle").add(
          new go.Shape("Diamond", { strokeWidth: 0, width: 75, height: 75 })
            .bind("fill", "color"),
          new go.TextBlock({ margin: 8, font: 'bold 12pt sans-serif' })
            .bind("text", "key")
        );

    diagram.model = new go.GraphLinksModel(
    [
      { key: "Alpha", color: "lightblue" },
      { key: "Beta", color: "orange" },
      { key: "Gamma", group: 'G1',  color: "lightgreen" },
      { key: "Delta", group: 'G1',  color: "pink" }
    ],
    [
      { from: "Alpha", to: "Beta" },
      { from: "Gamma", to: "Delta" }
    ]);

    function makeButtonAnimation(f) {  // return a button event handler to start an animation
      return () => {
        // Stop any currently running animations
        diagram.animationManager.stopAnimation(true);

        const animation = new go.Animation();
        animation.reversible = true; // reverse the animation at the end, doubling its total time
        f(animation);  // initialize the Animation
        animation.start(); // start the animation immediately
      };
    }

    window.animateAngleReverse =
      makeButtonAnimation(animation => {
        diagram.nodes.each(node => {
          // Animate the node's angle from its current value a random value between 0 and 90
          animation.add(node, "angle", node.angle, Math.random() * 90);
        });
      });

    window.animateDiagramPosition =
      makeButtonAnimation(animation => {
        // shift the diagram contents towards the right and then back
        animation.add(diagram, "position", diagram.position, diagram.position.copy().offset(200, 15));
        animation.duration = 700;
      });

    window.animateZoomOut =
      makeButtonAnimation(animation => {
        animation.add(diagram, "scale", diagram.scale, 0.2);
      });

    window.animateZoomIn =
      makeButtonAnimation(animation => {
        animation.add(diagram, "scale", diagram.scale, 4);
      });
  </code></pre>
  <script>goCode("animate2", 600, 250, null, true)</script>
  <p>
    <button id="AnimateAngleReverse" onclick="animateAngleReverse()">Animate Angles (reverse)</button>
    <button id="AnimateDiagramPosition" onclick="animateDiagramPosition()">Animate Diagram Position (reverse)</button>
    <button id="AnimateZoomOut" onclick="animateZoomOut()">Zoom Out (reverse)</button>
    <button id="AnimateZoomIn" onclick="animateZoomIn()">Zoom In (reverse)</button>
  </p>
  <p>
    Without the call to <a>AnimationManager.stopAnimation</a> to protect against rapid button clicks,
    you would notice that if you clicked Zoom Out, and then during the animation clicked the same button again,
    the Diagram's scale would not return to its initial value of 1.0.
    This is because the Animation animates from the <em>current</em> Diagram scale value, to its final value, and back again,
    but the current value is also what's being changed due to the ongoing animation.
  </p>

  <h3 id="CustomAnimationEffects">Custom Animation Effects</h3>

  <p>
    It is sometimes helpful to add custom ways to modify one or more properties during an animation.
    You can register new animatable effects with <a>AnimationManager.defineAnimationEffect</a>.
    The name passed is an arbitrary string, but often reflects a property of a GraphObject class.
    The body of the function passed determines what property or properties are animated.
  </p>
  <p>

  </p>
  <p>
    Here is an example, creating an <code>"fraction"</code> Animation effect to animate the value of <a>GraphObject.segmentFraction</a>,
    which will give the appearance of a Link label moving along its path.
  </p>
<pre class="lang-js"><code>
// This presumes the object to be animated is a label within a Link
go.AnimationManager.defineAnimationEffect('fraction',
(obj, startValue, endValue, easing, currentTime, duration, animation) => {
  obj.segmentFraction = easing(currentTime, startValue, endValue - startValue, duration);
});
</code></pre>

<p>
  After defining this, we can use it as a property name in an Animation.
  The following example sets up an indefinite (<a>Animation.runCount</a> = <code>Infinity</code>) and reversible
  animation, where each link is assigned a random duration to cycle the fill color and segmentFraction of its label.
  This produces labels that appear to move along their path while pulsating colors. The setting of <a>Animation.reversible</a>
  causes them to go backwards once finished, to start from their beginning again.
</p>
<pre class="lang-js"><code>
  function animateColorAndFraction() {
    // create one Animation for each link, so that they have independent durations
    myDiagram.links.each(link => {
      const animation = new go.Animation()
      animation.add(link.elt(1), "fill", link.elt(0).fill, go.Brush.randomColor());
      animation.add(link.elt(1), "fraction", 0, 1);
      animation.duration = 1000 + (Math.random()*2000);
      animation.reversible = true; // Re-run backwards
      animation.runCount = Infinity; // Animate forever
      animation.start();
    });
  }
</code></pre>

<pre id="animate3" style="display: none;"><code>
  diagram.nodeTemplate =
  new go.Node("Auto").add(
    new go.Shape("RoundedRectangle", { strokeWidth: 0 })
      .bind("fill", "color"),
    new go.TextBlock({ margin: 8 })
      .bind("text", "key")
  );

  diagram.linkTemplate =
  new go.Link().add(
    new go.Shape({ strokeWidth: 2 }),
    // The label
    new go.Shape("Circle", { segmentIndex: 0, width: 15, height: 15, fill: 'red', strokeWidth: 2 })
  );

  diagram.model = new go.GraphLinksModel(
  [
    { key: "Alpha", color: "lightblue" },
    { key: "Gamma", color: "lightgreen" },
    { key: "Delta", color: "pink" }
  ],
  [
    { from: "Alpha", to: "Gamma" },
    { from: "Gamma", to: "Delta" },
    { from: "Delta", to: "Alpha" }
  ]);


  // This presumes the object to be animated is a label within a Link
  go.AnimationManager.defineAnimationEffect('fraction',
    (obj, startValue, endValue, easing, currentTime, duration, animation) => {
      obj.segmentFraction = easing(currentTime, startValue, endValue - startValue, duration);
    });


  window.animateColorAndFraction = () => {
    // create one Animation for each link, so that they have independent durations
    diagram.links.each(link => {
      const animation = new go.Animation()
      animation.add(link.elt(1), "fill", link.elt(0).fill, go.Brush.randomColor());
      animation.add(link.elt(1), "fraction", 0, 1);
      animation.duration = 1000 + (Math.random()*2000);
      animation.reversible = true; // Re-run backwards
      animation.runCount = Infinity; // Animate forever
      animation.start();
    });
  }
  </code></pre>
  <script>goCode("animate3", 600, 200, null, true)</script>
  <p><button id="animateColorAndFraction" onclick="animateColorAndFraction()">Animate Color and Segment Fraction</button>

  <p>Since <a>Animation.runCount</a> was set to <code>Infinity</code>, this Animation wil run indefinitely.</p>

  <h3 id="AnimatingDeletion">Animating Deletion</h3>

  <p>
    Parts to be deleted can be animated, but since they will no longer exist in the Diagram after removal,
    a copy must be added to the Animation so that there is an object to animate.
    This can be done with <a>Animation.addTemporaryPart</a>.
    The part can then have its deletion animated using <a>Animation.add</a>.
    This temporary part will be the object that animates,
    and will automatically appear when animation begins and be removed when animation completes.
    It is typical for deletion animations to shrink the mock Part, move it off-screen, reduce its opacity to zero,
    or otherwise show it disappearing in some way.
  </p>
  <p>
    In this example, each Part being deleted will be scaled to an imperceptible size (by animating scale to 0.01)
    and spun around (by animating angle), to give the appearance of swirling away. There are other example
    deletion (and creation) effects in the <a href="../samples/customAnimations.html">Custom Animations extension sample</a>.
  </p>
  <pre class="lang-js"><code>
myDiagram.addDiagramListener('SelectionDeleting', e => {
  // the DiagramEvent.subject is the collection of Parts about to be deleted
  e.subject.each(part => {
    if (!(part instanceof go.Node)) return; // only animate Nodes
    const animation = new go.Animation();
    const deletePart = part.copy();
    animation.add(deletePart, "scale", deletePart.scale, 0.01);
    animation.add(deletePart, "angle", deletePart.angle, 360);
    animation.addTemporaryPart(deletePart, myDiagram);
    animation.start();
  });
});
</code></pre>


<pre id="animate4" style="display: none;">
    // define a simple Node template
    diagram.nodeTemplate =
      new go.Node("Spot", { locationSpot: go.Spot.Center })
        .bind("angle")
        .add(
          new go.Shape("Ellipse",
            {
              fill: "hsl(" + ((Math.random()*360)|0) + ", 100%, 80%)",
              strokeWidth: 4, strokeDashArray: [8, 8],
              width: 55, height: 55
            }),
          new go.TextBlock()
            .bind("text", "key")
        );

    diagram.model = new go.GraphLinksModel(
      [
        { key: "Alpha" },
        { key: "Beta" },
        { key: "Gamma" },
        { key: "Delta" }
      ],
      [ ]);

    diagram.addDiagramListener('SelectionDeleting', e => {
      // the DiagramEvent.subject is the collection of Parts about to be deleted
      e.subject.each(part => {
        if (!(part instanceof go.Node)) return; // only animate Nodes
        const animation = new go.Animation();
        const deletePart = part.copy();
        animation.add(deletePart, "scale", deletePart.scale, 0.01);
        animation.add(deletePart, "angle", deletePart.angle, 360);
        animation.addTemporaryPart(deletePart, diagram);
        animation.start();
      });
    });

    window.deleteNode = () => {
      if (diagram.selection.count === 0) diagram.select(diagram.nodes.first());
      diagram.commandHandler.deleteSelection();
    }
  </code></pre>
  <script>goCode("animate4", 600, 200, null, true)</script>
  <p><button onclick="deleteNode()">Delete a Node</button>


  <h3 id="AnimationExamples">Animation Examples</h3>

  <p>
    To see more examples of custom animations, visit the <a href="../samples/customAnimations.html">Custom Animations extension sample</a>.
    It demonstrates a number of Node creation/deletion animations, linking animations, and more.
    There are also several samples which contain animation:
  </p>

  <ul>
    <li><a href="../samples/animatedFocus.html" target="_blank">Animated Focus</a> - Scroll to center a Node in the viewport, while zooming a copy of that node for attention.</li>
    <li><a href="../samples/treeLoadAnimation.html" target="_blank">Tree Load Animation</a> - Recursive animation upon model load.</li>
    <li><a href="../samples/dataVisualization.html" target="_blank">Data Visualization</a> - Nodes now move using an <a>AnimationTrigger</a>.</li>
    <li><a href="../samples/kittenMonitor.html" target="_blank">Kitten Monitor</a> - Kittens now move using an <a>AnimationTrigger</a>.</li>
    <li><a href="../samples/processFlow.html" target="_blank">Process Flow</a> - Custom animation defined to animate the Link Shape's strokeDashArray.</li>
    <li><a href="../samples/belts.html" target="_blank">Belts and Rollers</a> - Apparent movement of the belts by animating the strokeDashArray.</li>
    <li><a href="../samples/shopFloorMonitor.html" target="_blank">Shop Floor Monitor</a> - Link color changes now use an <a>AnimationTrigger</a>.</li>
    <li><a href="../samples/flowchart.html" target="_blank">Flowchart</a> - In the Palette only, initial animation is disabled in favor of a custom fade-in animation.</li>
    <li><a href="../samples/stateChart.html" target="_blank">State Chart</a> - Initial animation is disabled in favor of a custom zoom fade-in animation.</li>
  </ul>

      </div>
    </div>
    <footer class="bg-white text-gray-900 border-t border-t-gray-200">
  <div class="w-full max-w-screen-lg mx-auto px-4 py-6">
    
    <p id="version" class="text-xs text-gray-900 m-0"></p>
    <div class="text-sm px-0 mb-4 grid grid-cols-2 sm:grid-cols-3 gap-y-10">
      <div>
        <h2 class="text-base font-semibold text-nwoods-primary">GoJS</h2>
        <ul class="list-none space-y-4 md:space-y-1 px-0">
          <li>
            <a href="samples/index.html">Samples</a>
          </li>
          <li>
            <a href="learn/index.html">Learn</a>
          </li>
          <li>
            <a href="intro/index.html">Intro</a>
          </li>
          <li>
            <a href="api/index.html">API</a>
          </li>
          <li>
            <a href="changelog.html">Changelog</a>
          </li>
          <li>
            <a href="https://github.com/NorthwoodsSoftware/GoJS" target="_blank" rel="noopener">GitHub</a>
          </li>
        </ul>
      </div>
      <div>
        <h2 class="text-base font-semibold text-nwoods-primary">Support</h2>
        <ul class="list-none space-y-4 md:space-y-1 px-0">
          <li>
            <a href="https://www.nwoods.com/contact.html"
              target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/contact.html', 'contact');">Contact</a>
          </li>
          <li>
            <a href="https://forum.nwoods.com/c/gojs" target="_blank" rel="noopener">Forum</a>
          </li>
          <li>
            <a href="https://www.nwoods.com/app/activate.aspx?sku=gojs" target="_blank" rel="noopener">Activate</a>
          </li>
          <li>
            <a href="https://www.nwoods.com/sales/index.html"
              target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/sales/index.html', 'buy');">Buy</a>
          </li>
          
        </ul>
      </div>
      <div>
        <h2 class="text-base font-semibold text-nwoods-primary">Company</h2>
        <ul class="list-none space-y-4 md:space-y-1 px-0">
          <li>
            <a target="_blank" href="https://www.nwoods.com" target="_blank" rel="noopener">Northwoods</a>
          </li>
          <li>
            <a target="_blank" href="https://www.nwoods.com/about.html" target="_blank" rel="noopener">About Us</a>
          </li>
          <li>
            <a target="_blank" href="https://www.nwoods.com/contact.html" target="_blank" rel="noopener">Contact Us</a>
          </li>
          <li>
            <a target="_blank" href="https://www.nwoods.com/consulting.html" target="_blank" rel="noopener">Consulting</a>
          </li>
          <li>
            <a target="_blank" href="https://twitter.com/northwoodsgo" target="_blank" rel="noopener">Twitter</a>
          </li>
        </ul>
      </div>
    </div>
    <p class="text-sm text-gray-900 md:mb-6">
      Copyright 1998-2024 <a href="https://www.nwoods.com">Northwoods Software</a>
    </p>
  </div>
</footer>
  </body>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S5QK8VSK84"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-S5QK8VSK84');
  var getOutboundLink = function (url, label) {
    gtag('event', 'click', {
      'event_category': 'outbound',
      'event_label': label,
      'transport_type': 'beacon'
    });
  }
</script>
  <script src="../assets/js/prism.js"></script>
  <script src="../release/go.js"></script>
  
  <script src="../assets/js/goDoc.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      if (window.go)
        document
          .getElementById('version')
          .textContent = "GoJS version " + go.version;
      if (window.goDoc)
        window.goDoc();
      var d = window.diagrams;
      for (var i = 0; i < d.length; i++) {
        var dargs = d[i];
        goCodeExecute(dargs[0], dargs[1], dargs[2], dargs[3], dargs[4]);
      }
      if (window.extra)
        window.extra();
      }
    );
  </script>
</html>