
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/>


<link rel="preconnect" href="https://rsms.me/">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css">
<link rel="stylesheet" href="../assets/css/style.css">
<!-- Copyright 1998-2024 by Northwoods Software Corporation. -->


<meta itemprop="name" content=Events />
<meta property="og:title" content=Events />
<meta name="twitter:title" content=Events />


<meta property="og:image" content="https://gojs.net/3.0.2/assets/images/fp/defaultCard.png" />
<meta itemprop="image" content="https://gojs.net/3.0.2/assets/images/fp/defaultCard.png" />
<meta name="twitter:image" content="https://gojs.net/3.0.2/assets/images/fp/defaultCard.png" />

<meta property="og:url" content="https://gojs.net/3.0.2/intro/events.html" />
<meta property="twitter:url" content="https://gojs.net/3.0.2/intro/events.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta property="og:type" content="website" />
<meta property="twitter:domain" content="gojs.net" />

    <title>
      Events | GoJS
    </title>
    <link rel="stylesheet" href="../assets/css/prism.css"/>
  </head>
  <script>
    window.diagrams = [];
    window.goCode = function (pre, w, h, parentid, animation) {
      window
        .diagrams
        .push([pre, w, h, parentid, animation]);
    }
  </script>
  <body>
    <nav id="navTop" class=" w-full h-[var(--topnav-h)] z-30 bg-white border-b border-b-gray-200">
  <div class="max-w-screen-xl mx-auto flex flex-wrap items-start justify-between px-4">
    <a class="text-white bg-nwoods-primary font-bold !leading-[calc(var(--topnav-h)_-_1px)] my-0 px-2 text-4xl lg:text-5xl logo"
       href="../">
      GoJS
    </a>
    <div class="relative">
      <button id="topnavButton" class="h-[calc(var(--topnav-h)_-_1px)] px-2 m-0 text-gray-900 bg-inherit shadow-none md:hidden hover:!bg-inherit hover:!text-nwoods-accent hover:!shadow-none" aria-label="Navigation">
        <svg class="h-7 w-7 block" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <div id="topnavList" class="hidden md:block">
        <div class="absolute right-0 z-30 flex flex-col items-end rounded border border-gray-200 p-4 pl-12 shadow bg-white text-gray-900 font-semibold
                    md:flex-row md:space-x-4 md:items-start md:border-0 md:p-0 md:shadow-none md:bg-inherit">
          <a href="../learn/">Learn</a>
          <a href="../samples/">Samples</a>
          <a href="../intro/">Intro</a>
          <a href="../api/">API</a>
          <a href="../download.html">Download</a>
          <a href="https://forum.nwoods.com/c/gojs/11" target="_blank" rel="noopener">Forum</a>
          <a href="https://www.nwoods.com/contact.html"
            target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/contact.html', 'contact');">Contact</a>
          <a href="https://www.nwoods.com/sales/index.html"
            target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/sales/index.html', 'buy');">Buy</a>
        </div>
      </div>
    </div>
  </div>
</nav>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    // topnav
    var topButton = document.getElementById("topnavButton");
    var topnavList = document.getElementById("topnavList");
    if (topButton && topnavList) {
      topButton.addEventListener("click", function (e) {
        topnavList
          .classList
          .toggle("hidden");
        e.stopPropagation();
      });
      document.addEventListener("click", function (e) {
        // if the clicked element isn't the list, close the list
        if (!topnavList.classList.contains("hidden") && !e.target.closest("#topnavList")) {
          topButton.click();
        }
      });

      // set active <a> element
      var url = window
        .location
        .href
        .toLowerCase();
      var aTags = topnavList.getElementsByTagName('a');
      for (var i = 0; i < aTags.length; i++) {
        var lowerhref = aTags[i]
          .href
          .toLowerCase();
        if (url.startsWith(lowerhref)) {
          aTags[i]
            .classList
            .add('active');
          break;
        }
      }
    }
  });
</script>
    <div class="sticky top-0 left-0 z-10 px-2 w-full bg-white border-b border-b-gray-200 md:hidden">
  <button id="sidenavButton" class="flex p-2 text-gray-900 bg-inherit shadow-none items-center text-sm font-semibold hover:!bg-inherit hover:!text-nwoods-accent hover:!shadow-none" aria-label="Navigation">
    <svg class="h-7 w-7 block mr-2" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span>Menu</span>
  </button>
</div>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    // sidenav
    var sideButton = document.getElementById("sidenavButton");
    var sidenav = document.getElementById("sidenav");
    if (sideButton && sidenav) {
      sideButton.addEventListener("click", function (e) {
        sidenav
          .classList
          .toggle("hidden");
        e.stopPropagation();
      });
      document.addEventListener("click", function (e) {
        // if the clicked element isn't the list, close the list
        if (!sidenav.classList.contains("hidden") && !e.target.closest("#sidenavList")) {
          sideButton.click();
        }
      });
    }
  });
</script>
    
    <div class="flex flex-row md:min-h-screen w-full max-w-screen-xl mx-auto">
      
      <aside id="sidenav"
  class="hidden fixed top-0 left-0 z-10 w-full bg-black/10 min-h-screen max-h-screen overflow-x-hidden overflow-y-auto flex-shrink-0
         md:block md:sticky md:w-52 md:min-h-0 md:bg-inherit md:border-r md:border-r-gray-200 md:overscroll-auto">
  <nav id="sidenavList" class="flex flex-col bg-white w-52 min-h-screen pl-2 pt-4 pb-24 md:w-full md:min-h-0">
    
  <a href="index.html">Basics</a>
  <a href="buildingObjects.html">Building Parts</a>
  <a href="usingModels.html">Using Models</a>
  <a href="dataBinding.html">Data Binding</a>
  <a href="react.html">GoJS with React</a>
  <a href="svelte.html">GoJS with Svelte</a>
  <a href="angular.html">GoJS with Angular</a>
  <a href="textBlocks.html">TextBlocks</a>
  <a href="shapes.html">Shapes</a>
  <a href="pictures.html">Pictures</a>
  <a href="panels.html">Panels</a>
  <a href="tablePanels.html">Table Panels</a>
  <a href="brush.html">Brushes</a>
  <a href="sizing.html">Sizing Objects</a>
  <a href="itemArrays.html">Item Arrays</a>
  <a href="changedEvents.html">Changed Events</a>
  <a href="transactions.html">Transactions</a>
  <a href="viewport.html">Coordinates</a>
  <a href="initialView.html">Initial View</a>
  <a href="collections.html">Collections</a>
  <a href="links.html">Links</a>
  <a href="linkLabels.html">Link Labels</a>
  <a href="connectionPoints.html">Link Points</a>
  <a href="ports.html">Ports</a>
  <a href="nodes.html">Nodes</a>
  <a href="typings.html">Typings</a>
  <a href="debugging.html">Debugging</a>
  <a href="layouts.html">Layouts</a>
  <a href="trees.html">Trees</a>
  <a href="subtrees.html">SubTrees</a>
  <a href="groups.html">Groups</a>
  <a href="subgraphs.html">SubGraphs</a>
  <a href="sizedGroups.html">Sized Groups</a>
  <a href="selection.html">Selection</a>
  <a href="highlighting.html">Highlighting</a>
  <a href="theming.html">Theming</a>
  <a href="routers.html">Routers</a>
  <a href="animation.html">Animation</a>
  <a href="toolTips.html">ToolTips</a>
  <a href="contextmenus.html">Context Menus</a>
  <a href="events.html">Diagram Events</a>
  <a href="tools.html">Tools</a>
  <a href="commands.html">Commands</a>
  <a href="permissions.html">Permissions</a>
  <a href="validation.html">Validation</a>
  <a href="HTMLInteraction.html">HTML Interaction</a>
  <a href="layers.html">Layers &amp; Z-ordering</a>
  <a href="palette.html">Palette</a>
  <a href="overview.html">Overview</a>
  <a href="replacingDeleting.html">Replacing and Deleting</a>
  <a href="buttons.html">Buttons</a>
  <a href="templateMaps.html">Template Maps</a>
  <a href="legends.html">Legends and Titles</a>
  <a href="extensions.html">Extensions</a>
  <a href="geometry.html">Geometry Strings</a>
  <a href="grids.html">Grid Patterns</a>
  <a href="graduatedPanels.html">Graduated Panels</a>
  <a href="SVGcontext.html">Rendering to SVG</a>
  <a href="makingSVG.html">Snapshot to SVG</a>
  <a href="makingImages.html">Diagram Images</a>
  <a href="printing.html">Printing</a>
  <a href="serverSideImages.html">Server-side Images</a>
  <a href="nodeScript.html">GoJS in Node.js</a>
  <a href="testing.html">Testing</a>
  <a href="performance.html">Performance</a>
  <a href="platforms.html">Platforms</a>
  <a href="deployment.html">Deployment</a>

  </nav>
</aside>
<script>
  var navList = document.getElementById('sidenavList');
  if (navList !== null) {
    var url = window.location.href;
    var lindex = url.lastIndexOf('/');
    url = url
      .slice(lindex + 1)
      .toLowerCase();
    var aTags = navList.getElementsByTagName('a');
    var currentindex = -1;
    for (var i = 0; i < aTags.length; i++) {
      var lowerhref = aTags[i]
        .href
        .toLowerCase();
      if (lowerhref.indexOf('/' + url) !== -1) {
        currentindex = i;
        aTags[i]
          .classList
          .add('active');
        break;
      }
    }
  }
</script>
      
      <div class="px-4 pb-16 w-full overflow-hidden prose">
        
<h1>Events</h1>
<p>
There are three basic kinds of events that <b>GoJS</b> deals with:
<a>DiagramEvent</a>s, <a>InputEvent</a>s, and <a>ChangedEvent</a>s.
This page discusses the first two; see <a href="changedEvents.html">Changed Events</a> for the last kind of event.
</p>

<h2 id="DiagramEvents">Diagram Events</h2>
<p>
<a>DiagramEvent</a>s represent general user-initiated changes to a diagram.
You can register one or more diagram event handlers by calling <a>Diagram.addDiagramListener</a>.
You can also register a diagram event handler in <a>Diagram</a> initialization when calling <a>GraphObject.make</a>.
Each kind of diagram event is distinguished by its name.
</p>
<p>
Currently defined diagram event names include:
</p>
<ul>
  <li id="InitialAnimationStarting" onclick="window.location.hash = '#AnimationStarting'">
    "<b>InitialAnimationStarting</b>", the initial default animation is about to start;
    do not modify the diagram or its model in the event listener.
    This can be useful for modifying the <a>AnimationManager.defaultAnimation</a> to make a custom initial animation.
    See <a>AnimationManager.initialAnimationStyle</a> for details.
  </li>
  <li id="AnimationStarting" onclick="window.location.hash = '#AnimationStarting'">
    "<b>AnimationStarting</b>", a default animation (<a>AnimationManager.defaultAnimation</a>) is about to start;
    do not modify the diagram or its model in the event listener.
  </li>
  <li id="AnimationFinished" onclick="window.location.hash = '#AnimationFinished'">
    "<b>AnimationFinished</b>", a default animation (<a>AnimationManager.defaultAnimation</a>) just completed;
    do not modify the diagram or its model in the event listener.
  </li>
  <li id="BackgroundSingleClicked" onclick="window.location.hash = '#BackgroundSingleClicked'">
    "<b>BackgroundSingleClicked</b>", when a mouse left-button single-click happened in the background of the Diagram, not on a Part;
    if you make any changes, start and commit your own transaction.
  </li>
  <li id="BackgroundDoubleClicked" onclick="window.location.hash = '#BackgroundDoubleClicked'">
    "<b>BackgroundDoubleClicked</b>", when a mouse left-button double-click happened in the background of the Diagram, not on a Part;
    if you make any changes, start and commit your own transaction.
  </li>
  <li id="BackgroundContextClicked" onclick="window.location.hash = '#BackgroundContextClicked'">
    "<b>BackgroundContextClicked</b>", when a mouse right-button single-click happened in the background of the Diagram, not on a Part;
    if you make any changes, start and commit your own transaction.
  </li>
  <li id="ChangingSelection" onclick="window.location.hash = '#ChangingSelection'">
    "<b>ChangingSelection</b>", an operation is about to change the <a>Diagram.selection</a> collection,
    which is also the value of the <a>DiagramEvent.subject</a>;
    do not make any changes to the selection or the diagram or the model in the event listener;
    note that just setting <a>Part.isSelected</a> will not raise this event, but tools and commands will.
  </li>
  <li id="ChangedSelection" onclick="window.location.hash = '#ChangedSelection'">
    "<b>ChangedSelection</b>", an operation has just changed the <a>Diagram.selection</a> collection,
    which is also the value of the <a>DiagramEvent.subject</a>;
    do not make any changes to the selection or the diagram or the model in the event listener;
    note that just setting <a>Part.isSelected</a> will not raise this event, but tools and commands will.
  </li>
  <li id="ClipboardChanged" onclick="window.location.hash = '#ClipboardChanged'">
    "<b>ClipboardChanged</b>", Parts have been copied to the clipboard by <a>CommandHandler.copySelection</a>;
    the <a>DiagramEvent.subject</a> is the collection of Parts;
    if you make any changes, start and commit your own transaction.
  </li>
  <li id="ClipboardPasted" onclick="window.location.hash = '#ClipboardPasted'">
    "<b>ClipboardPasted</b>", Parts have been copied from the clipboard into the Diagram by <a>CommandHandler.pasteSelection</a>;
    the <a>DiagramEvent.subject</a> is the <a>Diagram.selection</a>,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="DocumentBoundsChanged" onclick="window.location.hash = '#DocumentBoundsChanged'">
    "<b>DocumentBoundsChanged</b>", the area of the diagram's Parts, <a>Diagram.documentBounds</a>, has changed;
    the <a>DiagramEvent.parameter</a> is the old Rect.
  </li>
  <li id="ExternalObjectsDropped" onclick="window.location.hash = '#ExternalObjectsDropped'">
    "<b>ExternalObjectsDropped</b>", Parts have been copied into the Diagram by drag-and-drop from outside of the Diagram;
    the <a>DiagramEvent.subject</a> is the set of Parts that were dropped (which is also the <a>Diagram.selection</a>),
    the <a>DiagramEvent.parameter</a> is the source Diagram,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="GainedFocus" onclick="window.location.hash = '#GainedFocus'">
    "<b>GainedFocus</b>", the diagram has gained keyboard focus, such as after a call to <a>Diagram.focus</a>.
  </li>
  <li id="InitialLayoutCompleted" onclick="window.location.hash = '#InitialLayoutCompleted'">
    "<b>InitialLayoutCompleted</b>", the whole diagram layout has updated for the first time since a major change to the Diagram,
    such as replacing the Model;
    if you make any changes, you do not need to start and commit your own transaction.
  </li>
  <li id="LayoutCompleted" onclick="window.location.hash = '#LayoutCompleted'">
    "<b>LayoutCompleted</b>", the whole diagram layout has just been updated;
    if you make any changes, you do not need to start and commit your own transaction.
  </li>
  <li id="LinkDrawn" onclick="window.location.hash = '#LinkDrawn'">
    "<b>LinkDrawn</b>", the user has just created a new Link using <a>LinkingTool</a>;
    the <a>DiagramEvent.subject</a> is the new Link,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="LinkRelinked" onclick="window.location.hash = '#LinkRelinked'">
    "<b>LinkRelinked</b>", the user has just reconnected an existing Link using <a>RelinkingTool</a> or <a>DraggingTool</a>;
    the <a>DiagramEvent.subject</a> is the modified Link,
    the <a>DiagramEvent.parameter</a> is the GraphObject port that the link was disconnected from,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="LinkReshaped" onclick="window.location.hash = '#LinkReshaped'">
    "<b>LinkReshaped</b>", the user has just rerouted an existing Link using <a>LinkReshapingTool</a>;
    the <a>DiagramEvent.subject</a> is the modified Link,
    the <a>DiagramEvent.parameter</a> is the List of Points of the link's original route,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="LostFocus" onclick="window.location.hash = '#LostFocus'">
    "<b>LostFocus</b>", the diagram has lost keyboard focus ("blur").
  </li>
  <li id="Modified" onclick="window.location.hash = '#Modified'">
    "<b>Modified</b>", the <a>Diagram.isModified</a> property has been set to a new value --
    useful for marking a window as having been modified since the last save;
    do not modify the Diagram or its Model in the event listener.
  </li>
  <li id="ObjectSingleClicked" onclick="window.location.hash = '#ObjectSingleClicked'">
    "<b>ObjectSingleClicked</b>", a click that occurred on a GraphObject;
    the <a>DiagramEvent.subject</a> is the GraphObject;
    if you make any changes, start and commit your own transaction.
  </li>
  <li id="ObjectDoubleClicked" onclick="window.location.hash = '#ObjectDoubleClicked'">
    "<b>ObjectDoubleClicked</b>", a double-click that occurred on a GraphObject;
    the <a>DiagramEvent.subject</a> is the GraphObject;
    if you make any changes, start and commit your own transaction.
  </li>
  <li id="ObjectContextClicked" onclick="window.location.hash = '#ObjectContextClicked'">
    "<b>ObjectContextClicked</b>", a context-click that occurred on a GraphObject;
    the <a>DiagramEvent.subject</a> is the GraphObject;
    if you make any changes, start and commit your own transaction.
  </li>
  <li id="PartCreated" onclick="window.location.hash = '#PartCreated'">
    "<b>PartCreated</b>", the user inserted a new Part by <a>ClickCreatingTool</a>;
    the <a>DiagramEvent.subject</a> is the new Part,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="PartResized" onclick="window.location.hash = '#PartResized'">
    "<b>PartResized</b>", the user has changed the size of a GraphObject by <a>ResizingTool</a>;
    the <a>DiagramEvent.subject</a> is the GraphObject,
    the <a>DiagramEvent.parameter</a> is the original Size,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="PartRotated" onclick="window.location.hash = '#PartRotated'">
    "<b>PartRotated</b>", the user has changed the angle of a GraphObject by <a>RotatingTool</a>;
    the <a>DiagramEvent.subject</a> is the GraphObject,
    the <a>DiagramEvent.parameter</a> is the original angle in degrees,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SelectionMoved" onclick="window.location.hash = '#SelectionMoved'">
    "<b>SelectionMoved</b>", the user has moved selected Parts by <a>DraggingTool</a>;
    the <a>DiagramEvent.subject</a> is a Set of the moved Parts,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SelectionCopied" onclick="window.location.hash = '#SelectionCopied'">
    "<b>SelectionCopied</b>", the user has copied selected Parts by <a>DraggingTool</a>;
    the <a>DiagramEvent.subject</a> is Set of the newly copied Parts,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SelectionDeleting" onclick="window.location.hash = '#SelectionDeleting'">
    "<b>SelectionDeleting</b>", the user is about to delete selected Parts by <a>CommandHandler.deleteSelection</a>;
    the <a>DiagramEvent.subject</a> is the <a>Diagram.selection</a> collection of Parts to be deleted,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SelectionDeleted" onclick="window.location.hash = '#SelectionDeleted'">
    "<b>SelectionDeleted</b>", the user has deleted selected Parts by <a>CommandHandler.deleteSelection</a>;
    the <a>DiagramEvent.subject</a> is the collection of Parts that were deleted,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SelectionGrouped" onclick="window.location.hash = '#SelectionGrouped'">
    "<b>SelectionGrouped</b>", the user has made a new Group out of the selected Parts by <a>CommandHandler.groupSelection</a>;
    the <a>DiagramEvent.subject</a> is the new Group,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SelectionUngrouped" onclick="window.location.hash = '#SelectionUngrouped'">
    "<b>SelectionUngrouped</b>", the user has removed a selected Group but kept its members by <a>CommandHandler.ungroupSelection</a>;
    the <a>DiagramEvent.subject</a> is the collection of Groups that were ungrouped,
    the <a>DiagramEvent.parameter</a> is the collection of former member Parts that were ungrouped,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SubGraphCollapsed" onclick="window.location.hash = '#SubGraphCollapsed'">
    "<b>SubGraphCollapsed</b>", the user has collapsed selected Groups by <a>CommandHandler.collapseSubGraph</a>;
    the <a>DiagramEvent.subject</a> is the collection of Groups that were collapsed,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="SubGraphExpanded" onclick="window.location.hash = '#SubGraphExpanded'">
    "<b>SubGraphExpanded</b>", the user has expanded selected Groups by <a>CommandHandler.expandSubGraph</a>;
    the <a>DiagramEvent.subject</a> is the collection of Groups that were expanded,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="TextEdited" onclick="window.location.hash = '#TextEdited'">
    "<b>TextEdited</b>", the user has changed the string value of a TextBlock by <a>TextEditingTool</a>;
    the <a>DiagramEvent.subject</a> is the edited TextBlock,
    the <a>DiagramEvent.parameter</a> is the original string,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="ThemeChanged" onclick="window.location.hash = '#ThemeChanged'">
    "<b>ThemeChanged</b>", the diagram's theme has changed, maybe as a result of setting <a>ThemeManager.currentTheme</a>
    or calling <a>ThemeManager.set</a>.
  </li>
  <li id="TreeCollapsed" onclick="window.location.hash = '#TreeCollapsed'">
    "<b>TreeCollapsed</b>", the user has collapsed selected Nodes with subtrees by <a>CommandHandler.collapseTree</a>;
    the <a>DiagramEvent.subject</a> is the collection of Nodes that were collapsed,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="TreeExpanded" onclick="window.location.hash = '#TreeExpanded'">
    "<b>TreeExpanded</b>", the user has expanded selected Nodes with subtrees by <a>CommandHandler.expandTree</a>;
    the <a>DiagramEvent.subject</a> is the collection of Nodes that were expanded,
    and this is called within a transaction, so that you do not have to start and commit your own transaction.
  </li>
  <li id="ViewportBoundsChanged" onclick="window.location.hash = '#ViewportBoundsChanged'">
    "<b>ViewportBoundsChanged</b>", the visible area of the Diagram, <a>Diagram.viewportBounds</a>, has changed;
    the <a>DiagramEvent.subject</a> is an object whose "scale" property is the old <a>Diagram.scale</a> value,
    whose "position" property is the old <a>Diagram.position</a> value,
    whose "bounds" property is the old <a>Diagram.viewportBounds</a> value,
    whose "canvasSize" property is the old size of the <a>Diagram.div</a>, and
    whose "newCanvasSize" property is the new size of the <a>Diagram.div</a>;
    the <a>DiagramEvent.parameter</a> is also the old viewportBounds Rect.
    Do not modify the Diagram position or scale (i.e. the viewport bounds) in the listener.
  </li>
</ul>

<p>
DiagramEvents do not necessarily correspond to mouse events or keyboard events or touch events.
Nor do they necessarily correspond to changes to the diagram's model --
for tracking such changes, use <a>Model.addChangedListener</a> or <a>Diagram.addModelChangedListener</a>.
DiagramEvents only occur because the user did something, perhaps indirectly.
</p>
<p>
<p>
In addition to the DiagramEvent listeners there are also circumstances where detecting such changes is common
enough to warrant having properties that are event handlers.
Because these events do not necessarily correspond to any particular input or diagram event,
these event handlers have custom arguments that are specific to the situation.
</p>
<p>
One very common such event property is <a>GraphObject.click</a>, which if non-null is a function that is called
whenever the user clicks on that object.
This is most commonly used to specify behavior for "Button"s, but it and the other "click" event properties,
"doubleClick" and "contextClick", can be useful on any GraphObject.
</p>
<p>
Another common event property is <a>Part.selectionChanged</a>,
which (if non-null) is called whenever <a>Part.isSelected</a> changes.
In this case the event handler function is passed a single argument, the Part.
There is no need for additional arguments because the function can check the current value of <a>Part.isSelected</a> to decide what to do.
</p>
</p>
<p>
Model <a>ChangedEvent</a>s are more complete and reliable than depending on <a>DiagramEvent</a>s.
For example, the "LinkDrawn" DiagramEvent is not raised when code adds a link to a diagram.
That DiagramEvent is only raised when the user draws a new link using the <a>LinkingTool</a>.
Furthermore the link has not yet been routed, so <a>Link.points</a> will not have been computed.
In fact, creating a new link may invalidate a <a>Layout</a>, so all of the nodes may be moved in the near future.
</p>

<p class="box bg-danger">
Sometimes you want to update a database as the user makes changes to a diagram.
Usually you will want to implement a <a>Model</a> <a>ChangedEvent</a> listener,
by calling <a>Model.addChangedListener</a> or <a>Diagram.addModelChangedListener</a>,
that notices the changes to the model and decides what to record in the database.
See the discussion of <a href="changedEvents.html">Changed Events</a> and the <a href="../samples/UpdateDemo.html">Update Demo</a>.
</p>

<p>
This example demonstrates handling several diagram events: <b>"ObjectSingleClicked"</b>,
<b>"BackgroundDoubleClicked"</b>, and <b>"ClipboardPasted"</b>.
</p>
<pre class="lang-js" id="diagramEvents"><code>
  function showMessage(s) {
    document.getElementById("diagramEventsMsg").textContent = s;
  }

  diagram.addDiagramListener("ObjectSingleClicked",
      e => {
        var part = e.subject.part;
        if (!(part instanceof go.Link)) showMessage("Clicked on " + part.data.key);
      });

  diagram.addDiagramListener("BackgroundDoubleClicked",
      e => showMessage("Double-clicked at " + e.diagram.lastInput.documentPoint));

  diagram.addDiagramListener("ClipboardPasted",
      e => showMessage("Pasted " + e.diagram.selection.count + " parts"));

  var nodeDataArray = [
    { key: "Alpha" },
    { key: "Beta", group: "Omega" },
    { key: "Gamma", group: "Omega" },
    { key: "Omega", isGroup: true },
    { key: "Delta" }
  ];
  var linkDataArray = [
    { from: "Alpha", to: "Beta" },  // from outside the Group to inside it
    { from: "Beta", to: "Gamma" },  // this link is a member of the Group
    { from: "Omega", to: "Delta" }  // from the Group to a Node
  ];
  diagram.model = new go.GraphLinksModel(nodeDataArray, linkDataArray);
</code></pre>
<script>goCode("diagramEvents", 600, 200)</script>
<span id="diagramEventsMsg" style="color: red">(message)</span>


<h2 id="InputEvents">Input Events</h2>
<p>
When a low-level HTML DOM event occurs, <b>GoJS</b> canonicalizes the keyboard/mouse/touch event information
into a new <a>InputEvent</a> that can be passed to various event-handling methods and saved for later examination.
</p>
<p>
An InputEvent keeps the <a>InputEvent.key</a> for keyboard events,
the <a>InputEvent.button</a> for mouse events,
the <a>InputEvent.viewPoint</a> for mouse and touch events,
and <a>InputEvent.modifiers</a> for keyboard and mouse events.
</p>
<p>
The diagram's event handlers also record the <a>InputEvent.documentPoint</a>,
which is the <a>InputEvent.viewPoint</a> in document coordinates at the time of the mouse event,
and the <a>InputEvent.timestamp</a>, which records the time that the event occurred in milliseconds.
</p>
<p>
The InputEvent class also provides many handy properties for particular kinds of events.
Examples include <a>InputEvent.control</a> (if the control key had been pressed) and
<a>InputEvent.left</a> (if the left/primary mouse button was pressed).
</p>
<p>
Some tools find the "current" <a>GraphObject</a> at the mouse point.
This is remembered as the <a>InputEvent.targetObject</a>.
</p>

<h2 id="HigherLevelInputEvents">Higher-level input events</h2>
<p>
Some tools detect a sequence of input events to compose somewhat more abstract user events.
Examples include "click" (mouse-down-and-up very close to each other) and "hover" (motionless mouse for some time).
The tools will call an event handler (if there is any) for the current <a>GraphObject</a> at the mouse point.
The event handler is held as the value of a property on the object.
It then also "bubbles" the event up the chain of <a>GraphObject.panel</a>s until it ends with a <a>Part</a>.
This allows a "click" event handler to be declared on a <a>Panel</a> and have it apply even if the click actually happens on an element deep inside the panel.
If there is no object at the mouse point, the event occurs on the diagram.
</p>
<p>
Click-like event properties include <a>GraphObject.click</a>, <a>GraphObject.doubleClick</a>, and <a>GraphObject.contextClick</a>.
They also occur when there is no GraphObject -- the event happened in the diagram's background:
<a>Diagram.click</a>, <a>Diagram.doubleClick</a>, and <a>Diagram.contextClick</a>.
These are all properties that you can set to a function that is the event handler.
These events are caused by both mouse events and touch events.
</p>
<p>
Mouse-over-like event properties include <a>GraphObject.mouseEnter</a>, <a>GraphObject.mouseOver</a>, and <a>GraphObject.mouseLeave</a>.
But only <a>Diagram.mouseOver</a> applies to the diagram.
</p>
<p>
Hover-like event properties include <a>GraphObject.mouseHover</a> and <a>GraphObject.mouseHold</a>.
The equivalent diagram properties are <a>Diagram.mouseHover</a> and <a>Diagram.mouseHold</a>.
</p>
<p>
There are also event properties for dragging operations: <a>GraphObject.mouseDragEnter</a>, <a>GraphObject.mouseDragLeave</a>, and <a>GraphObject.mouseDrop</a>.
These apply to stationary objects, not the objects being dragged.
And they also occur when dragging by touch events, not just mouse events.
</p>

<p>
This example demonstrates handling three higher-level input events:
clicking on nodes and entering/leaving groups.
</p>
<pre class="lang-js" id="inputEvents"><code>
  function showMessage(s) {
    document.getElementById("inputEventsMsg").textContent = s;
  }

  diagram.nodeTemplate =
    $(go.Node, "Auto",
      $(go.Shape, "Ellipse", { fill: "white" }),
      $(go.TextBlock,
        new go.Binding("text", "key")),
      { click: (e, obj) => showMessage("Clicked on " + obj.part.data.key) }
    );

  diagram.groupTemplate =
    $(go.Group, "Vertical",
      $(go.TextBlock,
        { alignment: go.Spot.Left, font: "Bold 12pt Sans-Serif" },
        new go.Binding("text", "key")),
      $(go.Panel, "Auto",
        $(go.Shape, "RoundedRectangle",
          { name: "SHAPE",
            parameter1: 14,
            fill: "rgba(128,128,128,0.33)" }),
        $(go.Placeholder, { padding: 5 })
      ),
      { mouseEnter: (e, obj, prev) => {  // change group's background brush
            var shape = obj.part.findObject("SHAPE");
            if (shape) shape.fill = "red";
          },
        mouseLeave: (e, obj, next) => {  // restore to original brush
            var shape = obj.part.findObject("SHAPE");
            if (shape) shape.fill = "rgba(128,128,128,0.33)";
          } });

  var nodeDataArray = [
    { key: "Alpha" },
    { key: "Beta", group: "Omega" },
    { key: "Gamma", group: "Omega" },
    { key: "Omega", isGroup: true },
    { key: "Delta" }
  ];
  var linkDataArray = [
    { from: "Alpha", to: "Beta" },  // from outside the Group to inside it
    { from: "Beta", to: "Gamma" },  // this link is a member of the Group
    { from: "Omega", to: "Delta" }  // from the Group to a Node
  ];
  diagram.model = new go.GraphLinksModel(nodeDataArray, linkDataArray);
</code></pre>
<script>goCode("inputEvents", 600, 200)</script>
<span id="inputEventsMsg" style="color: red">(message)</span>


<h2 id="ClickingAndSelecting">Clicking and Selecting</h2>
<p>
This example demonstrates both the "click" and the "selectionChanged" events:
</p>
<pre class="lang-js" id="changeMethods"><code>
  function showMessage(s) {
    document.getElementById("changeMethodsMsg").textContent = s;
  }

  diagram.nodeTemplate =
    $(go.Node, "Auto",
      { selectionAdorned: false },
      $(go.Shape, "Ellipse", { fill: "white" }),
      $(go.TextBlock,
        new go.Binding("text", "key")),
      {
        click: (e, obj) => showMessage("Clicked on " + obj.part.data.key),
        selectionChanged: part => {
            var shape = part.elt(0);
            shape.fill = part.isSelected ? "red" : "white";
          }
      }
    );

  var nodeDataArray = [
    { key: "Alpha" }, { key: "Beta" }, { key: "Gamma" }
  ];
  var linkDataArray = [
    { from: "Alpha", to: "Beta" },
    { from: "Beta", to: "Gamma" }
  ];
  diagram.model = new go.GraphLinksModel(nodeDataArray, linkDataArray);
</code></pre>
<script>goCode("changeMethods", 600, 200)</script>
<span id="changeMethodsMsg" style="color: red">(message)</span>
<p>
Try Ctrl-A to select everything.
Note the distinction between the <a>GraphObject.click</a> event property and the <a>Part.selectionChanged</a> event property.
Both are methods that get called when something has happened to the node.
The <a>GraphObject.click</a> occurs when the user clicks on the node, which happens to select the node.
But the <a>Part.selectionChanged</a> occurs even when there is no click event or even any mouse event --
it was due to a property change to the node.
</p>

      </div>
    </div>
    <footer class="bg-white text-gray-900 border-t border-t-gray-200">
  <div class="w-full max-w-screen-lg mx-auto px-4 py-6">
    
    <p id="version" class="text-xs text-gray-900 m-0"></p>
    <div class="text-sm px-0 mb-4 grid grid-cols-2 sm:grid-cols-3 gap-y-10">
      <div>
        <h2 class="text-base font-semibold text-nwoods-primary">GoJS</h2>
        <ul class="list-none space-y-4 md:space-y-1 px-0">
          <li>
            <a href="samples/index.html">Samples</a>
          </li>
          <li>
            <a href="learn/index.html">Learn</a>
          </li>
          <li>
            <a href="intro/index.html">Intro</a>
          </li>
          <li>
            <a href="api/index.html">API</a>
          </li>
          <li>
            <a href="changelog.html">Changelog</a>
          </li>
          <li>
            <a href="https://github.com/NorthwoodsSoftware/GoJS" target="_blank" rel="noopener">GitHub</a>
          </li>
        </ul>
      </div>
      <div>
        <h2 class="text-base font-semibold text-nwoods-primary">Support</h2>
        <ul class="list-none space-y-4 md:space-y-1 px-0">
          <li>
            <a href="https://www.nwoods.com/contact.html"
              target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/contact.html', 'contact');">Contact</a>
          </li>
          <li>
            <a href="https://forum.nwoods.com/c/gojs" target="_blank" rel="noopener">Forum</a>
          </li>
          <li>
            <a href="https://www.nwoods.com/app/activate.aspx?sku=gojs" target="_blank" rel="noopener">Activate</a>
          </li>
          <li>
            <a href="https://www.nwoods.com/sales/index.html"
              target="_blank" rel="noopener" onclick="getOutboundLink('https://www.nwoods.com/sales/index.html', 'buy');">Buy</a>
          </li>
          
        </ul>
      </div>
      <div>
        <h2 class="text-base font-semibold text-nwoods-primary">Company</h2>
        <ul class="list-none space-y-4 md:space-y-1 px-0">
          <li>
            <a target="_blank" href="https://www.nwoods.com" target="_blank" rel="noopener">Northwoods</a>
          </li>
          <li>
            <a target="_blank" href="https://www.nwoods.com/about.html" target="_blank" rel="noopener">About Us</a>
          </li>
          <li>
            <a target="_blank" href="https://www.nwoods.com/contact.html" target="_blank" rel="noopener">Contact Us</a>
          </li>
          <li>
            <a target="_blank" href="https://www.nwoods.com/consulting.html" target="_blank" rel="noopener">Consulting</a>
          </li>
          <li>
            <a target="_blank" href="https://twitter.com/northwoodsgo" target="_blank" rel="noopener">Twitter</a>
          </li>
        </ul>
      </div>
    </div>
    <p class="text-sm text-gray-900 md:mb-6">
      Copyright 1998-2024 <a href="https://www.nwoods.com">Northwoods Software</a>
    </p>
  </div>
</footer>
  </body>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S5QK8VSK84"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-S5QK8VSK84');
  var getOutboundLink = function (url, label) {
    gtag('event', 'click', {
      'event_category': 'outbound',
      'event_label': label,
      'transport_type': 'beacon'
    });
  }
</script>
  <script src="../assets/js/prism.js"></script>
  <script src="../release/go.js"></script>
  
  <script src="../assets/js/goDoc.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      if (window.go)
        document
          .getElementById('version')
          .textContent = "GoJS version " + go.version;
      if (window.goDoc)
        window.goDoc();
      var d = window.diagrams;
      for (var i = 0; i < d.length; i++) {
        var dargs = d[i];
        goCodeExecute(dargs[0], dargs[1], dargs[2], dargs[3], dargs[4]);
      }
      if (window.extra)
        window.extra();
      }
    );
  </script>
</html>