
<h1>Legends and Titles</h1>
<p>
  Sometimes in addition to the nodes and links that are the subject of a diagram, one also wants to display a "legend" or "key" describing the different kinds
  of nodes or links. Perhaps one also wants there to be "title" for the diagram in large letters.
</p>

<h2 id="OutsideOfDiagram">Outside of Diagram</h2>
<p>First, you must consider whether titles or legends should be part of the diagram or not. You can create whatever you want in HTML outside of the diagram.</p>
<script>
  function setupForLegend(diagram) {
    diagram.layout = new go.TreeLayout({ angle: 90 });

    diagram.nodeTemplate =
      new go.Node('Auto')
        .add(
          new go.Shape('RoundedRectangle', { fill: 'white' })
            .bind('fill', 'color'),
          new go.TextBlock({ margin: 5 })
            .bind('text', 'key')
        );

    diagram.linkTemplate =
      new go.Link({ routing: go.Routing.Orthogonal, corner: 8 })
        .add(
          new go.Shape({ strokeWidth: 2 })
        );

    diagram.model = new go.TreeModel([
      { key: 'Alpha', color: 'purple' },
      { key: 'Beta', parent: 'Alpha', color: 'red' },
      { key: 'Gamma', parent: 'Alpha', color: 'white' },
    ]);
  }
</script>
<pre class="lang-js" style="display: none" id="diagramPre"><code>
  setupForLegend(diagram);
</code></pre>
<div style="width: 100%">
  <span id="diagramSpan" style="display: inline-block">
    <span style="font: bold 16pt sans-serif; color: green">An HTML Title for a Diagram</span>
  </span>
  <div style="display: inline-block; vertical-align: bottom; border: 2px solid green">
    <b>Color key:</b>
    <table>
      <tr>
        <td><span style="color: purple; font-weight: bold">Purple</span> nodes are juicy and sweet</td>
      </tr>
      <tr>
        <td><span style="color: red; font-weight: bold">Red</span> nodes are very angry</td>
      </tr>
      <tr>
        <td><span style="color: white; background: gray; font-weight: bold">White</span> nodes sleep well at night</td>
      </tr>
    </table>
  </div>
</div>
<script>
  goCode('diagramPre', 300, 200, 'diagramSpan');
</script>
<p>
  Note that anything in HTML will not automatically scroll and zoom along with the diagram's contents shown in the viewport. But HTML elements could be
  positioned in front of or behind the diagram's DIV element.
</p>

<h2 id="UnmodeledParts">Unmodeled Parts</h2>
<p>Second, you should consider whether the title or legend should be held in your data model. Do you need to save and load that data in your database?</p>
<p>
  If you do not want to these objects to be included in your application's data model, you can just create them as simple <a>Part</a>s and
  <a>Diagram.add</a> them to your diagram at explicitly defined <a>Part.location</a>s.
</p>
<pre class="lang-js" id="unmodeled"><code>
  setupForLegend(diagram);  // this creates a diagram just like the first example

  diagram.add(
    new go.Part({ location: new go.Point(0, -40) })
      .add(
        new go.TextBlock("A Title", { font: "bold 24pt sans-serif", stroke: "green" })
      ));
</code></pre>
<script>
  goCode('unmodeled', 300, 200);
</script>
<p>
  If you do not assign a location or position for your Parts, and if your <a>Diagram.layout</a> (if any) does not assign any <a>Part.location</a>, then there
  might not be a real location for those parts and they might not appear anywhere in the diagram.
</p>
<p class="box bg-info">
  All of the predefined <a>Layout</a>s that make use of <a>LayoutNetwork</a>s, including <a>TreeLayout</a>, do not operate on simple <a>Part</a>s but only on
  <a>Node</a>s and <a>Link</a>s. If you had added a <a>Node</a> to the diagram it would have been positioned as part of this diagram's normal tree layout, even
  though you explicitly set its location. Alternatively it could still be a Node if you set its <a>Part.isLayoutPositioned</a> property to false.
</p>
<p>
  You will notice that the title is selectable and movable and copyable and deletable in the diagram above. You may want to set properties such as
  <a>Part.selectable</a> to false.
</p>
<p>For an example showing a legend, see the <a href="../samples/familyTreeJP.html" target="samples">Family Tree</a> sample.</p>

<h3 id="ModeledParts">Modeled Parts</h3>
<p>
  If on the other hand you do want to store your titles or legends in your model, you can do so using the normal mechanisms. Typically you will use
  <a href="templateMaps.html">node categories and template maps</a>.
</p>

<h2 id="StaticParts">Static Parts</h2>
<p>
  Third, consider whether you want the title or legend to move or scale as the user scrolls or zooms the diagram. If you want to keep such a decoration at the
  same position in the viewport, you can place it in a Layer that has <a>Layer.isViewportAligned</a> set to <code>true</code>. There are two such layers that
  are predefined for you: "ViewportBackground" and "ViewportForeground". Parts added to these layers will position and scale themselves according to their
  alignment spots, <a>GraphObject.alignment</a> and <a>GraphObject.alignmentFocus</a>, relative to the viewport, and their drawn scale will not change with the
  Diagram scale. Thus they will not move as the user scrolls or zooms.
</p>
<p>
  If you set or bind the <a>GraphObject.position</a> or <a>Part.location</a> properties of Parts in such Layers, those new values will be ignored because the
  alignment properties take precedence. However those properties still have valid values, with Points that are in document coordinates.
</p>
<pre class="lang-js" id="static"><code>
  setupForLegend(diagram);  // this creates a diagram just like the first example

  // this Layer is behind everything and is not interactive
  const myTitle =
    new go.Part({
        layerName: "ViewportBackground",
        alignment: new go.Spot(0, 0, 10, 10)
      })
      .add(
        new go.TextBlock("A Title", { font: "bold 24pt sans-serif", stroke: "green" })
      );
  diagram.add(myTitle);
</code></pre>
<script>
  goCode('static', 300, 200);
</script>
<p>
  Note that as the user pans or scrolls or zooms the diagram, the title remains at the same top-left corner at apparently the same effective size. This example
  makes use of the "ViewportBackground" <a>Layer</a> (see <a href="layers.html">Intro to Layers</a>), which is convenient for making sure the title (or legend)
  stays in the background and does not participate in selection or mouse events or the <a>UndoManager</a>.
</p>
