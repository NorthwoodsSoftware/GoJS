/*
 * GoJS v1.7.3 JavaScript Library for HTML Diagrams
 * Northwoods Software, https://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2017 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: https://gojs.net/1.7.3/doc/license.html.
 */
(function(window) { var f,ca={};if(!window.document||void 0===window.document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),g=Math.max(8,16-(c-a)),h=window.setTimeout(function(){b(c+g)},g);a=c+g;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){window.clearTimeout(a)})})();
var u={xj:!1,yA:!1,ZE:!1,zI:!1,$F:!1,xF:!1,Zt:null,enableBoundsInfo:function(a){u.xj=!0;a&&a.Iq()},disableBoundsInfo:function(a){u.xj=!1;a&&(da(a.pd,!0),a.Iq())},WE:function(a,b){void 0===a&&(a=u.Zt);void 0===b&&(b=a.hm("").pb);var c=b.length,d=a.pd;d.fillStyle="rgba(255,255,0,.3)";for(var e=0;e<c;e++){var g=b.fa(e),h=g.Z;if(null!==g.va)u.WE(a,g.va);else{var k=g.Li.copy();k.fB(g.Jc);d.save();d.transform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy);d.fillRect(h.x,h.y,h.width,h.height);d.restore()}}},XE:function(a,
b){a||(a=u.Zt);b||(b=a.hm("").pb);var c=a.pd,d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=b.fa(e),h=g.Ja,k=g.Li;null!==g.va?u.XE(a,g.va):(c.save(),c.transform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),c.fillRect(h.x,h.y,h.width,h.height),c.restore())}},uI:function(a,b){a||(a=u.Zt);b||(b=a.hm("").pb);var c=a.pd,d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=b.fa(e),h=g.Ea,k=g.Li;null!==g.va?u.uI(a,g.va):(c.save(),c.transform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),
c.fillRect(h.x||0,h.y||0,h.width,h.height),c.restore())}},BL:function(){u.XE();u.WE()},CL:function(a){a||(a=u.Zt);var b=a.fd;a=a.pd;a.strokeStyle="rgba(0,255,0,.9)";a.rect(b.x,b.y,b.width,b.height);a.stroke()},YE:function(a,b){b.fillStyle="red";b.fillRect(0,0,8,8);b.lineWidth=8;b.strokeStyle="rgba(255,255,0,.6)";var c=a.yb;b.rect(c.x,c.y,c.width,c.height);b.stroke();b.fillStyle="rgba(0,255,0,.2)";b.fillRect(a.fd.x,a.fd.y,a.fd.width,a.fd.height)},vI:function(a,b){b instanceof ea||(a.lineWidth=2,a.strokeStyle=
"rgba(255,0,0,.5)",a.rect(b.ac.x,b.ac.y,b.ac.width,b.ac.height),a.stroke(),void 0!==b.stroke&&(a.strokeStyle=b.stroke),void 0!==b.ef&&(a.lineWidth=b.ef),null!==b.Q&&b.Q.type===ha&&(a.lineWidth=1,a.strokeStyle="rgba(10,200,10,.6)",void 0!==b.stroke&&(a.strokeStyle=b.stroke),void 0!==b.ef&&(a.lineWidth=b.ef)))},wI:function(a,b){a.lineWidth=1;a.strokeStyle="rgba(0,0,255,.5)";a.rect(b.Ja.x,b.Ja.y,b.Ja.width,b.Ja.height);a.stroke();void 0!==b.stroke&&(a.strokeStyle=b.stroke);void 0!==b.ef&&(a.lineWidth=
b.ef)},xA:function(a,b,c){a.setTransform(1,0,0,1,0,0);a.scale(b.rd,b.rd);a.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);c=b.bc.length;for(var d=0;d<c;d++)for(var e=b.bc.fa(d),g=e.pb.length,h=0;h<g;h++){var k=e.pb.fa(h);if(void 0!==k.location&&null!==k.location){if(k.location.F()){var l=k.location.x,m=k.location.y;a.beginPath();a.strokeStyle="limegreen";a.lineWidth=2;a.moveTo(l,m+6);a.lineTo(l,m);a.lineTo(l+6,m);a.moveTo(l,m);a.lineTo(l+10,m+20);a.stroke()}l=k.position.x;m=k.position.y;a.beginPath();
a.strokeStyle="red";a.lineWidth=2;a.moveTo(l,m+6);a.lineTo(l,m);a.lineTo(l+6,m);a.moveTo(l,m);a.lineTo(l+20,m+10);a.stroke()}}a.setTransform(1,0,0,1,0,0)},DL:function(a,b,c){var d=a.length;b.fillStyle="rgba(255,0,0,.1)";for(var e=0;e<d;e++){var g,h=a[e];g=c.Jc;var k=h.x,l=h.y,m=k+h.width,n=l+h.height,p=g.m11,q=g.m12,r=g.m21,s=g.m22,v=g.dx,t=g.dy,x=k*p+l*r+v,h=k*q+l*s+t;g=m*p+l*r+v;var l=m*q+l*s+t,y=k*p+n*r+v,k=k*q+n*s+t,p=m*p+n*r+v,m=m*q+n*s+t,n=x,q=h,n=Math.min(n,g),x=Math.max(x,g),q=Math.min(q,
l),h=Math.max(h,l),n=Math.min(n,y),x=Math.max(x,y),q=Math.min(q,k),h=Math.max(h,k),n=Math.min(n,p),x=Math.max(x,p),q=Math.min(q,m),h=Math.max(h,m);g=new w(n,q,x-n,h-q);b.fillRect(g.x,g.y,g.width,g.height)}},xI:function(a,b,c,d,e){a.fillStyle="rgba(0,255,0,.2)";a.fillRect(b,c,d,e)},yI:function(a,b,c){a.save();var d=b.Jc;d.reset();1!==b.scale&&d.scale(b.scale);b=b.position;0===b.x&&0===b.y||d.translate(-b.x,-b.y);a.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);c=c.dd.o;d=c.length;for(b=0;b<d;b++){var e=
c[b];a.beginPath();a.moveTo(e.x-4,e.y);a.lineTo(e.x+4,e.y);a.moveTo(e.x,e.y-4);a.lineTo(e.x,e.y+4);a.lineWidth=2;a.strokeStyle="rgba(255,0,0,.9)";a.stroke()}a.restore()},zL:function(a){a||(a=u.Zt);for(a=a.ao;a.next();)z.trace(a.value.toString())},rM:function(a,b){var c=b.ap(a),d=b.Ub;d.se=b.MB(c);d.ha=c;return ia(b,d,a)},mM:function(a,b){b.He(a.ha)&&(b.pd.fillStyle="lime",b.pd.fillRect(a.se.x,a.se.y,1*b.scale,1*b.scale))},nM:function(a){var b=ja(a,!1,null,null);if(!b.rq){a=a.pd;for(var c=0;c<=b.yn;c++)for(var d=
0;d<=b.zn;d++){var e=b.zd[c][d];if(0!==e){var g=c*b.de+b.Wf,h=d*b.Od+b.Xf;0!==e&&(a.fillStyle="rgba(255, 0, 0, .2)",a.fillRect(g,h,b.de,b.Od));999999<=e||(e%=10,a.fillStyle="blue",a.fillText(e.toString(),g,h+b.Od))}}}},dumpReferences:function(a){if(a instanceof C)for(a=a.ao;a.next();){var b=a.value;z.trace(b.toString());for(b=b.Gi;b.next();)u.dumpReferences(b.value)}else if(a instanceof D){z.trace("References for "+a);null!==a.layer&&z.trace("  "+a.layer.toString()+' LayerName: "'+a.Lf+'"');a.no!==
a&&z.trace("  SelectionObject: "+a.no.toString()+' SelectionObjectName: "'+a.vy+'"');a.cc!==a&&z.trace("  LocationObject: "+a.cc.toString()+' LocationObjectName: "'+a.ay+'"');if(a.lh){for(var c="",b=a.lh.j;b.next();)c+=b.key+" ";z.trace("  Adornments: "+c)}null!==a.Qa&&z.trace("  ContainingGroup: "+a.Qa.toString());if(a instanceof E){if(0<a.Jd.count){c="";for(b=a.Jd;b.next();)c+=b.value.toString()+", ";z.trace("  Links: "+c)}null!==a.Cc&&z.trace("  LabeledLink: "+a.Cc.toString());if(a instanceof F){z.trace("  Placeholder: "+
a.placeholder);c="";for(b=a.Oc;b.next();)c+=b.value.toString()+", ";z.trace("  Members: "+c);c="";for(b=a.cn.j;b.next();)c+=b.value.toString()+", ";z.trace("  NestedGroups: "+c);z.trace("  Layout: "+a.Wb)}}else if(a instanceof H){z.trace("  Path: "+a.path);z.trace("  From: "+a.aa+" "+a.gd+' "'+a.dg+'"');z.trace("  To: "+a.ea+" "+a.Nd+' "'+a.ih+'"');c="";for(b=a.Kf;b.next();)c+=b.value.toString()+", ";z.trace("  LabelNodes: "+c)}}},dumpVisualTree:function(a){if(a instanceof C)for(a=a.ao;a.next();){var b=
a.value;z.trace(b.toString());for(b=b.Gi;b.next();)u.dumpVisualTree(b.value)}else a instanceof D&&(b=" ",a.ME&&(b+="c"),a.QE&&(b+="d"),a.vF&&(b+="g"),a.YF&&(b+="m"),a.oG&&(b+="h"),a.pG&&(b+="z"),a.uG&&(b+="o"),a.Zk&&(b+="s"),a.NG&&(b+="t"),a.BG&&(b+="A"),a.Qx&&(b+="B"),a.TA&&(b+="L"),a.gb&&(b+="S"),a.Vk&&(b+="H"),u.QC(a,1,b))},QC:function(a,b,c){for(var d="",e=0;e<b;e++)d+="  ";d+=a.toString();c&&(d+=c);c=a.name?' "'+a.name+'" ':" ";c=a.visible?c+"v":c+"!v";c=a.qg?c+"p":c+"!p";a.If&&(c+="m");a.qu&&
(c+="a");d+=c;if(0!==a.Zb||0!==a.column)d+=" ["+a.Zb+","+a.column+"]";d+=" "+a.Z.toString();a.Da.F()&&(d+=" d:"+a.Da.toString());a.Ja.F()&&(d+=" n:"+a.Ja.toString());1!==a.scale&&(d+=" s:"+a.scale);0!==a.angle&&(d+=" a:"+a.angle);null!==a.background&&(d+=" b:"+a.background.toString());null!==a.Xl&&(d+=" a:"+a.background.toString());a instanceof I&&(d+=" elts:"+a.va.count,a.isEnabled||(d+=" !ENABLED"),a.uq&&(d+=" CLIPPING"),0!==a.TG&&(d+=" top:"+a.TG),0!==a.RF&&(d+=" left:"+a.RF),null!==a.Wk&&(d+=
" itemArray#:"+z.bb(a.Wk)),a.kJ&&(d+=" cat:"+a.kJ),null!==a.data&&(d+=" data:"+a.data));null!==a.vd&&(d+=' portId: "'+a.vd+'"');z.trace(d);if(a instanceof I)for(a=a.elements;a.next();)u.QC(a.value,b+1,"")},FL:function(a){z.trace("DelayedReferences ("+a.vg.count+")");for(a=a.vg.j;a.next();){for(var b="",c=a.value.j;c.next();)b+=ka(c.value)+", ";z.trace("  "+a.key+": "+b)}},DE:function(a,b){if(!z.Xa(b)||b instanceof Element||b instanceof CanvasRenderingContext2D||b instanceof ma||b instanceof na)return"";
var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=z.vb(b,d);if(null!==e&&"function"!==typeof e){if(b.hasOwnProperty(d)){var g=Object.getPrototypeOf(b);if(g&&g.xw&&g.xw[d])continue}else if(z.Lx(b,d))continue;""===c&&(c=b+"\n");c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n"}}return c},nx:function(a,b){if(null!==b&&void 0!==b&&"number"!==typeof b&&"string"!==typeof b&&"boolean"!==typeof b&&
"function"!==typeof b)if(void 0!==z.Hd(b)){if(!u.Mw.contains(b))if(u.Mw.add(b),u.mw.add(u.DE(a,b)),b instanceof J||b instanceof K||b instanceof oa)for(var c=b.j;c.next();)u.nx(a+"["+c.key+"]",c.value);else for(c in b){var d=z.vb(b,c);if(void 0!==d&&null!==d&&z.Xa(d)&&d!==b.xw){if(b instanceof pa){if(d===b.gi)continue}else if(b instanceof I){if("data"===c||d===b.ge)continue;if("itemArray"===c||d===b.cj)continue;if(b instanceof D&&d===b.Jl)continue}else if(!(b instanceof C))if(b instanceof ta){if("archetypeGroupData"===
c||d===b.Sy)continue}else if(b instanceof ua){if("archetypeLinkData"===c||d===b.Uy)continue;if("archetypeLabelNodeData"===c||d===b.Ty)continue}else if(b instanceof wa){if("archetypeNodeData"===c||d===b.ol)continue}else if(b instanceof L){if("nodeDataArray"===c||d===b.ye)continue;if("linkDataArray"===c||d===b.bf||d===b.hi)continue;if(d===b.Gc)continue;if(d===b.vg)continue}else if(b instanceof ya||b instanceof za||b instanceof Aa)continue;u.nx(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)u.nx(a+
"["+c+"]",b[c]);else u.mw.add(u.DE(a,b))},checkProperties:function(a){void 0===u.Mw?u.Mw=new K(Object):u.Mw.clear();u.mw=new Ba;u.nx("",a);a=u.mw.toString();u.mw=null;return a}};ca.Debug=u;
var z={xd:1,ad:2,od:4,nd:8,Xn:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),GF:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),HF:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),ML:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Edge/"),Uk:void 0!==window.navigator&&void 0!==window.navigator.platform&&0<=window.navigator.platform.toUpperCase().indexOf("MAC"),
IF:void 0!==window.navigator&&void 0!==window.navigator.platform&&null!==window.navigator.platform.match(/(iPhone|iPod|iPad)/i),NE:function(a,b,c){var d=-1;return function(){var e=this,g=arguments;-1!==d&&z.clearTimeout(d);d=z.setTimeout(function(){d=-1;c||a.apply(e,g)},b);c&&!d&&a.apply(e,g)}},setTimeout:function(a,b){return window.setTimeout(a,b)},clearTimeout:function(a){window.clearTimeout(a)},createElement:function(a){return window.document.createElement(a)},k:function(a){throw Error(a);},pa:function(a,
b){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b);z.k(c)},l:function(a,b,c,d){a instanceof b||(c=z.getTypeName(c),void 0!==d&&(c+="."+d),z.hc(a,b,c))},h:function(a,b,c,d){typeof a!==b&&(c=z.getTypeName(c),void 0!==d&&(c+="."+d),z.hc(a,b,c))},p:function(a,b,c){"number"===typeof a&&isFinite(a)||(b=z.getTypeName(b),void 0!==c&&(b+="."+c),z.k(b+" must be a real number type, and not NaN or Infinity: "+a))},Ca:function(a,b,c,d){a instanceof
Ca&&a.Pe===b||(c=z.getTypeName(c),void 0!==d&&(c+="."+d),z.hc(a,"a constant of class "+z.uf(b),c))},Ut:function(a,b){"string"===typeof a?Da(a)||z.k('Color "'+a+'" is not a valid color string for '+b):a instanceof Ea||z.k("Value for "+b+" must be a color string or a Brush, not "+a)},hc:function(a,b,c,d){b=z.getTypeName(b);c=z.getTypeName(c);void 0!==d&&(c+="."+d);"string"===typeof a?z.k(c+" value is not an instance of "+b+': "'+a+'"'):z.k(c+" value is not an instance of "+b+": "+a)},wa:function(a,
b,c,d){c=z.getTypeName(c);void 0!==d&&(c+="."+d);z.k(c+" is not in the range "+b+": "+a)},wd:function(a){z.k(z.uf(a)+" constructor cannot take any arguments.")},Va:function(a){z.k("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},Tj:function(a,b){z.k("No property to set for this enum value: "+b+" on "+a.toString())},trace:function(a){window.console&&
window.console.log(a)},xx:{},Nn:function(a,b){!0!==z.xx[a]&&(z.xx[a]=!0,window.console&&window.console.log(a+" is deprecated in "+b+", see the GoJS change log for more information."))},Xa:function(a){return"object"===typeof a&&null!==a},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},fJ:function(a){return Array.isArray(a)},Tt:function(a,b,c){z.isArray(a)||z.hc(a,"Array or NodeList or HTMLCollection",b,c)},bb:function(a){return a.length},am:function(a){return Array.prototype.slice.call(a)},
Ma:function(a,b){Array.isArray(a);return a[b]},BE:function(a,b,c){Array.isArray(a)?a[b]=c:z.k("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Yl:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return d;return-1},Hh:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):z.k("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Rg:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):
z.k("Cannot remove an object from an HTMLCollection or NodeList at "+b)},Ky:[],P:function(){var a=z.Ky.pop();return void 0===a?new M:a},Fb:function(a,b){var c=z.Ky.pop();if(void 0===c)return new M(a,b);c.x=a;c.y=b;return c},A:function(a){z.Ky.push(a)},$B:[],Am:function(){var a=z.$B.pop();return void 0===a?new Fa:a},Qk:function(a){z.$B.push(a)},Ly:[],Of:function(){var a=z.Ly.pop();return void 0===a?new w:a},fh:function(a,b,c,d){var e=z.Ly.pop();if(void 0===e)return new w(a,b,c,d);e.x=a;e.y=b;e.width=
c;e.height=d;return e},Mb:function(a){z.Ly.push(a)},aC:[],Pf:function(){var a=z.aC.pop();return void 0===a?new Ga:a},Ie:function(a){z.aC.push(a)},My:null,v:function(){var a=z.My;return null!==a?(z.My=null,a):new Ha},u:function(a){a.reset();z.My=a},ZB:[],tb:function(){var a=z.ZB.pop();return void 0===a?[]:a},Ba:function(a){a.length=0;z.ZB.push(a)},bl:Object.freeze([]),Em:1,wc:function(a){a.__gohashid=z.Em++},oq:function(a){var b=a.__gohashid;void 0===b&&(b=z.Em++,a.__gohashid=b);return b},Hd:function(a){return a.__gohashid},
ka:function(a,b){b.Zy=a;ca[a]=b},Ta:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},Ai:function(a){a.yH=!0},defineProperty:function(a,b,c,d,e){z.h(a,"function","Util.defineProperty:classfunc");z.h(b,"object","Util.defineProperty:propobj");z.h(c,"function","Util.defineProperty:getter");z.h(d,"function","Util.defineProperty:setter");for(var g in b){b=b[g];c={get:c,set:d,enumerable:!0};if(void 0!==e)for(var h in e)c[h]=e[h];Object.defineProperty(a.prototype,
g,c);e=Object.getOwnPropertyDescriptor(a.prototype,g);b&&e&&Object.defineProperty(a.prototype,b,e);break}},IK:!1,w:function(a,b,c,d){z.h(a,"function","Util.defineReadOnlyProperty:classfunc");z.h(b,"object","Util.defineReadOnlyProperty:propobj");z.h(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var g=b[e];b={get:c,set:function(a){z.k('The property "'+g+'" is read-only and cannot be set to '+a)},enumerable:!0};if(void 0!==d)for(var h in d)b[h]=d[h];Object.defineProperty(a.prototype,
e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);g&&d&&Object.defineProperty(a.prototype,g,d);break}},me:function(a,b){for(var c in b)b[c]=!0;a.prototype.xw=b},getTypeName:function(a){return void 0===a?"":"string"===typeof a?a:"function"===typeof a?z.uf(a):null===a?"*":""},uf:function(a){if("function"===typeof a){if(a.Zy)return a.Zy;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("("),b=b.substring(9,c).trim();if(""!==b)return a.Zy=b}else if("object"===typeof a&&a.constructor)return z.uf(a.constructor);
return typeof a},s:function(a,b,c){z.h(a,"function","Util.defineEnumValue:classfunc");z.h(b,"string","Util.defineEnumValue:name");z.h(c,"number","Util.defineEnumValue:num");c=new Ca(a,b,c);Object.freeze(c);a[b]=c;var d=a.hv;d instanceof oa||(d=new oa("string",Ca),a.hv=d);d.add(b,c);return c},vb:function(a,b){if(!a||!b)return null;var c=void 0;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):c=a[b]}catch(d){u&&z.trace("property get error: "+
d.toString())}return c},Ua:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){u&&z.trace("property set error: "+d.toString())}},Vu:function(a,b){z.h(a,"object","Setting properties requires Objects as arguments");z.h(b,"object","Setting properties requires Objects as arguments");var c=a instanceof I,d=a instanceof C,e;for(e in b){""===e&&z.k("Setting properties requires non-empty property names");var g=a,h=e;if(c||d){var k=
e.indexOf(".");if(0<k){var l=e.substring(0,k);if(c)g=a.Gd(l);else if(g=a[l],void 0===g||null===g)g=a.ib[l];z.Xa(g)?h=e.substr(k+1):z.k("Unable to find object named: "+l+" in "+a.toString()+" when trying to set property: "+e)}}if("_"!==h[0]&&!z.Lx(g,h))if(d&&"ModelChanged"===h){a.MH(b[h]);continue}else if(d&&"Changed"===h){a.An(b[h]);continue}else if(d&&z.Lx(a.ib,h))g=a.ib;else if(d&&Ia(a,h)){a.gA(h,b[h]);continue}else if(a instanceof L&&"Changed"===h){a.An(b[h]);continue}else z.k('Trying to set undefined property "'+
h+'" on object: '+g.toString());g[h]=b[e];"_"===h[0]&&g instanceof O&&g.JH(h)}},Lx:function(a,b){if(a.hasOwnProperty(b))return!0;for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;var d=c.xw;if(d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1},VJ:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e=0,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",h=0;h<a.length;h++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(h)^
b[(b[c]+b[d])%256]);return g},UI:function(a){for(var b={},c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Sg:function(a){return z.VJ(z.UI(a))},Cm:null,adym:"7da71ca0ad381e90",vfo:"2be641fdb0",ZH:"@COLOR1",$H:"@COLOR2"};
z.Cm=function(){var a=window.document.createElement("canvas"),b=a.getContext("2d");b[z.Sg("7ca11abfd022028846")]=z.Sg("398c3597c01238");for(var c=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22422913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],d=1;5>d;d++)b[z.Sg("7ca11abfd7330390")](z.Sg(c[d-1]),10,15*d+0);b[z.Sg("7ca11abfd022028846")]=z.Sg("39f046ebb36e4b");for(d=1;5>d;d++)b[z.Sg("7ca11abfd7330390")](z.Sg(c[d-
1]),10,15*d+0);if(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])z.s=function(a,b){var c=new Ca(a,b,2);Object.freeze(c);a[b]=c;var d=a.hv;d instanceof oa||(d=new oa("string",Ca),a.hv=d);d.add(b,c);return c};return a}();function Ca(a,b,c){z.wc(this);this.kC=a;this.Xb=b;this.DH=c}z.ka("EnumValue",Ca);Ca.prototype.toString=function(){return z.uf(this.kC)+"."+this.Xb};z.w(Ca,{Pe:"classType"},function(){return this.kC});z.w(Ca,{name:"name"},function(){return this.Xb});z.w(Ca,{value:"value"},function(){return this.DH});
var Ja;Ca.findName=Ja=function(a,b){if(void 0===b||null===b||""===b)return null;z.h(a,"function","findName:classfunc");z.h(b,"string","EnumValue.findName:name");var c=a.hv;return c instanceof oa?c.qa(b):null};function Ba(){this.jC=[]}Ba.prototype.toString=function(){return this.jC.join("")};Ba.prototype.add=function(a){""!==a&&this.jC.push(a)};function na(){}
function Ka(a){void 0===a&&(a=42);this.seed=a;this.Gy=48271;this.gv=2147483647;this.YB=this.gv/this.Gy;this.hH=this.gv%this.Gy;this.gH=1/this.gv;this.random()}Ka.prototype.random=function(){var a=this.seed%this.YB*this.Gy-this.seed/this.YB*this.hH;this.seed=0<a?a:a+this.gv;return this.seed*this.gH};function La(){}z.w(La,{j:"iterator"},function(){return this});La.prototype.reset=La.prototype.reset=function(){};La.prototype.next=La.prototype.hasNext=La.prototype.next=function(){return!1};
La.prototype.first=La.prototype.first=function(){return null};La.prototype.any=function(){return!1};La.prototype.all=function(){return!0};La.prototype.each=function(){return this};La.prototype.map=function(){return this};La.prototype.filter=function(){return this};La.prototype.concat=function(a){return a.j};z.w(La,{count:"count"},function(){return 0});La.prototype.Rf=function(){};La.prototype.toString=function(){return"EmptyIterator"};var Na=new La;function Qa(a){this.key=-1;this.value=a}
z.me(Qa,{key:!0,value:!0});z.w(Qa,{j:"iterator"},function(){return this});Qa.prototype.reset=Qa.prototype.reset=function(){this.key=-1};Qa.prototype.next=Qa.prototype.hasNext=Qa.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1};Qa.prototype.first=Qa.prototype.first=function(){this.key=0;return this.value};Qa.prototype.any=function(a){this.key=-1;return a(this.value)};Qa.prototype.all=function(a){this.key=-1;return a(this.value)};
Qa.prototype.each=function(a){this.key=-1;a(this.value);return this};Qa.prototype.map=function(a){return new Qa(a(this.value))};Qa.prototype.filter=function(a){return a(this.value)?new Qa(this.value):Na};Qa.prototype.concat=function(a){return new Sa(this,a.j)};z.w(Qa,{count:"count"},function(){return 1});Qa.prototype.Rf=function(){this.value=null};Qa.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Sa(a,b){this.Bl=a;this.Cl=b;this.iv=!1}z.me(Sa,{key:!0,value:!0});
z.w(Sa,{j:"iterator"},function(){return this});Sa.prototype.reset=Sa.prototype.reset=function(){this.Bl.reset();this.Cl.reset();this.iv=!1};Sa.prototype.next=Sa.prototype.hasNext=Sa.prototype.next=function(){if(!this.iv){var a=this.Bl;if(a.next())return this.key=a.key,this.value=a.value,!0;this.iv=!0}return this.iv&&(a=this.Cl,a.next())?(this.key=a.key,this.value=a.value,!0):!1};Sa.prototype.first=Sa.prototype.first=function(){this.reset();return this.next()?this.value:null};
Sa.prototype.any=function(a){return this.Bl.any(a)||this.Cl.any(a)?!0:!1};Sa.prototype.all=function(a){return this.Bl.all(a)&&this.Cl.all(a)?!0:!1};Sa.prototype.each=function(a){this.Bl.each(a);this.Cl.each(a);return this};Sa.prototype.map=function(a){return new Sa(this.Bl.map(a),this.Cl.map(a))};Sa.prototype.filter=function(a){return new Sa(this.Bl.filter(a),this.Cl.filter(a))};Sa.prototype.concat=function(a){return new Sa(this,a.j)};z.w(Sa,{count:"count"},function(){return this.Bl.count+this.Cl.count});
Sa.prototype.Rf=function(){this.value=this.key=null};Sa.prototype.toString=function(){return"ConcatIterator()"};function Va(a){this.Fc=a;this.mi=null;this.reset()}z.me(Va,{key:!0,value:!0});z.w(Va,{j:"iterator"},function(){return this});z.defineProperty(Va,{Gq:"predicate"},function(){return this.mi},function(a){this.mi=a});Va.prototype.reset=Va.prototype.reset=function(){var a=this.Fc;a.jc=null;this.qb=a.J;this.bd=-1};
Va.prototype.next=Va.prototype.hasNext=Va.prototype.next=function(){var a=this.Fc;if(a.J!==this.qb){if(0>this.key)return!1;z.Va(a)}var a=a.o,b=a.length,c=++this.bd,d=this.mi;if(null!==d)for(;c<b;){var e=a[c];if(d(e))return this.key=this.bd=c,this.value=e,!0;c++}else{if(c<b)return this.key=c,this.value=a[c],!0;this.Rf()}return!1};
Va.prototype.first=Va.prototype.first=function(){var a=this.Fc;this.qb=a.J;this.bd=0;var a=a.o,b=a.length,c=this.mi;if(null!==c){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.bd=d,this.value=e;d++}return null}return 0<b?(e=a[0],this.key=0,this.value=e):null};Va.prototype.any=function(a){var b=this.Fc;b.jc=null;var c=b.J;this.bd=-1;for(var d=b.o,e=d.length,g=this.mi,h=0;h<e;h++){var k=d[h];if(null===g||g(k)){if(a(k))return!0;b.J!==c&&z.Va(b)}}return!1};
Va.prototype.all=function(a){var b=this.Fc;b.jc=null;var c=b.J;this.bd=-1;for(var d=b.o,e=d.length,g=this.mi,h=0;h<e;h++){var k=d[h];if(null===g||g(k)){if(!a(k))return!1;b.J!==c&&z.Va(b)}}return!0};Va.prototype.each=function(a){var b=this.Fc;b.jc=null;var c=b.J;this.bd=-1;for(var d=b.o,e=d.length,g=this.mi,h=0;h<e;h++){var k=d[h];if(null===g||g(k))a(k),b.J!==c&&z.Va(b)}return this};
Va.prototype.map=function(a){var b=this.Fc;b.jc=null;var c=b.J;this.bd=-1;for(var d=[],e=b.o,g=e.length,h=this.mi,k=0;k<g;k++){var l=e[k];if(null===h||h(l))d.push(a(l)),b.J!==c&&z.Va(b)}a=new J;a.o=d;a.Sc();return a.j};Va.prototype.filter=function(a){var b=this.Fc;b.jc=null;var c=b.J;this.bd=-1;for(var d=[],e=b.o,g=e.length,h=this.mi,k=0;k<g;k++){var l=e[k];if(null===h||h(l))a(l)&&d.push(l),b.J!==c&&z.Va(b)}a=new J(b.da);a.o=d;a.Sc();return a.j};
Va.prototype.concat=function(a){this.Fc.jc=null;return new Sa(this,a.j)};z.w(Va,{count:"count"},function(){var a=this.mi;if(null!==a){for(var b=0,c=this.Fc.o,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Fc.o.length});Va.prototype.Rf=function(){this.key=-1;this.value=null;this.qb=-1;this.mi=null;this.Fc.jc=this};Va.prototype.toString=function(){return"ListIterator@"+this.bd+"/"+this.Fc.count};function Wa(a){this.Fc=a;this.reset()}z.me(Wa,{key:!0,value:!0});z.w(Wa,{j:"iterator"},function(){return this});
Wa.prototype.reset=Wa.prototype.reset=function(){var a=this.Fc;a.nk=null;this.qb=a.J;this.bd=a.o.length};Wa.prototype.next=Wa.prototype.hasNext=Wa.prototype.next=function(){var a=this.Fc;if(a.J!==this.qb){if(0>this.key)return!1;z.Va(a)}var b=--this.bd;if(0<=b)return this.key=b,this.value=a.o[b],!0;this.Rf();return!1};Wa.prototype.first=Wa.prototype.first=function(){var a=this.Fc;this.qb=a.J;var b=a.o;this.bd=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):null};
Wa.prototype.any=function(a){var b=this.Fc;b.nk=null;var c=b.J,d=b.o,e=d.length;this.bd=e;for(e-=1;0<=e;e--){if(a(d[e]))return!0;b.J!==c&&z.Va(b)}return!1};Wa.prototype.all=function(a){var b=this.Fc;b.nk=null;var c=b.J,d=b.o,e=d.length;this.bd=e;for(e-=1;0<=e;e--){if(!a(d[e]))return!1;b.J!==c&&z.Va(b)}return!0};Wa.prototype.each=function(a){var b=this.Fc;b.nk=null;var c=b.J,d=b.o,e=d.length;this.bd=e;for(e-=1;0<=e;e--)a(d[e]),b.J!==c&&z.Va(b);return this};
Wa.prototype.map=function(a){var b=this.Fc;b.nk=null;var c=b.J,d=[],e=b.o,g=e.length;this.bd=g;for(g-=1;0<=g;g--)d.push(a(e[g])),b.J!==c&&z.Va(b);a=new J;a.o=d;a.Sc();return a.j};Wa.prototype.filter=function(a){var b=this.Fc;b.nk=null;var c=b.J,d=[],e=b.o,g=e.length;this.bd=g;for(g-=1;0<=g;g--){var h=e[g];a(h)&&d.push(h);b.J!==c&&z.Va(b)}a=new J(b.da);a.o=d;a.Sc();return a.j};Wa.prototype.concat=function(a){this.Fc.nk=null;return new Sa(this,a.j)};z.w(Wa,{count:"count"},function(){return this.Fc.o.length});
Wa.prototype.Rf=function(){this.key=-1;this.value=null;this.qb=-1;this.Fc.nk=this};Wa.prototype.toString=function(){return"ListIteratorBackwards("+this.bd+"/"+this.Fc.count+")"};
function J(a){z.wc(this);this.I=!1;this.o=[];this.J=0;this.nk=this.jc=null;void 0===a||null===a?this.da=null:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.da=a:z.wa(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.da=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:z.wa(a,"null, a primitive type name, or a class type",
"List constructor: type")}z.ka("List",J);J.prototype.nh=function(a){null!==this.da&&("string"===typeof this.da?typeof a===this.da&&null!==a||z.hc(a,this.da):a instanceof this.da||z.hc(a,this.da))};J.prototype.Sc=function(){var a=this.J;a++;999999999<a&&(a=0);this.J=a};J.prototype.freeze=J.prototype.freeze=function(){this.I=!0;return this};J.prototype.thaw=J.prototype.Za=function(){this.I=!1;return this};J.prototype.toString=function(){return"List("+z.getTypeName(this.da)+")#"+z.Hd(this)};
J.prototype.add=J.prototype.push=J.prototype.add=function(a){null!==a&&(u&&this.nh(a),this.I&&z.pa(this,a),this.o.push(a),this.Sc())};J.prototype.addAll=J.prototype.Uc=function(a){if(null===a)return this;this.I&&z.pa(this);var b=this.o;if(z.isArray(a))for(var c=z.bb(a),d=0;d<c;d++){var e=z.Ma(a,d);u&&this.nh(e);b.push(e)}else for(a=a.j;a.next();)e=a.value,u&&this.nh(e),b.push(e);this.Sc();return this};J.prototype.clear=J.prototype.clear=function(){this.I&&z.pa(this);this.o.length=0;this.Sc()};
J.prototype.contains=J.prototype.has=J.prototype.contains=function(a){if(null===a)return!1;u&&this.nh(a);return-1!==this.o.indexOf(a)};J.prototype.indexOf=J.prototype.indexOf=function(a){if(null===a)return-1;u&&this.nh(a);return this.o.indexOf(a)};J.prototype.elt=J.prototype.get=J.prototype.fa=function(a){u&&z.p(a,J,"elt:i");var b=this.o;(0>a||a>=b.length)&&z.wa(a,"0 <= i < length",J,"elt:i");return b[a]};
J.prototype.setElt=J.prototype.set=J.prototype.bh=function(a,b){u&&(this.nh(b),z.p(a,J,"setElt:i"));var c=this.o;(0>a||a>=c.length)&&z.wa(a,"0 <= i < length",J,"setElt:i");this.I&&z.pa(this,a);c[a]=b};J.prototype.first=J.prototype.first=function(){var a=this.o;return 0===a.length?null:a[0]};J.prototype.last=J.prototype.re=function(){var a=this.o,b=a.length;return 0<b?a[b-1]:null};J.prototype.pop=J.prototype.pop=function(){this.I&&z.pa(this);var a=this.o;return 0<a.length?a.pop():null};
J.prototype.any=function(a){for(var b=this.o,c=this.J,d=b.length,e=0;e<d;e++){if(a(b[e]))return!0;this.J!==c&&z.Va(this)}return!1};J.prototype.all=function(a){for(var b=this.o,c=this.J,d=b.length,e=0;e<d;e++){if(!a(b[e]))return!1;this.J!==c&&z.Va(this)}return!0};J.prototype.each=function(a){for(var b=this.o,c=this.J,d=b.length,e=0;e<d;e++)a(b[e]),this.J!==c&&z.Va(this);return this};
J.prototype.map=function(a){for(var b=new J,c=[],d=this.o,e=this.J,g=d.length,h=0;h<g;h++)c.push(a(d[h])),this.J!==e&&z.Va(this);b.o=c;b.Sc();return b};J.prototype.filter=function(a){for(var b=new J(this.da),c=[],d=this.o,e=this.J,g=d.length,h=0;h<g;h++){var k=d[h];a(k)&&c.push(k);this.J!==e&&z.Va(this)}b.o=c;b.Sc();return b};J.prototype.concat=function(a){return this.copy().Uc(a)};
J.prototype.insertAt=J.prototype.Yd=function(a,b){u&&(this.nh(b),z.p(a,J,"insertAt:i"));0>a&&z.wa(a,">= 0",J,"insertAt:i");this.I&&z.pa(this,a);var c=this.o;a>=c.length?c.push(b):c.splice(a,0,b);this.Sc();return!0};J.prototype.remove=J.prototype["delete"]=J.prototype.remove=function(a){if(null===a)return!1;u&&this.nh(a);this.I&&z.pa(this,a);var b=this.o;a=b.indexOf(a);if(-1===a)return!1;a===b.length-1?b.pop():b.splice(a,1);this.Sc();return!0};
J.prototype.removeAt=J.prototype.md=function(a){u&&z.p(a,J,"removeAt:i");var b=this.o;(0>a||a>=b.length)&&z.wa(a,"0 <= i < length",J,"removeAt:i");this.I&&z.pa(this,a);a===b.length-1?b.pop():b.splice(a,1);this.Sc()};
J.prototype.removeRange=J.prototype.removeRange=function(a,b){u&&(z.p(a,J,"removeRange:from"),z.p(b,J,"removeRange:to"));var c=this.o,d=c.length;if(0>a)a=0;else if(a>=d)return this;if(0>b)return this;b>=d&&(b=d-1);if(a>b)return this;this.I&&z.pa(this);for(var e=a,g=b+1;g<d;)c[e++]=c[g++];c.length=d-(b-a+1);this.Sc();return this};J.prototype.copy=function(){var a=new J(this.da),b=this.o;0<b.length&&(a.o=Array.prototype.slice.call(b));return a};
J.prototype.toArray=J.prototype.nc=function(){for(var a=this.o,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};J.prototype.toSet=J.prototype.SG=function(){for(var a=new K(this.da),b=this.o,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};J.prototype.sort=J.prototype.sort=function(a){u&&z.h(a,"function",J,"sort:sortfunc");this.I&&z.pa(this);this.o.sort(a);this.Sc();return this};
J.prototype.sortRange=J.prototype.Vq=function(a,b,c){var d=this.o,e=d.length;void 0===b&&(b=0);void 0===c&&(c=e);u&&(z.h(a,"function",J,"sortRange:sortfunc"),z.p(b,J,"sortRange:from"),z.p(c,J,"sortRange:to"));this.I&&z.pa(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&z.wa(b,"0 <= from < length",J,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.Sc()),this;if(0===b)if(c>=e)d.sort(a);else for(g=d.slice(0,c),g.sort(a),a=0;a<c;a++)d[a]=g[a];else if(c>=e)for(g=d.slice(b),
g.sort(a),a=b;a<e;a++)d[a]=g[a-b];else for(g=d.slice(b,c),g.sort(a),a=b;a<c;a++)d[a]=g[a-b];this.Sc();return this};J.prototype.reverse=J.prototype.reverse=function(){this.I&&z.pa(this);this.o.reverse();this.Sc();return this};z.w(J,{count:"count"},function(){return this.o.length});z.w(J,{size:"size"},function(){return this.o.length});z.w(J,{length:"length"},function(){return this.o.length});z.w(J,{j:"iterator"},function(){if(0>=this.o.length)return Na;var a=this.jc;return null!==a?(a.reset(),a):new Va(this)});
z.w(J,{$n:"iteratorBackwards"},function(){if(0>=this.o.length)return Na;var a=this.nk;return null!==a?(a.reset(),a):new Wa(this)});function Xa(a){this.oi=a;this.reset()}z.me(Xa,{key:!0,value:!0});z.w(Xa,{j:"iterator"},function(){return this});Xa.prototype.reset=Xa.prototype.reset=function(){var a=this.oi;a.jc=null;this.qb=a.J;this.ob=null};
Xa.prototype.next=Xa.prototype.hasNext=Xa.prototype.next=function(){var a=this.oi;if(a.J!==this.qb){if(null===this.key)return!1;z.Va(a)}var b=this.ob,b=null===b?a.La:b.eb;if(null!==b)return this.ob=b,this.value=b.value,this.key=b.key,!0;this.Rf();return!1};Xa.prototype.first=Xa.prototype.first=function(){var a=this.oi;this.qb=a.J;a=a.La;if(null!==a){this.ob=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Xa.prototype.any=function(a){var b=this.oi;b.jc=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(a(d.value))return!0;b.J!==c&&z.Va(b);d=d.eb}return!1};Xa.prototype.all=function(a){var b=this.oi;b.jc=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(!a(d.value))return!1;b.J!==c&&z.Va(b);d=d.eb}return!0};Xa.prototype.each=function(a){var b=this.oi;b.jc=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;)a(d.value),b.J!==c&&z.Va(b),d=d.eb;return this};
Xa.prototype.map=function(a){var b=this.oi;b.jc=null;for(var c=new J,d=b.J,e=b.La;null!==e;)c.add(a(e.value)),b.J!==d&&z.Va(b),e=e.eb;return c.j};Xa.prototype.filter=function(a){var b=this.oi;b.jc=null;for(var c=new J(b.da),d=b.J,e=b.La;null!==e;){var g=e.value;a(g)&&c.add(g);b.J!==d&&z.Va(b);e=e.eb}return c.j};Xa.prototype.concat=function(a){this.oi.jc=null;return new Sa(this,a.j)};z.w(Xa,{count:"count"},function(){return this.oi.Ad});
Xa.prototype.Rf=function(){this.value=this.key=null;this.qb=-1;this.oi.jc=this};Xa.prototype.toString=function(){return null!==this.ob?"SetIterator@"+this.ob.value:"SetIterator"};
function K(a){z.wc(this);this.I=!1;void 0===a||null===a?this.da=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.da=a:z.wa(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.da=a===Object?"object":a===String?"string":a===Number?"number":a:z.wa(a,"null, a primitive type name, or a class type","Set constructor: type");this.Bd={};this.Ad=0;this.jc=null;this.J=0;this.fi=this.La=null}z.ka("Set",K);
K.prototype.nh=function(a){null!==this.da&&("string"===typeof this.da?typeof a===this.da&&null!==a||z.hc(a,this.da):a instanceof this.da||z.hc(a,this.da))};K.prototype.Sc=function(){var a=this.J;a++;999999999<a&&(a=0);this.J=a};K.prototype.freeze=K.prototype.freeze=function(){this.I=!0;return this};K.prototype.thaw=K.prototype.Za=function(){this.I=!1;return this};K.prototype.toString=function(){return"Set("+z.getTypeName(this.da)+")#"+z.Hd(this)};
K.prototype.add=K.prototype.add=function(a){if(null===a)return!1;u&&this.nh(a);this.I&&z.pa(this,a);var b=a;z.Xa(a)&&(b=z.oq(a));return void 0===this.Bd[b]?(this.Ad++,a=new Za(a,a),this.Bd[b]=a,b=this.fi,null===b?this.La=a:(a.Bp=b,b.eb=a),this.fi=a,this.Sc(),!0):!1};K.prototype.addAll=K.prototype.Uc=function(a){if(null===a)return this;this.I&&z.pa(this);if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++)this.add(z.Ma(a,c));else for(a=a.j;a.next();)this.add(a.value);return this};
K.prototype.contains=K.prototype.has=K.prototype.contains=function(a){if(null===a)return!1;u&&this.nh(a);var b=a;return z.Xa(a)&&(b=z.Hd(a),void 0===b)?!1:void 0!==this.Bd[b]};K.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.j;a.next();)if(!this.contains(a.value))return!1;return!0};K.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.j;a.next();)if(this.contains(a.value))return!0;return!1};
K.prototype.first=K.prototype.first=function(){var a=this.La;return null===a?null:a.value};K.prototype.any=function(a){for(var b=this.J,c=this.La;null!==c;){if(a(c.value))return!0;this.J!==b&&z.Va(this);c=c.eb}return!1};K.prototype.all=function(a){for(var b=this.J,c=this.La;null!==c;){if(!a(c.value))return!1;this.J!==b&&z.Va(this);c=c.eb}return!0};K.prototype.each=function(a){for(var b=this.J,c=this.La;null!==c;)a(c.value),this.J!==b&&z.Va(this),c=c.eb;return this};
K.prototype.map=function(a){for(var b=new K,c=this.J,d=this.La;null!==d;)b.add(a(d.value)),this.J!==c&&z.Va(this),d=d.eb;return b};K.prototype.filter=function(a){for(var b=new K(this.da),c=this.J,d=this.La;null!==d;){var e=d.value;a(e)&&b.add(e);this.J!==c&&z.Va(this);d=d.eb}return b};K.prototype.concat=function(a){return this.copy().Uc(a)};
K.prototype.remove=K.prototype["delete"]=K.prototype.remove=function(a){if(null===a)return!1;u&&this.nh(a);this.I&&z.pa(this,a);var b=a;if(z.Xa(a)&&(b=z.Hd(a),void 0===b))return!1;a=this.Bd[b];if(void 0===a)return!1;var c=a.eb,d=a.Bp;null!==c&&(c.Bp=d);null!==d&&(d.eb=c);this.La===a&&(this.La=c);this.fi===a&&(this.fi=d);delete this.Bd[b];this.Ad--;this.Sc();return!0};
K.prototype.removeAll=K.prototype.oy=function(a){if(null===a)return this;this.I&&z.pa(this);if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++)this.remove(z.Ma(a,c));else for(a=a.j;a.next();)this.remove(a.value);return this};K.prototype.retainAll=function(a){if(null===a||0===this.count)return this;this.I&&z.pa(this);var b=new K(this.da);b.Uc(a);a=[];for(var c=this.j;c.next();){var d=c.value;b.contains(d)||a.push(d)}this.oy(a);return this};
K.prototype.clear=K.prototype.clear=function(){this.I&&z.pa(this);this.Bd={};this.Ad=0;this.fi=this.La=null;this.Sc()};K.prototype.copy=function(){var a=new K(this.da),b=this.Bd,c;for(c in b)a.add(b[c].value);return a};K.prototype.toArray=K.prototype.nc=function(){var a=Array(this.Ad),b=this.Bd,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};K.prototype.toList=function(){var a=new J(this.da),b=this.Bd,c;for(c in b)a.add(b[c].value);return a};z.w(K,{count:"count"},function(){return this.Ad});
z.w(K,{size:"size"},function(){return this.Ad});z.w(K,{j:"iterator"},function(){if(0>=this.Ad)return Na;var a=this.jc;return null!==a?(a.reset(),a):new Xa(this)});function $a(a){this.Pa=a;this.reset()}z.me($a,{key:!0,value:!0});z.w($a,{j:"iterator"},function(){return this});$a.prototype.reset=$a.prototype.reset=function(){this.qb=this.Pa.J;this.ob=null};
$a.prototype.next=$a.prototype.hasNext=$a.prototype.next=function(){var a=this.Pa;if(a.J!==this.qb){if(null===this.key)return!1;z.Va(a)}var b=this.ob,b=null===b?a.La:b.eb;if(null!==b)return this.ob=b,this.value=this.key=a=b.key,!0;this.Rf();return!1};$a.prototype.first=$a.prototype.first=function(){var a=this.Pa;this.qb=a.J;a=a.La;return null!==a?(this.ob=a,this.value=this.key=a=a.key):null};
$a.prototype.any=function(a){var b=this.Pa,c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(a(d.key))return!0;b.J!==c&&z.Va(b);d=d.eb}return!1};$a.prototype.all=function(a){var b=this.Pa,c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(!a(d.key))return!1;b.J!==c&&z.Va(b);d=d.eb}return!0};$a.prototype.each=function(a){var b=this.Pa,c=b.J;this.ob=null;for(var d=b.La;null!==d;)a(d.key),b.J!==c&&z.Va(b),d=d.eb;return this};
$a.prototype.map=function(a){var b=this.Pa,c=b.J;this.ob=null;for(var d=new J,e=b.La;null!==e;)d.add(a(e.key)),b.J!==c&&z.Va(b),e=e.eb;return d.j};$a.prototype.filter=function(a){var b=this.Pa,c=b.J;this.ob=null;for(var d=new J(b.qf),e=b.La;null!==e;){var g=e.key;a(g)&&d.add(g);b.J!==c&&z.Va(b);e=e.eb}return d.j};$a.prototype.concat=function(a){return new Sa(this,a.j)};z.w($a,{count:"count"},function(){return this.Pa.Ad});$a.prototype.Rf=function(){this.value=this.key=null;this.qb=-1};
$a.prototype.toString=function(){return null!==this.ob?"MapKeySetIterator@"+this.ob.value:"MapKeySetIterator"};function cb(a){z.wc(this);this.I=!0;this.Pa=a}z.Ta(cb,K);cb.prototype.freeze=function(){return this};cb.prototype.Za=function(){return this};cb.prototype.toString=function(){return"MapKeySet("+this.Pa.toString()+")"};cb.prototype.add=cb.prototype.set=cb.prototype.add=function(){z.k("This Set is read-only: "+this.toString());return!1};
cb.prototype.contains=cb.prototype.has=cb.prototype.contains=function(a){return this.Pa.contains(a)};cb.prototype.remove=cb.prototype["delete"]=cb.prototype.remove=function(){z.k("This Set is read-only: "+this.toString());return!1};cb.prototype.clear=cb.prototype.clear=function(){z.k("This Set is read-only: "+this.toString())};cb.prototype.first=cb.prototype.first=function(){var a=this.Pa.La;return null!==a?a.key:null};
cb.prototype.any=function(a){for(var b=this.Pa.La;null!==b;){if(a(b.key))return!0;b=b.eb}return!1};cb.prototype.all=function(a){for(var b=this.Pa.La;null!==b;){if(!a(b.key))return!1;b=b.eb}return!0};cb.prototype.each=function(a){for(var b=this.Pa.La;null!==b;)a(b.key),b=b.eb;return this};cb.prototype.map=function(a){for(var b=new K,c=this.Pa.La;null!==c;)b.add(a(c.key)),c=c.eb;return b};
cb.prototype.filter=function(a){for(var b=new K(this.Pa.qf),c=this.Pa.La;null!==c;){var d=c.key;a(d)&&b.add(d);c=c.eb}return b};cb.prototype.concat=function(a){return this.SG().Uc(a)};cb.prototype.copy=function(){return new cb(this.Pa)};cb.prototype.toSet=cb.prototype.SG=function(){var a=new K(this.Pa.qf),b=this.Pa.Bd,c;for(c in b)a.add(b[c].key);return a};cb.prototype.toArray=cb.prototype.nc=function(){var a=this.Pa.Bd,b=Array(this.Pa.Ad),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};
cb.prototype.toList=function(){var a=new J(this.da),b=this.Pa.Bd,c;for(c in b)a.add(b[c].key);return a};z.w(cb,{count:"count"},function(){return this.Pa.Ad});z.w(cb,{size:"size"},function(){return this.Pa.Ad});z.w(cb,{j:"iterator"},function(){return 0>=this.Pa.Ad?Na:new $a(this.Pa)});function gb(a){this.Pa=a;this.reset()}z.me(gb,{key:!0,value:!0});z.w(gb,{j:"iterator"},function(){return this});gb.prototype.reset=gb.prototype.reset=function(){var a=this.Pa;a.ok=null;this.qb=a.J;this.ob=null};
gb.prototype.next=gb.prototype.hasNext=gb.prototype.next=function(){var a=this.Pa;if(a.J!==this.qb){if(null===this.key)return!1;z.Va(a)}var b=this.ob,b=null===b?a.La:b.eb;if(null!==b)return this.ob=b,this.value=b.value,this.key=b.key,!0;this.Rf();return!1};gb.prototype.first=gb.prototype.first=function(){var a=this.Pa;this.qb=a.J;a=a.La;if(null!==a){this.ob=a;var b=a.value;this.key=a.key;return this.value=b}return null};
gb.prototype.any=function(a){var b=this.Pa;b.ok=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(a(d.value))return!0;b.J!==c&&z.Va(b);d=d.eb}return!1};gb.prototype.all=function(a){var b=this.Pa;b.ok=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(!a(d.value))return!1;b.J!==c&&z.Va(b);d=d.eb}return!0};gb.prototype.each=function(a){var b=this.Pa;b.ok=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;)a(d.value),b.J!==c&&z.Va(b),d=d.eb;return this};
gb.prototype.map=function(a){var b=this.Pa;b.ok=null;var c=b.J;this.ob=null;for(var d=new J,e=b.La;null!==e;)d.add(a(e.value)),b.J!==c&&z.Va(b),e=e.eb;return d.j};gb.prototype.filter=function(a){var b=this.Pa;b.ok=null;var c=b.J;this.ob=null;for(var d=new J(b.qf),e=b.La;null!==e;){var g=e.value;a(g)&&d.add(g);b.J!==c&&z.Va(b);e=e.eb}return d.j};gb.prototype.concat=function(a){this.Pa.ok=null;return new Sa(this,a.j)};z.w(gb,{count:"count"},function(){return this.Pa.Ad});
gb.prototype.Rf=function(){this.value=this.key=null;this.qb=-1;this.Pa.ok=this};gb.prototype.toString=function(){return null!==this.ob?"MapValueSetIterator@"+this.ob.value:"MapValueSetIterator"};function Za(a,b){this.key=a;this.value=b;this.Bp=this.eb=null}z.me(Za,{key:!0,value:!0});Za.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function ib(a){this.Pa=a;this.reset()}z.me(ib,{key:!0,value:!0});z.w(ib,{j:"iterator"},function(){return this});
ib.prototype.reset=ib.prototype.reset=function(){var a=this.Pa;a.jc=null;this.qb=a.J;this.ob=null};ib.prototype.next=ib.prototype.hasNext=ib.prototype.next=function(){var a=this.Pa;if(a.J!==this.qb){if(null===this.key)return!1;z.Va(a)}var b=this.ob,b=null===b?a.La:b.eb;if(null!==b)return this.ob=b,this.key=b.key,this.value=b.value,!0;this.Rf();return!1};
ib.prototype.first=ib.prototype.first=function(){var a=this.Pa;this.qb=a.J;a=a.La;return null!==a?(this.ob=a,this.key=a.key,this.value=a.value,a):null};ib.prototype.any=function(a){var b=this.Pa;b.jc=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(a(d))return!0;b.J!==c&&z.Va(b);d=d.eb}return!1};ib.prototype.all=function(a){var b=this.Pa;b.jc=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;){if(!a(d))return!1;b.J!==c&&z.Va(b);d=d.eb}return!0};
ib.prototype.each=function(a){var b=this.Pa;b.jc=null;var c=b.J;this.ob=null;for(var d=b.La;null!==d;)a(d),b.J!==c&&z.Va(b),d=d.eb;return this};ib.prototype.map=function(a){var b=this.Pa;b.jc=null;var c=b.J;this.ob=null;for(var d=new J,e=b.La;null!==e;)d.add(a(e)),b.J!==c&&z.Va(b),e=e.eb;return d.j};ib.prototype.filter=function(a){var b=this.Pa;b.jc=null;var c=b.J;this.ob=null;for(var d=new J,e=b.La;null!==e;)a(e)&&d.add(e),b.J!==c&&z.Va(b),e=e.eb;return d.j};
ib.prototype.concat=function(a){this.Pa.jc=null;return new Sa(this,a.j)};z.w(ib,{count:"count"},function(){return this.Pa.Ad});ib.prototype.Rf=function(){this.value=this.key=null;this.qb=-1;this.Pa.jc=this};ib.prototype.toString=function(){return null!==this.ob?"MapIterator@"+this.ob:"MapIterator"};
function oa(a,b){z.wc(this);this.I=!1;void 0===a||null===a?this.qf=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.qf=a:z.wa(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.qf=a===Object?"object":a===String?"string":a===Number?"number":a:z.wa(a,"null, a primitive type name, or a class type","Map constructor: keytype");void 0===b||null===b?this.yi=null:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===
b||"function"===b?this.yi=b:z.wa(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.yi=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:z.wa(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.Bd={};this.Ad=0;this.ok=this.jc=null;this.J=0;this.fi=this.La=null}z.ka("Map",oa);
function mb(a,b){null!==a.qf&&("string"===typeof a.qf?typeof b===a.qf&&null!==b||z.hc(b,a.qf):b instanceof a.qf||z.hc(b,a.qf))}oa.prototype.Sc=function(){var a=this.J;a++;999999999<a&&(a=0);this.J=a};oa.prototype.freeze=oa.prototype.freeze=function(){this.I=!0;return this};oa.prototype.thaw=oa.prototype.Za=function(){this.I=!1;return this};oa.prototype.toString=function(){return"Map("+z.getTypeName(this.qf)+","+z.getTypeName(this.yi)+")#"+z.Hd(this)};
oa.prototype.add=oa.prototype.set=oa.prototype.add=function(a,b){u&&(mb(this,a),null!==this.yi&&("string"===typeof this.yi?typeof b===this.yi&&null!==b||z.hc(b,this.yi):b instanceof this.yi||z.hc(b,this.yi)));this.I&&z.pa(this,a);var c=a;z.Xa(a)&&(c=z.oq(a));var d=this.Bd[c];if(void 0===d)return this.Ad++,d=new Za(a,b),this.Bd[c]=d,c=this.fi,null===c?this.La=d:(d.Bp=c,c.eb=d),this.fi=d,this.Sc(),!0;d.value=b;return!1};
oa.prototype.addAll=oa.prototype.Uc=function(a){if(null===a)return this;if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++){var d=z.Ma(a,c);this.add(d.key,d.value)}else for(a=a.j;a.next();)this.add(a.key,a.value);return this};oa.prototype.first=oa.prototype.first=function(){return this.La};oa.prototype.any=function(a){for(var b=this.J,c=this.La;null!==c;){if(a(c))return!0;this.J!==b&&z.Va(this);c=c.eb}return!1};
oa.prototype.all=function(a){for(var b=this.J,c=this.La;null!==c;){if(!a(c))return!1;this.J!==b&&z.Va(this);c=c.eb}return!0};oa.prototype.each=function(a){for(var b=this.J,c=this.La;null!==c;)a(c),this.J!==b&&z.Va(this),c=c.eb;return this};oa.prototype.map=function(a){for(var b=new oa(this.qf),c=this.J,d=this.La;null!==d;)b.add(d.key,a(d)),this.J!==c&&z.Va(this),d=d.eb;return b};
oa.prototype.filter=function(a){for(var b=new oa(this.qf,this.yi),c=this.J,d=this.La;null!==d;)a(d)&&b.add(d.key,d.value),this.J!==c&&z.Va(this),d=d.eb;return b};oa.prototype.concat=function(a){return this.copy().Uc(a)};oa.prototype.contains=oa.prototype.has=oa.prototype.contains=function(a){u&&mb(this,a);var b=a;return z.Xa(a)&&(b=z.Hd(a),void 0===b)?!1:void 0!==this.Bd[b]};
oa.prototype.getValue=oa.prototype.get=oa.prototype.qa=function(a){u&&mb(this,a);var b=a;if(z.Xa(a)&&(b=z.Hd(a),void 0===b))return null;a=this.Bd[b];return void 0===a?null:a.value};
oa.prototype.remove=oa.prototype["delete"]=oa.prototype.remove=function(a){if(null===a)return!1;u&&mb(this,a);this.I&&z.pa(this,a);var b=a;if(z.Xa(a)&&(b=z.Hd(a),void 0===b))return!1;a=this.Bd[b];if(void 0===a)return!1;var c=a.eb,d=a.Bp;null!==c&&(c.Bp=d);null!==d&&(d.eb=c);this.La===a&&(this.La=c);this.fi===a&&(this.fi=d);delete this.Bd[b];this.Ad--;this.Sc();return!0};oa.prototype.clear=oa.prototype.clear=function(){this.I&&z.pa(this);this.Bd={};this.Ad=0;this.fi=this.La=null;this.Sc()};
oa.prototype.copy=function(){var a=new oa(this.qf,this.yi),b=this.Bd,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};oa.prototype.toArray=oa.prototype.nc=function(){var a=this.Bd,b=Array(this.Ad),c=0,d;for(d in a){var e=a[d];b[c]=new Za(e.key,e.value);c++}return b};oa.prototype.toKeySet=oa.prototype.Uj=function(){return new cb(this)};z.w(oa,{count:"count"},function(){return this.Ad});z.w(oa,{size:"size"},function(){return this.Ad});
z.w(oa,{j:"iterator"},function(){if(0>=this.count)return Na;var a=this.jc;return null!==a?(a.reset(),a):new ib(this)});z.w(oa,{OF:"iteratorKeys"},function(){return 0>=this.count?Na:new $a(this)});z.w(oa,{PF:"iteratorValues"},function(){if(0>=this.count)return Na;var a=this.ok;return null!==a?(a.reset(),a):new gb(this)});function M(a,b){void 0===a?this.M=this.L=0:"number"===typeof a&&"number"===typeof b?(this.L=a,this.M=b):z.k("Invalid arguments to Point constructor: "+a+", "+b);this.I=!1}
z.ka("Point",M);z.Ai(M);z.me(M,{x:!0,y:!0});M.prototype.assign=function(a){this.L=a.L;this.M=a.M};M.prototype.setTo=M.prototype.m=function(a,b){u&&(z.h(a,"number",M,"setTo:x"),z.h(b,"number",M,"setTo:y"));this.L=a;this.M=b;return this};M.prototype.set=M.prototype.set=function(a){u&&z.l(a,M,M,"set:p");this.Sa();this.L=a.L;this.M=a.M;return this};M.prototype.copy=function(){var a=new M;a.L=this.L;a.M=this.M;return a};f=M.prototype;f.Na=function(){this.I=!0;Object.freeze(this);return this};
f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.I=!0;return this};f.Za=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.I=!1;return this};f.Sa=function(a){if(this.I){var b="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
M.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new M(c,e)}return new M};M.stringify=function(a){return a instanceof M?a.x.toString()+" "+a.y.toString():a.toString()};M.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};M.prototype.equals=M.prototype.O=function(a){return a instanceof M?this.L===a.x&&this.M===a.y:!1};
M.prototype.equalTo=M.prototype.Ax=function(a,b){return this.L===a&&this.M===b};M.prototype.equalsApprox=M.prototype.Vc=function(a){return Q(this.L,a.x)&&Q(this.M,a.y)};M.prototype.add=M.prototype.add=function(a){u&&z.l(a,M,M,"add:p");this.Sa();this.L+=a.x;this.M+=a.y;return this};M.prototype.subtract=M.prototype.ro=function(a){u&&z.l(a,M,M,"subtract:p");this.Sa();this.L-=a.x;this.M-=a.y;return this};
M.prototype.offset=M.prototype.offset=function(a,b){u&&(z.p(a,M,"offset:dx"),z.p(b,M,"offset:dy"));this.Sa();this.L+=a;this.M+=b;return this};M.prototype.rotate=M.prototype.rotate=function(a){u&&z.p(a,M,"rotate:angle");this.Sa();if(0===a)return this;var b=this.L,c=this.M;if(0===b&&0===c)return this;var d=0,e=0;360<=a?a-=360:0>a&&(a+=360);90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(a=a*Math.PI/180,d=Math.cos(a),e=Math.sin(a));this.L=d*b-e*c;this.M=e*b+d*c;return this};
M.prototype.scale=M.prototype.scale=function(a,b){u&&(z.p(a,M,"scale:sx"),z.p(b,M,"scale:sy"));this.L*=a;this.M*=b;return this};M.prototype.distanceSquaredPoint=M.prototype.Ef=function(a){u&&z.l(a,M,M,"distanceSquaredPoint:p");var b=a.x-this.L;a=a.y-this.M;return b*b+a*a};M.prototype.distanceSquared=M.prototype.hq=function(a,b){u&&(z.p(a,M,"distanceSquared:px"),z.p(b,M,"distanceSquared:py"));var c=a-this.L,d=b-this.M;return c*c+d*d};
M.prototype.normalize=M.prototype.normalize=function(){this.Sa();var a=this.L,b=this.M,c=Math.sqrt(a*a+b*b);0<c&&(this.L=a/c,this.M=b/c);return this};M.prototype.directionPoint=M.prototype.Lc=function(a){u&&z.l(a,M,M,"directionPoint:p");return nb(a.x-this.L,a.y-this.M)};M.prototype.direction=M.prototype.direction=function(a,b){u&&(z.p(a,M,"direction:px"),z.p(b,M,"direction:py"));return nb(a-this.L,b-this.M)};
function nb(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}M.prototype.projectOntoLineSegment=function(a,b,c,d){u&&(z.p(a,M,"projectOntoLineSegment:px"),z.p(b,M,"projectOntoLineSegment:py"),z.p(c,M,"projectOntoLineSegment:qx"),z.p(d,M,"projectOntoLineSegment:qy"));ob(a,b,c,d,this.L,this.M,this);return this};
M.prototype.projectOntoLineSegmentPoint=function(a,b){u&&(z.l(a,M,M,"projectOntoLineSegmentPoint:p"),z.l(b,M,M,"projectOntoLineSegmentPoint:q"));ob(a.x,a.y,b.x,b.y,this.L,this.M,this);return this};M.prototype.snapToGrid=function(a,b,c,d){u&&(z.p(a,M,"snapToGrid:originx"),z.p(b,M,"snapToGrid:originy"),z.p(c,M,"snapToGrid:cellwidth"),z.p(d,M,"snapToGrid:cellheight"));tb(this.L,this.M,a,b,c,d,this);return this};
M.prototype.snapToGridPoint=function(a,b){u&&(z.l(a,M,M,"snapToGridPoint:p"),z.l(b,Fa,M,"snapToGridPoint:q"));tb(this.L,this.M,a.x,a.y,b.width,b.height,this);return this};M.prototype.setRectSpot=M.prototype.oo=function(a,b){u&&(z.l(a,w,M,"setRectSpot:r"),z.l(b,R,M,"setRectSpot:spot"));this.Sa();this.L=a.x+b.x*a.width+b.offsetX;this.M=a.y+b.y*a.height+b.offsetY;return this};
M.prototype.setSpot=M.prototype.Xu=function(a,b,c,d,e){u&&(z.p(a,M,"setSpot:x"),z.p(b,M,"setSpot:y"),z.p(c,M,"setSpot:w"),z.p(d,M,"setSpot:h"),(0>c||0>d)&&z.k("Point.setSpot:Width and height cannot be negative"),z.l(e,R,M,"setSpot:spot"));this.Sa();this.L=a+e.x*c+e.offsetX;this.M=b+e.y*d+e.offsetY;return this};M.prototype.transform=function(a){u&&z.l(a,Ga,M,"transform:t");a.wb(this);return this};function ub(a,b){u&&z.l(b,Ga,M,"transformInverted:t");b.Ci(a);return a}var xb;
M.distanceLineSegmentSquared=xb=function(a,b,c,d,e,g){u&&(z.p(a,M,"distanceLineSegmentSquared:px"),z.p(b,M,"distanceLineSegmentSquared:py"),z.p(c,M,"distanceLineSegmentSquared:ax"),z.p(d,M,"distanceLineSegmentSquared:ay"),z.p(e,M,"distanceLineSegmentSquared:bx"),z.p(g,M,"distanceLineSegmentSquared:by"));var h=e-c,k=g-d,l=h*h+k*k;c-=a;d-=b;var m=-c*h-d*k;if(0>=m||m>=l)return h=e-a,k=g-b,Math.min(c*c+d*d,h*h+k*k);a=h*d-k*c;return a*a/l};var yb;
M.distanceSquared=yb=function(a,b,c,d){u&&(z.p(a,M,"distanceSquared:px"),z.p(b,M,"distanceSquared:py"),z.p(c,M,"distanceSquared:qx"),z.p(d,M,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var zb;
M.direction=zb=function(a,b,c,d){u&&(z.p(a,M,"direction:px"),z.p(b,M,"direction:py"),z.p(c,M,"direction:qx"),z.p(d,M,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};z.defineProperty(M,{x:"x"},function(){return this.L},function(a){this.Sa(a);u&&z.h(a,"number",M,"x");this.L=a});
z.defineProperty(M,{y:"y"},function(){return this.M},function(a){this.Sa(a);u&&z.h(a,"number",M,"y");this.M=a});M.prototype.isReal=M.prototype.F=function(){return isFinite(this.x)&&isFinite(this.y)};function Fa(a,b){void 0===a?this.Ga=this.Ia=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.Ia=a,this.Ga=b):z.k("Invalid arguments to Size constructor: "+a+", "+b);this.I=!1}z.ka("Size",Fa);z.Ai(Fa);z.me(Fa,{width:!0,height:!0});
Fa.prototype.assign=function(a){this.Ia=a.Ia;this.Ga=a.Ga};Fa.prototype.setTo=Fa.prototype.m=function(a,b){u&&(z.h(a,"number",Fa,"setTo:w"),z.h(b,"number",Fa,"setTo:h"),0>a&&z.wa(a,">= 0",Fa,"setTo:w"),0>b&&z.wa(b,">= 0",Fa,"setTo:h"));this.Ia=a;this.Ga=b;return this};Fa.prototype.set=Fa.prototype.set=function(a){u&&z.l(a,Fa,Fa,"set:s");this.Sa();this.Ia=a.Ia;this.Ga=a.Ga;return this};Fa.prototype.copy=function(){var a=new Fa;a.Ia=this.Ia;a.Ga=this.Ga;return a};f=Fa.prototype;
f.Na=function(){this.I=!0;Object.freeze(this);return this};f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.I=!0;return this};f.Za=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.I=!1;return this};f.Sa=function(a){if(this.I){var b="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
Fa.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new Fa(c,e)}return new Fa};Fa.stringify=function(a){return a instanceof Fa?a.width.toString()+" "+a.height.toString():a.toString()};Fa.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
Fa.prototype.equals=Fa.prototype.O=function(a){return a instanceof Fa?this.Ia===a.width&&this.Ga===a.height:!1};Fa.prototype.equalTo=Fa.prototype.Ax=function(a,b){return this.Ia===a&&this.Ga===b};Fa.prototype.equalsApprox=Fa.prototype.Vc=function(a){return Q(this.Ia,a.width)&&Q(this.Ga,a.height)};z.defineProperty(Fa,{width:"width"},function(){return this.Ia},function(a){this.Sa(a);u&&z.h(a,"number",Fa,"width");0>a&&z.wa(a,">= 0",Fa,"width");this.Ia=a});
z.defineProperty(Fa,{height:"height"},function(){return this.Ga},function(a){this.Sa(a);u&&z.h(a,"number",Fa,"height");0>a&&z.wa(a,">= 0",Fa,"height");this.Ga=a});Fa.prototype.isReal=Fa.prototype.F=function(){return isFinite(this.width)&&isFinite(this.height)};
function w(a,b,c,d){void 0===a?this.Ga=this.Ia=this.M=this.L=0:a instanceof M?b instanceof M?(this.L=Math.min(a.L,b.L),this.M=Math.min(a.M,b.M),this.Ia=Math.abs(a.L-b.L),this.Ga=Math.abs(a.M-b.M)):b instanceof Fa?(this.L=a.L,this.M=a.M,this.Ia=b.Ia,this.Ga=b.Ga):z.k("Incorrect arguments supplied to Rect constructor"):"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.L=a,this.M=b,this.Ia=c,this.Ga=d):z.k("Invalid arguments to Rect constructor: "+
a+", "+b+", "+c+", "+d);this.I=!1}z.ka("Rect",w);z.Ai(w);z.me(w,{x:!0,y:!0,width:!0,height:!0});w.prototype.assign=function(a){this.L=a.L;this.M=a.M;this.Ia=a.Ia;this.Ga=a.Ga};function Ab(a,b,c){a.Ia=b;a.Ga=c}w.prototype.setTo=w.prototype.m=function(a,b,c,d){u&&(z.h(a,"number",w,"setTo:x"),z.h(b,"number",w,"setTo:y"),z.h(c,"number",w,"setTo:w"),z.h(d,"number",w,"setTo:h"),0>c&&z.wa(c,">= 0",w,"setTo:w"),0>d&&z.wa(d,">= 0",w,"setTo:h"));this.L=a;this.M=b;this.Ia=c;this.Ga=d;return this};
w.prototype.set=w.prototype.set=function(a){u&&z.l(a,w,w,"set:r");this.Sa();this.L=a.L;this.M=a.M;this.Ia=a.Ia;this.Ga=a.Ga;return this};w.prototype.setPoint=w.prototype.dh=function(a){u&&z.l(a,M,w,"setPoint:p");this.Sa();this.L=a.L;this.M=a.M;return this};w.prototype.setSize=function(a){u&&z.l(a,Fa,w,"setSize:s");this.Sa();this.Ia=a.Ia;this.Ga=a.Ga;return this};w.prototype.copy=function(){var a=new w;a.L=this.L;a.M=this.M;a.Ia=this.Ia;a.Ga=this.Ga;return a};f=w.prototype;
f.Na=function(){this.I=!0;Object.freeze(this);return this};f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.I=!0;return this};f.Za=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.I=!1;return this};f.Sa=function(a){if(this.I){var b="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
w.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var h=0;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return new w(c,e,g,h)}return new w};w.stringify=function(a){return a instanceof w?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
w.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};w.prototype.equals=w.prototype.O=function(a){return a instanceof w?this.L===a.x&&this.M===a.y&&this.Ia===a.width&&this.Ga===a.height:!1};w.prototype.equalTo=w.prototype.Ax=function(a,b,c,d){return this.L===a&&this.M===b&&this.Ia===c&&this.Ga===d};w.prototype.equalsApprox=w.prototype.Vc=function(a){return Q(this.L,a.x)&&Q(this.M,a.y)&&Q(this.Ia,a.width)&&Q(this.Ga,a.height)};
function Bb(a,b){return Db(a.L,b.x)&&Db(a.M,b.y)&&Db(a.Ia,b.width)&&Db(a.Ga,b.height)}w.prototype.containsPoint=w.prototype.Oa=function(a){u&&z.l(a,M,w,"containsPoint:p");return this.L<=a.x&&this.L+this.Ia>=a.x&&this.M<=a.y&&this.M+this.Ga>=a.y};w.prototype.containsRect=w.prototype.Lk=function(a){u&&z.l(a,w,w,"containsRect:r");return this.L<=a.x&&a.x+a.width<=this.L+this.Ia&&this.M<=a.y&&a.y+a.height<=this.M+this.Ga};
w.prototype.contains=w.prototype.contains=function(a,b,c,d){u?(z.p(a,w,"contains:x"),z.p(b,w,"contains:y"),void 0===c?c=0:z.p(c,w,"contains:w"),void 0===d?d=0:z.p(d,w,"contains:h"),(0>c||0>d)&&z.k("Rect.contains:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0));return this.L<=a&&a+c<=this.L+this.Ia&&this.M<=b&&b+d<=this.M+this.Ga};w.prototype.reset=function(){this.Sa();this.Ga=this.Ia=this.M=this.L=0};
w.prototype.offset=w.prototype.offset=function(a,b){u&&(z.p(a,w,"offset:dx"),z.p(b,w,"offset:dy"));this.Sa();this.L+=a;this.M+=b;return this};w.prototype.inflate=w.prototype.fg=function(a,b){u&&(z.p(a,w,"inflate:w"),z.p(b,w,"inflate:h"));return Fb(this,b,a,b,a)};w.prototype.addMargin=w.prototype.bx=function(a){u&&z.l(a,Kb,w,"addMargin:m");return Fb(this,a.top,a.right,a.bottom,a.left)};
w.prototype.subtractMargin=w.prototype.sK=function(a){u&&z.l(a,Kb,w,"subtractMargin:m");return Fb(this,-a.top,-a.right,-a.bottom,-a.left)};w.prototype.grow=function(a,b,c,d){u&&(z.p(a,w,"grow:t"),z.p(b,w,"grow:r"),z.p(c,w,"grow:b"),z.p(d,w,"grow:l"));return Fb(this,a,b,c,d)};function Fb(a,b,c,d,e){a.Sa();var g=a.Ia;c+e<=-g?(a.L+=g/2,a.Ia=0):(a.L-=e,a.Ia+=c+e);c=a.Ga;b+d<=-c?(a.M+=c/2,a.Ga=0):(a.M-=b,a.Ga+=b+d);return a}
w.prototype.intersectRect=function(a){u&&z.l(a,w,w,"intersectRect:r");return Lb(this,a.x,a.y,a.width,a.height)};w.prototype.intersect=w.prototype.zF=function(a,b,c,d){u&&(z.p(a,w,"intersect:x"),z.p(b,w,"intersect:y"),z.p(c,w,"intersect:w"),z.p(d,w,"intersect:h"),(0>c||0>d)&&z.k("Rect.intersect:Width and height cannot be negative"));return Lb(this,a,b,c,d)};
function Lb(a,b,c,d,e){a.Sa();var g=Math.max(a.L,b),h=Math.max(a.M,c);b=Math.min(a.L+a.Ia,b+d);c=Math.min(a.M+a.Ga,c+e);a.L=g;a.M=h;a.Ia=Math.max(0,b-g);a.Ga=Math.max(0,c-h);return a}w.prototype.intersectsRect=w.prototype.Vg=function(a){u&&z.l(a,w,w,"intersectsRect:r");return this.AF(a.x,a.y,a.width,a.height)};
w.prototype.intersects=w.prototype.AF=function(a,b,c,d){u&&(z.p(a,w,"intersects:x"),z.p(b,w,"intersects:y"),z.p(a,w,"intersects:w"),z.p(b,w,"intersects:h"),(0>c||0>d)&&z.k("Rect.intersects:Width and height cannot be negative"));var e=this.Ia,g=this.L;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return!1;a=this.Ga;c=this.M;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0};
function Qb(a,b){var c=a.Ia,d=b.width+10+10,e=a.L,g=b.x-10;if(e>d+g||g>c+e)return!1;c=a.Ga;d=b.height+10+10;e=a.M;g=b.y-10;return e>d+g||g>c+e?!1:!0}w.prototype.unionPoint=w.prototype.Ki=function(a){u&&z.l(a,M,w,"unionPoint:p");return Rb(this,a.x,a.y,0,0)};w.prototype.unionRect=w.prototype.Wh=function(a){u&&z.l(a,w,w,"unionRect:r");return Rb(this,a.L,a.M,a.Ia,a.Ga)};
w.prototype.union=w.prototype.$G=function(a,b,c,d){this.Sa();u?(z.p(a,w,"union:x"),z.p(b,w,"union:y"),void 0===c?c=0:z.p(c,w,"union:w"),void 0===d?d=0:z.p(d,w,"union:h"),(0>c||0>d)&&z.k("Rect.union:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0));return Rb(this,a,b,c,d)};function Rb(a,b,c,d,e){var g=Math.min(a.L,b),h=Math.min(a.M,c);b=Math.max(a.L+a.Ia,b+d);c=Math.max(a.M+a.Ga,c+e);a.L=g;a.M=h;a.Ia=b-g;a.Ga=c-h;return a}
w.prototype.setSpot=w.prototype.Xu=function(a,b,c){u&&(z.p(a,w,"setSpot:x"),z.p(b,w,"setSpot:y"),z.l(c,R,w,"setSpot:spot"));this.Sa();this.L=a-c.offsetX-c.x*this.Ia;this.M=b-c.offsetY-c.y*this.Ga;return this};var Sb;
w.contains=Sb=function(a,b,c,d,e,g,h,k){u?(z.p(a,w,"contains:rx"),z.p(b,w,"contains:ry"),z.p(c,w,"contains:rw"),z.p(d,w,"contains:rh"),z.p(e,w,"contains:x"),z.p(g,w,"contains:y"),void 0===h?h=0:z.p(h,w,"contains:w"),void 0===k?k=0:z.p(k,w,"contains:h"),(0>c||0>d||0>h||0>k)&&z.k("Rect.contains:Width and height cannot be negative")):(void 0===h&&(h=0),void 0===k&&(k=0));return a<=e&&e+h<=a+c&&b<=g&&g+k<=b+d};
w.intersects=function(a,b,c,d,e,g,h,k){u&&(z.p(a,w,"intersects:rx"),z.p(b,w,"intersects:ry"),z.p(c,w,"intersects:rw"),z.p(d,w,"intersects:rh"),z.p(e,w,"intersects:x"),z.p(g,w,"intersects:y"),z.p(h,w,"intersects:w"),z.p(k,w,"intersects:h"),(0>c||0>d||0>h||0>k)&&z.k("Rect.intersects:Width and height cannot be negative"));c+=a;h+=e;if(a>h||e>c)return!1;a=d+b;k+=g;return b>k||g>a?!1:!0};z.defineProperty(w,{x:"x"},function(){return this.L},function(a){this.Sa(a);u&&z.h(a,"number",w,"x");this.L=a});
z.defineProperty(w,{y:"y"},function(){return this.M},function(a){this.Sa(a);u&&z.h(a,"number",w,"y");this.M=a});z.defineProperty(w,{width:"width"},function(){return this.Ia},function(a){this.Sa(a);u&&z.h(a,"number",w,"width");0>a&&z.wa(a,">= 0",w,"width");this.Ia=a});z.defineProperty(w,{height:"height"},function(){return this.Ga},function(a){this.Sa(a);u&&z.h(a,"number",w,"height");0>a&&z.wa(a,">= 0",w,"height");this.Ga=a});
z.defineProperty(w,{left:"left"},function(){return this.L},function(a){this.Sa(a);u&&z.h(a,"number",w,"left");this.L=a});z.defineProperty(w,{top:"top"},function(){return this.M},function(a){this.Sa(a);u&&z.h(a,"number",w,"top");this.M=a});z.defineProperty(w,{right:"right"},function(){return this.L+this.Ia},function(a){this.Sa(a);u&&z.p(a,w,"right");this.L+=a-(this.L+this.Ia)});
z.defineProperty(w,{bottom:"bottom"},function(){return this.M+this.Ga},function(a){this.Sa(a);u&&z.p(a,w,"top");this.M+=a-(this.M+this.Ga)});z.defineProperty(w,{position:"position"},function(){return new M(this.L,this.M)},function(a){this.Sa(a);u&&z.l(a,M,w,"position");this.L=a.x;this.M=a.y});z.defineProperty(w,{size:"size"},function(){return new Fa(this.Ia,this.Ga)},function(a){this.Sa(a);u&&z.l(a,Fa,w,"size");this.Ia=a.width;this.Ga=a.height});
z.defineProperty(w,{$l:"center"},function(){return new M(this.L+this.Ia/2,this.M+this.Ga/2)},function(a){this.Sa(a);u&&z.l(a,M,w,"center");this.L=a.x-this.Ia/2;this.M=a.y-this.Ga/2});z.defineProperty(w,{oa:"centerX"},function(){return this.L+this.Ia/2},function(a){this.Sa(a);u&&z.p(a,w,"centerX");this.L=a-this.Ia/2});z.defineProperty(w,{xa:"centerY"},function(){return this.M+this.Ga/2},function(a){this.Sa(a);u&&z.p(a,w,"centerY");this.M=a-this.Ga/2});
w.prototype.isReal=w.prototype.F=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};w.prototype.isEmpty=function(){return 0===this.width&&0===this.height};
function Kb(a,b,c,d){void 0===a?this.th=this.mh=this.Ch=this.Dh=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):z.k("Invalid arguments to Margin constructor: "+a+", "+b+", "+c+", "+d);this.I=!1}z.ka("Margin",Kb);z.Ai(Kb);z.me(Kb,{top:!0,right:!0,bottom:!0,left:!0});Kb.prototype.assign=function(a){this.Dh=a.Dh;this.Ch=a.Ch;this.mh=a.mh;this.th=a.th};
Kb.prototype.setTo=Kb.prototype.m=function(a,b,c,d){u&&(z.h(a,"number",Kb,"setTo:t"),z.h(b,"number",Kb,"setTo:r"),z.h(c,"number",Kb,"setTo:b"),z.h(d,"number",Kb,"setTo:l"));this.Sa();this.Dh=a;this.Ch=b;this.mh=c;this.th=d;return this};Kb.prototype.set=Kb.prototype.set=function(a){u&&z.l(a,Kb,Kb,"assign:m");this.Sa();this.Dh=a.Dh;this.Ch=a.Ch;this.mh=a.mh;this.th=a.th;return this};Kb.prototype.copy=function(){var a=new Kb;a.Dh=this.Dh;a.Ch=this.Ch;a.mh=this.mh;a.th=this.th;return a};f=Kb.prototype;
f.Na=function(){this.I=!0;Object.freeze(this);return this};f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.I=!0;return this};f.Za=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.I=!1;return this};f.Sa=function(a){if(this.I){var b="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
Kb.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=NaN;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));if(isNaN(c))return new Kb;for(var e=NaN;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));if(isNaN(e))return new Kb(c);for(var g=NaN;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));if(isNaN(g))return new Kb(c,e);for(var h=NaN;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return isNaN(h)?new Kb(c,e):new Kb(c,e,g,h)}return new Kb};
Kb.stringify=function(a){return a instanceof Kb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};Kb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};Kb.prototype.equals=Kb.prototype.O=function(a){return a instanceof Kb?this.Dh===a.top&&this.Ch===a.right&&this.mh===a.bottom&&this.th===a.left:!1};
Kb.prototype.equalTo=Kb.prototype.Ax=function(a,b,c,d){return this.Dh===a&&this.Ch===b&&this.mh===c&&this.th===d};Kb.prototype.equalsApprox=Kb.prototype.Vc=function(a){return Q(this.Dh,a.top)&&Q(this.Ch,a.right)&&Q(this.mh,a.bottom)&&Q(this.th,a.left)};z.defineProperty(Kb,{top:"top"},function(){return this.Dh},function(a){this.Sa(a);u&&z.p(a,Kb,"top");this.Dh=a});z.defineProperty(Kb,{right:"right"},function(){return this.Ch},function(a){this.Sa(a);u&&z.p(a,Kb,"right");this.Ch=a});
z.defineProperty(Kb,{bottom:"bottom"},function(){return this.mh},function(a){this.Sa(a);u&&z.p(a,Kb,"bottom");this.mh=a});z.defineProperty(Kb,{left:"left"},function(){return this.th},function(a){this.Sa(a);u&&z.p(a,Kb,"left");this.th=a});Kb.prototype.isReal=Kb.prototype.F=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function Ga(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}z.Ai(Ga);
z.me(Ga,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0});Ga.prototype.set=Ga.prototype.set=function(a){u&&z.l(a,Ga,Ga,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};Ga.prototype.copy=function(){var a=new Ga;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};Ga.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};
Ga.prototype.equals=Ga.prototype.O=function(a){return a instanceof Ga?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1};Ga.prototype.isIdentity=Ga.prototype.uu=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};Ga.prototype.reset=Ga.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0;return this};
Ga.prototype.multiply=Ga.prototype.multiply=function(a){u&&z.l(a,Ga,Ga,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
Ga.prototype.multiplyInverted=Ga.prototype.fB=function(a){u&&z.l(a,Ga,Ga,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,h=b*(a.m21*a.dy-a.m22*a.dx),k=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*g;e=this.m12*e+this.m22*g;g=this.m11*h+this.m21*k+this.dx;h=this.m12*h+this.m22*k+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=g;this.dy=h;return this};
Ga.prototype.invert=Ga.prototype.Mx=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),g=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
Ga.prototype.rotate=Ga.prototype.rotate=function(a,b,c){u&&(z.p(a,Ga,"rotate:angle"),z.p(b,Ga,"rotate:rx"),z.p(c,Ga,"rotate:ry"));360<=a?a-=360:0>a&&(a+=360);if(0===a)return this;this.translate(b,c);var d=0,e=0;90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(e=a*Math.PI/180,d=Math.cos(e),e=Math.sin(e));a=this.m12*d+this.m22*e;var g=this.m11*-e+this.m21*d,h=this.m12*-e+this.m22*d;this.m11=this.m11*d+this.m21*e;this.m12=a;this.m21=g;this.m22=h;this.translate(-b,-c);return this};
Ga.prototype.translate=Ga.prototype.translate=function(a,b){u&&(z.p(a,Ga,"translate:x"),z.p(b,Ga,"translate:y"));this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b;return this};Ga.prototype.scale=Ga.prototype.scale=function(a,b){void 0===b&&(b=a);u&&(z.p(a,Ga,"translate:sx"),z.p(b,Ga,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b;return this};
Ga.prototype.transformPoint=Ga.prototype.wb=function(a){u&&z.l(a,M,Ga,"transformPoint:p");var b=a.L,c=a.M;a.L=b*this.m11+c*this.m21+this.dx;a.M=b*this.m12+c*this.m22+this.dy;return a};Ga.prototype.invertedTransformPoint=Ga.prototype.Ci=function(a){u&&z.l(a,M,Ga,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),g=a.L,h=a.M;a.L=g*this.m22*b+h*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.M=g*c+h*d+e;return a};
Ga.prototype.transformRect=Ga.prototype.ZG=function(a){u&&z.l(a,w,Ga,"transformRect:rect");var b=a.L,c=a.M,d=b+a.Ia,e=c+a.Ga,g=this.m11,h=this.m12,k=this.m21,l=this.m22,m=this.dx,n=this.dy,p=b*g+c*k+m,q=b*h+c*l+n,r=d*g+c*k+m,c=d*h+c*l+n,s=b*g+e*k+m,b=b*h+e*l+n,g=d*g+e*k+m,d=d*h+e*l+n,e=p,h=q,p=Math.min(p,r),e=Math.max(e,r),h=Math.min(h,c),q=Math.max(q,c),p=Math.min(p,s),e=Math.max(e,s),h=Math.min(h,b),q=Math.max(q,b),p=Math.min(p,g),e=Math.max(e,g),h=Math.min(h,d),q=Math.max(q,d);a.L=p;a.M=h;a.Ia=
e-p;a.Ga=q-h;return a};function R(a,b,c,d){void 0===a?this.Jg=this.Ig=this.M=this.L=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d);this.I=!1}z.ka("Spot",R);z.Ai(R);z.me(R,{x:!0,y:!0,offsetX:!0,offsetY:!0});R.prototype.assign=function(a){this.L=a.L;this.M=a.M;this.Ig=a.Ig;this.Jg=a.Jg};
R.prototype.setTo=R.prototype.m=function(a,b,c,d){u&&(Vb(a,"setTo:x"),Vb(b,"setTo:y"),Zb(c,"setTo:offx"),Zb(d,"setTo:offy"));this.Sa();this.L=a;this.M=b;this.Ig=c;this.Jg=d;return this};R.prototype.set=R.prototype.set=function(a){u&&z.l(a,R,R,"set:s");this.Sa();this.L=a.L;this.M=a.M;this.Ig=a.Ig;this.Jg=a.Jg;return this};R.prototype.copy=function(){var a=new R;a.L=this.L;a.M=this.M;a.Ig=this.Ig;a.Jg=this.Jg;return a};f=R.prototype;f.Na=function(){this.I=!0;Object.freeze(this);return this};
f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.I=!0;return this};f.Za=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.I=!1;return this};f.Sa=function(a){if(this.I){var b="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};function $b(a,b){a.L=NaN;a.M=NaN;a.Ig=b;return a}function Vb(a,b){(isNaN(a)||1<a||0>a)&&z.wa(a,"0 <= "+b+" <= 1",R,b)}
function Zb(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&z.wa(a,"real number, not NaN or Infinity",R,b)}var fc;
R.parse=fc=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return gc;if("TopLeft"===a)return hc;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return ic;if("TopRight"===a)return jc;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return lc;if("Center"===a)return mc;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return nc;if("BottomLeft"===a)return oc;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return pc;if("BottomRight"===a)return qc;if("TopSide"===a)return rc;if("LeftSide"===
a)return sc;if("RightSide"===a)return xc;if("BottomSide"===a)return yc;if("TopBottomSides"===a)return Bc;if("LeftRightSides"===a)return Cc;if("TopLeftSides"===a)return Dc;if("TopRightSides"===a)return Ec;if("BottomLeftSides"===a)return Fc;if("BottomRightSides"===a)return Gc;if("NotTopSide"===a)return Hc;if("NotLeftSide"===a)return Nc;if("NotRightSide"===a)return Oc;if("NotBottomSide"===a)return Pc;if("AllSides"===a)return Qc;if("Default"===a)return Rc;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;
var d=a[b++];void 0!==d&&0<d.length&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(g=parseFloat(d));for(var h=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(h=parseFloat(d));return new R(c,e,g,h)}return new R};R.stringify=function(a){return a instanceof R?a.jd()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
R.prototype.toString=function(){return this.jd()?0===this.Ig&&0===this.Jg?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.O(gc)?"None":this.O(hc)?"TopLeft":this.O(ic)?"Top":this.O(jc)?"TopRight":this.O(lc)?"Left":this.O(mc)?"Center":this.O(nc)?"Right":this.O(oc)?"BottomLeft":this.O(pc)?"Bottom":this.O(qc)?"BottomRight":this.O(rc)?"TopSide":this.O(sc)?"LeftSide":this.O(xc)?"RightSide":this.O(yc)?"BottomSide":this.O(Bc)?"TopBottomSides":this.O(Cc)?
"LeftRightSides":this.O(Dc)?"TopLeftSides":this.O(Ec)?"TopRightSides":this.O(Fc)?"BottomLeftSides":this.O(Gc)?"BottomRightSides":this.O(Hc)?"NotTopSide":this.O(Nc)?"NotLeftSide":this.O(Oc)?"NotRightSide":this.O(Pc)?"NotBottomSide":this.O(Qc)?"AllSides":this.O(Rc)?"Default":"None"};R.prototype.equals=R.prototype.O=function(a){return a instanceof R?(this.L===a.x||isNaN(this.L)&&isNaN(a.x))&&(this.M===a.y||isNaN(this.M)&&isNaN(a.y))&&this.Ig===a.offsetX&&this.Jg===a.offsetY:!1};
R.prototype.opposite=R.prototype.cG=function(){return new R(.5-(this.L-.5),.5-(this.M-.5),-this.Ig,-this.Jg)};R.prototype.includesSide=R.prototype.Fj=function(a){if(!this.Gj())return!1;if(!a.Gj())if(a.O(Sc))a=sc;else if(a.O(Tc))a=xc;else if(a.O(Uc))a=rc;else if(a.O(Vc))a=yc;else return!1;a=a.offsetY;return(this.Jg&a)===a};z.defineProperty(R,{x:"x"},function(){return this.L},function(a){this.Sa(a);u&&Vb(a,"x");this.L=a});
z.defineProperty(R,{y:"y"},function(){return this.M},function(a){this.Sa(a);u&&Vb(a,"y");this.M=a});z.defineProperty(R,{offsetX:"offsetX"},function(){return this.Ig},function(a){this.Sa(a);u&&Zb(a,"offsetX");this.Ig=a});z.defineProperty(R,{offsetY:"offsetY"},function(){return this.Jg},function(a){this.Sa(a);u&&Zb(a,"offsetY");this.Jg=a});R.prototype.isSpot=R.prototype.jd=function(){return!isNaN(this.x)&&!isNaN(this.y)};R.prototype.isNoSpot=R.prototype.$d=function(){return isNaN(this.x)||isNaN(this.y)};
R.prototype.isSide=R.prototype.Gj=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY};R.prototype.isNone=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY};R.prototype.isDefault=R.prototype.hd=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var gc;R.None=gc=$b(new R(0,0,0,0),0).Na();var Rc;R.Default=Rc=$b(new R(0,0,-1,0),-1).Na();var hc;R.TopLeft=hc=(new R(0,0,0,0)).Na();var ic;
R.TopCenter=ic=(new R(.5,0,0,0)).Na();var jc;R.TopRight=jc=(new R(1,0,0,0)).Na();var lc;R.LeftCenter=lc=(new R(0,.5,0,0)).Na();var mc;R.Center=mc=(new R(.5,.5,0,0)).Na();var nc;R.RightCenter=nc=(new R(1,.5,0,0)).Na();var oc;R.BottomLeft=oc=(new R(0,1,0,0)).Na();var pc;R.BottomCenter=pc=(new R(.5,1,0,0)).Na();var qc;R.BottomRight=qc=(new R(1,1,0,0)).Na();var $c;R.MiddleTop=$c=ic;var ad;R.MiddleLeft=ad=lc;var bd;R.MiddleRight=bd=nc;var cd;R.MiddleBottom=cd=pc;var Uc;R.Top=Uc=ic;var Sc;R.Left=Sc=lc;
var Tc;R.Right=Tc=nc;var Vc;R.Bottom=Vc=pc;var rc;R.TopSide=rc=$b(new R(0,0,1,z.xd),1).Na();var sc;R.LeftSide=sc=$b(new R(0,0,1,z.ad),1).Na();var xc;R.RightSide=xc=$b(new R(0,0,1,z.od),1).Na();var yc;R.BottomSide=yc=$b(new R(0,0,1,z.nd),1).Na();var Bc;R.TopBottomSides=Bc=$b(new R(0,0,1,z.xd|z.nd),1).Na();var Cc;R.LeftRightSides=Cc=$b(new R(0,0,1,z.ad|z.od),1).Na();var Dc;R.TopLeftSides=Dc=$b(new R(0,0,1,z.xd|z.ad),1).Na();var Ec;R.TopRightSides=Ec=$b(new R(0,0,1,z.xd|z.od),1).Na();var Fc;
R.BottomLeftSides=Fc=$b(new R(0,0,1,z.nd|z.ad),1).Na();var Gc;R.BottomRightSides=Gc=$b(new R(0,0,1,z.nd|z.od),1).Na();var Hc;R.NotTopSide=Hc=$b(new R(0,0,1,z.ad|z.od|z.nd),1).Na();var Nc;R.NotLeftSide=Nc=$b(new R(0,0,1,z.xd|z.od|z.nd),1).Na();var Oc;R.NotRightSide=Oc=$b(new R(0,0,1,z.xd|z.ad|z.nd),1).Na();var Pc;R.NotBottomSide=Pc=$b(new R(0,0,1,z.xd|z.ad|z.od),1).Na();var Qc;R.AllSides=Qc=$b(new R(0,0,1,z.xd|z.ad|z.od|z.nd),1).Na();function dd(){this.Yb=[1,0,0,1,0,0]}
dd.prototype.copy=function(){var a=new dd;a.Yb[0]=this.Yb[0];a.Yb[1]=this.Yb[1];a.Yb[2]=this.Yb[2];a.Yb[3]=this.Yb[3];a.Yb[4]=this.Yb[4];a.Yb[5]=this.Yb[5];return a};dd.prototype.translate=function(a,b){this.Yb[4]+=this.Yb[0]*a+this.Yb[2]*b;this.Yb[5]+=this.Yb[1]*a+this.Yb[3]*b};dd.prototype.scale=function(a,b){this.Yb[0]*=a;this.Yb[1]*=a;this.Yb[2]*=b;this.Yb[3]*=b};function ed(a){this.type=a;this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0;this.FE=[];this.pattern=null}
ed.prototype.addColorStop=function(a,b){this.FE.push({offset:a,color:b})};
function md(a,b,c){this.fillStyle="#000000";this.font="10px sans-serif";this.globalAlpha=1;this.lineCap="butt";this.bo=0;this.lineJoin="miter";this.lineWidth=1;this.miterLimit=10;this.shadowBlur=0;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowOffsetY=this.shadowOffsetX=0;this.strokeStyle="#000000";this.textAlign="start";this.Wt=!1;this.Lg=this.pt=this.ot=0;this.document=b||document;this.$E=c;this.Wx=null;this.path=[];this.Lh=new dd;this.stack=[];this.Gf=[];this.yx=a;this.NJ="http://www.w3.org/2000/svg";
this.width=this.yx.width;this.height=this.yx.height;this.ym=nd(this,"svg",{width:this.width+"px",height:this.height+"px",JM:"0 0 "+this.yx.width+" "+this.yx.height});this.ym.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");this.ym.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");od(this,1,0,0,1,0,0);a=z.Em++;b=nd(this,"clipPath",{id:"mainClip"+a});b.appendChild(nd(this,"rect",{x:0,y:0,width:this.width,height:this.height}));
this.ym.appendChild(b);this.Gf[0].setAttributeNS(null,"clip-path","url(#mainClip"+a+")")}f=md.prototype;f.arc=function(a,b,c,d,e,g){pd(this,a,b,c,d,e,g)};f.beginPath=function(){this.path=[]};f.bezierCurveTo=function(a,b,c,d,e,g){this.path.push(["C",a,b,c,d,e,g])};f.clearRect=function(){};f.clip=function(){qd(this,"clipPath",this.path,new dd)};f.closePath=function(){this.path.push(["z"])};f.createLinearGradient=function(a,b,c,d){var e=new ed("linear");e.x1=a;e.y1=b;e.x2=c;e.y2=d;return e};
f.createPattern=function(a){var b=new ed("pattern");b.pattern=a;return b};f.createRadialGradient=function(a,b,c,d,e,g){var h=new ed("radial");h.x1=a;h.y1=b;h.r1=c;h.x2=d;h.y2=e;h.r2=g;return h};
f.drawImage=function(a,b,c,d,e,g,h,k,l){var m="";a instanceof HTMLCanvasElement&&(m=a.toDataURL());a instanceof HTMLImageElement&&(m=a.src);m={x:0,y:0,width:a.naturalWidth,height:a.naturalHeight,href:m};m.preserveAspectRatio=Db(d,k)&&Db(e,l)?"xMidYMid slice":"none";var n="";k/=d;l/=e;if(0!==g||0!==h)n+=" translate("+g+", "+h+")";if(1!==k||1!==l)n+=" scale("+k+", "+l+")";if(0!==b||0!==c)n+=" translate("+-b+", "+-c+")";if(0!==b||0!==c||d!==a.naturalWidth||e!==a.naturalHeight)a="CLIP"+z.Em++,g=nd(this,
"clipPath",{id:a}),g.appendChild(nd(this,"rect",{x:b,y:c,width:d,height:e})),this.ym.appendChild(g),m["clip-path"]="url(#"+a+")";xd(this,"image",m,this.Lh,n);this.addElement("image",m)};f.fill=function(){qd(this,"fill",this.path,this.Lh)};f.Tg=function(){this.Wt?this.clip():this.fill()};f.fillRect=function(a,b,c,d){yd(this,"fill",[a,b,c,d],this.Lh)};
f.fillText=function(a,b,c){a=[a,b,c];b=this.textAlign;"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle");b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b};xd(this,"fill",b,this.Lh);this.addElement("text",b,a[0])};f.lineTo=function(a,b){this.path.push(["L",a,b])};f.moveTo=function(a,b){this.path.push(["M",a,b])};f.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])};f.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])};
f.restore=function(){this.Lh=this.stack.pop();this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle;this.font=a.font;this.globalAlpha=a.globalAlpha;this.lineCap=a.lineCap;this.bo=a.bo;this.lineJoin=a.lineJoin;this.lineWidth=a.lineWidth;this.miterLimit=a.miterLimit;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.shadowOffsetX=a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.strokeStyle=a.strokeStyle;this.textAlign=a.textAlign};
f.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,bo:this.bo,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a);this.stack.push(this.Lh.copy())};
f.setTransform=function(a,b,c,d,e,g){1===a&&0===b&&0===c&&1===d&&0===e&&0===g||od(this,a,b,c,d,e,g)};f.scale=function(a,b){this.Lh.scale(a,b)};f.translate=function(a,b){this.Lh.translate(a,b)};f.stroke=function(){qd(this,"stroke",this.path,this.Lh)};f.Rj=function(){this.Fo||this.stroke()};f.strokeRect=function(a,b,c,d){yd(this,"stroke",[a,b,c,d],this.Lh)};
function nd(a,b,c,d){a=a.document.createElementNS(a.NJ,b);if(z.Xa(c))for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);void 0!==d&&(a.textContent=d);return a}f.addElement=function(a,b,c){a=nd(this,a,b,c);0<this.Gf.length?this.Gf[this.Gf.length-1].appendChild(a):this.ym.appendChild(a);return this.Wx=a};
function xd(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha);"fill"===b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof ed?zd(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"===b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof ed?zd(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit);d=d.Yb;d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")";void 0!==e&&(d+=e);c.transform=d}
function zd(a,b){var c="GRAD"+z.Em++,d;if("linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=nd(a,"linearGradient",d);else if("radial"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=nd(a,"radialGradient",d);else if("pattern"===b.type){var e=b.pattern;d={width:e.width,height:e.height,id:c,patternUnits:"userSpaceOnUse"};var g="";e instanceof HTMLCanvasElement&&(g=e.toDataURL());e instanceof HTMLImageElement&&(g=e.src);e={x:0,y:0,width:e.width,
height:e.height,href:g};d=nd(a,"pattern",d);d.appendChild(nd(a,"image",e))}else throw Error("invalid gradient");for(var e=b.FE,g=e.length,h=[],k=0;k<g;k++){var l=e[k],m=l.color,l={offset:l.offset,"stop-color":m};/^rgba\(/.test(m)&&(m=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m),l["stop-color"]="rgb("+m[1]+","+m[2]+","+m[3]+")",l["stop-opacity"]=m[4]);h.push(l)}h.sort(function(a,b){return a.offset>b.offset?1:-1});for(k=0;k<g;k++)d.appendChild(nd(a,"stop",
h[k]));a.ym.appendChild(d);return"url(#"+c+")"}function yd(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]};xd(a,b,c,d);a.addElement("rect",c)}
function qd(a,b,c,d){for(var e=[],g=0;g<c.length;g++){var h=z.am(c[g]),k=[h.shift()];if("A"===k[0])k.push(h.shift()+","+h.shift(),h.shift(),h.shift()+","+h.shift(),h.shift()+","+h.shift());else for(;h.length;)k.push(h.shift()+","+h.shift());e.push(k.join(" "))}c={d:e.join(" ")};xd(a,b,c,d);"clipPath"===b?(b="CLIP"+z.Em++,d=nd(a,"clipPath",{id:b}),d.appendChild(nd(a,"path",c)),a.ym.appendChild(d),0<a.Gf.length&&a.Gf[a.Gf.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",
c)}function pd(a,b,c,d,e,g,h){var k=Math.abs(e-g);if(e!==g){var l=b+d*Math.cos(g);g=c+d*Math.sin(g);k>=2*Math.PI?(pd(a,b,c,d,e,e+Math.PI,h),pd(a,b,c,d,e+Math.PI,e+2*Math.PI,h),a.path.push(["M",l,g])):(b+=d*Math.cos(e),c+=d*Math.sin(e),k=180*k/Math.PI,e=h?0:1,h=180<=k===!!h?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,k,h,e,l,g]))}}function od(a,b,c,d,e,g,h){var k=new dd;k.Yb=[b,c,d,e,g,h];b={};xd(a,"g",b,k);k=a.addElement("g",b);a.Gf.push(k)}
f.hb=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var a="SHADOW"+z.Em++,b=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),c,d,e,g,h;c=nd(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",zM:this.shadowBlur/2});d=nd(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor});e=nd(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"});g=nd(this,"feOffset",{"in":"comp",result:"offsetBlur",
dx:this.shadowOffsetX,dy:this.shadowOffsetY});h=nd(this,"feMerge",{});h.appendChild(nd(this,"feMergeNode",{"in":"offsetBlur"}));h.appendChild(nd(this,"feMergeNode",{"in":"SourceGraphic"}));b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(g);b.appendChild(h);0<this.Gf.length&&this.Gf[this.Gf.length-1].setAttributeNS(null,"filter","url(#"+a+")")}};f.FB=function(a,b,c){this.ot=a;this.pt=b;this.Lg=c};f.po=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0};
f.qo=function(){this.shadowOffsetX=this.ot;this.shadowOffsetY=this.pt;this.shadowBlur=this.Lg};f.AA=function(){return!1};f.vA=function(){};function ma(a,b){this.ownerDocument=void 0===b?document:b;var c=this.ownerDocument.createElement("canvas");c.tabIndex=0;this.Fd=c;this.Mk=new Ad(c);c.ca=a;Object.seal(this)}f=ma.prototype;f.toDataURL=function(a,b){return this.Fd.toDataURL(a,b)};f.getBoundingClientRect=function(){return this.Fd.getBoundingClientRect()};f.focus=function(){return this.Fd.focus()};
f.addEventListener=function(a,b,c){this.Fd.addEventListener(a,b,c)};f.removeEventListener=function(a,b,c){this.Fd.removeEventListener(a,b,c)};z.defineProperty(ma,{width:"width"},function(){return this.Fd.width},function(a){this.Fd.width=a});z.defineProperty(ma,{height:"height"},function(){return this.Fd.height},function(a){this.Fd.height=a});z.defineProperty(ma,{style:"style"},function(){return this.Fd.style},function(a){this.Fd.style=a});
function Ad(a){a.getContext&&a.getContext("2d")||z.k("Browser does not support HTML Canvas Element");this.Fa=a.getContext("2d");this.Vy=this.Xy=this.Wy="";this.Fo=!1;this.Lg=this.pt=this.ot=0;Object.seal(this)}z.defineProperty(Ad,{fillStyle:"fillStyle"},function(){return this.Fa.fillStyle},function(a){this.Vy!==a&&(this.Vy=this.Fa.fillStyle=a)});z.defineProperty(Ad,{font:"font"},function(){return this.Fa.font},function(a){this.Wy!==a&&(this.Wy=this.Fa.font=a)});
z.defineProperty(Ad,{globalAlpha:"globalAlpha"},function(){return this.Fa.globalAlpha},function(a){this.Fa.globalAlpha=a});z.defineProperty(Ad,{lineCap:"lineCap"},function(){return this.Fa.lineCap},function(a){this.Fa.lineCap=a});z.defineProperty(Ad,{bo:"lineDashOffset"},function(){return this.Fa.bo},function(a){this.Fa.bo=a});z.defineProperty(Ad,{lineJoin:"lineJoin"},function(){return this.Fa.lineJoin},function(a){this.Fa.lineJoin=a});
z.defineProperty(Ad,{lineWidth:"lineWidth"},function(){return this.Fa.lineWidth},function(a){this.Fa.lineWidth=a});z.defineProperty(Ad,{miterLimit:"miterLimit"},function(){return this.Fa.miterLimit},function(a){this.Fa.miterLimit=a});z.defineProperty(Ad,{shadowBlur:"shadowBlur"},function(){return this.Fa.shadowBlur},function(a){this.Fa.shadowBlur=a});z.defineProperty(Ad,{shadowColor:"shadowColor"},function(){return this.Fa.shadowColor},function(a){this.Fa.shadowColor=a});
z.defineProperty(Ad,{shadowOffsetX:"shadowOffsetX"},function(){return this.Fa.shadowOffsetX},function(a){this.Fa.shadowOffsetX=a});z.defineProperty(Ad,{shadowOffsetY:"shadowOffsetY"},function(){return this.Fa.shadowOffsetY},function(a){this.Fa.shadowOffsetY=a});z.defineProperty(Ad,{strokeStyle:"strokeStyle"},function(){return this.Fa.strokeStyle},function(a){this.Xy!==a&&(this.Xy=this.Fa.strokeStyle=a)});
z.defineProperty(Ad,{textAlign:"textAlign"},function(){return this.Fa.textAlign},function(a){this.Fa.textAlign=a});z.defineProperty(Ad,{nu:"imageSmoothingEnabled"},function(){return this.Fa.nu},function(a){this.Fa.nu=a});f=Ad.prototype;f.arc=function(a,b,c,d,e,g){this.Fa.arc(a,b,c,d,e,g)};f.beginPath=function(){this.Fa.beginPath()};f.bezierCurveTo=function(a,b,c,d,e,g){this.Fa.bezierCurveTo(a,b,c,d,e,g)};f.clearRect=function(a,b,c,d){this.Fa.clearRect(a,b,c,d)};f.clip=function(){this.Fa.clip()};
f.closePath=function(){this.Fa.closePath()};f.createLinearGradient=function(a,b,c,d){return this.Fa.createLinearGradient(a,b,c,d)};f.createPattern=function(a,b){return this.Fa.createPattern(a,b)};f.createRadialGradient=function(a,b,c,d,e,g){return this.Fa.createRadialGradient(a,b,c,d,e,g)};f.drawImage=function(a,b,c,d,e,g,h,k,l){void 0===d?this.Fa.drawImage(a,b,c):this.Fa.drawImage(a,b,c,d,e,g,h,k,l)};f.fill=function(){this.Fa.fill()};f.fillRect=function(a,b,c,d){this.Fa.fillRect(a,b,c,d)};
f.fillText=function(a,b,c){this.Fa.fillText(a,b,c)};f.getImageData=function(a,b,c,d){return this.Fa.getImageData(a,b,c,d)};f.lineTo=function(a,b){this.Fa.lineTo(a,b)};f.measureText=function(a){return this.Fa.measureText(a)};f.moveTo=function(a,b){this.Fa.moveTo(a,b)};f.quadraticCurveTo=function(a,b,c,d){this.Fa.quadraticCurveTo(a,b,c,d)};f.rect=function(a,b,c,d){this.Fa.rect(a,b,c,d)};f.restore=function(){this.Fa.restore()};Ad.prototype.rotate=function(a){this.Fa.rotate(a)};f=Ad.prototype;
f.save=function(){this.Fa.save()};f.setTransform=function(a,b,c,d,e,g){this.Fa.setTransform(a,b,c,d,e,g)};f.scale=function(a,b){this.Fa.scale(a,b)};f.stroke=function(){this.Fa.stroke()};f.transform=function(a,b,c,d,e,g){1===a&&0===b&&0===c&&1===d&&0===e&&0===g||this.Fa.transform(a,b,c,d,e,g)};f.translate=function(a,b){this.Fa.translate(a,b)};
f.Tg=function(a){if(a instanceof Ea&&a.type===Bd){var b=a.Io;a=a.az;a>b?(this.scale(b/a,1),this.translate((a-b)/2,0)):b>a&&(this.scale(1,a/b),this.translate(0,(b-a)/2));this.Fo?this.clip():this.fill();a>b?(this.translate(-(a-b)/2,0),this.scale(1/(b/a),1)):b>a&&(this.translate(0,-(b-a)/2),this.scale(1,1/(a/b)))}else this.Fo?this.clip():this.fill()};f.Rj=function(){this.Fo||this.stroke()};z.defineProperty(Ad,{Wt:"clipInsteadOfFill"},function(){return this.Fo},function(a){this.Fo=a});f=Ad.prototype;
f.FB=function(a,b,c){this.ot=a;this.pt=b;this.Lg=c};f.po=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0};f.qo=function(){this.shadowOffsetX=this.ot;this.shadowOffsetY=this.pt;this.shadowBlur=this.Lg};f.AA=function(a,b){var c=this.Fa;if(void 0!==c.setLineDash)c.setLineDash(a),c.lineDashOffset=b;else if(void 0!==c.webkitLineDash)c.webkitLineDash=a,c.webkitLineDashOffset=b;else if(void 0!==c.mozDash)c.mozDash=a,c.mozDashOffset=b;else return!1;return!0};
f.vA=function(){var a=this.Fa;void 0!==a.setLineDash?(a.setLineDash(z.bl),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=z.bl,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0)};function da(a,b){b&&(a.Wy="");a.Xy="";a.Vy=""}
var Cd=(Math.sqrt(2)-1)/3*4,Dd=(new M(0,0)).Na(),Ed=(new w(0,0,0,0)).Na(),Nd=(new Kb(0,0,0,0)).Na(),Od=(new Kb(2,2,2,2)).Na(),Pd=(new M(6,6)).Na(),Qd=(new M(-Infinity,-Infinity)).Na(),Rd=(new M(Infinity,Infinity)).Na(),Sd=(new Fa(0,0)).Na(),Td=(new Fa(1,1)).Na(),Ud=(new Fa(6,6)).Na(),Vd=(new Fa(8,8)).Na(),Wd=(new Fa(10,10)).Na(),ge=(new Fa(Infinity,Infinity)).Na(),he=(new M(NaN,NaN)).Na(),ie=(new Fa(NaN,NaN)).Na(),je=(new w(NaN,NaN,NaN,NaN)).Na(),ke=(new R(.156,.156)).Na(),le=(new R(.844,.844)).Na(),
me=new na,ne=new na,oe=null;function pe(a){if(0>=a)return 0;var b=oe;if(null===b){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);oe=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)}function Q(a,b){var c=a-b;return.5>c&&-.5<c}function Db(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function qe(a,b,c,d,e,g,h){0>=e&&(e=1E-6);var k=0,l=0,m=0,n=0;a<c?(l=a,k=c):(l=c,k=a);b<d?(n=b,m=d):(n=d,m=b);if(a===c)return n<=h&&h<=m&&a-e<=g&&g<=a+e;if(b===d)return l<=g&&g<=k&&b-e<=h&&h<=b+e;k+=e;l-=e;if(l<=g&&g<=k&&(m+=e,n-=e,n<=h&&h<=m))if(k-l>m-n)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=h&&h<=g+e)return!0}else return!0;else if(b-d>e||d-b>e){if(h=(c-a)/(d-b)*(h-b)+a,h-e<=g&&g<=h+e)return!0}else return!0;return!1}
function we(a,b,c,d,e,g,h,k,l,m,n,p){if(qe(a,b,h,k,p,c,d)&&qe(a,b,h,k,p,e,g))return qe(a,b,h,k,p,m,n);var q=(a+c)/2,r=(b+d)/2,s=(c+e)/2,v=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(q+s)/2;c=(r+v)/2;var s=(s+e)/2,v=(v+g)/2,t=(d+s)/2,x=(c+v)/2;return we(a,b,q,r,d,c,t,x,l,m,n,p)||we(t,x,s,v,e,g,h,k,l,m,n,p)}
function xe(a,b,c,d,e,g,h,k,l,m){if(qe(a,b,h,k,l,c,d)&&qe(a,b,h,k,l,e,g))Rb(m,a,b,0,0),Rb(m,h,k,0,0);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+g)/2,s=(d+q)/2,v=(c+r)/2;xe(a,b,n,p,d,c,s,v,l,m);xe(s,v,q,r,e,g,h,k,l,m)}}
function ye(a,b,c,d,e,g,h,k,l,m){if(qe(a,b,h,k,l,c,d)&&qe(a,b,h,k,l,e,g))0===m.length&&(m.push(a),m.push(b)),m.push(h),m.push(k);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+g)/2,s=(d+q)/2,v=(c+r)/2;ye(a,b,n,p,d,c,s,v,l,m);ye(s,v,q,r,e,g,h,k,l,m)}}
function ze(a,b,c,d,e,g,h,k,l,m,n,p,q,r){var s=1-l;a=a*s+c*l;b=b*s+d*l;c=c*s+e*l;d=d*s+g*l;e=e*s+h*l;g=g*s+k*l;k=a*s+c*l;h=b*s+d*l;c=c*s+e*l;d=d*s+g*l;m.x=a;m.y=b;n.x=k;n.y=h;p.x=k*s+c*l;p.y=h*s+d*l;q.x=c;q.y=d;r.x=e;r.y=g}function Ae(a,b,c,d,e,g,h,k,l,m){if(qe(a,b,e,g,m,c,d))return qe(a,b,e,g,m,k,l);var n=(a+c)/2,p=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var q=(n+c)/2,r=(p+d)/2;return Ae(a,b,n,p,q,r,h,k,l,m)||Ae(q,r,c,d,e,g,h,k,l,m)}
function Be(a,b,c,d,e,g,h,k){if(qe(a,b,e,g,h,c,d))Rb(k,a,b,0,0),Rb(k,e,g,0,0);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var n=(l+c)/2,p=(m+d)/2;Be(a,b,l,m,n,p,h,k);Be(n,p,c,d,e,g,h,k)}}function Ce(a,b,c,d,e,g,h,k){if(qe(a,b,e,g,h,c,d))0===k.length&&(k.push(a),k.push(b)),k.push(e),k.push(g);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var n=(l+c)/2,p=(m+d)/2;Ce(a,b,l,m,n,p,h,k);Ce(n,p,c,d,e,g,h,k)}}
function De(a,b,c,d,e,g,h,k,l,m,n,p,q,r){0>=q&&(q=1E-6);if(qe(a,b,h,k,q,c,d)&&qe(a,b,h,k,q,e,g)){var s=(a-h)*(m-p)-(b-k)*(l-n);if(0===s)return!1;q=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/s;s=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/s;if((l>n?l-n:n-l)<(m>p?m-p:p-m)){if(h=l=0,b<k?(l=b,h=k):(l=k,h=b),s<l||s>h)return!1}else if(a<h?l=a:(l=h,h=a),q<l||q>h)return!1;r.x=q;r.y=s;return!0}var s=(a+c)/2,v=(b+d)/2;c=(c+e)/2;d=(d+g)/2;e=(e+h)/2;g=(g+k)/2;var t=(s+c)/2,x=(v+d)/2;c=(c+e)/2;d=(d+g)/2;var y=(t+c)/2,B=(x+d)/2,
A=(n-l)*(n-l)+(p-m)*(p-m),N=!1;De(a,b,s,v,t,x,y,B,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<A&&(A=b,N=!0));a=r.x;s=r.y;De(y,B,c,d,e,g,h,k,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<A?N=!0:(r.x=a,r.y=s));return N}
function Ee(a,b,c,d,e,g,h,k,l,m,n,p,q){var r=0;0>=q&&(q=1E-6);if(qe(a,b,h,k,q,c,d)&&qe(a,b,h,k,q,e,g)){q=(a-h)*(m-p)-(b-k)*(l-n);if(0===q)return r;var s=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/q,v=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/q;if(s>=n)return r;if((l>n?l-n:n-l)<(m>p?m-p:p-m)){if(a=l=0,b<k?(l=b,a=k):(l=k,a=b),v<l||v>a)return r}else if(a<h?(l=a,a=h):l=h,s<l||s>a)return r;0<q?r++:0>q&&r--}else{var s=(a+c)/2,v=(b+d)/2,t=(c+e)/2,x=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(s+t)/2;c=(v+x)/2;var t=(t+e)/2,x=(x+g)/2,
y=(d+t)/2,B=(c+x)/2,r=r+Ee(a,b,s,v,d,c,y,B,l,m,n,p,q),r=r+Ee(y,B,t,x,e,g,h,k,l,m,n,p,q)}return r}
function ob(a,b,c,d,e,g,h){if(Db(a,c)){var k=0;c=0;b<d?(k=b,c=d):(k=d,c=b);d=g;if(d<k)return h.x=a,h.y=k,!1;if(d>c)return h.x=a,h.y=c,!1;h.x=a;h.y=d;return!0}if(Db(b,d)){a<c?k=a:(k=c,c=a);d=e;if(d<k)return h.x=k,h.y=b,!1;if(d>c)return h.x=c,h.y=b,!1;h.x=d;h.y=b;return!0}k=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>k)return h.x=a,h.y=b,!1;if(1.000005<k)return h.x=c,h.y=d,!1;h.x=a+k*(c-a);h.y=b+k*(d-b);return!0}
function Fe(a,b,c,d,e,g,h,k,l){if(Q(a,c)&&Q(b,d))return l.x=a,l.y=b,!1;if(Db(e,h)){if(Db(a,c))return ob(a,b,c,d,e,g,l),!1;g=(d-b)/(c-a)*(e-a)+b;return ob(a,b,c,d,e,g,l)}k=(k-g)/(h-e);if(Db(a,c)){g=k*(a-e)+g;c=h=0;b<d?(h=b,c=d):(h=d,c=b);if(g<h)return l.x=a,l.y=h,!1;if(g>c)return l.x=a,l.y=c,!1;l.x=a;l.y=g;return!0}h=(d-b)/(c-a);if(Db(k,h))return ob(a,b,c,d,e,g,l),!1;e=(h*a-k*e+g-b)/(h-k);if(Db(h,0)){a<c?h=a:(h=c,c=a);if(e<h)return l.x=h,l.y=b,!1;if(e>c)return l.x=c,l.y=b,!1;l.x=e;l.y=b;return!0}g=
h*(e-a)+b;return ob(a,b,c,d,e,g,l)}function Ge(a,b,c,d,e,g,h,k,l){var m=1E21,n=a,p=b;if(Fe(a,b,a,d,e,g,h,k,l)){var q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g);q<m&&(m=q,n=l.x,p=l.y)}Fe(c,b,c,d,e,g,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g),q<m&&(m=q,n=l.x,p=l.y));Fe(a,b,c,b,e,g,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g),q<m&&(m=q,n=l.x,p=l.y));Fe(a,d,c,d,e,g,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g),q<m&&(m=q,n=l.x,p=l.y));l.x=n;l.y=p;return 1E21>m}
function Ne(a,b,c,d,e,g,h,k,l){c=a-c;var m=e-h,n=h=0;0===c||0===m?0===c?(k=(g-k)/m,h=a,n=k*h+(g-k*e)):(d=(b-d)/c,h=e,n=d*h+(b-d*a)):(d=(b-d)/c,k=(g-k)/m,a=b-d*a,h=(g-k*e-a)/(d-k),n=d*h+a);l.m(h,n);return l}
function Oe(a,b,c){var d=b.x,e=b.y,g=c.x,h=c.y,k=a.left,l=a.right,m=a.top,n=a.bottom;return d===g?(g=a=0,e<h?(a=e,g=h):(a=h,g=e),k<=d&&d<=l&&a<=n&&g>=m):e===h?(d<g?a=d:(a=g,g=d),m<=e&&e<=n&&a<=l&&g>=k):a.Oa(b)||a.Oa(c)||Pe(k,m,l,m,d,e,g,h)||Pe(l,m,l,n,d,e,g,h)||Pe(l,n,k,n,d,e,g,h)||Pe(k,n,k,m,d,e,g,h)?!0:!1}function Pe(a,b,c,d,e,g,h,k){return 0>=Qe(a,b,c,d,e,g)*Qe(a,b,c,d,h,k)&&0>=Qe(e,g,h,k,a,b)*Qe(e,g,h,k,c,d)}
function Qe(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0}function Re(a){0>a&&(a+=360);360<=a&&(a-=360);return a}
function Se(a,b,c,d){var e=Math.PI;d||(b*=e/180,c*=e/180);d=b<c?1:-1;var g=[],h=e/2,k=b;for(b=Math.min(2*e,Math.abs(c-b));1E-5<b;){c=k+d*Math.min(b,h);var e=(c-k)/2,l=a*Math.cos(e),m=a*Math.sin(e),n=-m,p=l*l+n*n,q=p+l*l+n*m,p=4/3*(Math.sqrt(2*p*q)-q)/(l*m-n*l),m=l-p*n,l=n+p*l,n=-l,p=e+k,e=Math.cos(p),p=Math.sin(p);g.push([0+a*Math.cos(k),0+a*Math.sin(k),0+m*e-l*p,0+m*p+l*e,0+m*e-n*p,0+m*p+n*e,0+a*Math.cos(c),0+a*Math.sin(c)]);b-=Math.abs(c-k);k=c}return g}
function tb(a,b,c,d,e,g,h){c=Math.floor((a-c)/e)*e+c;d=Math.floor((b-d)/g)*g+d;var k=c;c+e-a<e/2&&(k=c+e);a=d;d+g-b<g/2&&(a=d+g);h.m(k,a)}function Te(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g}
function Ue(a,b,c,d){var e=0>c,g=0>d,h=0,k=h=0;a<b?(h=1,k=0):(h=0,k=1);var l=0,m=0,n=0,p=0,l=0===h?a:b,n=0===h?c:d;if(0===h?e:g)n=-n;h=k;m=0===h?a:b;p=0===h?c:d;if(0===h?e:g)p=-p;a=a=0;if(0<p)if(0<n){b=l*l;a=m*m;l*=n;c=m*p;d=-a+c;e=-a+Math.sqrt(l*l+c*c);m=d;for(g=0;9999999999>g;++g){m=.5*(d+e);if(m===d||m===e)break;k=l/(m+b);h=c/(m+a);k=k*k+h*h-1;if(0<k)d=m;else if(0>k)e=m;else break}n=b*n/(m+b)-n;p=a*p/(m+a)-p;a=Math.sqrt(n*n+p*p)}else a=Math.abs(p-m);else p=l*l-m*m,a=l*n,a<p?(p=a/p,a=m*Math.sqrt(Math.abs(1-
p*p)),n=l*p-n,a=Math.sqrt(n*n+a*a)):a=Math.abs(n-l);return a}function Ve(a){1<arguments.length&&z.k("Geometry constructor can take at most one optional argument, the Geometry type.");z.wc(this);this.I=!1;void 0===a?a=We:u&&z.Ca(a,Ve,Ve,"constructor:type");this.da=a;this.Ib=this.Bb=this.Ic=this.zc=0;this.bk=new J(Xe);this.Ov=this.bk.J;this.yv=(new w).freeze();this.jb=!0;this.fr=this.Ao=null;this.gr=NaN;this.ui=hc;this.vi=qc;this.gp=this.ip=NaN;this.Vi=gf}z.ka("Geometry",Ve);z.Ai(Ve);
Ve.prototype.copy=function(){var a=new Ve;a.da=this.da;a.zc=this.zc;a.Ic=this.Ic;a.Bb=this.Bb;a.Ib=this.Ib;for(var b=this.bk.o,c=b.length,d=a.bk,e=0;e<c;e++){var g=b[e].copy();d.add(g)}a.Ov=this.Ov;a.yv.assign(this.yv);a.jb=this.jb;a.Ao=this.Ao;a.fr=this.fr;a.gr=this.gr;a.ui=this.ui.V();a.vi=this.vi.V();a.ip=this.ip;a.gp=this.gp;a.Vi=this.Vi;return a};var hf;Ve.Line=hf=z.s(Ve,"Line",0);var jf;Ve.Rectangle=jf=z.s(Ve,"Rectangle",1);var kf;Ve.Ellipse=kf=z.s(Ve,"Ellipse",2);var We;
Ve.Path=We=z.s(Ve,"Path",3);Ve.prototype.Na=function(){this.freeze();Object.freeze(this);return this};Ve.prototype.freeze=function(){this.I=!0;var a=this.mc;a.freeze();for(var a=a.o,b=a.length,c=0;c<b;c++)a[c].freeze();return this};Ve.prototype.Za=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.I=!1;var a=this.mc;a.Za();for(var a=a.o,b=a.length,c=0;c<b;c++)a[c].Za();return this};
Ve.prototype.equalsApprox=Ve.prototype.Vc=function(a){if(!(a instanceof Ve))return!1;if(this.type!==a.type)return this.type===hf&&a.type===We?lf(this,a):a.type===hf&&this.type===We?lf(a,this):!1;if(this.type===We){var b=this.mc.o;a=a.mc.o;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Vc(a[d]))return!1;return!0}return Q(this.na,a.na)&&Q(this.la,a.la)&&Q(this.G,a.G)&&Q(this.H,a.H)};
function lf(a,b){if(a.type!==hf||b.type!==We)return!1;if(1===b.mc.count){var c=b.mc.fa(0);if(1===c.Db.count&&Q(a.na,c.na)&&Q(a.la,c.la)&&(c=c.Db.fa(0),c.type===mf&&Q(a.G,c.G)&&Q(a.H,c.H)))return!0}return!1}var nf;Ve.stringify=nf=function(a){return a.toString()};Ve.prototype.pc=function(a){a.Pe===Ve?this.type=a:z.Tj(this,a)};
Ve.prototype.toString=function(a){void 0===a&&(a=-1);switch(this.type){case hf:return 0>a?"M"+this.na.toString()+" "+this.la.toString()+"L"+this.G.toString()+" "+this.H.toString():"M"+this.na.toFixed(a)+" "+this.la.toFixed(a)+"L"+this.G.toFixed(a)+" "+this.H.toFixed(a);case jf:var b=new w(this.na,this.la,0,0);b.$G(this.G,this.H,0,0);return 0>a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case kf:b=new w(this.na,this.la,0,0);b.$G(this.G,this.H,0,0);if(0>a){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case We:for(var b="",c=this.mc.o,d=c.length,e=0;e<d;e++){var g=c[e];0<e&&(b+=" x ");g.tu&&(b+="F ");b+=g.toString(a)}return b;default:return this.type.toString()}};
Ve.fillPath=function(a){"string"!==typeof a&&z.hc(a,"string",Ve,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var of;
Ve.parse=of=function(a,b){function c(){return m>=v-1?!0:null!==l[m+1].match(/[A-Za-z]/)}function d(){m++;return l[m]}function e(){var a=new M(parseFloat(d()),parseFloat(d()));n===n.toLowerCase()&&(a.x=s.x+a.x,a.y=s.y+a.y);return a}function g(){return s=e()}function h(){return r=e()}function k(){return"c"!==p.toLowerCase()&&"s"!==p.toLowerCase()?s:new M(2*s.x-r.x,2*s.y-r.y)}void 0===b&&(b=!1);"string"!==typeof a&&z.hc(a,"string",Ve,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var l=a.split(" "),m=-1,n="",p="",q=new M(0,0),r=new M(0,0),s=new M(0,
0),v=l.length,t=z.v(),x=!1,y=!1,B=!0;!(m>=v-1);)if(p=n,n=d(),""!==n)switch(n.toUpperCase()){case "X":B=!0;y=x=!1;break;case "M":var A=g();null===t.dc||!0===B?(S(t,A.x,A.y,x,!1,!y),B=!1):t.moveTo(A.x,A.y);for(q=s;!c();)A=g(),t.lineTo(A.x,A.y);break;case "L":for(;!c();)A=g(),t.lineTo(A.x,A.y);break;case "H":for(;!c();)s=A=new M((n===n.toLowerCase()?s.x:0)+parseFloat(d()),s.y),t.lineTo(s.x,s.y);break;case "V":for(;!c();)s=A=new M(s.x,(n===n.toLowerCase()?s.y:0)+parseFloat(d())),t.lineTo(s.x,s.y);break;
case "C":for(;!c();){var N=e(),G=h(),A=g();U(t,N.x,N.y,G.x,G.y,A.x,A.y)}break;case "S":for(;!c();)N=k(),G=h(),A=g(),U(t,N.x,N.y,G.x,G.y,A.x,A.y);break;case "Q":for(;!c();)G=h(),A=g(),pf(t,G.x,G.y,A.x,A.y);break;case "T":for(;!c();)r=G=k(),A=g(),pf(t,G.x,G.y,A.x,A.y);break;case "B":for(;!c();){var A=parseFloat(d()),N=parseFloat(d()),G=parseFloat(d()),T=parseFloat(d()),fa=parseFloat(d()),W=fa,P=!1;c()||(W=parseFloat(d()),c()||(P=0!==parseFloat(d())));n===n.toLowerCase()&&(G+=s.x,T+=s.y);t.arcTo(A,N,
G,T,fa,W,P)}break;case "A":for(;!c();)N=Math.abs(parseFloat(d())),G=Math.abs(parseFloat(d())),T=parseFloat(d()),fa=!!parseFloat(d()),W=!!parseFloat(d()),A=g(),qf(t,N,G,T,fa,W,A.x,A.y);break;case "Z":A=t.q.mc.o[t.q.mc.length-1];V(t);s=q;break;case "F":A="";for(N=1;l[m+N];)if(null!==l[m+N].match(/[Uu]/))N++;else if(null===l[m+N].match(/[A-Za-z]/))N++;else{A=l[m+N];break}A.match(/[Mm]/)?x=!0:rf(t);break;case "U":A="";for(N=1;l[m+N];)if(null!==l[m+N].match(/[Ff]/))N++;else if(null===l[m+N].match(/[A-Za-z]/))N++;
else{A=l[m+N];break}A.match(/[Mm]/)?y=!0:t.hb(!1)}q=t.q;z.u(t);if(b)for(t=q.mc.j;t.next();)A=t.value,A.tu=!0;return q};function sf(a,b){for(var c=a.length,d=z.P(),e=0;e<c;e++){var g=a[e];d.x=g[0];d.y=g[1];b.wb(d);g[0]=d.x;g[1]=d.y;d.x=g[2];d.y=g[3];b.wb(d);g[2]=d.x;g[3]=d.y;d.x=g[4];d.y=g[5];b.wb(d);g[4]=d.x;g[5]=d.y;d.x=g[6];d.y=g[7];b.wb(d);g[6]=d.x;g[7]=d.y}z.A(d)}
Ve.prototype.Rx=function(){if(this.jb||this.Ov!==this.mc.J)return!0;for(var a=this.mc.o,b=a.length,c=0;c<b;c++)if(a[c].Rx())return!0;return!1};Ve.prototype.Ey=function(){this.jb=!1;this.fr=this.Ao=null;this.gr=NaN;this.Ov=this.mc.J;for(var a=this.mc.o,b=a.length,c=0;c<b;c++)a[c].Ey()};Ve.prototype.Jh=function(){var a=this.yv;a.Za();isNaN(this.ip)||isNaN(this.gp)?a.m(0,0,0,0):a.m(0,0,this.ip,this.gp);tf(this,a,!1);Rb(a,0,0,0,0);a.freeze()};
Ve.prototype.computeBoundsWithoutOrigin=Ve.prototype.cI=function(){var a=new w;tf(this,a,!0);return a};
function tf(a,b,c){switch(a.type){case hf:case jf:case kf:c?b.m(a.zc,a.Ic,0,0):Rb(b,a.zc,a.Ic,0,0);Rb(b,a.Bb,a.Ib,0,0);break;case We:var d=a.mc;a=d.o;for(var d=d.length,e=0;e<d;e++){var g=a[e];c&&0===e?b.m(g.na,g.la,0,0):Rb(b,g.na,g.la,0,0);for(var h=g.Db.o,k=h.length,l=g.na,m=g.la,n=0;n<k;n++){var p=h[n];switch(p.type){case mf:case Mf:l=p.G;m=p.H;Rb(b,l,m,0,0);break;case Nf:xe(l,m,p.Dc,p.Zc,p.Rh,p.Sh,p.G,p.H,.5,b);l=p.G;m=p.H;break;case Of:Be(l,m,p.Dc,p.Zc,p.G,p.H,.5,b);l=p.G;m=p.H;break;case Pf:case Qf:var q=
p.type===Pf?Rf(p,g):Sf(p,g,l,m),r=q.length;if(0===r){l=p.oa;m=p.xa;Rb(b,l,m,0,0);break}for(var p=null,s=0;s<r;s++)p=q[s],xe(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,b);null!==p&&(l=p[6],m=p[7]);break;default:z.k("Unknown Segment type: "+p.type)}}}break;default:z.k("Unknown Geometry type: "+a.type)}}Ve.prototype.normalize=Ve.prototype.normalize=function(){this.I&&z.pa(this);var a=this.cI();this.offset(-a.x,-a.y);return new M(-a.x,-a.y)};
Ve.prototype.offset=Ve.prototype.offset=function(a,b){this.I&&z.pa(this);u&&(z.p(a,Ve,"offset"),z.p(b,Ve,"offset"));this.transform(1,0,0,1,a,b);return this};Ve.prototype.scale=Ve.prototype.scale=function(a,b){this.I&&z.pa(this);u&&(z.p(a,Ve,"scale:x"),z.p(b,Ve,"scale:y"),0===a&&z.wa(a,"scale must be non-zero",Ve,"scale:x"),0===b&&z.wa(b,"scale must be non-zero",Ve,"scale:y"));this.transform(a,0,0,b,0,0);return this};
Ve.prototype.rotate=Ve.prototype.rotate=function(a,b,c){this.I&&z.pa(this);void 0===b&&(b=0);void 0===c&&(c=0);u&&(z.p(a,Ve,"rotate:angle"),z.p(b,Ve,"rotate:x"),z.p(c,Ve,"rotate:y"));var d=z.Pf();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);z.Ie(d);return this};
Ve.prototype.transform=Ve.prototype.transform=function(a,b,c,d,e,g){var h=0,k=0;switch(this.type){case hf:case jf:case kf:h=this.zc;k=this.Ic;this.zc=h*a+k*c+e;this.Ic=h*b+k*d+g;h=this.Bb;k=this.Ib;this.Bb=h*a+k*c+e;this.Ib=h*b+k*d+g;break;case We:for(var l=this.mc.o,m=l.length,n=0;n<m;n++){var p=l[n],h=p.na,k=p.la;p.na=h*a+k*c+e;p.la=h*b+k*d+g;for(var p=p.Db.o,q=p.length,r=0;r<q;r++){var s=p[r];switch(s.type){case mf:case Mf:h=s.G;k=s.H;s.G=h*a+k*c+e;s.H=h*b+k*d+g;break;case Nf:h=s.Dc;k=s.Zc;s.Dc=
h*a+k*c+e;s.Zc=h*b+k*d+g;h=s.Rh;k=s.Sh;s.Rh=h*a+k*c+e;s.Sh=h*b+k*d+g;h=s.G;k=s.H;s.G=h*a+k*c+e;s.H=h*b+k*d+g;break;case Of:h=s.Dc;k=s.Zc;s.Dc=h*a+k*c+e;s.Zc=h*b+k*d+g;h=s.G;k=s.H;s.G=h*a+k*c+e;s.H=h*b+k*d+g;break;case Pf:h=s.oa;k=s.xa;s.oa=h*a+k*c+e;s.xa=h*b+k*d+g;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.Me+=h);0>a&&(s.Me=180-s.Me,s.Bf=-s.Bf);0>d&&(s.Me=-s.Me,s.Bf=-s.Bf);s.radiusX*=Math.sqrt(a*a+c*c);void 0!==s.radiusY&&(s.radiusY*=Math.sqrt(b*b+d*d));break;case Qf:h=s.G;k=s.H;s.G=h*
a+k*c+e;s.H=h*b+k*d+g;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.Vj+=h);0>a&&(s.Vj=180-s.Vj,s.qm=!s.qm);0>d&&(s.Vj=-s.Vj,s.qm=!s.qm);s.radiusX*=Math.sqrt(a*a+c*c);s.radiusY*=Math.sqrt(b*b+d*d);break;default:z.k("Unknown Segment type: "+s.type)}}}}this.jb=!0;return this};
Ve.prototype.Oa=function(a,b,c,d){var e=a.x,g=a.y,h=this.sb.x-20;a=a.y;for(var k=0,l=0,m=0,n=0,p=0,q=0,r=this.mc.o,s=r.length,v=0;v<s;v++){var t=r[v];if(t.tu){if(c&&t.Oa(e,g,b))return!0;for(var x=t.Db,l=t.na,m=t.la,y=l,B=m,A=x.o,N=0;N<=x.length;N++){var G,T;N!==x.length?(G=A[N],T=G.type,p=G.G,q=G.H):(T=mf,p=y,q=B);switch(T){case Mf:n=Tf(e,g,h,a,l,m,y,B);if(isNaN(n))return!0;k+=n;y=p;B=q;break;case mf:n=Tf(e,g,h,a,l,m,p,q);if(isNaN(n))return!0;k+=n;break;case Nf:n=Ee(l,m,G.Dc,G.Zc,G.Rh,G.Sh,p,q,h,
a,e,g,.5);k+=n;break;case Of:n=Ee(l,m,(l+2*G.Dc)/3,(m+2*G.Zc)/3,(2*G.Dc+p)/3,(2*G.Zc+q)/3,p,q,h,a,e,g,.5);k+=n;break;case Pf:case Qf:T=G.type===Pf?Rf(G,t):Sf(G,t,l,m);var fa=T.length;if(0===fa){n=Tf(e,g,h,a,l,m,G.oa,G.xa);if(isNaN(n))return!0;k+=n;break}for(var W=null,P=0;P<fa;P++){W=T[P];if(0===P){n=Tf(e,g,h,a,l,m,W[0],W[1]);if(isNaN(n))return!0;k+=n}n=Ee(W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],h,a,e,g,.5);k+=n}null!==W&&(p=W[6],q=W[7]);break;default:z.k("Unknown Segment type: "+G.type)}l=p;m=q}if(0!==
k)return!0;k=0}else if(t.Oa(e,g,d?b:b+2))return!0}return 0!==k};function Tf(a,b,c,d,e,g,h,k){if(qe(e,g,h,k,.05,a,b))return NaN;var l=(a-c)*(g-k);if(0===l)return 0;var m=((a*d-b*c)*(e-h)-(a-c)*(e*k-g*h))/l;b=(a*d-b*c)*(g-k)/l;if(m>=a)return 0;if((e>h?e-h:h-e)<(g>k?g-k:k-g)){if(e=a=0,g<k?(a=g,e=k):(a=k,e=g),b<a||b>e)return 0}else if(e<h?(a=e,e=h):a=h,m<a||m>e)return 0;return 0<l?1:-1}function Uf(a,b,c,d){a=a.mc.o;for(var e=a.length,g=0;g<e;g++)if(a[g].Oa(b,c,d))return!0;return!1}
Ve.prototype.getPointAlongPath=Ve.prototype.MI=function(a,b){0>a?a=0:1<a&&(a=1);void 0===b&&(b=new M);if(this.type===hf)return b.m(this.na+a*(this.G-this.na),this.la+a*(this.H-this.la)),b;for(var c=this.DA,d=this.Gx,e=c.length,g=this.EA*a,h=0,k=0;k<e;k++)for(var l=d[k],m=l.length,n=0;n<m;n++){var p=l[n];if(h+p>=g)return d=(g-h)/p,c=c[k],k=c[2*n],e=c[2*n+1],b.m(k+(c[2*n+2]-k)*d,e+(c[2*n+3]-e)*d),b;h+=p}b.m(NaN,NaN);return b};
Ve.prototype.getFractionForPoint=Ve.prototype.II=function(a){if(this.type===hf){var b=this.na,c=this.la,d=this.G,e=this.H;if(b!==d||c!==e){var g=a.x;a=a.y;var h=0,k=0;return b===d?(c<e?(h=c,k=e):(h=e,k=c),a<=h?h===c?0:1:a>=k?k===c?0:1:Math.abs(a-c)/(k-h)):c===e?(b<d?(h=b,k=d):(h=d,k=b),g<=h?h===b?0:1:g>=k?k===b?0:1:Math.abs(g-b)/(k-h)):((g-b)*(g-b)+(a-c)*(a-c))/((d-b)*(d-b)+(e-c)*(e-c))}}else if(this.type===jf){if(b=this.na,c=this.la,d=this.G,e=this.H,b!==d||c!==e){var h=d-b,k=e-c,l=2*h+2*k,g=a.x;
a=a.y;g=Math.min(Math.max(g,b),d);a=Math.min(Math.max(a,c),e);var b=Math.abs(g-b),d=Math.abs(g-d),c=Math.abs(a-c),e=Math.abs(a-e),m=Math.min(b,d,c,e);if(m===c)return g/l;if(m===d)return(h+a)/l;if(m===e)return(2*h+k-g)/l;if(m===b)return(2*h+2*k-a)/l}}else{for(var e=this.DA,h=this.Gx,k=this.EA,l=z.P(),c=Infinity,b=d=0,g=e.length,n=m=0,p=0;p<g;p++)for(var q=e[p],r=h[p],s=q.length,v=0;v<s;v+=2){var t=q[v],x=q[v+1];if(0!==v){ob(m,n,t,x,a.x,a.y,l);var y=(l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y);y<c&&(c=y,
d=b,d+=Math.sqrt((l.x-m)*(l.x-m)+(l.y-n)*(l.y-n)));b+=r[(v-2)/2]}m=t;n=x}z.A(l);a=d/k;return 0>a?0:1<a?1:a}return 0};z.w(Ve,{DA:null},function(){Vf(this);return this.Ao});
function Vf(a){if(null===a.Ao){a.Rx()&&a.Ey();var b=a.Ao=[],c=a.fr=[],d=[],e=[];if(a.type===hf)d.push(a.na),d.push(a.la),d.push(a.G),d.push(a.H),b.push(d),e.push(Math.sqrt((a.na-a.G)*(a.na-a.G)+(a.la-a.H)*(a.la-a.H))),c.push(e);else if(a.type===jf)d.push(a.na),d.push(a.la),d.push(a.G),d.push(a.la),d.push(a.G),d.push(a.H),d.push(a.na),d.push(a.H),d.push(a.na),d.push(a.la),b.push(d),e.push(Math.abs(a.na-a.G)),e.push(Math.abs(a.la-a.H)),e.push(Math.abs(a.na-a.G)),e.push(Math.abs(a.la-a.H)),c.push(e);
else if(a.type===kf){var g=new Xe;g.na=a.G;g.la=(a.la+a.H)/2;var h=new Wf(Pf);h.Me=0;h.Bf=360;h.oa=(a.na+a.G)/2;h.xa=(a.la+a.H)/2;h.radiusX=Math.abs(a.na-a.G)/2;h.radiusY=Math.abs(a.la-a.H)/2;g.add(h);a=Rf(h,g);e=a.length;if(0===e)d.push(h.oa),d.push(h.xa);else for(var h=g.na,g=g.la,k=0;k<e;k++){var l=a[k];ye(h,g,l[2],l[3],l[4],l[5],l[6],l[7],.5,d);h=l[6];g=l[7]}b.push(d);c.push(Xf(d))}else for(var m=a.mc.j;m.next();){var n=m.value,d=[];d.push(n.na);d.push(n.la);for(var h=n.na,g=n.la,p=h,q=g,r=n.Db.o,
s=r.length,v=0;v<s;v++){var t=r[v];switch(t.da){case Mf:4<=d.length&&(b.push(d),c.push(Xf(d)));d=[];d.push(t.G);d.push(t.H);h=t.G;g=t.H;p=h;q=g;break;case mf:d.push(t.G);d.push(t.H);h=t.G;g=t.H;break;case Nf:ye(h,g,t.Rd,t.df,t.Bh,t.Kg,t.Bb,t.Ib,.5,d);h=t.G;g=t.H;break;case Of:Ce(h,g,t.Rd,t.df,t.Bb,t.Ib,.5,d);h=t.G;g=t.H;break;case Pf:a=Rf(t,n);e=a.length;if(0===e){d.push(t.oa);d.push(t.xa);h=t.oa;g=t.xa;break}for(k=0;k<e;k++)l=a[k],ye(h,g,l[2],l[3],l[4],l[5],l[6],l[7],.5,d),h=l[6],g=l[7];break;case Qf:a=
Sf(t,n,h,g);e=a.length;if(0===e){d.push(t.oa);d.push(t.xa);h=t.oa;g=t.xa;break}for(k=0;k<e;k++)l=a[k],ye(h,g,l[2],l[3],l[4],l[5],l[6],l[7],.5,d),h=l[6],g=l[7];break;default:z.k("Segment not of valid type: "+t.da)}t.ei&&(d.push(p),d.push(q))}4<=d.length&&(b.push(d),c.push(Xf(d)))}}}z.w(Ve,{Gx:null},function(){Vf(this);return this.fr});
z.w(Ve,{EA:null},function(){var a=this.gr;if(isNaN(a)){if(this.type===hf)var a=Math.abs(this.G-this.na),b=Math.abs(this.H-this.la),a=Math.sqrt(a*a+b*b);else if(this.type===jf)a=Math.abs(this.G-this.na),b=Math.abs(this.H-this.la),a=2*a+2*b;else for(var b=this.Gx,c=b.length,d=a=0;d<c;d++)for(var e=b[d],g=e.length,h=0;h<g;h++)a+=e[h];this.gr=a}return a});function Xf(a){for(var b=[],c=0,d=0,e=a.length,g=0;g<e;g+=2){var h=a[g],k=a[g+1];0!==g&&(c=Math.sqrt(yb(c,d,h,k)),b.push(c));c=h;d=k}return b}
z.defineProperty(Ve,{type:"type"},function(){return this.da},function(a){this.da!==a&&(u&&z.Ca(a,Ve,Ve,"type"),this.I&&z.pa(this,a),this.da=a,this.jb=!0)});z.defineProperty(Ve,{na:"startX"},function(){return this.zc},function(a){this.zc!==a&&(u&&z.p(a,Ve,"startX"),this.I&&z.pa(this,a),this.zc=a,this.jb=!0)});z.defineProperty(Ve,{la:"startY"},function(){return this.Ic},function(a){this.Ic!==a&&(u&&z.p(a,Ve,"startY"),this.I&&z.pa(this,a),this.Ic=a,this.jb=!0)});
z.defineProperty(Ve,{G:"endX"},function(){return this.Bb},function(a){this.Bb!==a&&(u&&z.p(a,Ve,"endX"),this.I&&z.pa(this,a),this.Bb=a,this.jb=!0)});z.defineProperty(Ve,{H:"endY"},function(){return this.Ib},function(a){this.Ib!==a&&(u&&z.p(a,Ve,"endY"),this.I&&z.pa(this,a),this.Ib=a,this.jb=!0)});z.defineProperty(Ve,{mc:"figures"},function(){return this.bk},function(a){this.bk!==a&&(u&&z.l(a,J,Ve,"figures"),this.I&&z.pa(this,a),this.bk=a,this.jb=!0)});
Ve.prototype.add=Ve.prototype.add=function(a){this.bk.add(a);return this};Ve.prototype.setSpots=function(a,b,c,d,e,g,h,k){this.I&&z.pa(this);this.ui=(new R(a,b,e,g)).freeze();this.vi=(new R(c,d,h,k)).freeze();return this};z.defineProperty(Ve,{C:"spot1"},function(){return this.ui},function(a){u&&z.l(a,R,Ve,"spot1");this.I&&z.pa(this,a);this.ui=a.V()});z.defineProperty(Ve,{D:"spot2"},function(){return this.vi},function(a){u&&z.l(a,R,Ve,"spot2");this.I&&z.pa(this,a);this.vi=a.V()});
z.defineProperty(Ve,{le:"defaultStretch"},function(){return this.Vi},function(a){u&&z.Ca(a,O,Ve,"stretch");this.I&&z.pa(this,a);this.Vi=a});z.w(Ve,{sb:"bounds"},function(){this.Rx()&&(this.Ey(),this.Jh());return this.yv});function Xe(a,b,c,d){z.wc(this);this.I=!1;void 0===c&&(c=!0);this.Rm=c;void 0===d&&(d=!0);this.jp=d;void 0!==a?(u&&z.p(a,Xe,"sx"),this.zc=a):this.zc=0;void 0!==b?(u&&z.p(b,Xe,"sy"),this.Ic=b):this.Ic=0;this.Gp=new J(Wf);this.Nw=this.Gp.J;this.jb=!0}z.ka("PathFigure",Xe);z.Ai(Xe);
Xe.prototype.copy=function(){var a=new Xe;a.Rm=this.Rm;a.jp=this.jp;a.zc=this.zc;a.Ic=this.Ic;for(var b=this.Gp.o,c=b.length,d=a.Gp,e=0;e<c;e++){var g=b[e].copy();d.add(g)}a.Nw=this.Nw;a.jb=this.jb;return a};Xe.prototype.equalsApprox=Xe.prototype.Vc=function(a){if(!(a instanceof Xe&&Q(this.na,a.na)&&Q(this.la,a.la)))return!1;var b=this.Db.o;a=a.Db.o;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Vc(a[d]))return!1;return!0};f=Xe.prototype;
f.toString=function(a){void 0===a&&(a=-1);for(var b=0>a?"M"+this.na.toString()+" "+this.la.toString():"M"+this.na.toFixed(a)+" "+this.la.toFixed(a),c=this.Db.o,d=c.length,e=0;e<d;e++)b+=" "+c[e].toString(a);return b};f.freeze=function(){this.I=!0;var a=this.Db;a.freeze();for(var b=a.o,a=a.length,c=0;c<a;c++)b[c].freeze();return this};f.Za=function(){this.I=!1;var a=this.Db;a.Za();for(var a=a.o,b=a.length,c=0;c<b;c++)a[c].Za();return this};
f.Rx=function(){if(this.jb)return!0;var a=this.Db;if(this.Nw!==a.J)return!0;for(var a=a.o,b=a.length,c=0;c<b;c++)if(a[c].jb)return!0;return!1};f.Ey=function(){this.jb=!1;var a=this.Db;this.Nw=a.J;for(var a=a.o,b=a.length,c=0;c<b;c++){var d=a[c];d.jb=!1;d.tg=null}};z.defineProperty(Xe,{tu:"isFilled"},function(){return this.Rm},function(a){u&&z.h(a,"boolean",Xe,"isFilled");this.I&&z.pa(this,a);this.Rm=a});
z.defineProperty(Xe,{Vk:"isShadowed"},function(){return this.jp},function(a){u&&z.h(a,"boolean",Xe,"isShadowed");this.I&&z.pa(this,a);this.jp=a});z.defineProperty(Xe,{na:"startX"},function(){return this.zc},function(a){u&&z.p(a,Xe,"startX");this.I&&z.pa(this,a);this.zc=a;this.jb=!0});z.defineProperty(Xe,{la:"startY"},function(){return this.Ic},function(a){u&&z.p(a,Xe,"startY");this.I&&z.pa(this,a);this.Ic=a;this.jb=!0});
z.defineProperty(Xe,{Db:"segments"},function(){return this.Gp},function(a){u&&z.l(a,J,Xe,"segments");this.I&&z.pa(this,a);this.Gp=a;this.jb=!0});Xe.prototype.add=Xe.prototype.add=function(a){this.Gp.add(a);return this};
Xe.prototype.Oa=function(a,b,c){for(var d=this.na,e=this.la,g=d,h=e,k=this.Db.o,l=k.length,m=0;m<l;m++){var n=k[m];switch(n.type){case Mf:g=n.G;h=n.H;d=n.G;e=n.H;break;case mf:if(qe(d,e,n.G,n.H,c,a,b))return!0;d=n.G;e=n.H;break;case Nf:if(we(d,e,n.Dc,n.Zc,n.Rh,n.Sh,n.G,n.H,.5,a,b,c))return!0;d=n.G;e=n.H;break;case Of:if(Ae(d,e,n.Dc,n.Zc,n.G,n.H,.5,a,b,c))return!0;d=n.G;e=n.H;break;case Pf:case Qf:var p=n.type===Pf?Rf(n,this):Sf(n,this,d,e),q=p.length;if(0===q){if(qe(d,e,n.oa,n.xa,c,a,b))return!0;
d=n.oa;e=n.xa;break}for(var r=null,s=0;s<q;s++)if(r=p[s],0===s&&qe(d,e,r[0],r[1],c,a,b)||we(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],.5,a,b,c))return!0;null!==r&&(d=r[6],e=r[7]);break;default:z.k("Unknown Segment type: "+n.type)}if(n.Nx&&(d!==g||e!==h)&&qe(d,e,g,h,c,a,b))return!0}return!1};
function Wf(a,b,c,d,e,g,h,k){z.wc(this);this.I=!1;void 0===a?a=mf:u&&z.Ca(a,Wf,Wf,"constructor:type");this.da=a;void 0!==b?(u&&z.p(b,Wf,"ex"),this.Bb=b):this.Bb=0;void 0!==c?(u&&z.p(c,Wf,"ey"),this.Ib=c):this.Ib=0;void 0===d&&(d=0);void 0===e&&(e=0);void 0===g&&(g=0);void 0===h&&(h=0);a===Qf?(a=g%360,0>a&&(a+=360),this.Rd=a,this.df=0,u&&z.p(d,Wf,"x1"),this.Bh=Math.max(d,0),u&&z.p(e,Wf,"y1"),this.Kg=Math.max(e,0),this.op="boolean"===typeof h?!!h:!1,this.Go=!!k):(u&&z.p(d,Wf,"x1"),this.Rd=d,u&&z.p(e,
Wf,"y1"),this.df=e,u&&z.p(g,Wf,"x2"),a===Pf&&(g=Math.max(g,0)),this.Bh=g,"number"===typeof h?(a===Pf&&(h=Math.max(h,0)),this.Kg=h):this.Kg=0,this.Go=this.op=!1);this.ei=!1;this.jb=!0;this.tg=null}z.ka("PathSegment",Wf);z.Ai(Wf);Wf.prototype.copy=function(){var a=new Wf;a.da=this.da;a.Bb=this.Bb;a.Ib=this.Ib;a.Rd=this.Rd;a.df=this.df;a.Bh=this.Bh;a.Kg=this.Kg;a.op=this.op;a.Go=this.Go;a.ei=this.ei;a.jb=this.jb;return a};
Wf.prototype.equalsApprox=Wf.prototype.Vc=function(a){if(!(a instanceof Wf)||this.type!==a.type||this.Nx!==a.Nx)return!1;switch(this.type){case Mf:case mf:return Q(this.G,a.G)&&Q(this.H,a.H);case Nf:return Q(this.G,a.G)&&Q(this.H,a.H)&&Q(this.Dc,a.Dc)&&Q(this.Zc,a.Zc)&&Q(this.Rh,a.Rh)&&Q(this.Sh,a.Sh);case Of:return Q(this.G,a.G)&&Q(this.H,a.H)&&Q(this.Dc,a.Dc)&&Q(this.Zc,a.Zc);case Pf:return Q(this.Me,a.Me)&&Q(this.Bf,a.Bf)&&Q(this.oa,a.oa)&&Q(this.xa,a.xa)&&Q(this.radiusX,a.radiusX)&&Q(this.radiusY,
a.radiusY);case Qf:return this.qm===a.qm&&this.Sx===a.Sx&&Q(this.Vj,a.Vj)&&Q(this.G,a.G)&&Q(this.H,a.H)&&Q(this.radiusX,a.radiusX)&&Q(this.radiusY,a.radiusY);default:return!1}};Wf.prototype.pc=function(a){a.Pe===Wf?this.type=a:z.Tj(this,a)};
Wf.prototype.toString=function(a){void 0===a&&(a=-1);var b="";switch(this.type){case Mf:b=0>a?"M"+this.G.toString()+" "+this.H.toString():"M"+this.G.toFixed(a)+" "+this.H.toFixed(a);break;case mf:b=0>a?"L"+this.G.toString()+" "+this.H.toString():"L"+this.G.toFixed(a)+" "+this.H.toFixed(a);break;case Nf:b=0>a?"C"+this.Dc.toString()+" "+this.Zc.toString()+" "+this.Rh.toString()+" "+this.Sh.toString()+" "+this.G.toString()+" "+this.H.toString():"C"+this.Dc.toFixed(a)+" "+this.Zc.toFixed(a)+" "+this.Rh.toFixed(a)+
" "+this.Sh.toFixed(a)+" "+this.G.toFixed(a)+" "+this.H.toFixed(a);break;case Of:b=0>a?"Q"+this.Dc.toString()+" "+this.Zc.toString()+" "+this.G.toString()+" "+this.H.toString():"Q"+this.Dc.toFixed(a)+" "+this.Zc.toFixed(a)+" "+this.G.toFixed(a)+" "+this.H.toFixed(a);break;case Pf:b=0>a?"B"+this.Me.toString()+" "+this.Bf.toString()+" "+this.oa.toString()+" "+this.xa.toString()+" "+this.radiusX:"B"+this.Me.toFixed(a)+" "+this.Bf.toFixed(a)+" "+this.oa.toFixed(a)+" "+this.xa.toFixed(a)+" "+this.radiusX;
break;case Qf:b=0>a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Vj.toString()+" "+(this.Sx?1:0)+" "+(this.qm?1:0)+" "+this.G.toString()+" "+this.H.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.Vj.toFixed(a)+" "+(this.Sx?1:0)+" "+(this.qm?1:0)+" "+this.G.toFixed(a)+" "+this.H.toFixed(a);break;default:b=this.type.toString()}return b+(this.ei?"z":"")};var Mf;Wf.Move=Mf=z.s(Wf,"Move",0);var mf;Wf.Line=mf=z.s(Wf,"Line",1);var Nf;
Wf.Bezier=Nf=z.s(Wf,"Bezier",2);var Of;Wf.QuadraticBezier=Of=z.s(Wf,"QuadraticBezier",3);var Pf;Wf.Arc=Pf=z.s(Wf,"Arc",4);var Qf;Wf.SvgArc=Qf=z.s(Wf,"SvgArc",4);Wf.prototype.freeze=function(){this.I=!0;return this};Wf.prototype.Za=function(){this.I=!1;return this};Wf.prototype.close=Wf.prototype.close=function(){this.ei=!0;return this};
function Rf(a,b){if(null!==a.tg&&!1===b.jb)return a.tg;var c=a.radiusX,d=a.radiusY;void 0===d&&(d=c);if(0===c||0===d)return a.tg=[],a.tg;var e=a.Rd,g=a.df,h=Se(c<d?c:d,a.Me,a.Me+a.Bf,!1);if(c!==d){var k=z.Pf();k.reset();c<d?k.scale(1,d/c):k.scale(c/d,1);sf(h,k);z.Ie(k)}c=h.length;for(d=0;d<c;d++)k=h[d],k[0]+=e,k[1]+=g,k[2]+=e,k[3]+=g,k[4]+=e,k[5]+=g,k[6]+=e,k[7]+=g;a.tg=h;return a.tg}
function Sf(a,b,c,d){function e(a,b,c,d){return(a*d<b*c?-1:1)*Math.acos((a*c+b*d)/(Math.sqrt(a*a+b*b)*Math.sqrt(c*c+d*d)))}if(null!==a.tg&&!1===b.jb)return a.tg;b=a.Bh;var g=a.Kg;if(0===b||0===g)return a.tg=[],a.tg;var h=Math.PI/180*a.Rd,k=a.op,l=a.Go,m=a.Bb,n=a.Ib,p=Math.cos(h),q=Math.sin(h),r=p*(c-m)/2+q*(d-n)/2,h=-q*(c-m)/2+p*(d-n)/2,s=r*r/(b*b)+h*h/(g*g);1<s&&(b*=Math.sqrt(s),g*=Math.sqrt(s));s=(k===l?-1:1)*Math.sqrt((b*b*g*g-b*b*h*h-g*g*r*r)/(b*b*h*h+g*g*r*r));isNaN(s)&&(s=0);k=s*b*h/g;s=s*-g*
r/b;isNaN(k)&&(k=0);isNaN(s)&&(s=0);c=(c+m)/2+p*k-q*s;d=(d+n)/2+q*k+p*s;n=e(1,0,(r-k)/b,(h-s)/g);p=(r-k)/b;m=(h-s)/g;r=(-r-k)/b;k=(-h-s)/g;h=e(p,m,r,k);r=(p*r+m*k)/(Math.sqrt(p*p+m*m)*Math.sqrt(r*r+k*k));-1>=r?h=Math.PI:1<=r&&(h=0);!l&&0<h&&(h-=2*Math.PI);l&&0>h&&(h+=2*Math.PI);l=b>g?1:b/g;r=b>g?g/b:1;b=Se(b>g?b:g,n,n+h,!0);g=z.Pf();g.reset();g.translate(c,d);g.rotate(a.Rd,0,0);g.scale(l,r);sf(b,g);z.Ie(g);a.tg=b;return a.tg}
z.defineProperty(Wf,{Nx:"isClosed"},function(){return this.ei},function(a){this.ei!==a&&(this.ei=a,this.jb=!0)});z.defineProperty(Wf,{type:"type"},function(){return this.da},function(a){u&&z.Ca(a,Wf,Wf,"type");this.I&&z.pa(this,a);this.da=a;this.jb=!0});z.defineProperty(Wf,{G:"endX"},function(){return this.Bb},function(a){u&&z.p(a,Wf,"endX");this.I&&z.pa(this,a);this.Bb=a;this.jb=!0});
z.defineProperty(Wf,{H:"endY"},function(){return this.Ib},function(a){u&&z.p(a,Wf,"endY");this.I&&z.pa(this,a);this.Ib=a;this.jb=!0});z.defineProperty(Wf,{Dc:"point1X"},function(){return this.Rd},function(a){u&&z.p(a,Wf,"point1X");this.I&&z.pa(this,a);this.Rd=a;this.jb=!0});z.defineProperty(Wf,{Zc:"point1Y"},function(){return this.df},function(a){u&&z.p(a,Wf,"point1Y");this.I&&z.pa(this,a);this.df=a;this.jb=!0});
z.defineProperty(Wf,{Rh:"point2X"},function(){return this.Bh},function(a){u&&z.p(a,Wf,"point2X");this.I&&z.pa(this,a);this.Bh=a;this.jb=!0});z.defineProperty(Wf,{Sh:"point2Y"},function(){return this.Kg},function(a){u&&z.p(a,Wf,"point2Y");this.I&&z.pa(this,a);this.Kg=a;this.jb=!0});z.defineProperty(Wf,{oa:"centerX"},function(){return this.Rd},function(a){u&&z.p(a,Wf,"centerX");this.I&&z.pa(this,a);this.Rd=a;this.jb=!0});
z.defineProperty(Wf,{xa:"centerY"},function(){return this.df},function(a){u&&z.p(a,Wf,"centerY");this.I&&z.pa(this,a);this.df=a;this.jb=!0});z.defineProperty(Wf,{radiusX:"radiusX"},function(){return this.Bh},function(a){u&&z.p(a,Wf,"radiusX");0>a&&z.wa(a,">= zero",Wf,"radiusX");this.I&&z.pa(this,a);this.Bh=a;this.jb=!0});z.defineProperty(Wf,{radiusY:"radiusY"},function(){return this.Kg},function(a){u&&z.p(a,Wf,"radiusY");0>a&&z.wa(a,">= zero",Wf,"radiusY");this.I&&z.pa(this,a);this.Kg=a;this.jb=!0});
z.defineProperty(Wf,{Me:"startAngle"},function(){return this.Bb},function(a){this.Bb!==a&&(this.I&&z.pa(this,a),u&&z.p(a,Wf,"startAngle"),a%=360,0>a&&(a+=360),this.Bb=a,this.jb=!0)});z.defineProperty(Wf,{Bf:"sweepAngle"},function(){return this.Ib},function(a){u&&z.p(a,Wf,"sweepAngle");this.I&&z.pa(this,a);360<a&&(a=360);-360>a&&(a=-360);this.Ib=a;this.jb=!0});z.defineProperty(Wf,{qm:"isClockwiseArc"},function(){return this.Go},function(a){this.I&&z.pa(this,a);this.Go=a;this.jb=!0});
z.defineProperty(Wf,{Sx:"isLargeArc"},function(){return this.op},function(a){this.I&&z.pa(this,a);this.op=a;this.jb=!0});z.defineProperty(Wf,{Vj:"xAxisRotation"},function(){return this.Rd},function(a){u&&z.p(a,Wf,"xAxisRotation");a%=360;0>a&&(a+=360);this.I&&z.pa(this,a);this.Rd=a;this.jb=!0});
function Yf(){this.ca=null;this.cA=(new M(0,0)).freeze();this.jz=(new M(0,0)).freeze();this.vv=this.pw=0;this.wv=1;this.ew="";this.Xw=this.Lv=!1;this.Iv=this.xv=0;this.Xj=this.Sv=this.bw=!1;this.Qr=null;this.Vw=0;this.Ng=this.Uw=null}z.ka("InputEvent",Yf);
Yf.prototype.copy=function(){var a=new Yf;a.ca=this.ca;a.cA.assign(this.se);a.jz.assign(this.ha);a.pw=this.pw;a.vv=this.vv;a.wv=this.wv;a.ew=this.ew;a.Lv=this.Lv;a.Xw=this.Xw;a.xv=this.xv;a.Iv=this.Iv;a.bw=this.bw;a.Sv=this.Sv;a.Xj=this.Xj;a.Qr=this.Qr;a.Vw=this.Vw;a.Uw=this.Uw;a.Ng=this.Ng;return a};
Yf.prototype.toString=function(){var a="^";0!==this.Ld&&(a+="M:"+this.Ld);0!==this.button&&(a+="B:"+this.button);""!==this.key&&(a+="K:"+this.key);0!==this.Qe&&(a+="C:"+this.Qe);0!==this.fm&&(a+="D:"+this.fm);this.Nc&&(a+="h");this.bubbles&&(a+="b");null!==this.ha&&(a+="@"+this.ha.toString());return a};z.defineProperty(Yf,{g:"diagram"},function(){return this.ca},function(a){this.ca=a});z.defineProperty(Yf,{se:"viewPoint"},function(){return this.cA},function(a){z.l(a,M,Yf,"viewPoint");this.cA.assign(a)});
z.defineProperty(Yf,{ha:"documentPoint"},function(){return this.jz},function(a){z.l(a,M,Yf,"documentPoint");this.jz.assign(a)});Yf.prototype.getMultiTouchViewPoint=Yf.prototype.Ix=function(a,b){var c=this.g;if(null===c)return b;Zf(c,this.event,a,b);return b};Yf.prototype.getMultiTouchDocumentPoint=function(a,b){var c=this.g;if(null===c)return b;Zf(c,this.event,a,b);b.assign(c.NB(b));return b};z.defineProperty(Yf,{Ld:"modifiers"},function(){return this.pw},function(a){this.pw=a});
z.defineProperty(Yf,{button:"button"},function(){return this.vv},function(a){this.vv=a;if(null===this.event)switch(a){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}});z.defineProperty(Yf,{buttons:"buttons"},function(){return this.wv},function(a){this.wv=a});z.defineProperty(Yf,{key:"key"},function(){return this.ew},function(a){this.ew=a});z.defineProperty(Yf,{gm:"down"},function(){return this.Lv},function(a){this.Lv=a});
z.defineProperty(Yf,{up:"up"},function(){return this.Xw},function(a){this.Xw=a});z.defineProperty(Yf,{Qe:"clickCount"},function(){return this.xv},function(a){this.xv=a});z.defineProperty(Yf,{fm:"delta"},function(){return this.Iv},function(a){this.Iv=a});z.defineProperty(Yf,{vu:"isMultiTouch"},function(){return this.bw},function(a){this.bw=a});z.defineProperty(Yf,{Nc:"handled"},function(){return this.Sv},function(a){this.Sv=a});
z.defineProperty(Yf,{bubbles:"bubbles"},function(){return this.Xj},function(a){this.Xj=a});z.defineProperty(Yf,{event:"event"},function(){return this.Qr},function(a){this.Qr=a});z.w(Yf,{Hj:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a?!0:(a=window.PointerEvent)&&this.event instanceof a&&"touch"===this.event.pointerType});z.w(Yf,{Uk:"isMac"},function(){return z.Uk});z.defineProperty(Yf,{timestamp:"timestamp"},function(){return this.Vw},function(a){this.Vw=a});
z.defineProperty(Yf,{eh:"targetDiagram"},function(){return this.Uw},function(a){this.Uw=a});z.defineProperty(Yf,{We:"targetObject"},function(){return this.Ng},function(a){this.Ng=a});z.defineProperty(Yf,{control:"control"},function(){return 0!==(this.Ld&1)},function(a){this.Ld=a?this.Ld|1:this.Ld&-2});z.defineProperty(Yf,{shift:"shift"},function(){return 0!==(this.Ld&4)},function(a){this.Ld=a?this.Ld|4:this.Ld&-5});
z.defineProperty(Yf,{alt:"alt"},function(){return 0!==(this.Ld&2)},function(a){this.Ld=a?this.Ld|2:this.Ld&-3});z.defineProperty(Yf,{Du:"meta"},function(){return 0!==(this.Ld&8)},function(a){this.Ld=a?this.Ld|8:this.Ld&-9});z.defineProperty(Yf,{left:"left"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?0===this.button:0!==(this.buttons&1)},function(a){this.buttons=a?this.buttons|1:this.buttons&-2});
z.defineProperty(Yf,{right:"right"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?2===this.button:0!==(this.buttons&2)},function(a){this.buttons=a?this.buttons|2:this.buttons&-3});z.defineProperty(Yf,{aM:"middle"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?1===this.button:0!==(this.buttons&4)},function(a){this.buttons=a?this.buttons|4:this.buttons&-5});
function $f(){this.ca=null;this.Xb="";this.yw=this.Sw=null;this.mr=!1}z.ka("DiagramEvent",$f);$f.prototype.copy=function(){var a=new $f;a.ca=this.ca;a.Xb=this.Xb;a.Sw=this.Sw;a.yw=this.yw;a.mr=this.mr;return a};$f.prototype.toString=function(){var a="*"+this.name;null!==this.HB&&(a+=":"+this.HB.toString());null!==this.lB&&(a+="("+this.lB.toString()+")");return a};z.defineProperty($f,{g:"diagram"},function(){return this.ca},function(a){this.ca=a});
z.defineProperty($f,{name:"name"},function(){return this.Xb},function(a){this.Xb=a});z.defineProperty($f,{HB:"subject"},function(){return this.Sw},function(a){this.Sw=a});z.defineProperty($f,{lB:"parameter"},function(){return this.yw},function(a){this.yw=a});z.defineProperty($f,{cancel:"cancel"},function(){return this.mr},function(a){this.mr!==a&&z.Nn("DiagramEvent.cancel","2.0");this.mr=a});function ag(){this.nr=bg;this.jn=this.ow="";this.Ks=this.Ls=this.Os=this.Ps=this.Ns=this.ca=this.xe=null}
z.ka("ChangedEvent",ag);var rg;ag.Transaction=rg=z.s(ag,"Transaction",-1);var bg;ag.Property=bg=z.s(ag,"Property",0);var sg;ag.Insert=sg=z.s(ag,"Insert",1);var tg;ag.Remove=tg=z.s(ag,"Remove",2);ag.prototype.clear=ag.prototype.clear=function(){this.Ks=this.Ls=this.Os=this.Ps=this.Ns=this.ca=this.xe=null};
ag.prototype.copy=function(){var a=new ag;a.nr=this.nr;a.ow=this.ow;a.jn=this.jn;a.xe=this.xe;a.ca=this.ca;a.Ns=this.Ns;var b=this.Ps;a.Ps=z.Xa(b)&&"function"===typeof b.V?b.V():b;b=this.Os;a.Os=z.Xa(b)&&"function"===typeof b.V?b.V():b;b=this.Ls;a.Ls=z.Xa(b)&&"function"===typeof b.V?b.V():b;b=this.Ks;a.Ks=z.Xa(b)&&"function"===typeof b.V?b.V():b;return a};ag.prototype.pc=function(a){a.Pe===ag?this.Kc=a:z.Tj(this,a)};
ag.prototype.toString=function(){var a="",a=this.Kc===rg?a+"* ":this.Kc===bg?a+(null!==this.ia?"!m":"!d"):a+((null!==this.ia?"!m":"!d")+this.Kc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.Af&&this.Af!==this.propertyName&&(a+=" "+this.Af);a+=": ";this.Kc===rg?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=ka(this.object)),null!==this.oldValue&&(a+="  old: "+ka(this.oldValue)),null!==this.Oj&&(a+=" "+this.Oj),null!==this.newValue&&
(a+="  new: "+ka(this.newValue)),null!==this.Mj&&(a+=" "+this.Mj));return a};ag.prototype.getValue=ag.prototype.qa=function(a){return a?this.oldValue:this.newValue};ag.prototype.getParam=function(a){return a?this.Oj:this.Mj};ag.prototype.canUndo=ag.prototype.canUndo=function(){return null!==this.ia||null!==this.g?!0:!1};ag.prototype.undo=ag.prototype.undo=function(){this.canUndo()&&(null!==this.ia?this.ia.En(this,!0):null!==this.g&&this.g.En(this,!0))};
ag.prototype.canRedo=ag.prototype.canRedo=function(){return null!==this.ia||null!==this.g?!0:!1};ag.prototype.redo=ag.prototype.redo=function(){this.canRedo()&&(null!==this.ia?this.ia.En(this,!1):null!==this.g&&this.g.En(this,!1))};z.defineProperty(ag,{ia:"model"},function(){return this.xe},function(a){this.xe=a});z.defineProperty(ag,{g:"diagram"},function(){return this.ca},function(a){this.ca=a});
z.defineProperty(ag,{Kc:"change"},function(){return this.nr},function(a){u&&z.Ca(a,ag,ag,"change");this.nr=a});z.defineProperty(ag,{Af:"modelChange"},function(){return this.ow},function(a){u&&z.h(a,"string",ag,"modelChange");this.ow=a});z.defineProperty(ag,{propertyName:"propertyName"},function(){return this.jn},function(a){u&&"string"!==typeof a&&z.h(a,"function",ag,"propertyName");this.jn=a});
z.w(ag,{NF:"isTransactionFinished"},function(){return this.nr===rg&&("CommittedTransaction"===this.jn||"FinishedUndo"===this.jn||"FinishedRedo"===this.jn)});z.defineProperty(ag,{object:"object"},function(){return this.Ns},function(a){this.Ns=a});z.defineProperty(ag,{oldValue:"oldValue"},function(){return this.Ps},function(a){this.Ps=a});z.defineProperty(ag,{Oj:"oldParam"},function(){return this.Os},function(a){this.Os=a});
z.defineProperty(ag,{newValue:"newValue"},function(){return this.Ls},function(a){this.Ls=a});z.defineProperty(ag,{Mj:"newParam"},function(){return this.Ks},function(a){this.Ks=a});
function L(a){1<arguments.length&&z.k("Model constructor can only take one optional argument, the Array of node data.");z.wc(this);this.Ar=this.Xb="";this.aj=!1;this.Kz={};this.ye=[];this.Gc=new oa(null,Object);this.uk="key";this.Lo=this.sp=null;this.sr=this.Av=!1;this.er=null;this.dn="category";this.vg=new oa(null,K);this.qk=null;this.rj=!1;this.bA=null;this.sa=new ug;void 0!==a&&(this.ng=a)}z.ka("Model",L);
L.prototype.cloneProtected=function(a){a.Xb=this.Xb;a.Ar=this.Ar;a.aj=this.aj;a.uk=this.uk;a.sp=this.sp;a.Lo=this.Lo;a.HK=this.Av;a.sr=this.sr;a.er=this.er;a.dn=this.dn};L.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};L.prototype.clear=L.prototype.clear=function(){this.ye=[];this.Gc.clear();this.vg.clear();this.sa.clear()};f=L.prototype;
f.toString=function(a){void 0===a&&(a=0);if(1<a)return this.KB();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.ng;for(var c=z.bb(a),d=0;d<c;d++)var e=z.Ma(a,d),b=b+(" "+this.Cb(e)+":"+ka(e))}return b};
f.vo=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.dm&&(a+=',\n  "dataFormat": '+this.quote(this.dm));this.kb&&(a+=',\n  "isReadOnly": '+this.kb);"key"!==this.Nj&&"string"===typeof this.Nj&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Nj));this.rA&&(a+=',\n  "copiesArrays": true');this.qA&&(a+=',\n  "copiesArrayObjects": true');"category"!==this.jo&&"string"===typeof this.jo&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.jo));return a};
f.Nu=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.dm=a.dataFormat);a.isReadOnly&&(this.kb=a.isReadOnly);a.nodeKeyProperty&&(this.Nj=a.nodeKeyProperty);a.copiesArrays&&(this.rA=a.copiesArrays);a.copiesArrayObjects&&(this.qA=a.copiesArrayObjects);a.nodeCategoryProperty&&(this.jo=a.nodeCategoryProperty)};function vg(a){return',\n  "modelData": '+wg(a,a.Xk)}function xg(a,b){var c=b.modelData;z.Xa(c)&&(a.Qu(c),a.Xk=c)}
f.UB=function(){var a=this.Xk,b=!1,c;for(c in a)if(!yg(c,a[c])){b=!0;break}a="";b&&(a=vg(this));return a+',\n  "nodeDataArray": '+zg(this,this.ng,!0)};f.oB=function(a){xg(this,a);a=a.nodeDataArray;z.isArray(a)&&(this.Qu(a),this.ng=a)};
function Ag(a,b,c,d){if(b===c)return!0;if(typeof b!==typeof c||"function"===typeof b||"function"===typeof c)return!1;if(Array.isArray(b)&&Array.isArray(c)){if(d.qa(b)===c)return!0;d.add(b,c);if(b.length!==c.length)return!1;for(var e=0;e<b.length;e++)if(!Ag(a,b[e],c[e],d))return!1;return!0}if(z.Xa(b)&&z.Xa(c)){if(d.qa(b)===c)return!0;d.add(b,c);for(e in b){var g=b[e];if(!yg(e,g)){var h=c[e];if(void 0===h||!Ag(a,g,h,d))return!1}}for(var k in c)if(h=c[k],!yg(k,h)&&(g=b[k],void 0===g||!Ag(a,g,h,d)))return!1;
return!0}return!1}function Bg(a,b,c){a[c]!==b[c]&&z.k("Model.computeJsonDifference: Model."+c+' is not the same in both models: "'+a[c]+'" and "'+b[c]+'"')}
f.VB=function(a){Bg(this,a,"nodeKeyProperty");this instanceof Cg&&Bg(this,a,"nodeParentKeyProperty");for(var b=new K,c=new K,d=(new K).Uc(this.Gc.OF),e=new oa,g=a.ng,h=0;h<g.length;h++){var k=g[h],l=a.Cb(k);if(void 0!==l){d.remove(l);var m=this.Ge(l);null===m?(b.add(l),c.add(k)):Ag(this,m,k,e)||c.add(k)}else this.ZA(k),l=this.Cb(k),b.add(l),c.add(k)}g="";Ag(this,this.Xk,a.Xk,e)||(g+=vg(this));0<b.count&&(g+=this.Oy+zg(this,b.nc(),!0));0<c.count&&(g+=this.cC+zg(this,c.nc(),!0));0<d.count&&(g+=this.Qy+
zg(this,d.nc(),!0));return g};L.prototype.computeJsonDifference=L.prototype.computeJSONDifference=function(a,b){z.l(a,L,L,"computeJsonDifference:newmodel");void 0===b&&(b=this.constructor===L?"go.Model":this.constructor===X?"go.GraphLinksModel":this.constructor===Cg?"go.TreeModel":z.uf(this));return'{ "class": '+this.quote(b)+', "incremental": 1'+this.vo()+this.VB(a)+"}"};f=L.prototype;f.Oy=',\n  "insertedNodeKeys": ';f.cC=',\n  "modifiedNodeData": ';f.Qy=',\n  "removedNodeKeys": ';
f.TB=function(a,b){var c=this,d=!1,e=new K,g=new K,h=new K;a.bg.each(function(a){a.ia===c&&("nodeDataArray"===a.Af?a.Kc===sg?e.add(a.newValue):a.Kc===tg&&h.add(a.oldValue):c.ke(a.object)?g.add(a.object):c.Xk===a.object&&a.Kc===bg&&(d=!0))});var k=new K;e.each(function(a){k.add(c.Cb(a));b||g.add(a)});var l=new K;h.each(function(a){l.add(c.Cb(a));b&&g.add(a)});var m="";d&&(m+=vg(this));0<k.count&&(m+=(b?this.Qy:this.Oy)+zg(this,k.nc(),!0));0<g.count&&(m+=this.cC+zg(this,g.nc(),!0));0<l.count&&(m+=(b?
this.Oy:this.Qy)+zg(this,l.nc(),!0));return m};
f.nB=function(a){xg(this,a);var b=a.insertedNodeKeys;if(z.isArray(b))for(var c=z.bb(b),d=0;d<c;d++){var e=z.Ma(b,d),g=this.Ge(e);null===g&&(g=this.copyNodeData({}),this.yy(g,e),this.Tl(g))}b=a.modifiedNodeData;if(z.isArray(b))for(c=z.bb(b),d=0;d<c;d++){var h=z.Ma(b,d),e=this.Cb(h),g=this.Ge(e);if(null!==g)for(var k in h)"__gohashid"!==k&&k!==this.Nj&&this.setDataProperty(g,k,h[k])}a=a.removedNodeKeys;if(z.isArray(a))for(c=z.bb(a),d=0;d<c;d++)e=z.Ma(a,d),g=this.Ge(e),null!==g&&this.qy(g)};
L.prototype.toIncrementalJson=L.prototype.toIncrementalJSON=function(a,b){z.l(a,ag,L,"toIncrementalJson:e");a.Kc!==rg&&z.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+a.toString());var c=a.object;if(!(a.NF&&c instanceof Dg))return'{ "incremental": 0 }';void 0===b&&(b=this.constructor===L?"go.Model":this.constructor===X?"go.GraphLinksModel":this.constructor===Cg?"go.TreeModel":z.uf(this));return'{ "class": '+this.quote(b)+', "incremental": 1'+this.vo()+this.TB(c,"FinishedUndo"===
a.propertyName)+"}"};L.prototype.toJson=L.prototype.toJSON=L.prototype.KB=function(a){void 0===a&&(a=this.constructor===L?"go.Model":this.constructor===X?"go.GraphLinksModel":this.constructor===Cg?"go.TreeModel":z.uf(this));return'{ "class": '+this.quote(a)+this.vo()+this.UB()+"}"};
L.prototype.applyIncrementalJson=L.prototype.applyIncrementalJSON=function(a){var b=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{b=window.JSON.parse(a)}catch(c){u&&z.trace("JSON.parse error: "+c.toString())}else z.trace("WARNING: no JSON.parse available");else"object"===typeof a?b=a:z.k("Unable to modify a Model from: "+a);var d=b.incremental;"number"!==typeof d&&z.k("Unable to apply non-incremental changes to Model: "+a);0!==d&&(this.$b("applyIncrementalJson"),this.nB(b),this.Vd("applyIncrementalJson"))};
L.fromJson=L.fromJSON=function(a,b){void 0===b&&(b=null);null!==b&&z.l(b,L,L,"fromJson:model");var c=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){u&&z.trace("JSON.parse error: "+d.toString())}else z.trace("WARNING: no JSON.parse available");else"object"===typeof a?c=a:z.k("Unable to construct a Model from: "+a);if(null===b){var e;e=null;var g=c["class"];if("string"===typeof g)try{var h=null;0===g.indexOf("go.")?(g=g.substr(3),h=ca[g]):(h=ca[g],
void 0===h&&(h=window[g]));"function"===typeof h&&(e=new h)}catch(k){}null===e||e instanceof L?b=e:z.k("Unable to construct a Model of declared class: "+c["class"])}null===b&&(b=new X);b.Nu(c);b.oB(c);return b};
L.prototype.replaceJsonObjects=L.prototype.Qu=function(a){if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++){var d=z.Ma(a,c);z.Xa(d)&&z.BE(a,c,this.Qu(d))}else if(z.Xa(a)){for(c in a)d=a[c],z.Xa(d)&&(d=this.Qu(d),a[c]=d);if("object"===typeof a){d=a;c=a["class"];if("NaN"===c)d=NaN;else if("Date"===c)d=new Date(a.value);else if("go.Point"===c)d=new M(Eg(a.x),Eg(a.y));else if("go.Size"===c)d=new Fa(Eg(a.width),Eg(a.height));else if("go.Rect"===c)d=new w(Eg(a.x),Eg(a.y),Eg(a.width),Eg(a.height));else if("go.Margin"===
c)d=new Kb(Eg(a.top),Eg(a.right),Eg(a.bottom),Eg(a.left));else if("go.Spot"===c)d="string"===typeof a["enum"]?fc(a["enum"]):new R(Eg(a.x),Eg(a.y),Eg(a.offsetX),Eg(a.offsetY));else if("go.Brush"===c){if(d=new Ea,d.type=Ja(Ea,a.type),"string"===typeof a.color&&(d.color=a.color),a.start instanceof R&&(d.start=a.start),a.end instanceof R&&(d.end=a.end),"number"===typeof a.startRadius&&(d.$u=Eg(a.startRadius)),"number"===typeof a.endRadius&&(d.bu=Eg(a.endRadius)),a=a.colorStops,z.Xa(a))for(b in a)d.addColorStop(parseFloat(b),
a[b])}else"go.Geometry"===c?(b=null,b="string"===typeof a.path?of(a.path):new Ve,b.type=Ja(Ve,a.type),"number"===typeof a.startX&&(b.na=Eg(a.startX)),"number"===typeof a.startY&&(b.la=Eg(a.startY)),"number"===typeof a.endX&&(b.G=Eg(a.endX)),"number"===typeof a.endY&&(b.H=Eg(a.endY)),a.spot1 instanceof R&&(b.C=a.spot1),a.spot2 instanceof R&&(b.D=a.spot2),d=b):"go.EnumValue"===c&&(b=a.classType,0===b.indexOf("go.")&&(b=b.substr(3)),d=Ja(ca[b],a.name));a=d}}return a};
L.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++){var e=a[d];if('"'===e||"\\"===e)b+="\\"+e;else if("\b"===e)b+="\\b";else if("\f"===e)b+="\\f";else if("\n"===e)b+="\\n";else if("\r"===e)b+="\\r";else if("\t"===e)b+="\\t";else var g=a.charCodeAt(d),b=16>g?b+("\\u000"+a.charCodeAt(d).toString(16)):32>g?b+("\\u00"+a.charCodeAt(d).toString(16)):8232===g?b+"\\u2028":8233===g?b+"\\u2029":b+e}return'"'+b+'"'};
L.prototype.writeJsonValue=L.prototype.fv=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"===typeof a?this.quote(a):"number"===typeof a?Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.fv(a.valueOf()):z.isArray(a)?zg(this,a):z.Xa(a)?wg(this,a):"function"===typeof a?"null":a.toString()};
function zg(a,b,c){void 0===c&&(c=!1);var d=z.bb(b);if(0>=d)return"[]";var e=new Ba;e.add("[ ");c&&1<d&&e.add("\n");for(var g=0;g<d;g++){var h=z.Ma(b,g);void 0!==h&&(0<g&&(e.add(","),c&&e.add("\n")),e.add(a.fv(h)))}c&&1<d&&e.add("\n");e.add(" ]");return e.toString()}function yg(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"===typeof b?!0:!1}function Fg(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}
function wg(a,b){var c=b;if(c instanceof M){var d=c;b={"class":"go.Point",x:Fg(d.x),y:Fg(d.y)}}else if(c instanceof Fa){var e=c;b={"class":"go.Size",width:Fg(e.width),height:Fg(e.height)}}else if(c instanceof w)b={"class":"go.Rect",x:Fg(c.x),y:Fg(c.y),width:Fg(c.width),height:Fg(c.height)};else if(c instanceof Kb)b={"class":"go.Margin",top:Fg(c.top),right:Fg(c.right),bottom:Fg(c.bottom),left:Fg(c.left)};else if(c instanceof R)e=c,b=e.jd()?{"class":"go.Spot",x:Fg(e.x),y:Fg(e.y),offsetX:Fg(e.offsetX),
offsetY:Fg(e.offsetY)}:{"class":"go.Spot","enum":e.toString()};else if(c instanceof Ea){b={"class":"go.Brush",type:c.type.name};if(c.type===Zg)b.color=c.color;else if(c.type===$g||c.type===Bd)b.start=c.start,b.end=c.end,c.type===Bd&&(0!==c.$u&&(b.startRadius=Fg(c.$u)),isNaN(c.bu)||(b.endRadius=Fg(c.bu)));if(null!==c.Jk){for(var g={},h=c.Jk.j;h.next();)g[h.key]=h.value;b.colorStops=g}}else if(c instanceof Ve)b={"class":"go.Geometry",type:c.type.name},0!==c.na&&(b.startX=Fg(c.na)),0!==c.la&&(b.startY=
Fg(c.la)),0!==c.G&&(b.endX=Fg(c.G)),0!==c.H&&(b.endY=Fg(c.H)),c.C.O(hc)||(b.spot1=c.C),c.D.O(qc)||(b.spot2=c.D),c.type===We&&(b.path=nf(c));else if(c instanceof Ca)b={"class":"go.EnumValue",classType:z.uf(c.Pe),name:c.name};else if(c instanceof O||c instanceof C||c instanceof ah||c instanceof L||c instanceof bh||c instanceof ta||c instanceof ch||c instanceof ya||c instanceof ug||c instanceof Dg)return z.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+
c.toString()),"{}";g="{";c=!0;for(d in b)if(e=z.vb(b,d),!yg(d,e))if(c?c=!1:g+=", ",g+='"'+d+'":',"points"===d&&e instanceof J&&e.da===M){h=e;e="[";for(h=h.j;h.next();){var k=h.value;1<e.length&&(e+=",");e+=a.fv(k.x);e+=",";e+=a.fv(k.y)}e+="]";g+=e}else g+=a.fv(e);return g+"}"}function Eg(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}
z.defineProperty(L,{name:"name"},function(){return this.Xb},function(a){var b=this.Xb;b!==a&&(z.h(a,"string",L,"name"),this.Xb=a,this.i("name",b,a))});z.defineProperty(L,{dm:"dataFormat"},function(){return this.Ar},function(a){var b=this.Ar;b!==a&&(z.h(a,"string",L,"dataFormat"),this.Ar=a,this.i("dataFormat",b,a))});z.defineProperty(L,{kb:"isReadOnly"},function(){return this.aj},function(a){var b=this.aj;b!==a&&(z.h(a,"boolean",L,"isReadOnly"),this.aj=a,this.i("isReadOnly",b,a))});
z.defineProperty(L,{Xk:"modelData"},function(){return this.Kz},function(a){var b=this.Kz;b!==a&&(z.h(a,"object",L,"modelData"),this.Kz=a,this.i("modelData",b,a),this.Nb(a))});L.prototype.addChangedListener=L.prototype.An=function(a){z.h(a,"function",L,"addChangedListener:listener");null===this.qk&&(this.qk=new J("function"));this.qk.add(a)};
L.prototype.removeChangedListener=L.prototype.Ou=function(a){z.h(a,"function",L,"removeChangedListener:listener");null!==this.qk&&(this.qk.remove(a),0===this.qk.count&&(this.qk=null))};L.prototype.mx=function(a){this.Eb||this.sa.wF(a);if(null!==this.qk){var b=this.qk,c=b.length;if(1===c)b=b.fa(0),b(a);else if(0!==c)for(var d=b.nc(),e=0;e<c;e++)b=d[e],b(a)}};L.prototype.raiseChangedEvent=L.prototype.ld=function(a,b,c,d,e,g,h){dh(this,"",a,b,c,d,e,g,h)};
L.prototype.raiseChanged=L.prototype.i=function(a,b,c,d,e){dh(this,"",bg,a,this,b,c,d,e)};L.prototype.raiseDataChanged=L.prototype.mB=function(a,b,c,d,e,g){dh(this,"",bg,b,a,c,d,e,g)};function dh(a,b,c,d,e,g,h,k,l){void 0===k&&(k=null);void 0===l&&(l=null);var m=new ag;m.ia=a;m.Kc=c;m.Af=b;m.propertyName=d;m.object=e;m.oldValue=g;m.Oj=k;m.newValue=h;m.Mj=l;a.mx(m)}
z.defineProperty(L,{sa:"undoManager"},function(){return this.bA},function(a){var b=this.bA;b!==a&&(z.l(a,ug,L,"undoManager"),null!==b&&b.ZJ(this),this.bA=a,null!==a&&a.LH(this))});z.defineProperty(L,{Eb:"skipsUndoManager"},function(){return this.rj},function(a){z.h(a,"boolean",L,"skipsUndoManager");this.rj=a});
L.prototype.En=function(a,b){if(null!==a&&a.ia===this)if(a.Kc===bg){var c=a.object,d=a.propertyName,e=a.qa(b);z.Ua(c,d,e)}else a.Kc===sg?(c=a.Mj,"nodeDataArray"===a.Af?(d=a.newValue,z.Xa(d)&&"number"===typeof c&&(e=this.Cb(d),b?(z.Ma(this.ye,c)===d&&z.Rg(this.ye,c),void 0!==e&&this.Gc.remove(e)):(z.Ma(this.ye,c)!==d&&z.Hh(this.ye,c,d),void 0!==e&&this.Gc.add(e,d)))):""===a.Af?(d=a.object,!z.isArray(d)&&a.propertyName&&(d=z.vb(a.object,a.propertyName)),z.isArray(d)&&"number"===typeof c&&(e=a.newValue,
b?z.Rg(d,c):z.Hh(d,c,e))):z.k("unknown ChangedEvent.Insert modelChange: "+a.toString())):a.Kc===tg?(c=a.Oj,"nodeDataArray"===a.Af?(d=a.oldValue,z.Xa(d)&&"number"===typeof c&&(e=this.Cb(d),b?(z.Ma(this.ye,c)!==d&&z.Hh(this.ye,c,d),void 0!==e&&this.Gc.add(e,d)):(z.Ma(this.ye,c)===d&&z.Rg(this.ye,c),void 0!==e&&this.Gc.remove(e)))):""===a.Af?(d=a.object,!z.isArray(d)&&a.propertyName&&(d=z.vb(a.object,a.propertyName)),z.isArray(d)&&"number"===typeof c&&(e=a.oldValue,b?z.Hh(d,c,e):z.Rg(d,c))):z.k("unknown ChangedEvent.Remove modelChange: "+
a.toString())):a.Kc!==rg&&z.k("unknown ChangedEvent: "+a.toString())};L.prototype.startTransaction=L.prototype.$b=function(a){return this.sa.$b(a)};L.prototype.commitTransaction=L.prototype.Vd=function(a){return this.sa.Vd(a)};L.prototype.rollbackTransaction=L.prototype.Lq=function(){return this.sa.Lq()};L.prototype.updateTargetBindings=L.prototype.Nb=function(a,b){void 0===b&&(b="");dh(this,"SourceChanged",rg,b,a,null,null)};
z.defineProperty(L,{Nj:"nodeKeyProperty"},function(){return this.uk},function(a){var b=this.uk;b!==a&&(eh(a,L,"nodeKeyProperty"),""===a&&z.k("Model.nodeKeyProperty may not be the empty string"),0<this.Gc.count&&z.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.uk=a,this.i("nodeKeyProperty",b,a))});function eh(a,b,c){"string"!==typeof a&&"function"!==typeof a&&z.hc(a,"string or function",b,c)}
L.prototype.getKeyForNodeData=L.prototype.Cb=function(a){if(null!==a){var b=this.uk;if(""!==b&&(b=z.vb(a,b),void 0!==b)){if(fh(b))return b;z.k("Key value for node data "+a+" is not a number or a string: "+b)}}};
L.prototype.setKeyForNodeData=L.prototype.yy=function(a,b){void 0!==b&&null!==b&&fh(b)||z.hc(b,"number or string",L,"setKeyForNodeData:key");if(null!==a){var c=this.uk;if(""!==c)if(this.ke(a)){var d=z.vb(a,c);d!==b&&null===this.Ge(b)&&(z.Ua(a,c,b),this.Gc.remove(d),this.Gc.add(b,a),dh(this,"nodeKey",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c),this.Pu(d,b))}else z.Ua(a,c,b)}};
z.defineProperty(L,{UL:"makeUniqueKeyFunction"},function(){return this.sp},function(a){var b=this.sp;b!==a&&(null!==a&&z.h(a,"function",L,"makeUniqueKeyFunction"),this.sp=a,this.i("makeUniqueKeyFunction",b,a))});function fh(a){return"number"===typeof a||"string"===typeof a}L.prototype.containsNodeData=L.prototype.ke=function(a){var b=this.Cb(a);return void 0===b?!1:this.Gc.qa(b)===a};
L.prototype.findNodeDataForKey=L.prototype.Ge=function(a){null===a&&z.k("Model.findNodeDataForKey:key must not be null");return void 0!==a&&fh(a)?this.Gc.qa(a):null};
z.defineProperty(L,{ng:"nodeDataArray"},function(){return this.ye},function(a){var b=this.ye;if(b!==a){z.Tt(a,L,"nodeDataArray");this.Gc.clear();this.PB();for(var c=z.bb(a),d=0;d<c;d++){var e=z.Ma(a,d);if(!z.Xa(e)){z.k("Model.nodeDataArray must only contain Objects, not: "+e);return}z.oq(e)}this.ye=a;for(var g=new J(Object),d=0;d<c;d++){var e=z.Ma(a,d),h=this.Cb(e);void 0===h?g.add(e):null!==this.Gc.qa(h)?g.add(e):this.Gc.add(h,e)}for(d=g.j;d.next();)e=d.value,this.ZA(e),g=this.Cb(e),void 0!==g&&
this.Gc.add(g,e);dh(this,"nodeDataArray",bg,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=z.Ma(a,d),this.Kq(e),this.Jq(e);this.EE();z.fJ(a)||(this.kb=!0)}});
L.prototype.makeNodeDataKeyUnique=L.prototype.ZA=function(a){if(null!==a){var b=this.uk;if(""!==b){var c=this.Cb(a);if(void 0===c||this.Gc.contains(c)){var d=this.sp;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.Gc.contains(c))){z.Ua(a,b,c);return}if("string"===typeof c){for(d=2;this.Gc.contains(c+d);)d++;z.Ua(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.Gc.count-1;this.Gc.contains(d);)d--;z.Ua(a,b,d)}else z.k("Model.getKeyForNodeData returned something other than a string or a number: "+
c)}}}};L.prototype.addNodeData=L.prototype.Tl=function(a){null!==a&&(z.oq(a),this.ke(a)||gh(this,a,!0))};function gh(a,b,c){var d=a.Cb(b);if(void 0===d||a.Gc.qa(d)!==b)a.ZA(b),d=a.Cb(b),void 0===d?z.k("Model.makeNodeDataKeyUnique failed on "+b+".  Data not added to Model."):(a.Gc.add(d,b),d=null,c&&(d=z.bb(a.ye),z.Hh(a.ye,d,b)),dh(a,"nodeDataArray",sg,"nodeDataArray",a,null,b,null,d),a.Kq(b),a.Jq(b))}
L.prototype.addNodeDataCollection=function(a){if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++)this.Tl(z.Ma(a,c));else for(a=a.j;a.next();)this.Tl(a.value)};L.prototype.removeNodeData=L.prototype.qy=function(a){null!==a&&hh(this,a,!0)};function hh(a,b,c){var d=a.Cb(b);void 0!==d&&a.Gc.remove(d);d=null;if(c){d=z.Yl(a.ye,b);if(0>d)return;z.Rg(a.ye,d)}dh(a,"nodeDataArray",tg,"nodeDataArray",a,b,null,d,null);a.dv(b)}
L.prototype.removeNodeDataCollection=function(a){if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++)this.qy(z.Ma(a,c));else for(a=a.j;a.next();)this.qy(a.value)};f=L.prototype;f.Pu=function(a,b){var c=ih(this,a);c instanceof K&&this.vg.add(b,c)};f.PB=function(){};f.Kq=function(){};f.Jq=function(){};f.dv=function(){};function jh(a,b,c){if(void 0!==b){var d=a.vg.qa(b);null===d&&(d=new K(Object),a.vg.add(b,d));d.add(c)}}
function kh(a,b,c){if(void 0!==b){var d=a.vg.qa(b);d instanceof K&&(void 0===c||null===c?a.vg.remove(b):(d.remove(c),0===d.count&&a.vg.remove(b)))}}function ih(a,b){if(void 0===b)return null;var c=a.vg.qa(b);return c instanceof K?c:null}L.prototype.clearUnresolvedReferences=L.prototype.EE=function(a){void 0===a?this.vg.clear():this.vg.remove(a)};
z.defineProperty(L,{kL:"copyNodeDataFunction"},function(){return this.Lo},function(a){var b=this.Lo;b!==a&&(null!==a&&z.h(a,"function",L,"copyNodeDataFunction"),this.Lo=a,this.i("copyNodeDataFunction",b,a))});z.defineProperty(L,{rA:"copiesArrays"},function(){return this.Av},function(a){var b=this.Av;b!==a&&(null!==a&&z.h(a,"boolean",L,"copiesArrays"),this.Av=a,this.i("copiesArrays",b,a))});
z.defineProperty(L,{qA:"copiesArrayObjects"},function(){return this.sr},function(a){var b=this.sr;b!==a&&(null!==a&&z.h(a,"boolean",L,"copiesArrayObjects"),this.sr=a,this.i("copiesArrayObjects",b,a))});L.prototype.copyNodeData=function(a){if(null===a)return null;var b=null,b=this.Lo,b=null!==b?b(a,this):lh(this,a,!0);z.Xa(b)&&z.wc(b);return b};
function lh(a,b,c){if(a.rA&&Array.isArray(b)){var d=[];for(c=0;c<b.length;c++){var e=lh(a,b[c],a.qA);d.push(e)}z.wc(d);return d}if(c&&z.Xa(b)){c=(c=b.constructor)?new c:{};for(d in b)if("__gohashid"!==d){var e=z.vb(b,d),g;g=e;g instanceof O||g instanceof C||g instanceof ah||g instanceof mh||g instanceof nh||g instanceof bh||g instanceof ta||g instanceof ch||g instanceof Yf||g instanceof $f?("_"!==d[0]&&z.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+
d+'" of data object: '+b.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+g.toString()),g=!0):g=g instanceof L||g instanceof ug||g instanceof Dg||g instanceof ag?!0:!1;g||(e=lh(a,e,!1));z.Ua(c,d,e)}z.wc(c);return c}return b instanceof M?b.copy():b instanceof Fa?b.copy():b instanceof w?b.copy():b instanceof R?b.copy():b instanceof Kb?b.copy():b}
z.defineProperty(L,{NH:"afterCopyFunction"},function(){return this.er},function(a){var b=this.er;b!==a&&(null!==a&&z.h(a,"function",L,"afterCopyFunction"),this.er=a,this.i("afterCopyFunction",b,a))});var oh=!1;
L.prototype.setDataProperty=function(a,b,c){u&&(z.h(a,"object",L,"setDataProperty:data"),z.h(b,"string",L,"setDataProperty:propname"),""===b&&z.k("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.ke(a))if(b===this.Nj)this.yy(a,c);else{if(b===this.jo){this.xy(a,c);return}}else!oh&&a instanceof O&&(oh=!0,z.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));var d=z.vb(a,b);d!==c&&
(z.Ua(a,b,c),this.mB(a,b,d,c))};L.prototype.addArrayItem=function(a,b){this.PA(a,-1,b)};L.prototype.insertArrayItem=L.prototype.PA=function(a,b,c){u&&(z.Tt(a,L,"insertArrayItem:arr"),z.p(b,L,"insertArrayItem:idx"));a===this.ye&&z.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=z.bb(a));z.Hh(a,b,c);dh(this,"",sg,"",a,null,c,null,b)};
L.prototype.removeArrayItem=L.prototype.hG=function(a,b){void 0===b&&(b=-1);u&&(z.Tt(a,L,"removeArrayItem:arr"),z.p(b,L,"removeArrayItem:idx"));a===this.ye&&z.k("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=z.bb(a)-1);var c=z.Ma(a,b);z.Rg(a,b);dh(this,"",tg,"",a,c,null,b,null)};z.defineProperty(L,{jo:"nodeCategoryProperty"},function(){return this.dn},function(a){var b=this.dn;b!==a&&(eh(a,L,"nodeCategoryProperty"),this.dn=a,this.i("nodeCategoryProperty",b,a))});
L.prototype.getCategoryForNodeData=L.prototype.IA=function(a){if(null===a)return"";var b=this.dn;if(""===b)return"";b=z.vb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;z.k("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
L.prototype.setCategoryForNodeData=L.prototype.xy=function(a,b){z.h(b,"string",L,"setCategoryForNodeData:cat");if(null!==a){var c=this.dn;if(""!==c)if(this.ke(a)){var d=z.vb(a,c);void 0===d&&(d="");d!==b&&(z.Ua(a,c,b),dh(this,"nodeCategory",bg,c,a,d,b))}else z.Ua(a,c,b)}};
function X(a,b){2<arguments.length&&z.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");L.call(this);this.bf=[];this.hi=new K(Object);this.qd=new oa(null,Object);this.Fl="";this.ol=this.Ko=this.tp=null;this.ii="from";this.ji="to";this.$m=this.Zm="";this.Ym="category";this.Gg="";this.xp="isGroup";this.yh="group";this.tr=!1;void 0!==a&&(this.ng=a);void 0!==b&&(this.Xg=b)}z.Ta(X,L);z.ka("GraphLinksModel",X);
X.prototype.cloneProtected=function(a){L.prototype.cloneProtected.call(this,a);a.Fl=this.Fl;a.tp=this.tp;a.Ko=this.Ko;a.ii=this.ii;a.ji=this.ji;a.Zm=this.Zm;a.$m=this.$m;a.Ym=this.Ym;a.Gg=this.Gg;a.xp=this.xp;a.yh=this.yh;a.tr=this.tr};X.prototype.clear=X.prototype.clear=function(){L.prototype.clear.call(this);this.bf=[];this.qd.clear();this.hi.clear()};f=X.prototype;
f.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.KB();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.ng;for(var c=z.bb(a),d=0,d=0;d<c;d++)var e=z.Ma(a,d),b=b+(" "+this.Cb(e)+":"+ka(e));b+="\n link data:";a=this.Xg;c=z.bb(a);for(d=0;d<c;d++)e=z.Ma(a,d),b+=" "+this.mm(e)+"--\x3e"+this.nm(e)}return b};
f.vo=function(){var a=L.prototype.vo.call(this),b="";"category"!==this.zu&&"string"===typeof this.zu&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.zu));""!==this.Kj&&"string"===typeof this.Kj&&(b+=',\n  "linkKeyProperty": '+this.quote(this.Kj));"from"!==this.co&&"string"===typeof this.co&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.co));"to"!==this.eo&&"string"===typeof this.eo&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.eo));""!==this.Au&&"string"===typeof this.Au&&(b+=',\n  "linkFromPortIdProperty": '+
this.quote(this.Au));""!==this.Cu&&"string"===typeof this.Cu&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.Cu));""!==this.Bu&&"string"===typeof this.Bu&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.Bu));"isGroup"!==this.Ju&&"string"===typeof this.Ju&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.Ju));"group"!==this.Iu&&"string"===typeof this.Iu&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Iu));return a+b};
f.Nu=function(a){L.prototype.Nu.call(this,a);a.linkKeyProperty&&(this.Kj=a.linkKeyProperty);a.linkFromKeyProperty&&(this.co=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.eo=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.Au=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Cu=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.zu=a.linkCategoryProperty);a.linkLabelKeysProperty&&(this.Bu=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&(this.Ju=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&
(this.Iu=a.nodeGroupKeyProperty)};f.UB=function(){var a=L.prototype.UB.call(this),b=',\n  "linkDataArray": '+zg(this,this.Xg,!0);return a+b};f.oB=function(a){L.prototype.oB.call(this,a);a=a.linkDataArray;z.isArray(a)&&(this.Qu(a),this.Xg=a)};
f.VB=function(a){a instanceof X||z.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel");""===this.Kj&&z.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var b=L.prototype.VB.call(this,a);Bg(this,a,"linkKeyProperty");Bg(this,a,"linkFromKeyProperty");Bg(this,a,"linkToKeyProperty");Bg(this,a,"linkLabelKeysProperty");Bg(this,a,"nodeIsGroupProperty");Bg(this,a,"nodeGroupKeyProperty");for(var c=new K,d=new K,e=(new K).Uc(this.qd.OF),
g=new oa,h=a.Xg,k=0;k<h.length;k++){var l=h[k],m=a.eg(l);if(void 0!==m){e.remove(m);var n=this.jq(m);null===n?(c.add(m),d.add(l)):Ag(this,n,l,g)||d.add(l)}else this.YA(l),m=this.eg(l),c.add(m),d.add(l)}a=b;0<c.count&&(a+=this.Ny+zg(this,c.nc(),!0));0<d.count&&(a+=this.bC+zg(this,d.nc(),!0));0<e.count&&(a+=this.Py+zg(this,e.nc(),!0));return a};f.Ny=',\n  "insertedLinkKeys": ';f.bC=',\n  "modifiedLinkData": ';f.Py=',\n  "removedLinkKeys": ';
f.TB=function(a,b){""===this.Kj&&z.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var c=L.prototype.TB.call(this,a,b),d=this,e=new K,g=new K,h=new K;a.bg.each(function(a){a.ia===d&&("linkDataArray"===a.Af?a.Kc===sg?e.add(a.newValue):a.Kc===tg&&h.add(a.oldValue):d.Kh(a.object)&&g.add(a.object))});var k=new K;e.each(function(a){k.add(d.eg(a));b||g.add(a)});var l=new K;h.each(function(a){l.add(d.eg(a));b&&g.add(a)});0<k.count&&(c+=(b?this.Py:this.Ny)+
zg(this,k.nc(),!0));0<g.count&&(c+=this.bC+zg(this,g.nc(),!0));0<l.count&&(c+=(b?this.Ny:this.Py)+zg(this,l.nc(),!0));return c};
f.nB=function(a){L.prototype.nB.call(this,a);var b=a.insertedLinkKeys;if(z.isArray(b))for(var c=z.bb(b),d=0;d<c;d++){var e=z.Ma(b,d),g=this.jq(e);null===g&&(g=this.qx({}),this.EG(g,e),this.Mt(g))}b=a.modifiedLinkData;if(z.isArray(b))for(c=z.bb(b),d=0;d<c;d++){var h=z.Ma(b,d),e=this.eg(h),g=this.jq(e);if(null!==g)for(var k in h)"__gohashid"!==k&&k!==this.Kj&&this.setDataProperty(g,k,h[k])}a=a.removedLinkKeys;if(z.isArray(a))for(c=z.bb(a),d=0;d<c;d++)e=z.Ma(a,d),g=this.jq(e),null!==g&&this.py(g)};
f.En=function(a,b){if(a.Kc===sg){var c=a.Mj;if("linkDataArray"===a.Af){var d=a.newValue;if(z.Xa(d)&&"number"===typeof c){var e=this.eg(d);b?(this.hi.remove(d),z.Ma(this.bf,c)===d&&z.Rg(this.bf,c),void 0!==e&&this.qd.remove(e)):(this.hi.add(d),z.Ma(this.bf,c)!==d&&z.Hh(this.bf,c,d),void 0!==e&&this.qd.add(e,d))}return}if("linkLabelKeys"===a.Af){d=this.Rk(a.object);z.isArray(d)&&"number"===typeof c&&(b?(c=z.Yl(d,a.newValue),0<=c&&z.Rg(d,c)):0>z.Yl(d,a.newValue)&&z.Hh(d,c,a.newValue));return}}else if(a.Kc===
tg){c=a.Oj;if("linkDataArray"===a.Af){d=a.oldValue;z.Xa(d)&&"number"===typeof c&&(e=this.eg(d),b?(this.hi.add(d),z.Ma(this.bf,c)!==d&&z.Hh(this.bf,c,d),void 0!==e&&this.qd.add(e,d)):(this.hi.remove(d),z.Ma(this.bf,c)===d&&z.Rg(this.bf,c),void 0!==e&&this.qd.remove(e)));return}if("linkLabelKeys"===a.Af){d=this.Rk(a.object);z.isArray(d)&&"number"===typeof c&&(b?0>z.Yl(d,a.newValue)&&z.Hh(d,c,a.newValue):(c=z.Yl(d,a.newValue),0<=c&&z.Rg(d,c)));return}}L.prototype.En.call(this,a,b)};
z.defineProperty(X,{jA:"archetypeNodeData"},function(){return this.ol},function(a){var b=this.ol;b!==a&&(null!==a&&z.l(a,Object,X,"archetypeNodeData"),this.ol=a,this.i("archetypeNodeData",b,a))});X.prototype.ho=function(a){if(void 0!==a){var b=this.ol;if(null!==b){var c=this.Ge(a);null===c&&(c=this.copyNodeData(b),z.Ua(c,this.uk,a),this.Tl(c))}return a}};
z.defineProperty(X,{co:"linkFromKeyProperty"},function(){return this.ii},function(a){var b=this.ii;b!==a&&(eh(a,X,"linkFromKeyProperty"),this.ii=a,this.i("linkFromKeyProperty",b,a))});X.prototype.getFromKeyForLinkData=X.prototype.mm=function(a){if(null!==a){var b=this.ii;if(""!==b&&(b=z.vb(a,b),void 0!==b)){if(fh(b))return b;z.k("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
X.prototype.setFromKeyForLinkData=X.prototype.xB=function(a,b){null===b&&(b=void 0);void 0===b||fh(b)||z.hc(b,"number or string",X,"setFromKeyForLinkData:key");if(null!==a){var c=this.ii;if(""!==c)if(b=this.ho(b),this.Kh(a)){var d=z.vb(a,c);d!==b&&(kh(this,d,a),z.Ua(a,c,b),null===this.Ge(b)&&jh(this,b,a),dh(this,"linkFromKey",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
z.defineProperty(X,{eo:"linkToKeyProperty"},function(){return this.ji},function(a){var b=this.ji;b!==a&&(eh(a,X,"linkToKeyProperty"),this.ji=a,this.i("linkToKeyProperty",b,a))});X.prototype.getToKeyForLinkData=X.prototype.nm=function(a){if(null!==a){var b=this.ji;if(""!==b&&(b=z.vb(a,b),void 0!==b)){if(fh(b))return b;z.k("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
X.prototype.setToKeyForLinkData=X.prototype.DB=function(a,b){null===b&&(b=void 0);void 0===b||fh(b)||z.hc(b,"number or string",X,"setToKeyForLinkData:key");if(null!==a){var c=this.ji;if(""!==c)if(b=this.ho(b),this.Kh(a)){var d=z.vb(a,c);d!==b&&(kh(this,d,a),z.Ua(a,c,b),null===this.Ge(b)&&jh(this,b,a),dh(this,"linkToKey",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
z.defineProperty(X,{Au:"linkFromPortIdProperty"},function(){return this.Zm},function(a){var b=this.Zm;b!==a&&(eh(a,X,"linkFromPortIdProperty"),a!==this.co&&a!==this.eo||z.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+a),this.Zm=a,this.i("linkFromPortIdProperty",b,a))});X.prototype.getFromPortIdForLinkData=X.prototype.JI=function(a){if(null===a)return"";var b=this.Zm;if(""===b)return"";a=z.vb(a,b);return void 0===a?"":a};
X.prototype.setFromPortIdForLinkData=X.prototype.yB=function(a,b){z.h(b,"string",X,"setFromPortIdForLinkData:portname");if(null!==a){var c=this.Zm;if(""!==c)if(this.Kh(a)){var d=z.vb(a,c);void 0===d&&(d="");d!==b&&(z.Ua(a,c,b),dh(this,"linkFromPortId",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
z.defineProperty(X,{Cu:"linkToPortIdProperty"},function(){return this.$m},function(a){var b=this.$m;b!==a&&(eh(a,X,"linkToPortIdProperty"),a!==this.co&&a!==this.eo||z.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+a),this.$m=a,this.i("linkToPortIdProperty",b,a))});X.prototype.getToPortIdForLinkData=X.prototype.NI=function(a){if(null===a)return"";var b=this.$m;if(""===b)return"";a=z.vb(a,b);return void 0===a?"":a};
X.prototype.setToPortIdForLinkData=X.prototype.EB=function(a,b){z.h(b,"string",X,"setToPortIdForLinkData:portname");if(null!==a){var c=this.$m;if(""!==c)if(this.Kh(a)){var d=z.vb(a,c);void 0===d&&(d="");d!==b&&(z.Ua(a,c,b),dh(this,"linkToPortId",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};z.defineProperty(X,{Bu:"linkLabelKeysProperty"},function(){return this.Gg},function(a){var b=this.Gg;b!==a&&(eh(a,X,"linkLabelKeysProperty"),this.Gg=a,this.i("linkLabelKeysProperty",b,a))});
X.prototype.getLabelKeysForLinkData=X.prototype.Rk=function(a){if(null===a)return z.bl;var b=this.Gg;if(""===b)return z.bl;a=z.vb(a,b);return void 0===a?z.bl:a};
X.prototype.setLabelKeysForLinkData=X.prototype.FG=function(a,b){z.Tt(b,X,"setLabelKeysForLinkData:arr");if(null!==a){var c=this.Gg;if(""!==c)if(this.Kh(a)){var d=z.vb(a,c);void 0===d&&(d=z.bl);if(d!==b){for(var e=z.bb(d),g=0;g<e;g++){var h=z.Ma(d,g);kh(this,h,a)}z.Ua(a,c,b);e=z.bb(b);for(g=0;g<e;g++)h=z.Ma(b,g),null===this.Ge(h)&&jh(this,h,a);dh(this,"linkLabelKeys",bg,c,a,d,b);"string"===typeof c&&this.Nb(a,c)}}else z.Ua(a,c,b)}};
X.prototype.addLabelKeyForLinkData=X.prototype.uE=function(a,b){if(null!==b&&void 0!==b&&(fh(b)||z.hc(b,"number or string",X,"addLabelKeyForLinkData:key"),null!==a)){var c=this.Gg;if(""!==c){var d=z.vb(a,c);if(void 0===d)c=[],c.push(b),this.FG(a,c);else if(z.isArray(d)){var e=z.Yl(d,b);0<=e||(e=z.bb(d),z.Hh(d,Infinity,b),this.Kh(a)&&(null===this.Ge(b)&&jh(this,b,a),dh(this,"linkLabelKeys",sg,c,a,null,b,null,e)))}else z.k(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
X.prototype.removeLabelKeyForLinkData=X.prototype.YJ=function(a,b){if(null!==b&&void 0!==b&&(fh(b)||z.hc(b,"number or string",X,"removeLabelKeyForLinkData:key"),null!==a)){var c=this.Gg;if(""!==c){var d=z.vb(a,c);if(z.isArray(d)){var e=z.Yl(d,b);0>e||(z.Rg(d,e),this.Kh(a)&&(kh(this,b,a),dh(this,"linkLabelKeys",tg,c,a,b,null,e,null)))}else void 0!==d&&z.k(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};
z.defineProperty(X,{Xg:"linkDataArray"},function(){return this.bf},function(a){var b=this.bf;if(b!==a){z.Tt(a,X,"linkDataArray");this.qd.clear();for(var c=z.bb(a),d=0;d<c;d++){var e=z.Ma(a,d);if(!z.Xa(e)){z.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}z.oq(e)}this.bf=a;if(""!==this.Kj){for(var g=new J(Object),d=0;d<c;d++){var e=z.Ma(a,d),h=this.eg(e);void 0===h?g.add(e):null!==this.qd.qa(h)?g.add(e):this.qd.add(h,e)}for(d=g.j;d.next();)e=d.value,this.YA(e),g=this.eg(e),
void 0!==g&&this.qd.add(g,e)}g=new K(Object);for(d=0;d<c;d++)e=z.Ma(a,d),g.add(e);this.hi=g;dh(this,"linkDataArray",bg,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=z.Ma(a,d),ph(this,e)}});z.defineProperty(X,{Kj:"linkKeyProperty"},function(){return this.Fl},function(a){var b=this.Fl;if(b!==a){eh(a,X,"linkKeyProperty");this.Fl=a;this.qd.clear();for(var c=z.bb(this.Xg),d=0;d<c;d++){var e=z.Ma(this.Xg,d),g=this.eg(e);void 0!==g&&this.qd.add(g,e)}this.i("linkKeyProperty",b,a)}});
X.prototype.getKeyForLinkData=X.prototype.eg=function(a){if(null!==a){var b=this.Fl;if(""!==b&&(b=z.vb(a,b),void 0!==b)){if(fh(b))return b;z.k("Key value for link data "+a+" is not a number or a string: "+b)}}};
X.prototype.setKeyForLinkData=X.prototype.EG=function(a,b){void 0!==b&&null!==b&&fh(b)||z.hc(b,"number or string",X,"setKeyForLinkData:key");if(null!==a){var c=this.Fl;if(""!==c)if(this.Kh(a)){var d=z.vb(a,c);d!==b&&null===this.jq(b)&&(z.Ua(a,c,b),this.qd.remove(d),this.qd.add(b,a),dh(this,"linkKey",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
z.defineProperty(X,{VL:"makeUniqueLinkKeyFunction"},function(){return this.tp},function(a){var b=this.tp;b!==a&&(null!==a&&z.h(a,"function",X,"makeUniqueLinkKeyFunction"),this.tp=a,this.i("makeUniqueLinkKeyFunction",b,a))});X.prototype.findLinkDataForKey=X.prototype.jq=function(a){null===a&&z.k("GraphLinksModel.findLinkDataForKey:key must not be null");return void 0!==a&&fh(a)?this.qd.qa(a):null};
X.prototype.makeLinkDataKeyUnique=X.prototype.YA=function(a){if(null!==a){var b=this.Fl;if(""!==b){var c=this.eg(a);if(void 0===c||this.qd.contains(c)){var d=this.tp;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.qd.contains(c))){z.Ua(a,b,c);return}if("string"===typeof c){for(d=2;this.qd.contains(c+d);)d++;z.Ua(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.qd.count-1;this.qd.contains(d);)d--;z.Ua(a,b,d)}else z.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+
c)}}}};X.prototype.containsLinkData=X.prototype.Kh=function(a){return null===a?!1:this.hi.contains(a)};X.prototype.addLinkData=X.prototype.Mt=function(a){null!==a&&(z.oq(a),this.Kh(a)||qh(this,a,!0))};
function qh(a,b,c){if(""!==a.Kj){var d=a.eg(b);if(void 0!==d&&a.qd.qa(d)===b)return;a.YA(b);d=a.eg(b);if(void 0===d){z.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+b+". Data not added to model.");return}a.qd.add(d,b)}a.hi.add(b);d=null;c&&(d=z.bb(a.bf),z.Hh(a.bf,d,b));dh(a,"linkDataArray",sg,"linkDataArray",a,null,b,null,d);ph(a,b)}X.prototype.addLinkDataCollection=function(a){if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++)this.Mt(z.Ma(a,c));else for(a=a.j;a.next();)this.Mt(a.value)};
X.prototype.removeLinkData=X.prototype.py=function(a){null!==a&&rh(this,a,!0)};function rh(a,b,c){a.hi.remove(b);var d=a.eg(b);void 0!==d&&a.qd.remove(d);d=null;if(c){d=z.Yl(a.bf,b);if(0>d)return;z.Rg(a.bf,d)}dh(a,"linkDataArray",tg,"linkDataArray",a,b,null,d,null);c=a.mm(b);kh(a,c,b);c=a.nm(b);kh(a,c,b);d=a.Rk(b);if(z.isArray(d))for(var e=z.bb(d),g=0;g<e;g++)c=z.Ma(d,g),kh(a,c,b)}
X.prototype.removeLinkDataCollection=function(a){if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++)this.py(z.Ma(a,c));else for(a=a.j;a.next();)this.py(a.value)};function ph(a,b){var c=a.mm(b),c=a.ho(c);null===a.Ge(c)&&jh(a,c,b);c=a.nm(b);c=a.ho(c);null===a.Ge(c)&&jh(a,c,b);var d=a.Rk(b);if(z.isArray(d))for(var e=z.bb(d),g=0;g<e;g++)c=z.Ma(d,g),null===a.Ge(c)&&jh(a,c,b)}
z.defineProperty(X,{jL:"copyLinkDataFunction"},function(){return this.Ko},function(a){var b=this.Ko;b!==a&&(null!==a&&z.h(a,"function",X,"copyLinkDataFunction"),this.Ko=a,this.i("copyLinkDataFunction",b,a))});X.prototype.copyLinkData=X.prototype.qx=function(a){if(null===a)return null;var b=null,b=this.Ko,b=null!==b?b(a,this):lh(this,a,!0);z.Xa(b)&&(z.wc(b),""!==this.ii&&z.Ua(b,this.ii,void 0),""!==this.ji&&z.Ua(b,this.ji,void 0),""!==this.Gg&&z.Ua(b,this.Gg,[]));return b};
z.defineProperty(X,{Ju:"nodeIsGroupProperty"},function(){return this.xp},function(a){var b=this.xp;b!==a&&(eh(a,X,"nodeIsGroupProperty"),this.xp=a,this.i("nodeIsGroupProperty",b,a))});X.prototype.isGroupForNodeData=X.prototype.SA=function(a){if(null===a)return!1;var b=this.xp;return""===b?!1:z.vb(a,b)?!0:!1};z.defineProperty(X,{Iu:"nodeGroupKeyProperty"},function(){return this.yh},function(a){var b=this.yh;b!==a&&(eh(a,X,"nodeGroupKeyProperty"),this.yh=a,this.i("nodeGroupKeyProperty",b,a))});
z.defineProperty(X,{In:"copiesGroupKeyOfNodeData"},function(){return this.tr},function(a){this.tr!==a&&(z.h(a,"boolean",X,"copiesGroupKeyOfNodeData"),this.tr=a)});X.prototype.getGroupKeyForNodeData=X.prototype.Sn=function(a){if(null!==a){var b=this.yh;if(""!==b&&(b=z.vb(a,b),void 0!==b)){if(fh(b))return b;z.k("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
X.prototype.setGroupKeyForNodeData=X.prototype.zB=function(a,b){null===b&&(b=void 0);void 0===b||fh(b)||z.hc(b,"number or string",X,"setGroupKeyForNodeData:key");if(null!==a){var c=this.yh;if(""!==c)if(this.ke(a)){var d=z.vb(a,c);d!==b&&(kh(this,d,a),z.Ua(a,c,b),null===this.Ge(b)&&jh(this,b,a),dh(this,"nodeGroupKey",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
X.prototype.copyNodeData=function(a){if(null===a)return null;a=L.prototype.copyNodeData.call(this,a);this.In||""===this.yh||void 0===z.vb(a,this.yh)||z.Ua(a,this.yh,void 0);return a};
X.prototype.setDataProperty=function(a,b,c){u&&(z.h(a,"object",X,"setDataProperty:data"),z.h(b,"string",X,"setDataProperty:propname"),""===b&&z.k("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.ke(a))if(b===this.Nj)this.yy(a,c);else{if(b===this.jo){this.xy(a,c);return}if(b===this.Iu){this.zB(a,c);return}b===this.Ju&&z.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.Kh(a)){if(b===
this.co){this.xB(a,c);return}if(b===this.eo){this.DB(a,c);return}if(b===this.Au){this.yB(a,c);return}if(b===this.Cu){this.EB(a,c);return}if(b===this.Kj){this.EG(a,c);return}if(b===this.zu){this.DG(a,c);return}if(b===this.Bu){this.FG(a,c);return}}else!oh&&a instanceof O&&(oh=!0,z.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));var d=z.vb(a,b);d!==c&&(z.Ua(a,b,c),this.mB(a,b,d,c))};f=X.prototype;
f.Pu=function(a,b){L.prototype.Pu.call(this,a,b);for(var c=this.Gc.j;c.next();)this.sB(c.value,a,b);for(c=this.hi.j;c.next();){var d=c.value,e=a,g=b;if(this.mm(d)===e){var h=this.ii;z.Ua(d,h,g);dh(this,"linkFromKey",bg,h,d,e,g);"string"===typeof h&&this.Nb(d,h)}this.nm(d)===e&&(h=this.ji,z.Ua(d,h,g),dh(this,"linkToKey",bg,h,d,e,g),"string"===typeof h&&this.Nb(d,h));var k=this.Rk(d);if(z.isArray(k))for(var l=z.bb(k),h=this.Gg,m=0;m<l;m++)z.Ma(k,m)===e&&(z.BE(k,m,g),dh(this,"linkLabelKeys",sg,h,d,e,
g,m,m))}};f.sB=function(a,b,c){if(this.Sn(a)===b){var d=this.yh;z.Ua(a,d,c);dh(this,"nodeGroupKey",bg,d,a,b,c);"string"===typeof d&&this.Nb(a,d)}};f.PB=function(){L.prototype.PB.call(this);for(var a=this.Xg,b=z.bb(a),c=0;c<b;c++){var d=z.Ma(a,c);ph(this,d)}};
f.Kq=function(a){L.prototype.Kq.call(this,a);a=this.Cb(a);var b=ih(this,a);if(null!==b){for(var c=new J(Object),b=b.j;b.next();){var d=b.value;if(this.ke(d)){if(this.Sn(d)===a){var e=this.yh;dh(this,"nodeGroupKey",bg,e,d,a,a);"string"===typeof e&&this.Nb(d,e);c.add(d)}}else{this.mm(d)===a&&(e=this.ii,dh(this,"linkFromKey",bg,e,d,a,a),"string"===typeof e&&this.Nb(d,e),c.add(d));this.nm(d)===a&&(e=this.ji,dh(this,"linkToKey",bg,e,d,a,a),"string"===typeof e&&this.Nb(d,e),c.add(d));var g=this.Rk(d);if(z.isArray(g))for(var h=
z.bb(g),e=this.Gg,k=0;k<h;k++)z.Ma(g,k)===a&&(dh(this,"linkLabelKeys",sg,e,d,a,a,k,k),c.add(d))}}for(c=c.j;c.next();)kh(this,a,c.value)}};f.Jq=function(a){L.prototype.Jq.call(this,a);var b=this.Sn(a);null===this.Ge(b)&&jh(this,b,a)};f.dv=function(a){L.prototype.dv.call(this,a);var b=this.Sn(a);kh(this,b,a)};z.defineProperty(X,{zu:"linkCategoryProperty"},function(){return this.Ym},function(a){var b=this.Ym;b!==a&&(eh(a,X,"linkCategoryProperty"),this.Ym=a,this.i("linkCategoryProperty",b,a))});
X.prototype.getCategoryForLinkData=X.prototype.Hx=function(a){if(null===a)return"";var b=this.Ym;if(""===b)return"";b=z.vb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;z.k("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
X.prototype.setCategoryForLinkData=X.prototype.DG=function(a,b){z.h(b,"string",X,"setCategoryForLinkData:cat");if(null!==a){var c=this.Ym;if(""!==c)if(this.Kh(a)){var d=z.vb(a,c);void 0===d&&(d="");d!==b&&(z.Ua(a,c,b),dh(this,"linkCategory",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
function Cg(a){1<arguments.length&&z.k("TreeModel constructor can only take one optional argument, the Array of node data.");L.call(this);this.zh="parent";this.ur=!1;this.gn="parentLinkCategory";void 0!==a&&(this.ng=a)}z.Ta(Cg,L);z.ka("TreeModel",Cg);Cg.prototype.cloneProtected=function(a){L.prototype.cloneProtected.call(this,a);a.zh=this.zh;a.ur=this.ur;a.gn=this.gn};
Cg.prototype.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.KB();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.ng;for(var c=z.bb(a),d=0;d<c;d++)var e=z.Ma(a,d),b=b+(" "+this.Cb(e)+":"+ka(e))}return b};Cg.prototype.vo=function(){var a=L.prototype.vo.call(this),b="";"parent"!==this.Ku&&"string"===typeof this.Ku&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.Ku));return a+b};
Cg.prototype.Nu=function(a){L.prototype.Nu.call(this,a);a.nodeParentKeyProperty&&(this.Ku=a.nodeParentKeyProperty)};Cg.prototype.ho=function(a){return a};z.defineProperty(Cg,{Ku:"nodeParentKeyProperty"},function(){return this.zh},function(a){var b=this.zh;b!==a&&(eh(a,Cg,"nodeParentKeyProperty"),this.zh=a,this.i("nodeParentKeyProperty",b,a))});
z.defineProperty(Cg,{Jn:"copiesParentKeyOfNodeData"},function(){return this.ur},function(a){this.ur!==a&&(z.h(a,"boolean",Cg,"copiesParentKeyOfNodeData"),this.ur=a)});Cg.prototype.getParentKeyForNodeData=Cg.prototype.Un=function(a){if(null!==a){var b=this.zh;if(""!==b&&(b=z.vb(a,b),void 0!==b)){if(fh(b))return b;z.k("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
Cg.prototype.setParentKeyForNodeData=Cg.prototype.Hi=function(a,b){null===b&&(b=void 0);void 0===b||fh(b)||z.hc(b,"number or string",Cg,"setParentKeyForNodeData:key");if(null!==a){var c=this.zh;if(""!==c)if(b=this.ho(b),this.ke(a)){var d=z.vb(a,c);d!==b&&(kh(this,d,a),z.Ua(a,c,b),null===this.Ge(b)&&jh(this,b,a),dh(this,"nodeParentKey",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
z.defineProperty(Cg,{oM:"parentLinkCategoryProperty"},function(){return this.gn},function(a){var b=this.gn;b!==a&&(eh(a,Cg,"parentLinkCategoryProperty"),this.gn=a,this.i("parentLinkCategoryProperty",b,a))});Cg.prototype.getParentLinkCategoryForNodeData=Cg.prototype.LI=function(a){if(null===a)return"";var b=this.gn;if(""===b)return"";b=z.vb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;z.k("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
Cg.prototype.setParentLinkCategoryForNodeData=Cg.prototype.kK=function(a,b){z.h(b,"string",Cg,"setParentLinkCategoryForNodeData:cat");if(null!==a){var c=this.gn;if(""!==c)if(this.ke(a)){var d=z.vb(a,c);void 0===d&&(d="");d!==b&&(z.Ua(a,c,b),dh(this,"parentLinkCategory",bg,c,a,d,b),"string"===typeof c&&this.Nb(a,c))}else z.Ua(a,c,b)}};
Cg.prototype.copyNodeData=function(a){if(null===a)return null;a=L.prototype.copyNodeData.call(this,a);this.Jn||""===this.zh||void 0===z.vb(a,this.zh)||z.Ua(a,this.zh,void 0);return a};
Cg.prototype.setDataProperty=function(a,b,c){u&&(z.h(a,"object",Cg,"setDataProperty:data"),z.h(b,"string",Cg,"setDataProperty:propname"),""===b&&z.k("TreeModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.ke(a))if(b===this.Nj)this.yy(a,c);else{if(b===this.jo){this.xy(a,c);return}if(b===this.Ku){this.Hi(a,c);return}}else!oh&&a instanceof O&&(oh=!0,z.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));
var d=z.vb(a,b);d!==c&&(z.Ua(a,b,c),this.mB(a,b,d,c))};f=Cg.prototype;f.Pu=function(a,b){L.prototype.Pu.call(this,a,b);for(var c=this.Gc.j;c.next();)this.sB(c.value,a,b)};f.sB=function(a,b,c){if(this.Un(a)===b){var d=this.zh;z.Ua(a,d,c);dh(this,"nodeParentKey",bg,d,a,b,c);"string"===typeof d&&this.Nb(a,d)}};
f.Kq=function(a){L.prototype.Kq.call(this,a);a=this.Cb(a);var b=ih(this,a);if(null!==b){for(var c=new J(Object),b=b.j;b.next();){var d=b.value;if(this.ke(d)&&this.Un(d)===a){var e=this.zh;dh(this,"nodeParentKey",bg,e,d,a,a);"string"===typeof e&&this.Nb(d,e);c.add(d)}}for(c=c.j;c.next();)kh(this,a,c.value)}};f.Jq=function(a){L.prototype.Jq.call(this,a);var b=this.Un(a),b=this.ho(b);null===this.Ge(b)&&jh(this,b,a)};f.dv=function(a){L.prototype.dv.call(this,a);var b=this.Un(a);kh(this,b,a)};
function sh(a,b,c){z.wc(this);this.I=!1;void 0===a?a="":z.h(a,"string",sh,"constructor:targetprop");void 0===b?b=a:z.h(b,"string",sh,"constructor:sourceprop");void 0===c?c=null:null!==c&&z.h(c,"function",sh,"constructor:conv");this.WD=-1;this.Ng=null;this.Rp=a;this.Qp=this.At=0;this.Pw=null;this.js=!1;this.Ip=b;this.rr=c;this.Cs=th;this.lr=null;this.sz=new K}z.ka("Binding",sh);
sh.prototype.copy=function(){var a=new sh;a.Rp=this.Rp;a.At=this.At;a.Qp=this.Qp;a.Pw=this.Pw;a.js=this.js;a.Ip=this.Ip;a.rr=this.rr;a.Cs=this.Cs;a.lr=this.lr;return a};var th;sh.OneWay=th=z.s(sh,"OneWay",1);var uh;sh.TwoWay=uh=z.s(sh,"TwoWay",2);sh.parseEnum=function(a,b){z.h(a,"function",sh,"parseEnum:ctor");z.Ca(b,a,sh,"parseEnum:defval");return function(c){c=Ja(a,c);return null===c?b:c}};sh.prototype.pc=function(a){a.Pe===sh?this.mode=a:z.Tj(this,a)};var ka;
sh.toString=ka=function(a){var b=a;z.Xa(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID)));return void 0===b?"undefined":null===b?"null":b.toString()};sh.prototype.toString=function(){return"Binding("+this.av+":"+this.JG+(-1!==this.zm?" "+this.zm:"")+" "+this.mode.name+")"};sh.prototype.freeze=function(){this.I=!0;return this};
sh.prototype.Za=function(){this.I=!1;return this};z.defineProperty(sh,{zm:null},function(){return this.WD},function(a){this.I&&z.pa(this);z.h(a,"number",sh,"targetId");this.WD=a});z.defineProperty(sh,{av:"targetProperty"},function(){return this.Rp},function(a){this.I&&z.pa(this);z.h(a,"string",sh,"targetProperty");this.Rp=a});z.defineProperty(sh,{Wq:"sourceName"},function(){return this.Pw},function(a){this.I&&z.pa(this);null!==a&&z.h(a,"string",sh,"sourceName");this.Pw=a;null!==a&&(this.js=!1)});
z.defineProperty(sh,{Ux:"isToModel"},function(){return this.js},function(a){this.I&&z.pa(this);z.h(a,"boolean",sh,"isToModel");this.js=a});z.defineProperty(sh,{JG:"sourceProperty"},function(){return this.Ip},function(a){this.I&&z.pa(this);z.h(a,"string",sh,"sourceProperty");this.Ip=a});z.defineProperty(sh,{fI:"converter"},function(){return this.rr},function(a){this.I&&z.pa(this);null!==a&&z.h(a,"function",sh,"converter");this.rr=a});
z.defineProperty(sh,{TH:"backConverter"},function(){return this.lr},function(a){this.I&&z.pa(this);null!==a&&z.h(a,"function",sh,"backConverter");this.lr=a});z.defineProperty(sh,{mode:"mode"},function(){return this.Cs},function(a){this.I&&z.pa(this);z.Ca(a,sh,sh,"mode");this.Cs=a});sh.prototype.makeTwoWay=sh.prototype.wJ=function(a){void 0===a&&(a=null);null!==a&&z.h(a,"function",sh,"makeTwoWay");this.mode=uh;this.TH=a;return this};
sh.prototype.ofObject=sh.prototype.ey=function(a){void 0===a&&(a="");u&&z.h(a,"string",sh,"ofObject:srcname");this.Wq=a;this.Ux=!1;return this};sh.prototype.ofModel=function(){this.Wq=null;this.Ux=!0;return this};function vh(a,b,c){a=a.Wq;var d=null;return d=null===a||""===a?b:"/"===a?c.ba:"."===a?c:".."===a?c.Q:b.Gd(a)}
sh.prototype.updateTarget=sh.prototype.bH=function(a,b,c){var d=this.Ip;if(void 0===c||""===d||d===c){c=this.Rp;var e=this.rr;if(null===e&&""===c)z.trace("Binding error: target property is the empty string: "+this.toString());else{u&&"string"===typeof c&&("function"!==typeof a.setAttribute&&0<c.length&&"_"!==c[0]&&!z.Lx(a,c)?z.trace("Binding error: undefined target property: "+c+" on "+a.toString()):"name"===c&&a instanceof O&&z.trace("Binding error: cannot modify GraphObject.name on "+a.toString()));
var g=b;""!==d&&(g=z.vb(b,d));if(void 0!==g)if(null===e)""!==c&&z.Ua(a,c,g);else try{if(""!==c){var h=e(g,a);u&&void 0===h&&z.trace('Binding warning: conversion function returned undefined when setting target property "'+c+'" on '+a.toString()+", function is: "+e);z.Ua(a,c,h)}else e(g,a)}catch(k){u&&z.trace("Binding error: "+k.toString()+' setting target property "'+c+'" on '+a.toString()+" with conversion function: "+e)}}}};
sh.prototype.updateSource=sh.prototype.Cy=function(a,b,c,d){if(this.Cs===uh){var e=this.Rp;if(void 0===c||e===c){c=this.Ip;var g=this.lr,h=a;""!==e&&(h=z.vb(a,e));if(void 0!==h&&!this.sz.contains(a))try{this.sz.add(a);var k=null!==d?d.g:null,l=null!==k?k.ia:null;if(null===g)if(""!==c)null!==l?(u&&l.Nj===c&&l.ke(b)&&z.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),l.setDataProperty(b,c,h)):z.Ua(b,c,h);else{if(null!==l&&null!==d&&0<=d.xu&&null!==d.Q&&
Array.isArray(d.Q.Wk)){var m=d.xu,n=d.Q.Wk;l.hG(n,m);l.PA(n,m,h)}}else try{if(""!==c){var p=g(h,b,l);null!==l?(u&&(l.Nj===c&&l.ke(b)&&z.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),void 0===p&&z.trace('Binding warning: conversion function returned undefined when setting source property "'+c+'" on '+b.toString()+", function is: "+g)),l.setDataProperty(b,c,p)):z.Ua(b,c,p)}else p=g(h,b,l),void 0!==p&&null!==l&&null!==d&&0<=d.xu&&null!==d.Q&&Array.isArray(d.Q.Wk)&&
(m=d.xu,n=d.Q.Wk,l.hG(n,m),l.PA(n,m,p))}catch(q){u&&z.trace("Binding error: "+q.toString()+' setting source property "'+c+'" on '+b.toString()+" with conversion function: "+g)}}finally{this.sz.remove(a)}}}};function Dg(){this.iH=(new J(ag)).freeze();this.Xb="";this.aD=!1}z.ka("Transaction",Dg);
Dg.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.bg.count.toString()+(this.ru?"":", incomplete");if(void 0!==a&&0<a){a=this.bg.count;for(var c=0;c<a;c++){var d=this.bg.fa(c);null!==d&&(b+="\n  "+d.toString())}}return b};Dg.prototype.clear=Dg.prototype.clear=function(){var a=this.bg;a.Za();for(var b=a.count-1;0<=b;b--){var c=a.fa(b);null!==c&&c.clear()}a.clear();a.freeze()};Dg.prototype.canUndo=Dg.prototype.canUndo=function(){return this.ru};
Dg.prototype.undo=Dg.prototype.undo=function(){if(this.canUndo())for(var a=this.bg.count-1;0<=a;a--){var b=this.bg.fa(a);null!==b&&b.undo()}};Dg.prototype.canRedo=Dg.prototype.canRedo=function(){return this.ru};Dg.prototype.redo=Dg.prototype.redo=function(){if(this.canRedo())for(var a=this.bg.count,b=0;b<a;b++){var c=this.bg.fa(b);null!==c&&c.redo()}};z.w(Dg,{bg:"changes"},function(){return this.iH});z.defineProperty(Dg,{name:"name"},function(){return this.Xb},function(a){this.Xb=a});
z.defineProperty(Dg,{ru:"isComplete"},function(){return this.aD},function(a){this.aD=a});function ug(){this.Lz=new K(L);this.pf=!1;this.mH=(new J(Dg)).freeze();this.rh=-1;this.pD=999;this.bj=!1;this.Hv=null;this.Ql=0;this.Yy=!1;u&&(this.Yy=!0);this.xh=(new J("string")).freeze();this.wp=new J("number");this.uz=!0;this.Fz=!1}z.ka("UndoManager",ug);
ug.prototype.toString=function(a){for(var b="UndoManager "+this.Ej+"<"+this.history.count+"<="+this.UF,b=b+"[",c=this.ZF.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.ZF.fa(d);b+="]";if(void 0!==a&&0<a)for(c=this.history.count,d=0;d<c;d++)b+="\n "+this.history.fa(d).toString(a-1);return b};
ug.prototype.clear=ug.prototype.clear=function(){var a=this.history;a.Za();for(var b=a.count-1;0<=b;b--){var c=a.fa(b);null!==c&&c.clear()}a.clear();this.rh=-1;a.freeze();this.bj=!1;this.Hv=null;this.Ql=0;this.xh.Za();this.xh.clear();this.xh.freeze();this.wp.clear()};ug.prototype.addModel=ug.prototype.LH=function(a){this.Lz.add(a)};ug.prototype.removeModel=ug.prototype.ZJ=function(a){this.Lz.remove(a)};
ug.prototype.startTransaction=ug.prototype.$b=function(a){void 0===a&&(a="");null===a&&(a="");if(this.lb)return!1;!0===this.uz&&(this.uz=!1,this.Ql++,this.sd("StartingFirstTransaction",a,this.zj),0<this.Ql&&this.Ql--);this.isEnabled&&(this.xh.Za(),this.xh.add(a),this.xh.freeze(),null===this.zj?this.wp.add(0):this.wp.add(this.zj.bg.count));this.Ql++;var b=1===this.Vh;b&&this.sd("StartedTransaction",a,this.zj);return b};
ug.prototype.commitTransaction=ug.prototype.Vd=function(a){void 0===a&&(a="");return wh(this,!0,a)};ug.prototype.rollbackTransaction=ug.prototype.Lq=function(){return wh(this,!1,"")};
function wh(a,b,c){if(a.lb)return!1;a.lA&&1>a.Vh&&z.trace("Ending transaction without having started a transaction: "+c);var d=1===a.Vh;d&&b&&a.sd("CommittingTransaction",c,a.zj);var e=0;if(0<a.Vh&&(a.Ql--,a.isEnabled)){var g=a.xh.count;0<g&&(""===c&&(c=a.xh.fa(0)),a.xh.Za(),a.xh.md(g-1),a.xh.freeze());g=a.wp.count;0<g&&(e=a.wp.fa(g-1),a.wp.md(g-1))}g=a.zj;if(d){if(b){a.Fz=!1;if(a.isEnabled&&null!==g){b=g;b.ru=!0;b.name=c;d=a.history;d.Za();for(e=d.count-1;e>a.Ej;e--)g=d.fa(e),null!==g&&g.clear(),
d.md(e),a.Fz=!0;e=a.UF;0===e&&(e=1);0<e&&d.count>=e&&(g=d.fa(0),null!==g&&g.clear(),d.md(0),a.rh--);d.add(b);a.rh++;d.freeze();g=b}a.sd("CommittedTransaction",c,g)}else{a.bj=!0;try{a.isEnabled&&null!==g&&(g.ru=!0,g.undo())}finally{a.sd("RolledBackTransaction",c,g),a.bj=!1}null!==g&&g.clear()}a.Hv=null;return!0}if(a.isEnabled&&!b&&null!==g){a=e;c=g.bg;for(b=c.count-1;b>=a;b--)d=c.fa(b),null!==d&&d.undo(),c.Za(),c.md(b);c.freeze()}return!1}
ug.prototype.canUndo=ug.prototype.canUndo=function(){if(!this.isEnabled||0<this.Vh||this.lb)return!1;var a=this.YG;return null!==a&&a.canUndo()?!0:!1};ug.prototype.undo=ug.prototype.undo=function(){if(this.canUndo()){var a=this.YG;try{this.sd("StartingUndo","Undo",a),this.bj=!0,this.rh--,a.undo()}catch(b){z.trace("undo error: "+b.toString())}finally{this.bj=!1,this.sd("FinishedUndo","Undo",a)}}};
ug.prototype.canRedo=ug.prototype.canRedo=function(){if(!this.isEnabled||0<this.Vh||this.lb)return!1;var a=this.XG;return null!==a&&a.canRedo()?!0:!1};ug.prototype.redo=ug.prototype.redo=function(){if(this.canRedo()){var a=this.XG;try{this.sd("StartingRedo","Redo",a),this.bj=!0,this.rh++,a.redo()}catch(b){z.trace("redo error: "+b.toString())}finally{this.bj=!1,this.sd("FinishedRedo","Redo",a)}}};
ug.prototype.sd=function(a,b,c){void 0===c&&(c=null);var d=new ag;d.Kc=rg;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.GJ;a.next();)b=a.value,d.ia=b,b.mx(d)};ug.prototype.handleChanged=ug.prototype.wF=function(a){if(this.isEnabled&&!this.lb&&!this.skipsEvent(a)){var b=this.zj;null===b&&(this.Hv=b=new Dg);var c=a.copy(),b=b.bg;b.Za();b.add(c);b.freeze();this.lA&&0>=this.Vh&&!this.uz&&(a=a.g,null!==a&&!1===a.Zn||z.trace("Change not within a transaction: "+c.toString()))}};
ug.prototype.skipsEvent=function(a){if(null===a||0>a.Kc.value)return!0;a=a.object;if(a instanceof O){if(a=a.layer,null!==a&&a.Wc)return!0}else if(a instanceof ah&&a.Wc)return!0;return!1};z.w(ug,{GJ:"models"},function(){return this.Lz.j});z.defineProperty(ug,{isEnabled:"isEnabled"},function(){return this.pf},function(a){this.pf=a});z.w(ug,{YG:"transactionToUndo"},function(){return 0<=this.Ej&&this.Ej<=this.history.count-1?this.history.fa(this.Ej):null});
z.w(ug,{XG:"transactionToRedo"},function(){return this.Ej<this.history.count-1?this.history.fa(this.Ej+1):null});z.w(ug,{lb:"isUndoingRedoing"},function(){return this.bj});z.w(ug,{history:"history"},function(){return this.mH});z.defineProperty(ug,{UF:"maxHistoryLength"},function(){return this.pD},function(a){this.pD=a});z.w(ug,{Ej:"historyIndex"},function(){return this.rh});z.w(ug,{zj:"currentTransaction"},function(){return this.Hv});z.w(ug,{Vh:"transactionLevel"},function(){return this.Ql});
z.w(ug,{JF:"isInTransaction"},function(){return 0<this.Ql});z.defineProperty(ug,{lA:"checksTransactionLevel"},function(){return this.Yy},function(a){this.Yy=a});z.w(ug,{ZF:"nestedTransactionNames"},function(){return this.xh});function ta(){0<arguments.length&&z.wd(ta);z.wc(this);this.ca=null;this.mC=!1;this.HC=this.nC=!0;this.pC=this.qC=this.IC=this.rC=!1;this.Il=this.Sy=null;this.oE=1.05;this.EC=1;this.Gz=NaN;this.lD=null;this.fA=NaN;this.eA=Ed;this.qj=null}z.ka("CommandHandler",ta);
var Ih=null,Jh="";ta.prototype.toString=function(){return"CommandHandler"};z.w(ta,{g:"diagram"},function(){return this.ca});ta.prototype.$c=function(a){u&&null!==a&&z.l(a,C,ta,"setDiagram");this.ca=a};
ta.prototype.doKeyDown=function(){var a=this.g;if(null!==a){var b=a.U,c=z.Uk?b.Du:b.control,d=b.shift,e=b.alt,g=b.key;!c||"C"!==g&&"Insert"!==g?c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&this.undo():"Del"===g||"Backspace"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"A"===g?this.canSelectAll()&&
this.selectAll():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.Be&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.Be&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.Ae&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.Ae&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?d&&a.Ae?a.scroll("page","left"):a.Be&&a.scroll("page","up"):"PageDown"===g?d&&a.Ae?a.scroll("page","right"):a.Be&&a.scroll("page","down"):"Home"===
g?c&&a.Be?a.scroll("document","up"):!c&&a.Ae&&a.scroll("document","left"):"End"===g?c&&a.Be?a.scroll("document","down"):!c&&a.Ae&&a.scroll("document","right"):" "===g?this.canScrollToPart()&&this.scrollToPart():"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():d&&"Z"===g?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===g?this.canGroupSelection()&&this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&
this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection()}};ta.prototype.doKeyUp=function(){var a=this.g;null!==a&&(a.U.bubbles=!0)};ta.prototype.stopCommand=function(){var a=this.g;if(null!==a){var b=a.fb;b instanceof Kh&&a.Df&&a.ox();null!==b&&b.doCancel()}};ta.prototype.canStopCommand=function(){return!0};
ta.prototype.selectAll=function(){var a=this.g;if(null!==a){a.ra();try{a.lc="wait";a.Ka("ChangingSelection");for(var b=a.Gi;b.next();)b.value.gb=!0;for(var c=a.og;c.next();)c.value.gb=!0;for(var d=a.links;d.next();)d.value.gb=!0}finally{a.Ka("ChangedSelection"),a.lc=""}}};ta.prototype.canSelectAll=function(){var a=this.g;return null!==a&&a.Df};
ta.prototype.deleteSelection=function(){var a=this.g;if(null!==a&&!a.Ka("SelectionDeleting",a.selection))try{a.lc="wait";a.$b("Delete");a.Ka("ChangingSelection");for(var b=new K(D),c=a.selection.j;c.next();)Lh(b,c.value,!0,this.oI?Infinity:0,this.UE,function(a){return a.canDelete()});a.rB(b,!0);a.Ka("SelectionDeleted",b)}finally{a.Ka("ChangedSelection"),a.Vd("Delete"),a.lc=""}};ta.prototype.canDeleteSelection=function(){var a=this.g;return null===a||a.kb||a.Hf||!a.Bn||0===a.selection.count?!1:!0};
function Lh(a,b,c,d,e,g){void 0===g&&(g=null);if(!(a.contains(b)||null!==g&&!g(b)||b instanceof ea))if(a.add(b),b instanceof E){if(c&&b instanceof F)for(var h=b.Oc;h.next();)Lh(a,h.value,c,d,e,g);if(e)for(h=b.Jd;h.next();){var k=h.value;if(!a.contains(k)){var l=k.aa,m=k.ea;null!==l&&a.contains(l)&&null!==m&&a.contains(m)?Lh(a,k,c,d,e,g):null!==l&&null!==m||Lh(a,k,c,d,e,g)}}if(1<d)for(b=b.iF();b.next();)Lh(a,b.value,c,d-1,e,g)}else if(b instanceof H)for(h=b.Kf;h.next();)Lh(a,h.value,c,d,e,g)}
ta.prototype.cq=function(a,b,c){var d=new oa(D,D);for(a=a.j;a.next();)Mh(this,a.value,b,d,c);if(null!==b){c=b.ia;a=!1;null!==b.ib.Ee&&(a=b.ib.Ee.Bj);for(var e=new K(H),g=new oa(H,H),h=d.j;h.next();){var k=h.value;if(k instanceof H){var l=k;a||null!==l.aa&&null!==l.ea||e.add(l)}else if(c instanceof Cg&&k instanceof E&&null!==k.data){var l=c,m=k,k=h.key,n=k.km();null!==n&&(n=d.qa(n),null!==n?(l.Hi(m.data,l.Cb(n.data)),l=b.cg(m.data),k=k.Pn(),null!==k&&null!==l&&g.add(k,l)):l.Hi(m.data,void 0))}}0<e.count&&
b.rB(e,!1);if(0<g.count)for(c=g.j;c.next();)d.add(c.key,c.value)}if(null!==b&&null!==this.g&&(b=b.ia,c=b.NH,null!==c)){var p=new oa;d.each(function(a){null!==a.key.data&&p.add(a.key.data,a.value.data)});c(p,b,this.g.ia)}for(b=d.j;b.next();)b.value.Nb();return d};
function Mh(a,b,c,d,e){if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return d.qa(b);var g=null,h=b.data;if(null!==h&&null!==c){var k=c.ia;b instanceof H?k instanceof X&&(h=k.qx(h),z.Xa(h)&&(k.Mt(h),g=c.cg(h))):(h=k.copyNodeData(h),z.Xa(h)&&(k.Tl(h),g=c.Mh(h)))}else Nh(b),g=b.copy(),null!==g&&(null!==c?c.add(g):null!==h&&null!==a.g&&a.gI&&(k=a.g.ia,h=g instanceof H&&k instanceof X?k.qx(h):k.copyNodeData(h),z.Xa(h)&&(g.data=h)));if(!(g instanceof D))return null;g.gb=!1;g.Wg=!1;d.add(b,g);
if(b instanceof E){for(h=b.Jd;h.next();){k=h.value;if(k.aa===b){var l=d.qa(k);null!==l&&(l.aa=g)}k.ea===b&&(l=d.qa(k),null!==l&&(l.ea=g))}if(b instanceof F&&g instanceof F)for(h=g,b=b.Oc;b.next();)k=Mh(a,b.value,c,d,e),k instanceof H||null===k||(k.Qa=h)}else if(b instanceof H)for(h=b.aa,null!==h&&(h=d.qa(h),null!==h&&(g.aa=h)),h=b.ea,null!==h&&(h=d.qa(h),null!==h&&(g.ea=h)),b=b.Kf;b.next();)h=Mh(a,b.value,c,d,e),null!==h&&(h.Cc=g);return g}
ta.prototype.copySelection=function(){var a=this.g;if(null!==a){for(var b=new K(D),a=a.selection.j;a.next();)Lh(b,a.value,!0,this.jI?Infinity:0,this.hI,function(a){return a.canCopy()});this.copyToClipboard(b)}};ta.prototype.canCopySelection=function(){var a=this.g;return null!==a&&a.Ik&&a.hA&&0!==a.selection.count?!0:!1};ta.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};
ta.prototype.canCutSelection=function(){var a=this.g;return null!==a&&!a.kb&&!a.Hf&&a.Ik&&a.Bn&&a.hA&&0!==a.selection.count?!0:!1};ta.prototype.copyToClipboard=function(a){var b=this.g;if(null!==b){var c=null;if(null===a)Ih=null,Jh="";else{var c=b.ia,d=!1,e=!1,g=null;try{if(c instanceof Cg){var h=c,d=h.Jn;h.Jn=this.LE}c instanceof X&&(h=c,e=h.In,h.In=this.KE);g=b.cq(a,null,!0)}finally{c instanceof Cg&&(c.Jn=d),c instanceof X&&(c.In=e),c=new J(D),c.Uc(g),Ih=c,Jh=b.ia.dm}}b.Ka("ClipboardChanged",c)}};
ta.prototype.pasteFromClipboard=function(){var a=new K(D),b=Ih;if(null===b)return a;var c=this.g;if(null===c||Jh!==c.ia.dm)return a;var d=c.ia,e=!1,g=!1,h=null;try{if(d instanceof Cg){var k=d,e=k.Jn;k.Jn=this.LE}d instanceof X&&(k=d,g=k.In,k.In=this.KE);h=c.cq(b,c,!1)}finally{for(d instanceof Cg&&(d.Jn=e),d instanceof X&&(d.In=g),b=h.j;b.next();)c=b.value,d=b.key,c.location.F()||(d.location.F()?c.location=d.location:!c.position.F()&&d.position.F()&&(c.position=d.position)),a.add(c)}return a};
ta.prototype.pasteSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.lc="wait";b.$b("Paste");b.Ka("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Oh(b);for(var d=c.j;d.next();)d.value.gb=!0;b.Ka("ChangedSelection");if(null!==a){var e=b.computePartsBounds(b.selection);if(e.F()){var g=b.ib.Ee;null===g&&(g=new Ph,g.$c(b));var h=g.computeEffectiveCollection(b.selection);g.moveParts(h,new M(a.x-e.oa,a.y-e.xa),!1)}}b.Ka("ClipboardPasted",c)}finally{b.Vd("Paste"),b.lc=
""}};ta.prototype.canPasteSelection=function(){var a=this.g;return null===a||a.kb||a.Hf||!a.Vp||!a.hA||null===Ih||Jh!==a.ia.dm?!1:!0};ta.prototype.undo=function(){var a=this.g;null!==a&&a.sa.undo()};ta.prototype.canUndo=function(){var a=this.g;return null===a||a.kb||a.Hf?!1:a.xE&&a.sa.canUndo()};ta.prototype.redo=function(){var a=this.g;null!==a&&a.sa.redo()};ta.prototype.canRedo=function(){var a=this.g;return null===a||a.kb||a.Hf?!1:a.xE&&a.sa.canRedo()};
ta.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.Fy);z.p(a,ta,"decreaseZoom:factor");var b=this.g;null!==b&&b.Zl===Qh&&(a*=b.scale,a<b.Ph||a>b.Oh||(b.scale=a))};ta.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.Fy);z.p(a,ta,"canDecreaseZoom:factor");var b=this.g;if(null===b||b.Zl!==Qh)return!1;a*=b.scale;return a<b.Ph||a>b.Oh?!1:b.lx};
ta.prototype.increaseZoom=function(a){void 0===a&&(a=this.Fy);z.p(a,ta,"increaseZoom:factor");var b=this.g;null!==b&&b.Zl===Qh&&(a*=b.scale,a<b.Ph||a>b.Oh||(b.scale=a))};ta.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.Fy);z.p(a,ta,"canIncreaseZoom:factor");var b=this.g;if(null===b||b.Zl!==Qh)return!1;a*=b.scale;return a<b.Ph||a>b.Oh?!1:b.lx};ta.prototype.resetZoom=function(a){void 0===a&&(a=this.vx);z.p(a,ta,"resetZoom:newscale");var b=this.g;null===b||a<b.Ph||a>b.Oh||(b.scale=a)};
ta.prototype.canResetZoom=function(a){void 0===a&&(a=this.vx);z.p(a,ta,"canResetZoom:newscale");var b=this.g;return null===b||a<b.Ph||a>b.Oh?!1:b.lx};ta.prototype.zoomToFit=function(){var a=this.g;if(null!==a){var b=a.scale,c=a.position;b===this.fA&&!isNaN(this.Gz)&&a.fd.O(this.eA)?(a.scale=this.Gz,a.position=this.lD,this.fA=NaN,this.eA=Ed):(this.Gz=b,this.lD=c.copy(),a.zoomToFit(),this.fA=a.scale,this.eA=a.fd.copy())}};ta.prototype.canZoomToFit=function(){var a=this.g;return null===a?!1:a.lx};
ta.prototype.scrollToPart=function(a){void 0===a&&(a=null);null!==a&&z.l(a,D,ta,"part");var b=this.g;if(null!==b){if(null===a){try{null!==this.qj&&(this.qj.next()?a=this.qj.value:this.qj=null)}catch(c){this.qj=null}null===a&&(0<b.om.count?this.qj=b.om.j:0<b.selection.count&&(this.qj=b.selection.j),null!==this.qj&&this.qj.next()&&(a=this.qj.value))}if(null!==a){var d=b.Ya;d.ko("Scroll To Part");var e=b.position.copy();b.UH(a.Z);e.Vc(b.position)&&d.Ii()}}};
ta.prototype.canScrollToPart=function(a){void 0===a&&(a=null);if(null!==a&&!(a instanceof D))return!1;a=this.g;return null===a||0===a.selection.count&&0===a.om.count?!1:a.Ae&&a.Be};
ta.prototype.collapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.$b("Collapse Tree");b.Ya.ko("Collapse Tree");var c=new J(E);if(null!==a&&a.ud)a.collapseTree(),c.add(a);else for(var d=b.selection.j;d.next();){var e=d.value;e instanceof E&&(a=e,a.ud&&(a.collapseTree(),c.add(a)))}b.Ka("TreeCollapsed",c)}finally{b.Vd("Collapse Tree")}};
ta.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.kb)return!1;if(null!==a){if(!(a instanceof E&&a.ud))return!1;if(0<a.Fx().count)return!0}else for(a=b.selection.j;a.next();)if(b=a.value,b instanceof E&&b.ud&&0<b.Fx().count)return!0;return!1};
ta.prototype.expandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.$b("Expand Tree");b.Ya.ko("Expand Tree");var c=new J(E);if(null===a||a.ud)for(var d=b.selection.j;d.next();){var e=d.value;e instanceof E&&(a=e,a.ud||(a.expandTree(),c.add(a)))}else a.expandTree(),c.add(a);b.Ka("TreeExpanded",c)}finally{b.Vd("Expand Tree")}};
ta.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.kb)return!1;if(null!==a){if(!(a instanceof E)||a.ud)return!1;if(0<a.Fx().count)return!0}else for(a=b.selection.j;a.next();)if(b=a.value,b instanceof E&&!b.ud&&0<b.Fx().count)return!0;return!1};
ta.prototype.groupSelection=function(){var a=this.g;if(null!==a){var b=a.ia;if(b instanceof X){var c=this.yE;if(null!==c){var d=null;try{a.lc="wait";a.$b("Group");a.Ka("ChangingSelection");for(var e=new J(D),g=a.selection.j;g.next();){var h=g.value;h.qe()&&h.canGroup()&&e.add(h)}for(var k=new J(D),l=e.j;l.next();){for(var m=l.value,g=!1,n=e.j;n.next();)if(m.Ei(n.value)){g=!0;break}g||k.add(m)}if(0<k.count){var p=k.first().Qa;if(null!==p)for(;null!==p;){for(var e=!1,q=k.j;q.next();)if(!q.value.Ei(p)){e=
!0;break}if(e)p=p.Qa;else break}if(c instanceof F)Nh(c),d=c.copy(),null!==d&&a.add(d);else if(b.SA(c)){var r=b.copyNodeData(c);z.Xa(r)&&(b.Tl(r),d=a.Ex(r))}if(null!==d){null!==p&&this.isValidMember(p,d)&&(d.Qa=p);for(var s=k.j;s.next();){var v=s.value;this.isValidMember(d,v)&&(v.Qa=d)}a.select(d)}}a.Ka("ChangedSelection");a.Ka("SelectionGrouped",d)}finally{a.Vd("Group"),a.lc=""}}}}};
ta.prototype.canGroupSelection=function(){var a=this.g;if(null===a||a.kb||a.Hf||!a.Vp||!a.gx||!(a.ia instanceof X)||null===this.yE)return!1;for(a=a.selection.j;a.next();){var b=a.value;if(b.qe()&&b.canGroup())return!0}return!1};function Rh(a){var b=z.tb();for(a=a.j;a.next();){var c=a.value;c instanceof H||b.push(c)}a=new K(D);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],g=!0,h=0;h<c;h++)if(e.Ei(b[h])){g=!1;break}g&&a.add(e)}z.Ba(b);return a}
ta.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof H)return!1;if(null!==a){if(a===b||a.Ei(b))return!1;var c=a.aB;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}c=this.aB;return null!==c?c(a,b):!0};
ta.prototype.ungroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b){var c=b.ia;if(c instanceof X)try{b.lc="wait";b.$b("Ungroup");b.Ka("ChangingSelection");var d=new J(F);if(null!==a)d.add(a);else for(var e=b.selection.j;e.next();){var g=e.value;g instanceof F&&(a=g,a.canUngroup()&&d.add(a))}if(0<d.count){b.ox();for(var h=d.j;h.next();){var k=h.value;k.expandSubGraph();var l=k.Qa,m=null!==l&&null!==l.data?c.Cb(l.data):void 0,n=new J(D);n.Uc(k.Oc);for(var p=n.j;p.next();){var q=
p.value;q.gb=!0;if(!(q instanceof H)){var r=q.data;null!==r?c.zB(r,m):q.Qa=l}}b.remove(k)}}b.Ka("ChangedSelection");b.Ka("SelectionUngrouped",d,n)}finally{b.Vd("Ungroup"),b.lc=""}}};ta.prototype.canUngroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.kb||b.Hf||!b.Bn||!b.kx||!(b.ia instanceof X))return!1;if(null!==a){if(!(a instanceof F))return!1;if(a.canUngroup())return!0}else for(a=b.selection.j;a.next();)if(b=a.value,b instanceof F&&b.canUngroup())return!0;return!1};
ta.prototype.addTopLevelParts=function(a,b){for(var c=!0,d=Rh(a).j;d.next();){var e=d.value;null!==e.Qa&&(!b||this.isValidMember(null,e)?e.Qa=null:c=!1)}return c};
ta.prototype.collapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.$b("Collapse SubGraph");b.Ya.ko("Collapse SubGraph");var c=new J(F);if(null!==a&&a.Ke)a.collapseSubGraph(),c.add(a);else for(var d=b.selection.j;d.next();){var e=d.value;e instanceof F&&(a=e,a.Ke&&(a.collapseSubGraph(),c.add(a)))}b.Ka("SubGraphCollapsed",c)}finally{b.Vd("Collapse SubGraph")}};
ta.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.kb)return!1;if(null!==a)return a instanceof F&&a.Ke?!0:!1;for(a=b.selection.j;a.next();)if(b=a.value,b instanceof F&&b.Ke)return!0;return!1};
ta.prototype.expandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.$b("Expand SubGraph");b.Ya.ko("Expand SubGraph");var c=new J(F);if(null===a||a.Ke)for(var d=b.selection.j;d.next();){var e=d.value;e instanceof F&&(a=e,a.Ke||(a.expandSubGraph(),c.add(a)))}else a.expandSubGraph(),c.add(a);b.Ka("SubGraphExpanded",c)}finally{b.Vd("Expand SubGraph")}};
ta.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.kb)return!1;if(null!==a)return a instanceof F&&!a.Ke?!0:!1;for(a=b.selection.j;a.next();)if(b=a.value,b instanceof F&&!b.Ke)return!0;return!1};
ta.prototype.editTextBlock=function(a){void 0===a&&(a=null);null!==a&&z.l(a,pa,ta,"editTextBlock");var b=this.g;if(null!==b){var c=b.ib.IB;if(null!==c){if(null===a){a=null;for(var d=b.selection.j;d.next();){var e=d.value;if(e.canEdit()){a=e;break}}if(null===a)return;a=a.du(function(a){return a instanceof pa&&a.zA})}null!==a&&(b.fb=null,c.hh=a,b.fb=c)}}};
ta.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.kb||b.Hf||!b.jx||null===b.ib.IB)return!1;if(null!==a){if(!(a instanceof pa))return!1;a=a.ba;if(null!==a&&a.canEdit())return!0}else for(b=b.selection.j;b.next();)if(a=b.value,a.canEdit()&&(a=a.du(function(a){return a instanceof pa&&a.zA}),null!==a))return!0;return!1};
ta.prototype.showContextMenu=function(a){var b=this.g;if(null!==b){var c=b.ib.pA;if(null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.first():b),a=c.findObjectWithContextMenu(a),null!==a)){var d=new Yf,e=null;a instanceof O?e=a.cb(mc):b.gJ||(e=b.yb,e=new M(e.x+e.width/2,e.y+e.height/2));null!==e&&(d.g=b,d.se=b.MB(e),d.ha=e,d.left=!1,d.right=!0,d.up=!0,b.U=d);b.fb=c;Sh(c,!1,a)}}};
ta.prototype.canShowContextMenu=function(a){var b=this.g;if(null===b)return!1;var c=b.ib.pA;if(null===c)return!1;void 0===a&&(a=0<b.selection.count?b.selection.first():b);return null===c.findObjectWithContextMenu(a)?!1:!0};z.defineProperty(ta,{gI:"copiesClipboardData"},function(){return this.mC},function(a){z.h(a,"boolean",ta,"copiesClipboardData");this.mC=a});
z.defineProperty(ta,{hI:"copiesConnectedLinks"},function(){return this.nC},function(a){z.h(a,"boolean",ta,"copiesConnectedLinks");this.nC=a});z.defineProperty(ta,{UE:"deletesConnectedLinks"},function(){return this.HC},function(a){z.h(a,"boolean",ta,"deletesConnectedLinks");this.HC=a});z.defineProperty(ta,{jI:"copiesTree"},function(){return this.rC},function(a){z.h(a,"boolean",ta,"copiesTree");this.rC=a});
z.defineProperty(ta,{oI:"deletesTree"},function(){return this.IC},function(a){z.h(a,"boolean",ta,"deletesTree");this.IC=a});z.defineProperty(ta,{LE:"copiesParentKey"},function(){return this.qC},function(a){z.h(a,"boolean",ta,"copiesParentKey");this.qC=a});z.defineProperty(ta,{KE:"copiesGroupKey"},function(){return this.pC},function(a){z.h(a,"boolean",ta,"copiesGroupKey");this.pC=a});
z.defineProperty(ta,{yE:"archetypeGroupData"},function(){return this.Sy},function(a){null!==a&&z.l(a,Object,ta,"archetypeGroupData");var b=this.g;null!==b&&(b=b.ia,b instanceof X&&(a instanceof F||b.SA(a)||z.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)));this.Sy=a});z.defineProperty(ta,{aB:"memberValidation"},function(){return this.Il},function(a){null!==a&&z.h(a,"function",ta,"memberValidation");this.Il=a});
z.defineProperty(ta,{vx:"defaultScale"},function(){return this.EC},function(a){z.p(a,ta,"defaultScale");0<a||z.k("defaultScale must be larger than zero, not: "+a);this.EC=a});z.defineProperty(ta,{Fy:"zoomFactor"},function(){return this.oE},function(a){z.p(a,ta,"zoomFactor");1<a||z.k("zoomFactor must be larger than 1.0, not: "+a);this.oE=a});ta.prototype.xt=function(a){if(null!==a)for(a=a.j;a.next();){var b=a.key;b instanceof H&&(b.Sj=!0)}};
ta.prototype.Dp=function(a){if(null!==a)for(a=a.j;a.next();){var b=a.key;b instanceof H&&(b.Sj=!1,Th(b)&&b.gc())}};function bh(){0<arguments.length&&z.wd(bh);z.wc(this);this.ca=null;this.Xb="";this.pf=!0;this.ZC=!1;this.jE=null;this.$w=-1}z.ka("Tool",bh);bh.prototype.$c=function(a){u&&null!==a&&z.l(a,C,bh,"setDiagram");this.ca=a};bh.prototype.toString=function(){return""!==this.name?this.name+" Tool":z.uf(Object.getPrototypeOf(this))};bh.prototype.updateAdornments=function(){};
bh.prototype.canStart=function(){return this.isEnabled};bh.prototype.doStart=function(){};bh.prototype.doActivate=function(){this.ya=!0};bh.prototype.doDeactivate=function(){this.ya=!1};bh.prototype.doStop=function(){};bh.prototype.doCancel=function(){this.stopTool()};bh.prototype.stopTool=function(){var a=this.g;null!==a&&a.fb===this&&(a.fb=null,a.lc="")};bh.prototype.doMouseDown=function(){!this.ya&&this.canStart()&&this.doActivate()};bh.prototype.doMouseMove=function(){};
bh.prototype.doMouseUp=function(){this.stopTool()};bh.prototype.doMouseWheel=function(){};bh.prototype.canStartMultiTouch=function(){return!0};bh.prototype.standardPinchZoomStart=function(){var a=this.g;if(null!==a){var b=a.U,c=b.Ix(0,z.Fb(NaN,NaN)),d=b.Ix(1,z.Fb(NaN,NaN));if(c.F()&&d.F()&&(this.doCancel(),a.lu("hasGestureZoom"))){a.yD=a.scale;var e=d.x-c.x,g=d.y-c.y;a.SD=Math.sqrt(e*e+g*g);b.bubbles=!1}z.A(c);z.A(d)}};
bh.prototype.standardPinchZoomMove=function(){var a=this.g;if(null!==a){var b=a.U,c=b.Ix(0,z.Fb(NaN,NaN)),d=b.Ix(1,z.Fb(NaN,NaN));if(c.F()&&d.F()&&(this.doCancel(),a.lu("hasGestureZoom"))){var e=d.x-c.x,g=d.y-c.y,g=Math.sqrt(e*e+g*g)/a.SD,e=new M((Math.min(d.x,c.x)+Math.max(d.x,c.x))/2,(Math.min(d.y,c.y)+Math.max(d.y,c.y))/2),g=a.yD*g,h=a.xb;if(g!==a.scale&&h.canResetZoom(g)){var k=a.Dm;a.Dm=e;h.resetZoom(g);a.Dm=k}b.bubbles=!1}z.A(c);z.A(d)}};
bh.prototype.doKeyDown=function(){var a=this.g;null!==a&&"Esc"===a.U.key&&this.doCancel()};bh.prototype.doKeyUp=function(){};bh.prototype.startTransaction=bh.prototype.$b=function(a){void 0===a&&(a=this.name);this.Qf=null;var b=this.g;return null===b?!1:b.$b(a)};bh.prototype.stopTransaction=bh.prototype.al=function(){var a=this.g;return null===a?!1:null===this.Qf?a.Lq():a.Vd(this.Qf)};
bh.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.Df){var b=a.U,c=a.eu(b.ha,!1);if(null!==c)if(z.Uk?b.Du:b.control){a.Ka("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Qa;null!==b&&(b.gb=!b.gb);a.Ka("ChangedSelection")}else if(b.shift){if(!c.gb){a.Ka("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Qa;null!==b&&(b.gb=!0);a.Ka("ChangedSelection")}}else{if(!c.gb){for(b=c;null!==b&&!b.canSelect();)b=b.Qa;null!==b&&a.select(b)}}else!b.left||(z.Uk?b.Du:b.control)||
b.shift||a.ox()}};bh.prototype.standardMouseClick=function(a,b){void 0===a&&(a=null);void 0===b&&(b=function(a){return!a.layer.Wc});var c=this.g;if(null===c)return!1;var d=c.U,e=c.He(d.ha,a,b);d.We=e;Uh(e,d,c);return d.Nc};
function Uh(a,b,c){b.Nc=!1;if(null===a||a.su()){var d=0;b.left?d=1===b.Qe?1:2===b.Qe?2:1:b.right&&1===b.Qe&&(d=3);var e="";if(null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Ka(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Ka(e)}if(null!==a)for(;null!==a;){c=null;switch(d){case 1:c=a.click;break;case 2:c=a.au?a.au:
a.click;break;case 3:c=a.oA}if(null!==c&&(c(b,a),b.Nc))break;a=a.Q}else{a=null;switch(d){case 1:a=c.click;break;case 2:a=c.au?c.au:c.click;break;case 3:a=c.oA}null!==a&&a(b)}}}
bh.prototype.standardMouseOver=function(){var a=this.g;if(null!==a){var b=a.U;if(null!==b.g&&!0!==a.Ya.yc){var c=a.Eb;a.Eb=!0;var d=a.He(b.ha,null,null);b.We=d;var e=!1;if(d!==a.Mo){var g=a.Mo,h=g;a.Mo=d;this.doCurrentObjectChanged(g,d);for(b.Nc=!1;null!==g;){var k=g.Fu;if(null!==k){if(d===g)break;if(null!==d&&d.rm(g))break;k(b,g,d);e=!0;if(b.Nc)break}g=g.Q}g=h;for(b.Nc=!1;null!==d;){k=d.Eu;if(null!==k){if(g===d)break;if(null!==g&&g.rm(d))break;k(b,d,g);e=!0;if(b.Nc)break}d=d.Q}d=a.Mo}if(null!==d){g=
d;for(k="";null!==g;){k=g.cursor;if(""!==k)break;g=g.Q}a.lc=k;b.Nc=!1;for(g=d;null!==g;){k=g.eB;if(null!==k&&(k(b,g),e=!0,b.Nc))break;g=g.Q}}else a.lc="",k=a.eB,null!==k&&(k(b),e=!0);e&&a.Te();a.Eb=c}}};bh.prototype.doCurrentObjectChanged=function(){};
bh.prototype.standardMouseWheel=function(){var a=this.g;if(null!==a){var b=a.U,c=b.fm;if(0!==c&&a.fd.F()){var d=a.xb,e=a.ib.Gu;if((e===Vh&&!b.shift||e===Wh&&b.control)&&(0<c?d.canIncreaseZoom():d.canDecreaseZoom()))e=a.Dm,a.Dm=b.se,0<c?d.increaseZoom():d.decreaseZoom(),a.Dm=e,b.bubbles=!1;else if(e===Vh&&b.shift||e===Wh&&!b.control){var d=a.position.copy(),e=0<c?c:-c,g=b.event.deltaX,h=b.event.deltaY;void 0===g||void 0===h||0===g&&0===h||b.shift?!b.shift&&a.Be?(g=a.Uu,e=e/40*g,0<c?a.scroll("pixel",
"up",e):a.scroll("pixel","down",e)):b.shift&&a.Ae&&(g=a.Tu,e=e/40*g,0<c?a.scroll("pixel","left",e):a.scroll("pixel","right",e)):(0!==g&&a.Ae&&(0<g?a.scroll("pixel","left",-g):a.scroll("pixel","right",g)),0!==h&&a.Be&&(0<h?a.scroll("pixel","up",-h):a.scroll("pixel","down",h)));a.position.O(d)||(b.bubbles=!1)}}}};bh.prototype.standardWaitAfter=function(a,b){z.h(a,"number",bh,"standardWaitAfter:delay");this.cancelWaitAfter();var c=this,d=b.copy();this.$w=z.setTimeout(function(){c.doWaitAfter(d)},a)};
bh.prototype.cancelWaitAfter=function(){-1!==this.$w&&z.clearTimeout(this.$w);this.$w=-1};bh.prototype.doWaitAfter=function(){};bh.prototype.findToolHandleAt=function(a,b){var c=this.g;if(null===c)return null;c=c.He(a,function(a){for(;null!==a&&!(a.Q instanceof ea);)a=a.Q;return a});return null===c?null:c.Q.rc===b?c:null};
bh.prototype.isBeyondDragSize=function(a,b){var c=this.g;if(null===c)return!1;void 0===a&&(a=c.Mc.se);void 0===b&&(b=c.U.se);var d=c.ib.sI,e=d.width,d=d.height;c.Mc.Hj&&(e+=6,d+=6);return Math.abs(b.x-a.x)>e||Math.abs(b.y-a.y)>d};z.w(bh,{g:"diagram"},function(){return this.ca});z.defineProperty(bh,{name:"name"},function(){return this.Xb},function(a){z.h(a,"string",bh,"name");this.Xb=a});
z.defineProperty(bh,{isEnabled:"isEnabled"},function(){return this.pf},function(a){z.h(a,"boolean",bh,"isEnabled");this.pf=a});z.defineProperty(bh,{ya:"isActive"},function(){return this.ZC},function(a){z.h(a,"boolean",bh,"isActive");this.ZC=a});z.defineProperty(bh,{Qf:"transactionResult"},function(){return this.jE},function(a){null!==a&&z.h(a,"string",bh,"transactionResult");this.jE=a});
function Ph(){0<arguments.length&&z.wd(Ph);bh.call(this);this.name="Dragging";this.oC=this.cD=!0;this.ds=this.OC=!1;this.gD=!0;this.vz=(new Fa(NaN,NaN)).freeze();this.wz=hc;this.xz=(new M(NaN,NaN)).freeze();this.NC=!1;this.LC=this.lC=this.MC=this.wC=this.oj=null;this.Kr=this.eD=!1;this.Lp=new M(NaN,NaN);this.Qw=new M;this.Tw=!1;this.bD=!0;this.So=100;this.ak=[];this.lH=(new K(D)).freeze()}z.Ta(Ph,bh);z.ka("DraggingTool",Ph);
z.defineProperty(Ph,{EF:"isCopyEnabled"},function(){return this.cD},function(a){z.h(a,"boolean",Ph,"isCopyEnabled");this.cD=a});z.defineProperty(Ph,{iI:"copiesEffectiveCollection"},function(){return this.oC},function(a){z.h(a,"boolean",Ph,"copiesEffectiveCollection");this.oC=a});z.defineProperty(Ph,{tI:"dragsTree"},function(){return this.OC},function(a){z.h(a,"boolean",Ph,"dragsTree");this.OC=a});
z.defineProperty(Ph,{Px:"isGridSnapEnabled"},function(){return this.ds},function(a){z.h(a,"boolean",Ph,"isGridSnapEnabled");this.ds=a});z.defineProperty(Ph,{cJ:"isComplexRoutingRealtime"},function(){return this.bD},function(a){z.h(a,"boolean",Ph,"isComplexRoutingRealtime");this.bD=a});z.defineProperty(Ph,{eJ:"isGridSnapRealtime"},function(){return this.gD},function(a){z.h(a,"boolean",Ph,"isGridSnapRealtime");this.gD=a});
z.defineProperty(Ph,{uF:"gridSnapCellSize"},function(){return this.vz},function(a){z.l(a,Fa,Ph,"gridSnapCellSize");this.vz.O(a)||(this.vz=a=a.V())});z.defineProperty(Ph,{OI:"gridSnapCellSpot"},function(){return this.wz},function(a){z.l(a,R,Ph,"gridSnapCellSpot");this.wz.O(a)||(this.wz=a=a.V())});z.defineProperty(Ph,{QI:"gridSnapOrigin"},function(){return this.xz},function(a){z.l(a,M,Ph,"gridSnapOrigin");this.xz.O(a)||(this.xz=a=a.V())});
z.defineProperty(Ph,{Bj:"dragsLink"},function(){return this.NC},function(a){z.h(a,"boolean",Ph,"dragsLink");this.NC=a});z.defineProperty(Ph,{Ln:"currentPart"},function(){return this.wC},function(a){null!==a&&z.l(a,D,Ph,"currentPart");this.wC=a});z.defineProperty(Ph,{kc:"copiedParts"},function(){return this.lC},function(a){this.lC=a});z.defineProperty(Ph,{fc:"draggedParts"},function(){return this.MC},function(a){this.MC=a});
z.w(Ph,{AL:"draggingParts"},function(){return null!==this.kc?this.kc.Uj():null!==this.fc?this.fc.Uj():this.lH});z.defineProperty(Ph,{td:"draggedLink"},function(){return this.LC},function(a){null!==a&&z.l(a,H,Ph,"draggedLink");this.LC=a});z.defineProperty(Ph,{Ox:"isDragOutStarted"},function(){return this.eD},function(a){this.eD=a});z.defineProperty(Ph,{$k:"startPoint"},function(){return this.Qw},function(a){z.l(a,M,Ph,"startPoint");this.Qw.O(a)||(this.Qw=a=a.V())});
z.defineProperty(Ph,{PE:"delay"},function(){return this.So},function(a){z.h(a,"number",Ph,"delay");this.So=a});Ph.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.kb&&!a.Qt||!a.Wl&&!a.Ik&&!a.Qt||!a.Df)return!1;var b=a.U;return!b.left||a.fb!==this&&(!this.isBeyondDragSize()||b.Hj&&b.timestamp-a.Mc.timestamp<this.So)?!1:null!==this.findDraggablePart()};
Ph.prototype.findDraggablePart=function(){var a=this.g;if(null===a)return null;a=a.eu(a.Mc.ha,!1);if(null===a)return null;for(;null!==a&&!a.canSelect();)a=a.Qa;return null!==a&&(a.canMove()||a.canCopy())?a:null};Ph.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.Df){var b=a.eu(a.Mc.ha,!1);if(null!==b){for(;null!==b&&!b.canSelect();)b=b.Qa;this.Ln=b;this.Ln.gb||(a.Ka("ChangingSelection"),b=a.U,(z.Uk?b.Du:b.control)||b.shift||Oh(a),this.Ln.gb=!0,a.Ka("ChangedSelection"))}}};
Ph.prototype.doActivate=function(){var a=this.g;if(null!==a){null===this.Ln&&this.standardMouseSelect();var b=this.Ln;null!==b&&(b.canMove()||b.canCopy())&&(this.ya=!0,this.Lp.set(a.position),Xh(this,a.selection),this.ak.length=0,this.fc=this.computeEffectiveCollection(a.selection),a.Zu=!0,this.xt(this.fc),this.$b("Drag"),this.$k=a.Mc.ha,a.lf=!0,a.Qt&&(this.Ox=!0,this.Kr=!1,Yh=this,Zh=this.g,this.doSimulatedDragOut()))}};
function Xh(a,b){if(a.Bj){var c=a.g;null!==c&&c.Cn&&(c.ia instanceof X&&1===b.count&&b.first()instanceof H?(a.td=b.first(),a.td.canRelinkFrom()&&a.td.canRelinkTo()&&a.td.Vt(),a.oj=c.ib.gG,null===a.oj&&(a.oj=new $h,a.oj.$c(c))):(a.td=null,a.oj=null))}}
Ph.prototype.computeEffectiveCollection=function(a){var b=null!==this.g&&this.g.fb===this,c=new oa(D);if(null===a)return c;for(var d=a.j;d.next();)ji(this,c,d.value,b);if(null!==this.td&&this.Bj)return c;for(d=a.j;d.next();)a=d.value,a instanceof H&&(b=a.aa,null===b||c.contains(b)?(b=a.ea,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c};function wi(a){return void 0===a?new xi(Dd):new xi(a.copy())}
function ji(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof E){b.add(c,wi(c.location));if(c instanceof F)for(var e=c.Oc;e.next();)ji(a,b,e.value,d);for(e=c.Jd;e.next();){var g=e.value;if(!b.contains(g)){var h=g.aa,k=g.ea;null!==h&&b.contains(h)&&null!==k&&b.contains(k)&&ji(a,b,g,d)}}if(a.tI)for(c=c.iF();c.next();)ji(a,b,c.value,d)}else if(c instanceof H)for(g=c,b.add(g,wi()),e=g.Kf;e.next();)ji(a,b,e.value,d);else c instanceof ea||b.add(c,wi(c.location))}
Ph.prototype.doDeactivate=function(){this.ya=!1;var a=this.g;null!==a&&yi(a);zi(this);this.Dp(this.fc);this.fc=this.Ln=null;this.Kr=this.Ox=!1;if(0<Ai.count){for(var b=Ai.length,c=0;c<b;c++){var d=Ai.fa(c);Bi(d);Ci(d);zi(d);null!==d.g&&yi(d.g)}Ai.clear()}Bi(this);this.Lp.m(NaN,NaN);Yh=Zh=null;Ci(this);a.lf=!1;a.lc="";a.Zu=!1;this.al()};function zi(a){var b=a.g;if(null!==b){var c=b.Eb;b.Eb=!0;Di(a,b.U,null);b.Eb=c}a.ak.length=0}
function Ei(){var a=Yh;Ci(a);Fi(a);var b=a.g;null!==b&&a.Lp.F()&&(b.position=a.Lp);null!==b&&yi(b)}Ph.prototype.doCancel=function(){Ci(this);Fi(this);var a=this.g;null!==a&&this.Lp.F()&&(a.position=this.Lp);this.stopTool()};Ph.prototype.xt=function(a){if(null!==a)for(this.Tw=!0,a=a.j;a.next();){var b=a.key;b instanceof H&&(b.Sj=!0)}};Ph.prototype.Dp=function(a){if(null!==a){for(a=a.j;a.next();){var b=a.key;b instanceof H&&(b.Sj=!1,Th(b)&&b.gc())}this.Tw=!1}};
Ph.prototype.doKeyDown=function(){var a=this.g;null!==a&&(a=a.U,null!==a&&this.ya&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};Ph.prototype.doKeyUp=function(){var a=this.g;null!==a&&null!==a.U&&this.ya&&this.doMouseMove()};function Gi(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,g=-Infinity,h=a.j;h.next();){var k=h.value;if(k.qe()&&k.isVisible()){var l=k.location,k=l.x,l=l.y;isNaN(k)||isNaN(l)||(k<c&&(c=k),l<d&&(d=l),k>e&&(e=k),l>g&&(g=l))}}Infinity===c?b.m(0,0,0,0):b.m(c,d,e-c,g-d)}
function Hi(a,b){if(null===a.kc){var c=a.g;if(!(null===c||b&&(c.kb||c.Hf))&&null!==a.fc){var d=c.sa;d.isEnabled&&d.JF?null!==d.zj&&0<d.zj.bg.count&&(c.sa.Lq(),c.$b("Drag")):Fi(a);c.Eb=!b;c.cr=!b;a.$k=c.Mc.ha;d=a.iI?a.fc.Uj():c.selection;d=c.cq(d,c,!0);for(c=d.j;c.next();)c.value.location=c.key.location;c=z.Of();Gi(d,c);z.Mb(c);for(var c=new oa(D),e=a.fc.j;e.next();){var g=e.key;g.qe()&&g.canCopy()&&(g=d.qa(g),null!==g&&(g.kf(),c.add(g,wi(g.location))))}for(d=d.j;d.next();)e=d.value,e instanceof H&&
e.canCopy()&&c.add(e,wi());a.kc=c;Xh(a,c.Uj());null!==a.td&&(c=a.td,d=c.mo,c.um(a.$k.x-(d.x+d.width/2),a.$k.y-(d.y+d.height/2)))}}}function Ci(a){var b=a.g;if(null!==b){if(null!==a.kc&&(b.rB(a.kc.Uj(),!1),a.kc=null,null!==a.fc))for(var c=a.fc.j;c.next();)c.key instanceof H&&(c.value.point=new M(0,0));b.Eb=!1;b.cr=!1;a.$k=b.Mc.ha}}function Bi(a){if(null!==a.td){if(a.Bj&&null!==a.oj){var b=a.oj;null!==b.g&&(b.g.remove(b.be),b.g.remove(b.ce))}a.td=null;a.oj=null}}
function Ii(a,b,c){var d=a.g;if(null!==d){var e=a.$k,g=z.P();g.assign(d.U.ha);a.moveParts(b,g.ro(e),c);z.A(g)}}
Ph.prototype.moveParts=function(a,b,c){if(null!==a&&(z.l(a,oa,Ph,"moveParts:parts"),0!==a.count)){var d=z.P(),e=z.P();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);(b=this.Tw)||this.xt(a);for(var g=new J(Ji),h=new J(Za),k=a.j;k.next();){var l=k.key;if(l.qe()){var m=Ki(this,l,a);if(null!==m)g.add(new Ji(l,k.value,m));else if(!c||l.canMove()){m=k.value.point;d.assign(m);var n=z.P(),p=this.computeMove(l,d.add(e),a,n);l.location=p;k.value.GG=n.ro(m);z.A(n)}}else k.key instanceof H&&h.add(k.ob)}for(c=
g.j;c.next();)g=c.value,m=g.info.point,d.assign(m),g.Yc.location=d.add(g.RI.GG);c=z.P();m=z.P();for(h=h.j;h.next();)if(k=h.value,g=k.key,g instanceof H)if(g.Sj)l=g.aa,n=g.ea,null!==this.td&&this.Bj?(k=k.value.point,a.add(g,wi(e)),l=e.x-k.x,k=e.y-k.y,g.um(l,k)):(null!==l&&(c.assign(l.location),p=a.qa(l),null!==p&&c.ro(p.point)),null!==n&&(m.assign(n.location),p=a.qa(n),null!==p&&m.ro(p.point)),null!==l&&null!==n?c.Vc(m)?(k=k.value.point,l=d,l.assign(c),l.ro(k),a.add(g,wi(c)),g.um(l.x,l.y)):(g.Sj=!1,
g.gc()):(k=k.value.point,n=null!==l?c:null!==n?m:e,a.add(g,wi(n)),l=n.x-k.x,k=n.y-k.y,g.um(l,k)));else if(null===g.aa||null===g.ea)k=k.value.point,a.add(g,wi(e)),l=e.x-k.x,k=e.y-k.y,g.um(l,k);z.A(d);z.A(e);z.A(c);z.A(m);b||(Li(this.g),this.Dp(a))}};function Ki(a,b,c){b=b.Qa;if(null!==b){a=Ki(a,b,c);if(null!==a)return a;a=c.qa(b);if(null!==a)return a}return null}
function Fi(a){if(null!==a.fc){for(var b=a.g,c=a.fc.j;c.next();){var d=c.key;d.qe()&&(d.location=c.value.point)}for(c=a.fc.j;c.next();)if(d=c.key,d instanceof H&&d.Sj){var e=c.value.point;a.fc.add(d,wi());d.um(-e.x,-e.y)}b.hg()}}
Ph.prototype.computeMove=function(a,b,c,d){void 0===d&&(d=new M);d.assign(b);if(null===a)return d;void 0===c&&(c=null);var e=b;if(this.Px&&(this.eJ||null===c||null!==this.g&&this.g.U.up)&&(e=z.P(),c=e,c.assign(b),null!==a)){var g=this.g;if(null!==g){var h=g.Vn,k=this.uF,g=k.width,k=k.height,l=this.QI,m=l.x,l=l.y,n=this.OI;if(null!==h){var p=h.Kx;isNaN(g)&&(g=p.width);isNaN(k)&&(k=p.height);h=h.tF;isNaN(m)&&(m=h.x);isNaN(l)&&(l=h.y)}h=z.Fb(0,0);h.Xu(0,0,g,k,n);tb(b.x,b.y,m+h.x,l+h.y,g,k,c);z.A(h)}}c=
null!==a.VE?a.VE(a,b,e):e;k=a.FJ;g=k.x;isNaN(g)&&(g=a.location.x);k=k.y;isNaN(k)&&(k=a.location.y);h=a.zJ;m=h.x;isNaN(m)&&(m=a.location.x);h=h.y;isNaN(h)&&(h=a.location.y);d.m(Math.max(g,Math.min(c.x,m)),Math.max(k,Math.min(c.y,h)));e!==b&&z.A(e);return d};function Mi(a,b){if(null===b)return!0;var c=b.ba;return null===c||c instanceof ea||c.layer.Wc||a.fc&&a.fc.contains(c)||a.kc&&a.kc.contains(c)?!0:!1}
function Ni(a,b,c,d){var e=a.g;if(null!==e){a.Bj&&(null!==a.td&&(a.td.aa=null,a.td.ea=null),Oi(a,!1));var g=Pi(e,b,null,function(b){return!Mi(a,b)}),h=e.U;h.We=g;var k=e.Eb,l=!1;try{e.Eb=!0;l=Di(a,h,g);if(!a.ya&&null===Yh)return;if(null===g){var m=e.JJ;null!==m&&(m(h),l=!0)}if(!a.ya&&null===Yh)return;a.doDragOver(b,g);if(!a.ya&&null===Yh)return}finally{e.Eb=k,l&&e.hg()}(e.Ae||e.Be)&&(c||d)&&e.wA(h.se)}}
function Di(a,b,c){var d=!1,e=a.ak.length,g=0<e?a.ak[0]:null;if(c===g)return!1;b.Nc=!1;for(var h=0;h<e;h++){var k=a.ak[h],l=k.IJ;if(null!==l&&(l(b,k,c),d=!0,b.Nc))break}a.ak.length=0;if(!a.ya&&null===Yh||null===c)return d;for(b.Nc=!1;null!==c;)a.ak.push(c),c=Qi(c);e=a.ak.length;for(h=0;h<e&&(k=a.ak[h],l=k.HJ,null===l||(l(b,k,g),d=!0,!b.Nc));h++);return d}function Qi(a){var b=a.Q;return null!==b?b:a instanceof D&&!(a instanceof F)&&(a=a.Qa,null!==a&&a.TI)?a:null}
function Ri(a,b,c){var d=a.oj;if(null===d)return null;var e=a.g.On(b,d.eG,function(a){return d.findValidLinkablePort(a,c)});a=z.P();for(var g=Infinity,h=null,e=e.j;e.next();){var k=e.value;if(null!==k.ba){var l=k.cb(mc,a),l=b.Ef(l);l<g&&(h=k,g=l)}}z.A(a);return h}
function Oi(a,b){var c=a.td;if(null!==c&&!(2>c.ua)){var d=a.g;if(null!==d&&!d.kb&&(d=a.oj,null!==d)){var e=null,g=null;null===c.aa&&(e=Ri(a,c.n(0),!1),null!==e&&(g=e.ba));var h=null,k=null;null===c.ea&&(h=Ri(a,c.n(c.ua-1),!0),null!==h&&(k=h.ba));d.isValidLink(g,e,k,h)?b?(c.dq=c.n(0),c.eq=c.n(c.ua-1),c.Sj=!1,c.aa=g,null!==e&&(c.dg=e.vd),c.ea=k,null!==h&&(c.ih=h.vd)):Si(d,g,e,k,h):Si(d,null,null,null,null)}}}Ph.prototype.doDragOver=function(){};
function Ti(a,b){var c=a.g;if(null!==c){a.Bj&&Oi(a,!0);zi(a);var d=Pi(c,b,null,function(b){return!Mi(a,b)}),e=c.U;e.We=d;if(null!==d){e.Nc=!1;for(var g=d;null!==g;){var h=g.bB;if(null!==h&&(h(e,g),e.Nc))break;g=Qi(g)}}else h=c.bB,null!==h&&h(e);if(a.ya||null!==Yh){for(e=(a.kc||a.fc).j;e.next();)g=e.key,g instanceof E&&g.Jd.each(function(a){a.Sj=!1});a.doDropOnto(b,d);if(a.ya||null!==Yh){d=z.Of();for(e=c.selection.j;e.next();)g=e.value,g instanceof E&&Ui(c,g.getAvoidableRect(d));z.Mb(d)}}}}
Ph.prototype.doDropOnto=function(){};Ph.prototype.doMouseMove=function(){if(this.ya){var a=this.g;if(null!==a&&null!==this.Ln&&null!==this.fc){var b=!1,c=!1;this.mayCopy()?(b=!0,a.lc="copy",Hi(this,!1),this.xt(this.kc),Ii(this,this.kc,!1),this.Dp(this.kc)):this.mayMove()?(c=!0,a.lc="default",Ci(this),Ii(this,this.fc,!0)):this.mayDragOut()?(a.lc="no-drop",Hi(this,!1),Ii(this,this.kc,!1)):Ci(this);Ni(this,a.U.ha,c,b)}}};
Ph.prototype.doMouseUp=function(){if(this.ya){var a=this.g;if(null!==a){var b=!1,c=this.mayCopy();c&&null!==this.kc?(Ci(this),Hi(this,!0),this.xt(this.kc),Ii(this,this.kc,!1),this.Dp(this.kc),null!==this.kc&&a.AG(this.kc.Uj())):(b=!0,Ci(this),this.mayMove()&&(Ii(this,this.fc,!0),Ni(this,a.U.ha,!0,!1)));this.Kr=!0;Ti(this,a.U.ha);if(this.ya){this.kc=null;if(b&&null!==this.fc)for(b=this.fc.j;b.next();){var d=b.key;d instanceof E&&(d=d.Qa,null===d||null===d.placeholder||this.fc.contains(d)||d.placeholder.K())}a.Bc();
this.Dp(this.fc);this.Qf=c?"Copy":"Move";a.Ka(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};Ph.prototype.mayCopy=function(){if(!this.EF)return!1;var a=this.g;if(null===a||a.kb||a.Hf||!a.Vp||!a.Ik||(z.Uk?!a.U.alt:!a.U.control))return!1;for(a=a.selection.j;a.next();){var b=a.value;if(b.qe()&&b.canCopy())return!0}return null!==this.td&&this.Bj&&this.td.canCopy()?!0:!1};
Ph.prototype.mayDragOut=function(){if(!this.EF)return!1;var a=this.g;if(null===a||!a.Qt||!a.Ik||a.Wl)return!1;for(a=a.selection.j;a.next();){var b=a.value;if(b.qe()&&b.canCopy())return!0}return null!==this.td&&this.Bj&&this.td.canCopy()?!0:!1};Ph.prototype.mayMove=function(){var a=this.g;if(null===a||a.kb||!a.Wl)return!1;for(a=a.selection.j;a.next();){var b=a.value;if(b.qe()&&b.canMove())return!0}return null!==this.td&&this.Bj&&this.td.canMove()?!0:!1};var Ai=new J(Ph),Yh=null,Zh=null;
Ph.prototype.getDraggingSource=function(){return Yh};Ph.prototype.mayDragIn=function(){var a=this.g;if(null===a||!a.wE||a.kb||a.Hf||!a.Vp)return!1;var b=Yh;return null===b||null===b.g||b.g.ia.dm!==a.ia.dm?!1:!0};Ph.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=this.g;a.Ya.Ii();Vi(a);a=Yh;null!==a&&null!==a.g&&(a.g.lc="copy")}};Ph.prototype.doSimulatedDragLeave=function(){var a=Yh;null!==a&&a.doSimulatedDragOut();this.doCancel()};
Ph.prototype.doSimulatedDragOver=function(){var a=this.g;if(null!==a){var b=Yh;null!==b&&null!==b.fc&&this.mayDragIn()&&(a.lc="copy",Wi(this,b.fc.Uj(),!1),Ii(this,this.kc,!1),Ni(this,a.U.ha,!1,!0))}};
Ph.prototype.doSimulatedDrop=function(){var a=this.g;if(null!==a){var b=Yh;if(null!==b){var c=b.g;b.Kr=!0;Ci(this);this.mayDragIn()&&(this.$b("Drop"),Wi(this,b.fc.Uj(),!0),Ii(this,this.kc,!1),null!==this.kc&&a.AG(this.kc.Uj()),Ti(this,a.U.ha),a.Bc(),b=a.selection,null!==this.kc?this.Qf="ExternalCopy":b=new K(D),this.kc=null,a.doFocus(),a.Ka("ExternalObjectsDropped",b,c),this.al())}}};
function Wi(a,b,c){if(null===a.kc){var d=a.g;if(null!==d&&!d.kb&&!d.Hf){d.Eb=!c;d.cr=!c;a.$k=d.U.ha;d=d.cq(b,d,!0);c=z.Of();Gi(b,c);var e=c.x+c.width/2,g=c.y+c.height/2;z.Mb(c);var h=a.Qw;c=new oa(D);var k=z.P();for(b=b.j;b.next();){var l=b.value;if(l.qe()&&l.canCopy()){var m=l.location,l=d.qa(l);k.m(h.x-(e-m.x),h.y-(g-m.y));l.location=k;l.kf();c.add(l,wi(k))}}z.A(k);for(d=d.j;d.next();)e=d.value,e instanceof H&&e.canCopy()&&c.add(e,wi());a.kc=c;Xh(a,c.Uj());null!==a.td&&(c=a.td,d=c.mo,c.um(a.$k.x-
(d.x+d.width/2),a.$k.y-(d.y+d.height/2)))}}}Ph.prototype.doSimulatedDragOut=function(){var a=this.g;null!==a&&(this.mayCopy()||this.mayMove()?a.lc="":a.lc="no-drop")};function xi(a){this.point=a;this.GG=Dd}z.ka("DraggingInfo",xi);function Ji(a,b,c){this.Yc=a;this.info=b;this.RI=c}
function Xi(){0<arguments.length&&z.wd(Xi);bh.call(this);this.JD=100;this.jD=!1;var a=new H,b=new Y;b.If=!0;b.stroke="blue";a.add(b);b=new Y;b.Xq="Standard";b.fill="blue";b.stroke="blue";a.add(b);a.Lf="Tool";this.bE=a;a=new E;b=new Y;b.vd="";b.Jb="Rectangle";b.fill=null;b.stroke="magenta";b.mb=2;b.Da=Td;a.add(b);a.Zk=!1;a.Lf="Tool";this.$D=a;this.aE=b;a=new E;b=new Y;b.vd="";b.Jb="Rectangle";b.fill=null;b.stroke="magenta";b.mb=2;b.Da=Td;a.add(b);a.Zk=!1;a.Lf="Tool";this.cE=a;this.dE=b;this.GD=this.FD=
this.BD=this.AD=this.CD=null;this.fD=!0;this.CH=new oa(O,"boolean");this.KD=this.Gl=this.XD=null}z.Ta(Xi,bh);z.ka("LinkingBaseTool",Xi);Xi.prototype.doStop=function(){var a=this.g;null!==a&&yi(a);this.ah=this.$g=this.Zg=this.Yg=this.uc=null;this.Dy.clear();this.Nf=null};z.defineProperty(Xi,{eG:"portGravity"},function(){return this.JD},function(a){z.h(a,"number",Xi,"portGravity");0<=a&&(this.JD=a)});
z.defineProperty(Xi,{wq:"isUnconnectedLinkValid"},function(){return this.jD},function(a){z.h(a,"boolean",Xi,"isUnconnectedLinkValid");this.jD=a});z.defineProperty(Xi,{gh:"temporaryLink"},function(){return this.bE},function(a){z.l(a,H,Xi,"temporaryLink");this.bE=a});z.defineProperty(Xi,{be:"temporaryFromNode"},function(){return this.$D},function(a){z.l(a,E,Xi,"temporaryFromNode");this.$D=a});
z.defineProperty(Xi,{so:"temporaryFromPort"},function(){return this.aE},function(a){z.l(a,O,Xi,"temporaryFromPort");this.aE=a});z.defineProperty(Xi,{ce:"temporaryToNode"},function(){return this.cE},function(a){z.l(a,E,Xi,"temporaryToNode");this.cE=a});z.defineProperty(Xi,{to:"temporaryToPort"},function(){return this.dE},function(a){z.l(a,O,Xi,"temporaryToPort");this.dE=a});z.defineProperty(Xi,{uc:"originalLink"},function(){return this.CD},function(a){null!==a&&z.l(a,H,Xi,"originalLink");this.CD=a});
z.defineProperty(Xi,{Yg:"originalFromNode"},function(){return this.AD},function(a){null!==a&&z.l(a,E,Xi,"originalFromNode");this.AD=a});z.defineProperty(Xi,{Zg:"originalFromPort"},function(){return this.BD},function(a){null!==a&&z.l(a,O,Xi,"originalFromPort");this.BD=a});z.defineProperty(Xi,{$g:"originalToNode"},function(){return this.FD},function(a){null!==a&&z.l(a,E,Xi,"originalToNode");this.FD=a});
z.defineProperty(Xi,{ah:"originalToPort"},function(){return this.GD},function(a){null!==a&&z.l(a,O,Xi,"originalToPort");this.GD=a});z.defineProperty(Xi,{Zd:"isForwards"},function(){return this.fD},function(a){z.h(a,"boolean",Xi,"isForwards");this.fD=a});z.w(Xi,{Dy:"validPortsCache"},function(){return this.CH});z.defineProperty(Xi,{Nf:"targetPort"},function(){return this.XD},function(a){null!==a&&z.l(a,O,Xi,"targetPort");this.XD=a});
Xi.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.Da=b.Z.size;e?(d.Hb=b.Hb,d.Bm=b.Bm):(d.Gb=b.Gb,d.lm=b.lm);c.yf=mc;var g=z.P();c.location=b.cb(mc,g);z.A(g);d.angle=b.Rn();null!==this.ly&&this.ly(a,b,c,d,e)}};Xi.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.Da=Td,b.Gb=gc,b.Hb=gc);null!==a&&null!==this.g&&(a.location=this.g.U.ha);null!==this.ly&&this.ly(null,null,a,b,c)};Xi.prototype.doMouseDown=function(){this.ya&&this.doMouseMove()};
Xi.prototype.doMouseMove=function(){if(this.ya){var a=this.g;if(null!==a){this.Nf=this.findTargetPort(this.Zd);if(null!==this.Nf&&this.Nf.ba instanceof E){var b=this.Nf.ba;this.Zd?this.copyPortProperties(b,this.Nf,this.ce,this.to,!0):this.copyPortProperties(b,this.Nf,this.be,this.so,!1)}else this.Zd?this.setNoTargetPortProperties(this.ce,this.to,!0):this.setNoTargetPortProperties(this.be,this.so,!1);(a.Ae||a.Be)&&a.wA(a.U.se)}}};
Xi.prototype.findValidLinkablePort=function(a,b){if(null===a)return null;var c=a.ba;if(!(c instanceof E))return null;for(;null!==a;){var d=b?a.QG:a.kF;if(!0===d&&(null!==a.vd||a instanceof E)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.Q}return null};
Xi.prototype.findTargetPort=function(a){var b=this.g,c=b.U.ha,d=this.eG;0>=d&&(d=.1);for(var e=this,g=b.On(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=Infinity,b=null,g=g.j;g.next();){var h=g.value,k=h.ba;if(k instanceof E){var l=h.cb(mc,z.P()),m=c.x-l.x,n=c.y-l.y;z.A(l);l=m*m+n*n;l<d&&(m=this.Dy.qa(h),null!==m?m&&(b=h,d=l):a&&this.isValidLink(this.Yg,this.Zg,k,h)||!a&&this.isValidLink(k,h,this.$g,this.ah)?(this.Dy.add(h,!0),b=h,d=l):this.Dy.add(h,!1))}}return null!==b&&(c=b.ba,
c instanceof E&&(null===c.layer||c.layer.Rt))?b:null};Xi.prototype.isValidFrom=function(a,b){if(null===a||null===b)return this.wq;if(null!==this.g&&this.g.fb===this&&(null!==a.layer&&!a.layer.Rt||!0!==b.kF))return!1;var c=b.GA;if(Infinity>c){if(null!==this.uc&&a===this.Yg&&b===this.Zg)return!0;var d=b.vd;null===d&&(d="");if(a.Dx(d).count>=c)return!1}return!0};
Xi.prototype.isValidTo=function(a,b){if(null===a||null===b)return this.wq;if(null!==this.g&&this.g.fb===this&&(null!==a.layer&&!a.layer.Rt||!0!==b.QG))return!1;var c=b.yK;if(Infinity>c){if(null!==this.uc&&a===this.$g&&b===this.ah)return!0;var d=b.vd;null===d&&(d="");if(a.Ug(d).count>=c)return!1}return!0};Xi.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.ba,d=b.ba;return null!==c&&c===d};
Xi.prototype.isLinked=function(a,b){if(null===a||null===b)return!1;var c=a.ba;if(!(c instanceof E))return!1;var d=a.vd;null===d&&(d="");var e=b.ba;if(!(e instanceof E))return!1;var g=b.vd;null===g&&(g="");for(e=e.Ug(g);e.next();)if(g=e.value,g.aa===c&&g.dg===d)return!0;return!1};
Xi.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.GI&&d.xK||!this.isInSameNode(b,d))&&(b.FI&&d.wK||!this.isLinked(b,d)))||null!==this.uc&&(null!==a&&this.isLabelDependentOnLink(a,this.uc)||null!==c&&this.isLabelDependentOnLink(c,this.uc))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!this.isValidCycle(a,c,this.uc))return!1;if(null!==a){var e=a.Zx;if(null!==e&&!e(a,b,c,d,this.uc))return!1}if(null!==
c&&(e=c.Zx,null!==e&&!e(a,b,c,d,this.uc)))return!1;e=this.Zx;return null!==e?e(a,b,c,d,this.uc):!0};Xi.prototype.isLabelDependentOnLink=function(a,b){if(null===a)return!1;var c=a.Cc;if(null===c)return!1;if(c===b)return!0;var d=new K(E);d.add(a);return Yi(this,c,b,d)};function Yi(a,b,c,d){if(b===c)return!0;var e=b.aa;if(null!==e&&e.xf&&(d.add(e),Yi(a,e.Cc,c,d)))return!0;b=b.ea;return null!==b&&b.xf&&(d.add(b),Yi(a,b.Cc,c,d))?!0:!1}
Xi.prototype.isValidCycle=function(a,b,c){void 0===c&&(c=null);if(null===a||null===b)return this.wq;var d=null!==this.g?this.g.EK:Zi;if(d!==Zi){if(d===$i){if(null!==c&&!c.Xc)return!0;for(d=b.Jd;d.next();){var e=d.value;if(e!==c&&e.Xc&&e.ea===b)return!1}return!aj(this,a,b,c,!0)}if(d===bj){if(null!==c&&!c.Xc)return!0;for(d=a.Jd;d.next();)if(e=d.value,e!==c&&e.Xc&&e.aa===a)return!1;return!aj(this,a,b,c,!0)}if(d===cj)return a===b?a=!0:(d=new K(E),d.add(b),a=dj(this,d,a,b,c)),!a;if(d===ej)return!aj(this,
a,b,c,!1);if(d===fj)return a===b?a=!0:(d=new K(E),d.add(b),a=gj(this,d,a,b,c)),!a}return!0};function aj(a,b,c,d,e){if(b===c)return!0;if(null===b||null===c)return!1;for(var g=b.Jd;g.next();){var h=g.value;if(h!==d&&(!e||h.Xc)&&h.ea===b&&(h=h.aa,h!==b&&aj(a,h,c,d,e)))return!0}return!1}function dj(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var g=c.Jd;g.next();){var h=g.value;if(h!==e&&h.ea===c&&(h=h.aa,h!==c&&dj(a,b,h,d,e)))return!0}return!1}
function gj(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var g=c.Jd;g.next();){var h=g.value;if(h!==e){var k=h.aa,h=h.ea,k=k===c?h:k;if(k!==c&&gj(a,b,k,d,e))return!0}}return!1}z.defineProperty(Xi,{Zx:"linkValidation"},function(){return this.Gl},function(a){null!==a&&z.h(a,"function",Xi,"linkValidation");this.Gl=a});z.defineProperty(Xi,{ly:"portTargeted"},function(){return this.KD},function(a){null!==a&&z.h(a,"function",Xi,"portTargeted");this.KD=a});
function ua(){0<arguments.length&&z.wd(ua);Xi.call(this);this.name="Linking";this.Uy={};this.Ty=null;this.ga=hj;this.TD=null}z.Ta(ua,Xi);z.ka("LinkingTool",ua);var hj;ua.Either=hj=z.s(ua,"Either",0);var ij;ua.ForwardsOnly=ij=z.s(ua,"ForwardsOnly",0);var jj;ua.BackwardsOnly=jj=z.s(ua,"BackwardsOnly",0);z.defineProperty(ua,{PH:"archetypeLinkData"},function(){return this.Uy},function(a){null!==a&&z.l(a,Object,ua,"archetypeLinkData");a instanceof O&&z.l(a,H,ua,"archetypeLinkData");this.Uy=a});
z.defineProperty(ua,{zE:"archetypeLabelNodeData"},function(){return this.Ty},function(a){null!==a&&z.l(a,Object,ua,"archetypeLabelNodeData");a instanceof O&&z.l(a,E,ua,"archetypeLabelNodeData");this.Ty=a});z.defineProperty(ua,{direction:"direction"},function(){return this.ga},function(a){z.Ca(a,ua,ua,"direction");this.ga=a});z.defineProperty(ua,{KG:"startObject"},function(){return this.TD},function(a){null!==a&&z.l(a,O,ua,"startObject");this.TD=a});
ua.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.kb||a.Hf||!a.Rt)return!1;var b=a.ia;return(b instanceof X||b instanceof Cg)&&a.U.left&&(a.fb===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1};
ua.prototype.findLinkablePort=function(){var a=this.g;if(null===a)return null;var b=this.KG;null===b&&(b=a.He(a.Mc.ha,null,null));if(null===b||!(b.ba instanceof E))return null;a=this.direction;if(a===hj||a===ij){var c=this.findValidLinkablePort(b,!1);if(null!==c)return this.Zd=!0,c}if(a===hj||a===jj)if(c=this.findValidLinkablePort(b,!0),null!==c)return this.Zd=!1,c;return null};
ua.prototype.doActivate=function(){var a=this.g;if(null!==a){var b=this.findLinkablePort();null!==b&&(this.$b(this.name),a.lf=!0,a.lc="pointer",this.Zd?(null===this.ce||this.ce.location.F()||(this.ce.location=a.U.ha),this.Zg=b,b=this.Zg.ba,b instanceof E&&(this.Yg=b),this.copyPortProperties(this.Yg,this.Zg,this.be,this.so,!1)):(null===this.be||this.be.location.F()||(this.be.location=a.U.ha),this.ah=b,b=this.ah.ba,b instanceof E&&(this.$g=b),this.copyPortProperties(this.$g,this.ah,this.ce,this.to,
!0)),a.add(this.be),a.add(this.ce),null!==this.gh&&(null!==this.be&&(this.gh.aa=this.be),null!==this.ce&&(this.gh.ea=this.ce),this.gh.gc(),a.add(this.gh)),this.ya=!0)}};ua.prototype.doDeactivate=function(){this.ya=!1;var a=this.g;null!==a&&(a.remove(this.gh),a.remove(this.be),a.remove(this.ce),a.lf=!1,a.lc="",this.al())};ua.prototype.doStop=function(){Xi.prototype.doStop.call(this);this.KG=null};
ua.prototype.doMouseUp=function(){if(this.ya){var a=this.g;if(null===a)return;var b=this.Qf=null,c=null,d=null,e=null,g=this.Nf=this.findTargetPort(this.Zd);if(null!==g){var h=g.ba;h instanceof E&&(this.Zd?(null!==this.Yg&&(b=this.Yg,c=this.Zg),d=h,e=g):(b=h,c=g,null!==this.$g&&(d=this.$g,e=this.ah)))}else this.Zd?null!==this.Yg&&this.wq&&(b=this.Yg,c=this.Zg):null!==this.$g&&this.wq&&(d=this.$g,e=this.ah);null!==b||null!==d?(h=this.insertLink(b,c,d,e),null!==h?(null===g&&(this.Zd?h.eq=a.U.ha:h.dq=
a.U.ha),a.Df&&a.select(h),this.Qf=this.name,a.Ka("LinkDrawn",h)):(a.ia.EE(),this.doNoLink(b,c,d,e))):this.Zd?this.doNoLink(this.Yg,this.Zg,null,null):this.doNoLink(null,null,this.$g,this.ah)}this.stopTool()};
ua.prototype.insertLink=function(a,b,c,d){var e=this.g;if(null===e)return null;var g=e.ia;if(g instanceof Cg){var h=a;b=c;e.ae||(h=c,b=a);if(null!==h&&null!==b)return g.Hi(b.data,g.Cb(h.data)),b.Pn()}else if(g instanceof X)if(h="",null!==a&&(null===b&&(b=a),h=b.vd,null===h&&(h="")),b="",null!==c&&(null===d&&(d=c),b=d.vd,null===b&&(b="")),d=this.PH,d instanceof H){if(Nh(d),g=d.copy(),null!==g)return g.aa=a,g.dg=h,g.ea=c,g.ih=b,e.add(g),a=this.zE,a instanceof E&&(Nh(a),a=a.copy(),null!==a&&(a.Cc=g,
e.add(a))),g}else if(null!==d&&(d=g.qx(d),z.Xa(d)))return null!==a&&g.xB(d,g.Cb(a.data)),g.yB(d,h),null!==c&&g.DB(d,g.Cb(c.data)),g.EB(d,b),g.Mt(d),a=this.zE,null===a||a instanceof E||(a=g.copyNodeData(a),z.Xa(a)&&(g.Tl(a),a=g.Cb(a),void 0!==a&&g.uE(d,a))),g=e.cg(d);return null};ua.prototype.doNoLink=function(){};
function $h(){0<arguments.length&&z.wd($h);Xi.call(this);this.name="Relinking";var a=new Y;a.Jb="Diamond";a.Da=Vd;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.Ue=0;this.TC=a;a=new Y;a.Jb="Diamond";a.Da=Vd;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.Ue=-1;this.eE=a;this.oc=null;this.DD=new w}z.Ta($h,Xi);z.ka("RelinkingTool",$h);
$h.prototype.updateAdornments=function(a){if(null!==a&&a instanceof H){var b="RelinkFrom",c=null;if(a.gb&&null!==this.g&&!this.g.kb){var d=a.no;null!==d&&a.canRelinkFrom()&&a.Z.F()&&a.isVisible()&&d.Z.F()&&d.Jj()&&(c=a.iq(b),null===c&&(c=this.makeAdornment(d,!1),null!==c&&(c.rc=b),a.Sl(b,c)))}null===c&&a.Pj(b);b="RelinkTo";c=null;a.gb&&null!==this.g&&!this.g.kb&&(d=a.no,null!==d&&a.canRelinkTo()&&a.Z.F()&&a.isVisible()&&d.Z.F()&&d.Jj()&&(c=a.iq(b),null===c&&(c=this.makeAdornment(d,!0),null!==c&&(c.rc=
b),a.Sl(b,c))));null===c&&a.Pj(b)}};$h.prototype.makeAdornment=function(a,b){var c=new ea;c.type=kj;var d=b?this.vK:this.EI;null!==d&&c.add(d.copy());c.Ab=a;return c};z.defineProperty($h,{EI:"fromHandleArchetype"},function(){return this.TC},function(a){null!==a&&z.l(a,O,$h,"fromHandleArchetype");this.TC=a});z.defineProperty($h,{vK:"toHandleArchetype"},function(){return this.eE},function(a){null!==a&&z.l(a,O,$h,"toHandleArchetype");this.eE=a});z.w($h,{handle:"handle"},function(){return this.oc});
$h.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.kb||a.Hf||!a.Cn)return!1;var b=a.ia;if(!(b instanceof X||b instanceof Cg)||!a.U.left)return!1;b=this.findToolHandleAt(a.Mc.ha,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Mc.ha,"RelinkTo"));return null!==b};
$h.prototype.doActivate=function(){var a=this.g;if(null!==a){if(null===this.uc){var b=this.findToolHandleAt(a.Mc.ha,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Mc.ha,"RelinkTo"));if(null===b)return;var c=b.ba;if(!(c instanceof ea&&c.$f instanceof H))return;this.oc=b;this.Zd=null===c||"RelinkTo"===c.rc;this.uc=c.$f}this.$b(this.name);a.lf=!0;a.lc="pointer";this.Zg=this.uc.gd;this.Yg=this.uc.aa;this.ah=this.uc.Nd;this.$g=this.uc.ea;this.DD.set(this.uc.Z);null!==this.uc&&0<this.uc.ua&&(null===
this.uc.aa&&(null!==this.so&&(this.so.Da=Sd),null!==this.be&&(this.be.location=this.uc.n(0))),null===this.uc.ea&&(null!==this.to&&(this.to.Da=Sd),null!==this.ce&&(this.ce.location=this.uc.n(this.uc.ua-1))));this.copyPortProperties(this.Yg,this.Zg,this.be,this.so,!1);this.copyPortProperties(this.$g,this.ah,this.ce,this.to,!0);a.add(this.be);a.add(this.ce);null!==this.gh&&(null!==this.be&&(this.gh.aa=this.be),null!==this.ce&&(this.gh.ea=this.ce),this.copyLinkProperties(this.uc,this.gh),this.gh.gc(),
a.add(this.gh));this.ya=!0}};$h.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.Ot=a.Ot;b.sA=a.sA;var c=a.hf;if(c===lj||c===mj)c=nj;b.hf=c;b.ux=a.ux;b.ty=a.ty;b.Uq=a.Uq;b.Gb=a.Gb;b.lm=a.lm;b.ju=a.ju;b.ku=a.ku;b.Hb=a.Hb;b.Bm=a.Bm;b.bv=a.bv;b.cv=a.cv}};$h.prototype.doDeactivate=function(){this.ya=!1;var a=this.g;null!==a&&(a.remove(this.gh),a.remove(this.be),a.remove(this.ce),a.lf=!1,a.lc="",this.al())};$h.prototype.doStop=function(){Xi.prototype.doStop.call(this);this.oc=null};
$h.prototype.doMouseUp=function(){if(this.ya){var a=this.g;if(null===a)return;this.Qf=null;var b=this.Yg,c=this.Zg,d=this.$g,e=this.ah,g=this.uc;this.Nf=this.findTargetPort(this.Zd);if(null!==this.Nf){var h=this.Nf.ba;h instanceof E&&(this.Zd?(d=h,e=this.Nf):(b=h,c=this.Nf))}else this.wq?this.Zd?e=d=null:c=b=null:g=null;null!==g?(this.reconnectLink(g,this.Zd?d:b,this.Zd?e:c,this.Zd),null===this.Nf&&(this.Zd?g.eq=a.U.ha:g.dq=a.U.ha,g.gc()),a.Df&&(g.gb=!0),this.Qf=this.name,a.Ka("LinkRelinked",g,this.Zd?
this.ah:this.Zg)):this.doNoRelink(this.uc,this.Zd);oj(this.uc,this.DD)}this.stopTool()};$h.prototype.reconnectLink=function(a,b,c,d){if(null===this.g)return!1;c=null!==c&&null!==c.vd?c.vd:"";d?(a.ea=b,a.ih=c):(a.aa=b,a.dg=c);return!0};$h.prototype.doNoRelink=function(){};function Si(a,b,c,d,e){null!==a.g&&(null!==b?(a.copyPortProperties(b,c,a.be,a.so,!1),a.g.add(a.be)):a.g.remove(a.be),null!==d?(a.copyPortProperties(d,e,a.ce,a.to,!0),a.g.add(a.ce)):a.g.remove(a.ce))}
function pj(){0<arguments.length&&z.wd(pj);bh.call(this);this.name="LinkReshaping";var a=new Y;a.Jb="Rectangle";a.Da=Ud;a.fill="lightblue";a.stroke="dodgerblue";this.vl=a;a=new Y;a.Jb="Diamond";a.Da=Ud;a.fill="lightblue";a.stroke="dodgerblue";this.qD=a;this.LD=3;this.Ry=this.oc=null;this.zp=new M;this.uw=null}z.Ta(pj,bh);z.ka("LinkReshapingTool",pj);var qj;pj.None=qj=z.s(pj,"None",0);var rj;pj.Horizontal=rj=z.s(pj,"Horizontal",1);var Bj;pj.Vertical=Bj=z.s(pj,"Vertical",2);var Cj;
pj.All=Cj=z.s(pj,"All",3);pj.prototype.getReshapingBehavior=pj.prototype.oF=function(a){return a&&a.MD?a.MD:qj};pj.prototype.setReshapingBehavior=pj.prototype.Wu=function(a,b){z.l(a,O,pj,"setReshapingBehavior:obj");z.Ca(b,pj,pj,"setReshapingBehavior:behavior");a.MD=b};
pj.prototype.updateAdornments=function(a){if(null!==a&&a instanceof H){if(a.gb&&null!==this.g&&!this.g.kb){var b=a.path;if(null!==b&&a.canReshape()&&a.Z.F()&&a.isVisible()&&b.Z.F()&&b.Jj()){var c=a.iq(this.name);if(null===c||c.sH!==a.ua||c.EH!==a.Ru)c=this.makeAdornment(b),null!==c&&(c.sH=a.ua,c.EH=a.Ru,a.Sl(this.name,c));if(null!==c){c.location=a.position;return}}}a.Pj(this.name)}};
pj.prototype.makeAdornment=function(a){var b=a.ba,c=b.ua,d=b.tc,e=null;if(null!==b.points&&1<c){e=new ea;e.type=kj;var c=b.fu,g=b.Xx,h=d?1:0;if(b.Ru&&b.hf!==Dj)for(var k=c+h;k<g-h;k++){var l=this.makeResegmentHandle(a,k);null!==l&&(l.Ue=k,l.vB=.5,l.GA=999,e.add(l))}for(k=c+1;k<g;k++)if(l=this.makeHandle(a,k),null!==l){l.Ue=k;if(k!==c)if(k===c+1&&d){var h=b.n(c),m=b.n(c+1);Q(h.x,m.x)&&Q(h.y,m.y)&&(m=b.n(c-1));Q(h.x,m.x)?(this.Wu(l,Bj),l.cursor="n-resize"):Q(h.y,m.y)&&(this.Wu(l,rj),l.cursor="w-resize")}else k===
g-1&&d?(h=b.n(g-1),m=b.n(g),Q(h.x,m.x)&&Q(h.y,m.y)&&(h=b.n(g+1)),Q(h.x,m.x)?(this.Wu(l,Bj),l.cursor="n-resize"):Q(h.y,m.y)&&(this.Wu(l,rj),l.cursor="w-resize")):k!==g&&(this.Wu(l,Cj),l.cursor="move");e.add(l)}e.rc=this.name;e.Ab=a}return e};pj.prototype.makeHandle=function(){var a=this.mu;return null===a?null:a.copy()};z.defineProperty(pj,{mu:"handleArchetype"},function(){return this.vl},function(a){null!==a&&z.l(a,O,pj,"handleArchetype");this.vl=a});
pj.prototype.makeResegmentHandle=function(){var a=this.EJ;return null===a?null:a.copy()};z.defineProperty(pj,{EJ:"midHandleArchetype"},function(){return this.qD},function(a){null!==a&&z.l(a,O,pj,"midHandleArchetype");this.qD=a});z.w(pj,{handle:"handle"},function(){return this.oc});z.w(pj,{Pt:"adornedLink"},function(){return this.Ry});pj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.kb&&a.hx&&a.U.left?null!==this.findToolHandleAt(a.Mc.ha,this.name):!1};
pj.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.oc=this.findToolHandleAt(a.Mc.ha,this.name),null!==this.oc)){var b=this.oc.ba.$f;if(b instanceof H){this.Ry=b;a.lf=!0;this.$b(this.name);if(b.Ru&&999===this.oc.GA){var c=b.points.copy(),d=this.oc.cb(mc);c.Yd(this.oc.Ue+1,d);b.tc&&c.Yd(this.oc.Ue+1,d);b.points=c;b.pe();this.oc=this.findToolHandleAt(a.Mc.ha,this.name);if(null===this.oc){this.doDeactivate();return}}this.zp=b.n(this.oc.Ue);this.uw=b.points.copy();this.ya=!0}}};
pj.prototype.doDeactivate=function(){this.al();this.Ry=this.oc=null;var a=this.g;null!==a&&(a.lf=!1);this.ya=!1};pj.prototype.doCancel=function(){var a=this.Pt;null!==a&&(a.points=this.uw);this.stopTool()};pj.prototype.doMouseMove=function(){var a=this.g;this.ya&&null!==a&&(a=this.computeReshape(a.U.ha),this.reshape(a))};
pj.prototype.doMouseUp=function(){var a=this.g;if(this.ya&&null!==a){var b=this.computeReshape(a.U.ha);this.reshape(b);b=this.Pt;if(null!==b&&b.Ru){var c=this.handle.Ue,d=b.n(c-1),e=b.n(c),g=b.n(c+1);if(b.tc){if(c>b.fu+1&&c<b.Xx-1){var h=b.n(c-2);if(Math.abs(d.x-e.x)<this.Th&&Math.abs(d.y-e.y)<this.Th&&(Ej(this,h,d,e,g,!0)||Ej(this,h,d,e,g,!1))){var k=b.points.copy();Ej(this,h,d,e,g,!0)?(k.bh(c-2,new M(h.x,(g.y+h.y)/2)),k.bh(c+1,new M(g.x,(g.y+h.y)/2))):(k.bh(c-2,new M((g.x+h.x)/2,h.y)),k.bh(c+1,
new M((g.x+h.x)/2,g.y)));k.md(c);k.md(c-1);b.points=k;b.pe()}else h=b.n(c+2),Math.abs(e.x-g.x)<this.Th&&Math.abs(e.y-g.y)<this.Th&&(Ej(this,d,e,g,h,!0)||Ej(this,d,e,g,h,!1))&&(k=b.points.copy(),Ej(this,d,e,g,h,!0)?(k.bh(c-1,new M(d.x,(d.y+h.y)/2)),k.bh(c+2,new M(h.x,(d.y+h.y)/2))):(k.bh(c-1,new M((d.x+h.x)/2,d.y)),k.bh(c+2,new M((d.x+h.x)/2,h.y))),k.md(c+1),k.md(c),b.points=k,b.pe())}}else h=z.P(),ob(d.x,d.y,g.x,g.y,e.x,e.y,h)&&h.Ef(e)<this.Th*this.Th&&(k=b.points.copy(),k.md(c),b.points=k,b.pe()),
z.A(h)}a.Bc();this.Qf=this.name;a.Ka("LinkReshaped",this.Pt,this.uw)}this.stopTool()};function Ej(a,b,c,d,e,g){return g?Math.abs(b.y-c.y)<a.Th&&Math.abs(c.y-d.y)<a.Th&&Math.abs(d.y-e.y)<a.Th:Math.abs(b.x-c.x)<a.Th&&Math.abs(c.x-d.x)<a.Th&&Math.abs(d.x-e.x)<a.Th}z.defineProperty(pj,{Th:"resegmentingDistance"},function(){return this.LD},function(a){z.h(a,"number",pj,"resegmentingDistance");this.LD=a});
pj.prototype.reshape=function(a){var b=this.Pt;b.xm();var c=this.handle.Ue,d=this.oF(this.handle);if(b.tc)if(c===b.fu+1)c=b.fu+1,d===Bj?(b.ja(c,b.n(c-1).x,a.y),b.ja(c+1,b.n(c+2).x,a.y)):d===rj&&(b.ja(c,a.x,b.n(c-1).y),b.ja(c+1,a.x,b.n(c+2).y));else if(c===b.Xx-1)c=b.Xx-1,d===Bj?(b.ja(c-1,b.n(c-2).x,a.y),b.ja(c,b.n(c+1).x,a.y)):d===rj&&(b.ja(c-1,a.x,b.n(c-2).y),b.ja(c,a.x,b.n(c+1).y));else{var d=c,e=b.n(d),g=b.n(d-1),h=b.n(d+1);Q(g.x,e.x)&&Q(e.y,h.y)?(Q(g.x,b.n(d-2).x)&&!Q(g.y,b.n(d-2).y)?(b.B(d,a.x,
g.y),c++,d++):b.ja(d-1,a.x,g.y),Q(h.y,b.n(d+2).y)&&!Q(h.x,b.n(d+2).x)?b.B(d+1,h.x,a.y):b.ja(d+1,h.x,a.y)):Q(g.y,e.y)&&Q(e.x,h.x)?(Q(g.y,b.n(d-2).y)&&!Q(g.x,b.n(d-2).x)?(b.B(d,g.x,a.y),c++,d++):b.ja(d-1,g.x,a.y),Q(h.x,b.n(d+2).x)&&!Q(h.y,b.n(d+2).y)?b.B(d+1,a.x,h.y):b.ja(d+1,a.x,h.y)):Q(g.x,e.x)&&Q(e.x,h.x)?(Q(g.x,b.n(d-2).x)&&!Q(g.y,b.n(d-2).y)?(b.B(d,a.x,g.y),c++,d++):b.ja(d-1,a.x,g.y),Q(h.x,b.n(d+2).x)&&!Q(h.y,b.n(d+2).y)?b.B(d+1,a.x,h.y):b.ja(d+1,a.x,h.y)):Q(g.y,e.y)&&Q(e.y,h.y)&&(Q(g.y,b.n(d-
2).y)&&!Q(g.x,b.n(d-2).x)?(b.B(d,g.x,a.y),c++,d++):b.ja(d-1,g.x,a.y),Q(h.y,b.n(d+2).y)&&!Q(h.x,b.n(d+2).x)?b.B(d+1,h.x,a.y):b.ja(d+1,h.x,a.y));b.ja(c,a.x,a.y)}else b.ja(c,a.x,a.y),1===c&&b.computeSpot(!0).$d()&&(e=b.aa,g=b.gd,null===e||e.isVisible()||(e=e.findVisibleNode(),e!==b.aa&&(g=e.im(""))),d=g.cb(mc,z.P()),e=b.getLinkPointFromPoint(e,g,d,a,!0,z.P()),b.ja(0,e.x,e.y),z.A(d),z.A(e)),c===b.ua-2&&b.computeSpot(!1).$d()&&(c=b.ea,e=b.Nd,null===c||c.isVisible()||(c=c.findVisibleNode(),c!==b.ea&&(e=
c.im(""))),d=e.cb(mc,z.P()),e=b.getLinkPointFromPoint(c,e,d,a,!1,z.P()),b.ja(b.ua-1,e.x,e.y),z.A(d),z.A(e));b.yj()};pj.prototype.computeReshape=function(a){var b=this.Pt,c=this.handle.Ue;switch(this.oF(this.handle)){case Cj:return a;case Bj:return b=b.n(c),new M(b.x,a.y);case rj:return b=b.n(c),new M(a.x,b.y);default:case qj:return b.n(c)}};z.w(pj,{iM:"originalPoint"},function(){return this.zp});z.w(pj,{jM:"originalPoints"},function(){return this.uw});
function Qj(){0<arguments.length&&z.wd(Qj);bh.call(this);this.name="Resizing";this.li=(new Fa(1,1)).freeze();this.ki=(new Fa(9999,9999)).freeze();this.Yj=(new Fa(NaN,NaN)).freeze();this.ds=!1;this.Rc=null;var a=new Y;a.Fh=mc;a.Jb="Rectangle";a.Da=Ud;a.fill="lightblue";a.stroke="dodgerblue";a.mb=1;a.cursor="pointer";this.vl=a;this.oc=null;this.zp=new M;this.zD=new Fa;this.ED=new M;this.rz=new Fa(0,0);this.qz=new Fa(Infinity,Infinity);this.pz=new Fa(1,1);this.wD=!0}z.Ta(Qj,bh);z.ka("ResizingTool",Qj);
Qj.prototype.updateAdornments=function(a){if(!(null===a||a instanceof H)){if(a.gb&&null!==this.g&&!this.g.kb){var b=a.rG;if(null!==b&&a.canResize()&&a.Z.F()&&a.isVisible()&&b.Z.F()&&b.Jj()){var c=a.iq(this.name);if(null===c||c.Ab!==b)c=this.makeAdornment(b);if(null!==c){var d=b.Rn();c.angle=d;var e=b.cb(c.yf,z.P()),g=b.Cj();c.location=e;z.A(e);e=c.placeholder;if(null!==e){var b=b.Ja,h=z.Am();h.m(b.width*g,b.height*g);e.Da=h;z.Qk(h)}this.updateResizeHandles(c,d);a.Sl(this.name,c);return}}}a.Pj(this.name)}};
Qj.prototype.makeAdornment=function(a){var b=null,b=a.ba.qG;if(null===b){b=new ea;b.type=Rj;b.yf=mc;var c=new Sj;c.If=!0;b.add(c);b.add(this.makeHandle(a,hc));b.add(this.makeHandle(a,jc));b.add(this.makeHandle(a,qc));b.add(this.makeHandle(a,oc));b.add(this.makeHandle(a,$c));b.add(this.makeHandle(a,bd));b.add(this.makeHandle(a,cd));b.add(this.makeHandle(a,ad))}else if(Nh(b),b=b.copy(),null===b)return null;b.rc=this.name;b.Ab=a;return b};
Qj.prototype.makeHandle=function(a,b){var c=this.mu;if(null===c)return null;c=c.copy();c.alignment=b;return c};
Qj.prototype.updateResizeHandles=function(a,b){if(null!==a)if(!a.alignment.hd()&&("pointer"===a.cursor||0<a.cursor.indexOf("resize")))a:{var c=a.alignment;c.$d()&&(c=mc);var d=b;if(0>=c.x)d=0>=c.y?d+225:1<=c.y?d+135:d+180;else if(1<=c.x)0>=c.y?d+=315:1<=c.y&&(d+=45);else if(0>=c.y)d+=270;else if(1<=c.y)d+=90;else break a;0>d?d+=360:360<=d&&(d-=360);a.cursor=22.5>d?"e-resize":67.5>d?"se-resize":112.5>d?"s-resize":157.5>d?"sw-resize":202.5>d?"w-resize":247.5>d?"nw-resize":292.5>d?"n-resize":337.5>d?
"ne-resize":"e-resize"}else if(a instanceof I)for(c=a.elements;c.next();)this.updateResizeHandles(c.value,b)};z.defineProperty(Qj,{mu:"handleArchetype"},function(){return this.vl},function(a){null!==a&&z.l(a,O,Qj,"handleArchetype");this.vl=a});z.w(Qj,{handle:"handle"},function(){return this.oc});z.defineProperty(Qj,{Ab:"adornedObject"},function(){return this.Rc},function(a){null!==a&&z.l(a,O,Qj,"adornedObject");this.Rc=a});
Qj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.kb&&a.St&&a.U.left?null!==this.findToolHandleAt(a.Mc.ha,this.name):!1};
Qj.prototype.doActivate=function(){var a=this.g;null!==a&&(this.oc=this.findToolHandleAt(a.Mc.ha,this.name),null!==this.oc&&(this.Rc=this.oc.ba.Ab,this.zp.set(this.Ab.cb(this.handle.alignment.cG())),this.ED.set(this.Rc.ba.location),this.zD.set(this.Rc.Da),this.pz=this.computeCellSize(),this.rz=this.computeMinSize(),this.qz=this.computeMaxSize(),a.lf=!0,this.wD=a.Ya.isEnabled,a.Ya.isEnabled=!1,this.$b(this.name),this.ya=!0))};
Qj.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.al(),this.Rc=this.oc=null,this.ya=a.lf=!1,a.Ya.isEnabled=this.wD)};Qj.prototype.doCancel=function(){null!==this.Ab&&(this.Ab.Da=this.dG,this.Ab.ba.location=this.OJ);this.stopTool()};Qj.prototype.doMouseMove=function(){var a=this.g;if(this.ya&&null!==a){var b=this.rz,c=this.qz,d=this.pz,e=this.Ab.mF(a.U.ha,z.P()),g=this.computeReshape(),b=this.computeResize(e,this.handle.alignment,b,c,d,g);this.resize(b);a.hg();z.A(e)}};
Qj.prototype.doMouseUp=function(){var a=this.g;if(this.ya&&null!==a){var b=this.rz,c=this.qz,d=this.pz,e=this.Ab.mF(a.U.ha,z.P()),g=this.computeReshape(),b=this.computeResize(e,this.handle.alignment,b,c,d,g);this.resize(b);z.A(e);a.Bc();this.Qf=this.name;a.Ka("PartResized",this.Ab,this.dG)}this.stopTool()};
Qj.prototype.resize=function(a){if(null!==this.g){var b=this.Ab,c=b.ba;b.Da=a.size;c.kf();a=this.Ab.cb(this.handle.alignment.cG());c instanceof F?(a=c.position.copy().ro(a).add(this.zp),c.move(a)):c.location=c.location.copy().ro(a).add(this.zp)}};
Qj.prototype.computeResize=function(a,b,c,d,e,g){b.$d()&&(b=mc);var h=this.Ab.Ja,k=h.x,l=h.y,m=h.x+h.width,n=h.y+h.height,p=1;if(!g){var p=h.width,q=h.height;0>=p&&(p=1);0>=q&&(q=1);p=q/p}q=z.P();tb(a.x,a.y,k,l,e.width,e.height,q);a=h.copy();0>=b.x?0>=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=Math.max(n-a.y,c.height),g||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):(a.width=
a.height/p,a.x=m-a.width))):1<=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),g||(b=a.height/a.width,p<b?a.height=p*a.width:(a.width=a.height/p,a.x=m-a.width))):(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=m-a.x,g||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),
a.height=Math.max(n-a.y,c.height),g||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):a.width=a.height/p)):1<=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),g||(b=a.height/a.width,p<b?a.height=p*a.width:a.width=a.height/p)):(a.width=Math.max(Math.min(q.x-k,d.width),c.width),g||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):0>=b.y?(a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=n-a.y,g||(a.width=a.height/p,a.x=
k+.5*(m-k-a.width))):1<=b.y&&(a.height=Math.max(Math.min(q.y-l,d.height),c.height),g||(a.width=a.height/p,a.x=k+.5*(m-k-a.width)));z.A(q);return a};Qj.prototype.computeReshape=function(){var a=Tj;this.Ab instanceof Y&&(a=Uj(this.Ab));return!(a===Vj||a===Wj||null!==this.g&&this.g.U.shift)};Qj.prototype.computeMinSize=function(){var a=this.Ab.ig.copy(),b=this.ig;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Qj.prototype.computeMaxSize=function(){var a=this.Ab.mf.copy(),b=this.mf;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Qj.prototype.computeCellSize=function(){var a=new Fa(NaN,NaN),b=this.Ab.ba;if(null!==b){var c=b.$J;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Yp;isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width);isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height);b=this.g;(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.ib.Ee,null!==c&&c.Px&&(c=c.uF,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&
0<c.height&&(a.height=c.height)),b=b.Vn,null!==b&&b.visible&&this.Px&&(c=b.Kx,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};
z.defineProperty(Qj,{ig:"minSize"},function(){return this.li},function(a){z.l(a,Fa,Qj,"minSize");if(!this.li.O(a)){var b=a.width;isNaN(b)&&(b=0);a=a.height;isNaN(a)&&(a=0);this.li.m(b,a)}});z.defineProperty(Qj,{mf:"maxSize"},function(){return this.ki},function(a){z.l(a,Fa,Qj,"maxSize");if(!this.ki.O(a)){var b=a.width;isNaN(b)&&(b=Infinity);a=a.height;isNaN(a)&&(a=Infinity);this.ki.m(b,a)}});
z.defineProperty(Qj,{Yp:"cellSize"},function(){return this.Yj},function(a){z.l(a,Fa,Qj,"cellSize");this.Yj.O(a)||this.Yj.assign(a)});z.defineProperty(Qj,{Px:"isGridSnapEnabled"},function(){return this.ds},function(a){z.h(a,"boolean",Qj,"isGridSnapEnabled");this.ds=a});z.w(Qj,{dG:"originalDesiredSize"},function(){return this.zD});z.w(Qj,{OJ:"originalLocation"},function(){return this.ED});
function Xj(){0<arguments.length&&z.wd(Xj);bh.call(this);this.name="Rotating";this.RD=45;this.QD=2;this.Rc=null;var a=new Y;a.Jb="Ellipse";a.Da=Vd;a.fill="lightblue";a.stroke="dodgerblue";a.mb=1;a.cursor="pointer";this.vl=a;this.oc=null;this.tw=0;this.ND=new M}z.Ta(Xj,bh);z.ka("RotatingTool",Xj);
Xj.prototype.updateAdornments=function(a){if(!(null===a||a instanceof H)){if(a.gb&&null!==this.g&&!this.g.kb){var b=a.vG;if(null!==b&&a.canRotate()&&a.Z.F()&&a.isVisible()&&b.Z.F()&&b.Jj()){var c=a.iq(this.name);if(null===c||c.Ab!==b)c=this.makeAdornment(b);if(null!==c){c.angle=b.Rn();var d=null,e=null;b===a||b===a.cc?(d=a.cc,e=a.yf):(d=b,e=mc);for(var g=d.Ja,e=z.Fb(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.wb(e),d=d.Q;var d=e.y,g=Math.max(e.x-b.Ja.width,0),h=z.P();
c.location=b.cb(new R(1,0,50+g,d),h);z.A(h);z.A(e);a.Sl(this.name,c);return}}}a.Pj(this.name)}};Xj.prototype.makeAdornment=function(a){var b=null,b=a.ba.bK;if(null===b){b=new ea;b.type=Yj;b.yf=mc;var c=this.mu;null!==c&&b.add(c.copy())}else if(Nh(b),b=b.copy(),null===b)return null;b.rc=this.name;b.Ab=a;return b};z.defineProperty(Xj,{mu:"handleArchetype"},function(){return this.vl},function(a){null!==a&&z.l(a,O,Xj,"handleArchetype");this.vl=a});z.w(Xj,{handle:"handle"},function(){return this.oc});
z.defineProperty(Xj,{Ab:"adornedObject"},function(){return this.Rc},function(a){null!==a&&z.l(a,O,Xj,"adornedObject");this.Rc=a});Xj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.kb&&a.ix&&a.U.left?null!==this.findToolHandleAt(a.Mc.ha,this.name):!1};
Xj.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.oc=this.findToolHandleAt(a.Mc.ha,this.name),null!==this.oc)){this.Rc=this.oc.ba.Ab;var b=this.Rc.ba,c=b.cc;this.ND=this.Rc===b||this.Rc===c?c.cb(b.yf):this.Rc.cb(mc);this.tw=this.Rc.angle;a.lf=!0;a.uA=!0;this.$b(this.name);this.ya=!0}};Xj.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.al(),this.Rc=this.oc=null,this.ya=a.lf=!1)};Xj.prototype.doCancel=function(){var a=this.g;null!==a&&(a.uA=!1);this.rotate(this.tw);this.stopTool()};
Xj.prototype.doMouseMove=function(){var a=this.g;this.ya&&null!==a&&(a=this.computeRotate(a.U.ha),this.rotate(a))};Xj.prototype.doMouseUp=function(){var a=this.g;if(this.ya&&null!==a){a.uA=!1;var b=this.computeRotate(a.U.ha);this.rotate(b);a.Bc();this.Qf=this.name;a.Ka("PartRotated",this.Rc,this.tw)}this.stopTool()};Xj.prototype.rotate=function(a){u&&z.p(a,Xj,"rotate:newangle");null!==this.Rc&&(this.Rc.angle=a)};
Xj.prototype.computeRotate=function(a){a=this.ND.Lc(a);var b=this.Rc.Q;null!==b&&(a-=b.Rn(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.oK),180),c=Math.min(Math.abs(this.nK),b/2);(null===this.g||!this.g.U.shift)&&0<b&&0<c&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};z.defineProperty(Xj,{oK:"snapAngleMultiple"},function(){return this.RD},function(a){z.h(a,"number",Xj,"snapAngleMultiple");this.RD=a});
z.defineProperty(Xj,{nK:"snapAngleEpsilon"},function(){return this.QD},function(a){z.h(a,"number",Xj,"snapAngleEpsilon");this.QD=a});z.w(Xj,{hM:"originalAngle"},function(){return this.tw});function Zj(){0<arguments.length&&z.wd(Zj);bh.call(this);this.name="ClickSelecting"}z.Ta(Zj,bh);z.ka("ClickSelectingTool",Zj);Zj.prototype.canStart=function(){return!this.isEnabled||null===this.g||this.isBeyondDragSize()?!1:!0};
Zj.prototype.doMouseUp=function(){this.ya&&(this.standardMouseSelect(),!this.standardMouseClick()&&null!==this.g&&this.g.U.Hj&&this.g.ib.doToolTip());this.stopTool()};function ak(){0<arguments.length&&z.wd(ak);bh.call(this);this.name="Action";this.yo=null}z.Ta(ak,bh);z.ka("ActionTool",ak);
ak.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a)return!1;var b=a.U,c=a.He(b.ha,function(a){for(;null!==a.Q&&!a.qu;)a=a.Q;return a});if(null!==c){if(!c.qu)return!1;this.yo=c;a.Mo=a.He(b.ha,null,null);return!0}return!1};ak.prototype.doMouseDown=function(){if(this.ya){var a=this.g.U,b=this.yo;null!==b&&(a.We=b,null!==b.qE&&b.qE(a,b))}else this.canStart()&&this.doActivate()};
ak.prototype.doMouseMove=function(){if(this.ya){var a=this.g.U,b=this.yo;null!==b&&(a.We=b,null!==b.rE&&b.rE(a,b))}};ak.prototype.doMouseUp=function(){if(this.ya){var a=this.g,b=a.U,c=this.yo;if(null===c)return;b.We=c;null!==c.sE&&c.sE(b,c);this.isBeyondDragSize()||Uh(c,b,a)}this.stopTool()};ak.prototype.doCancel=function(){var a=this.g;if(null!==a){var a=a.U,b=this.yo;if(null===b)return;a.We=b;null!==b.pE&&b.pE(a,b)}this.stopTool()};ak.prototype.doStop=function(){this.yo=null};
function wa(){0<arguments.length&&z.wd(wa);bh.call(this);this.name="ClickCreating";this.ol=null;this.dD=!0;this.SC=new M(0,0)}z.Ta(wa,bh);z.ka("ClickCreatingTool",wa);
wa.prototype.canStart=function(){if(!this.isEnabled||null===this.jA)return!1;var a=this.g;if(null===a||a.kb||a.Hf||!a.Vp||!a.U.left||this.isBeyondDragSize())return!1;if(this.dJ){if(1===a.U.Qe&&(this.SC=a.U.se.copy()),2!==a.U.Qe||this.isBeyondDragSize(this.SC))return!1}else if(1!==a.U.Qe)return!1;return a.fb!==this&&null!==a.eu(a.U.ha,!0)?!1:!0};wa.prototype.doMouseUp=function(){var a=this.g;this.ya&&null!==a&&this.insertPart(a.U.ha);this.stopTool()};
wa.prototype.insertPart=function(a){var b=this.g;if(null===b)return null;var c=this.jA;if(null===c)return null;this.$b(this.name);var d=null;c instanceof D?c.qe()&&(Nh(c),d=c.copy(),null!==d&&b.add(d)):null!==c&&(c=b.ia.copyNodeData(c),z.Xa(c)&&(b.ia.Tl(c),d=b.Mh(c)));null!==d&&(d.location=a,b.Df&&b.select(d));b.Bc();this.Qf=this.name;b.Ka("PartCreated",d);this.al();return d};
z.defineProperty(wa,{jA:"archetypeNodeData"},function(){return this.ol},function(a){null!==a&&z.l(a,Object,wa,"archetypeNodeData");this.ol=a});z.defineProperty(wa,{dJ:"isDoubleClick"},function(){return this.dD},function(a){z.h(a,"boolean",wa,"isDoubleClick");this.dD=a});function bk(){this.lE=this.oD=this.zz=this.Vz=null}z.ka("HTMLInfo",bk);z.defineProperty(bk,{XA:"mainElement"},function(){return this.oD},function(a){null!==a&&z.l(a,Element,bk,"mainElement");this.oD=a});
z.defineProperty(bk,{show:"show"},function(){return this.Vz},function(a){this.Vz!==a&&(null!==a&&z.h(a,"function",bk,"show"),this.Vz=a)});z.defineProperty(bk,{Wn:"hide"},function(){return this.zz},function(a){this.zz!==a&&(null!==a&&z.h(a,"function",bk,"hide"),this.zz=a)});z.defineProperty(bk,{RB:"valueFunction"},function(){return this.lE},function(a){this.lE=a});function ck(a,b,c){this.text=a;this.GE=b;this.visible=c}
function dk(){0<arguments.length&&z.wd(dk);bh.call(this);this.name="ContextMenu";this.vC=this.bz=this.sC=null;this.uD=new M;this.dz=this.Lm=null;ek(this)}z.Ta(dk,bh);z.ka("ContextMenuTool",dk);z.OE=!1;z.Xt=null;z.Yt=null;
function ek(a){var b=new bk;b.show=function(a,b,c){c.showDefaultContextMenu()};b.Wn=function(a,b){b.hideDefaultContextMenu()};a.Lm=b;a.fE=function(){a.stopTool()};if(!1===z.OE){var b=z.createElement("div"),c=z.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";
var d=z.createElement("style");window.document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".goCXul { list-style: none; }",0);d.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",fk,!1);b.addEventListener("selectstart",fk,!1);
c.addEventListener("contextmenu",fk,!1);window.document.body&&(window.document.body.appendChild(b),window.document.body.appendChild(c));z.Yt=b;z.Xt=c;z.OE=!0}}function fk(a){a.preventDefault();return!1}dk.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||this.isBeyondDragSize()||!a.U.right?!1:null!==this.Lm&&a.U.Hj||null!==this.findObjectWithContextMenu()?!0:!1};dk.prototype.doStart=function(){var a=this.g;null!==a&&this.uD.set(a.Mc.ha)};
dk.prototype.doStop=function(){this.hideContextMenu();this.tx=null};dk.prototype.findObjectWithContextMenu=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return null;var c=b.U,d=null;a instanceof C||(d=a instanceof O?a:b.He(c.ha,null,function(a){return!a.layer.Wc}));if(null!==d){for(a=d;null!==a;){if(null!==a.contextMenu)return a;a=a.Q}if(null!==this.Lm&&b.U.Hj)return d.ba}else if(null!==b.contextMenu)return b;return null};dk.prototype.doActivate=function(){};
dk.prototype.doMouseDown=function(){bh.prototype.doMouseDown.call(this);null!==this.g&&this.g.ib.nf.contains(this)&&gk(this)};dk.prototype.doMouseUp=function(){gk(this)};function gk(a){var b=a.g;if(null!==b)if(a.ya){var c=a.bm;if(null!==c){if(!(c instanceof bk)){var d=b.He(b.U.ha,null,null);null!==d&&d.rm(c)&&a.standardMouseClick(null,null)}a.stopTool();a.canStart()&&(b.fb=a,a.doMouseUp())}}else a.canStart()&&(Sh(a,!0),a.ya||a.stopTool())}
function Sh(a,b,c){void 0===c&&(c=null);b&&a.standardMouseSelect();if(!a.standardMouseClick())if(a.ya=!0,b=a.Lm,null===c&&(c=a.findObjectWithContextMenu()),null!==c){var d=c.contextMenu;null!==d?(a.tx=c instanceof O?c:null,a.showContextMenu(d,a.tx)):null!==b&&a.showContextMenu(b,a.tx)}else null!==b&&a.showContextMenu(b,null)}dk.prototype.doMouseMove=function(){this.ya&&null!==this.g&&this.g.ib.doMouseMove()};
dk.prototype.showContextMenu=function(a,b){!u||a instanceof ea||a instanceof bk||z.k("showContextMenu:contextMenu must be an Adornment or HTMLInfo.");null!==b&&z.l(b,O,dk,"showContextMenu:obj");var c=this.g;if(null!==c){a!==this.bm&&this.hideContextMenu();if(a instanceof ea){a.Lf="Tool";a.Zk=!1;a.scale=1/c.scale;a.rc=this.name;null!==a.placeholder&&(a.placeholder.scale=c.scale);c.add(a);if(null!==b){var c=null,d=b.jm();null!==d&&(c=d.data);a.Ab=b;a.data=c}else a.data=c.ia;a.kf();this.positionContextMenu(a,
b)}else a instanceof bk&&a.show(b,c,this);this.bm=a}};dk.prototype.positionContextMenu=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.U.ha.copy(),d=a.Ea,e=b.yb;b.U.Hj&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}}};
dk.prototype.hideContextMenu=function(){var a=this.g;if(null!==a){var b=this.bm;null!==b&&(b instanceof ea?(a.remove(b),null!==this.bz&&this.bz.Pj(b.rc),b.data=null,b.Ab=null):b instanceof bk&&(null!==b.Wn?b.Wn(a,this):null!==b.XA&&(b.XA.style.display="none")),this.bm=null,this.standardMouseOver())}};
function hk(a){if(null===a.g)return null;a=new J(ck);a.add(new ck("Copy",function(a){a.xb.copySelection()},function(a){return a.xb.canCopySelection()}));a.add(new ck("Cut",function(a){a.xb.cutSelection()},function(a){return a.xb.canCutSelection()}));a.add(new ck("Delete",function(a){a.xb.deleteSelection()},function(a){return a.xb.canDeleteSelection()}));a.add(new ck("Paste",function(a){a.xb.pasteSelection(a.U.ha)},function(a){return a.xb.canPasteSelection()}));a.add(new ck("Select All",function(a){a.xb.selectAll()},
function(a){return a.xb.canSelectAll()}));a.add(new ck("Undo",function(a){a.xb.undo()},function(a){return a.xb.canUndo()}));a.add(new ck("Redo",function(a){a.xb.redo()},function(a){return a.xb.canRedo()}));a.add(new ck("Scroll To Part",function(a){a.xb.scrollToPart()},function(a){return a.xb.canScrollToPart()}));a.add(new ck("Zoom To Fit",function(a){a.xb.zoomToFit()},function(a){return a.xb.canZoomToFit()}));a.add(new ck("Reset Zoom",function(a){a.xb.resetZoom()},function(a){return a.xb.canResetZoom()}));
a.add(new ck("Group Selection",function(a){a.xb.groupSelection()},function(a){return a.xb.canGroupSelection()}));a.add(new ck("Ungroup Selection",function(a){a.xb.ungroupSelection()},function(a){return a.xb.canUngroupSelection()}));a.add(new ck("Edit Text",function(a){a.xb.editTextBlock()},function(a){return a.xb.canEditTextBlock()}));return a}
dk.prototype.showDefaultContextMenu=function(){var a=this.g;if(null!==a){null===this.dz&&(this.dz=hk(this));z.Yt.innerHTML="";z.Xt.addEventListener("click",this.fE,!1);var b=this,c=z.createElement("ul");c.className="goCXul";z.Yt.appendChild(c);c.innerHTML="";for(var d=this.dz.j;d.next();){var e=d.value,g=e.visible;if("function"===typeof e.GE&&("function"!==typeof g||g(a))){g=z.createElement("li");g.className="goCXli";var h=z.createElement("a");h.className="goCXa";h.href="#";h.jH=e.GE;h.addEventListener("click",
function(c){this.jH(a);b.stopTool();c.preventDefault();return!1},!1);h.textContent=e.text;g.appendChild(h);c.appendChild(g)}}z.Yt.style.display="block";z.Xt.style.display="block"}};dk.prototype.hideDefaultContextMenu=function(){null!==this.bm&&this.bm===this.Lm&&(z.Yt.style.display="none",z.Xt.style.display="none",z.Xt.removeEventListener("click",this.fE,!1),this.bm=null)};
z.defineProperty(dk,{bm:"currentContextMenu"},function(){return this.sC},function(a){!u||null===a||a instanceof ea||a instanceof bk||z.k("ContextMenuTool.currentContextMenu must be an Adornment or HTMLInfo.");this.sC=a;this.bz=a instanceof ea?a.$f:null});z.defineProperty(dk,{yL:"defaultTouchContextMenu"},function(){return this.Lm},function(a){!u||null===a||a instanceof ea||a instanceof bk||z.k("ContextMenuTool.defaultTouchContextMenu must be an Adornment or HTMLInfo.");this.Lm=a});
z.defineProperty(dk,{tx:"currentObject"},function(){return this.vC},function(a){null!==a&&z.l(a,O,dk,"currentObject");this.vC=a});z.w(dk,{cM:"mouseDownPoint"},function(){return this.uD});function ik(){0<arguments.length&&z.wd(ik);bh.call(this);this.name="DragSelecting";this.So=175;this.iD=!1;var a=new D;a.Lf="Tool";a.Zk=!1;var b=new Y;b.name="SHAPE";b.Jb="Rectangle";b.fill=null;b.stroke="magenta";a.add(b);this.Hm=a}z.Ta(ik,bh);z.ka("DragSelectingTool",ik);
ik.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Df)return!1;var b=a.U;return!b.left||a.fb!==this&&(!this.isBeyondDragSize()||b.timestamp-a.Mc.timestamp<this.PE||null!==a.eu(b.ha,!0))?!1:!0};ik.prototype.doActivate=function(){var a=this.g;null!==a&&(this.ya=!0,a.lf=!0,a.Eb=!0,a.add(this.Ih),this.doMouseMove())};ik.prototype.doDeactivate=function(){var a=this.g;null!==a&&(yi(a),a.remove(this.Ih),a.Eb=!1,this.ya=a.lf=!1)};
ik.prototype.doMouseMove=function(){var a=this.g;if(null!==a&&this.ya&&null!==this.Ih){var b=this.computeBoxBounds(),c=this.Ih.Gd("SHAPE");null===c&&(c=this.Ih.Wd());c.Da=b.size;this.Ih.position=b.position;(a.Ae||a.Be)&&a.wA(a.U.se)}};ik.prototype.doMouseUp=function(){if(this.ya){var a=this.g;a.remove(this.Ih);try{a.lc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.lc=""}}this.stopTool()};
ik.prototype.computeBoxBounds=function(){var a=this.g;return null===a?new w(0,0,0,0):new w(a.Mc.ha,a.U.ha)};
ik.prototype.selectInRect=function(a){var b=this.g;if(null!==b){var c=b.U;b.Ka("ChangingSelection");a=b.Pk(a,null,function(a){return a instanceof D?a.canSelect():!1},this.iJ);if(z.Uk?c.Du:c.control)if(c.shift)for(a=a.j;a.next();)c=a.value,c.gb&&(c.gb=!1);else for(a=a.j;a.next();)c=a.value,c.gb=!c.gb;else{if(!c.shift){for(var c=new J(D),d=b.selection.j;d.next();){var e=d.value;a.contains(e)||c.add(e)}for(c=c.j;c.next();)c.value.gb=!1}for(a=a.j;a.next();)c=a.value,c.gb||(c.gb=!0)}b.Ka("ChangedSelection")}};
z.defineProperty(ik,{PE:"delay"},function(){return this.So},function(a){z.h(a,"number",ik,"delay");this.So=a});z.defineProperty(ik,{iJ:"isPartialInclusion"},function(){return this.iD},function(a){z.h(a,"boolean",ik,"isPartialInclusion");this.iD=a});z.defineProperty(ik,{Ih:"box"},function(){return this.Hm},function(a){null!==a&&z.l(a,D,ik,"box");this.Hm=a});
function jk(){0<arguments.length&&z.wd(jk);bh.call(this);this.name="Panning";this.Oz=new M;this.Xj=!1;var a=this;this.VD=function(){window.document.removeEventListener("scroll",a.VD,!1);a.stopTool()}}z.Ta(jk,bh);z.ka("PanningTool",jk);jk.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||!a.Ae&&!a.Be||!a.U.left||a.fb!==this&&!this.isBeyondDragSize()?!1:!0};
jk.prototype.doActivate=function(){var a=this.g;null!==a&&(this.Xj?(a.U.bubbles=!0,window.document.addEventListener("scroll",this.VD,!1)):(a.lc="move",a.lf=!0,this.Oz=a.position.copy()),this.ya=!0)};jk.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.lc="",this.ya=a.lf=!1)};jk.prototype.doCancel=function(){var a=this.g;null!==a&&(a.position=this.Oz,a.lf=!1);this.stopTool()};jk.prototype.doMouseMove=function(){this.move()};jk.prototype.doMouseUp=function(){this.move();this.stopTool()};
jk.prototype.move=function(){var a=this.g;if(this.ya&&a)if(this.Xj)a.U.bubbles=!0;else{var b=a.position,c=a.Mc.ha,d=a.U.ha,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.Ae||(e=b.x);a.Be||(c=b.y);a.position=new M(e,c)}};z.defineProperty(jk,{bubbles:"bubbles"},function(){return this.Xj},function(a){z.h(a,"boolean",jk,"bubbles");this.Xj=a});z.w(jk,{kM:"originalPosition"},function(){return this.Oz});
function kk(){0<arguments.length&&z.wd(kk);bh.call(this);this.name="TextEditing";this.$z=this.Ak=null;this.UD=lk;this.Ol=null;this.qb=mk;this.Ll=null;this.rD=1;this.OD=!0;var a=new bk;this.xC=null;this.FC=a;this.ez=null;nk(this,a)}z.ka("TextEditingTool",kk);z.Ta(kk,bh);var ok;kk.LostFocus=ok=z.s(kk,"LostFocus",0);var pk;kk.MouseDown=pk=z.s(kk,"MouseDown",1);var qk;kk.Tab=qk=z.s(kk,"Tab",2);var rk;kk.Enter=rk=z.s(kk,"Enter",3);kk.SingleClick=z.s(kk,"SingleClick",0);var lk;
kk.SingleClickSelected=lk=z.s(kk,"SingleClickSelected",1);var sk;kk.DoubleClick=sk=z.s(kk,"DoubleClick",2);var mk;kk.StateNone=mk=z.s(kk,"StateNone",0);var tk;kk.StateActive=tk=z.s(kk,"StateActive",1);var uk;kk.StateEditing=uk=z.s(kk,"StateEditing",2);var vk;kk.StateValidating=vk=z.s(kk,"StateValidating",3);var wk;kk.StateInvalid=wk=z.s(kk,"StateInvalid",4);var xk;kk.StateValidated=xk=z.s(kk,"StateValidated",5);
function nk(a,b){var c=z.createElement("textarea");a.ez=c;c.addEventListener("input",function(){if(null!==a.hh){var b=a.BJ(this.value),c=this.tK;this.style.width=20+b.Ea.width*c+"px";this.style.height=10+b.Ea.height*c+"px";this.rows=b.qJ}},!1);c.addEventListener("keydown",function(b){var c=b.which;null!==a.hh&&(13===c?(!1===a.hh.Tx&&b.preventDefault(),a.acceptText(rk)):9===c?(a.acceptText(qk),b.preventDefault()):27===c&&(a.doCancel(),null!==a.g&&a.g.doFocus()))},!1);c.addEventListener("focus",function(){yk(a)},
!1);c.addEventListener("blur",function(){zk(a)},!1);b.RB=function(){return c.value};b.XA=c;b.show=function(a,b,g){if(g.state===wk)c.style.border="3px solid red",c.focus();else{var h=a.cb(mc),k=b.position,l=b.scale,m=a.Cj()*l;m<g.XF&&(m=g.XF);var n=a.Ja.width*m+6,p=a.Ja.height*m+2,q=(h.x-k.x)*l,h=(h.y-k.y)*l;c.value=a.text;b.Aj.style.font=a.font;c.style.cssText="position: absolute;z-index: 100;font: inherit;fontSize: "+100*m+"%;lineHeight: normal;width: "+n+"px;height: "+p+"px;left: "+((q-n/2|0)-1)+
"px;top: "+((h-p/2|0)-1)+"px;textAlign: "+a.textAlign+";margin: 0;padding: 1px;border: 0;outline: none;white-space: pre-wrap;overflow: hidden;";c.tK=m;b.Aj.appendChild(c);c.focus();g.wy&&(c.select(),c.setSelectionRange(0,9999))}};b.Wn=function(a){a.Aj.removeChild(c)}}z.defineProperty(kk,{hh:"textBlock"},function(){return this.$z},function(a){null!==a&&z.l(a,pa,kk,"textBlock");this.$z=a});z.defineProperty(kk,{Nk:"currentTextEditor"},function(){return this.xC},function(a){this.xC=a});
z.defineProperty(kk,{nI:"defaultTextEditor"},function(){return this.FC},function(a){!u||a instanceof Element||a instanceof bk||z.k("TextEditingTool.defaultTextEditor must be an Element or HTMLInfo.");this.FC=a});z.defineProperty(kk,{LG:"starting"},function(){return this.UD},function(a){z.Ca(a,kk,kk,"starting");this.UD=a});
kk.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.kb||!a.U.left||this.isBeyondDragSize())return!1;var b=a.He(a.U.ha,null,function(a){return a instanceof pa});if(null===b||!b.zA||!b.ba.canEdit())return!1;b=b.ba;return null===b||this.LG===lk&&!b.gb||this.LG===sk&&2>a.U.Qe?!1:!0};kk.prototype.doStart=function(){this.ya||null===this.hh||this.doActivate()};
kk.prototype.doActivate=function(){if(!this.ya){var a=this.g;if(null!==a){var b=this.hh;null===b&&(b=a.He(a.U.ha,function(a){return a instanceof pa?a:null}));if(null!==b&&(this.hh=b,null!==b.ba)){this.ya=!0;this.qb=tk;var c=this.nI;null!==b.PG&&(c=b.PG);this.Ak=this.hh.copy();var d=new w(this.hh.cb(hc),this.hh.cb(qc));a.gK(d);if(c instanceof bk)c.show(b,a,this);else{c.style.position="absolute";c.style.zIndex="100";c.textEditingTool=this;if("function"===typeof c.onActivate)c.onActivate();"function"===
typeof c.focus&&c.focus();"function"===typeof c.select&&this.wy&&(c.select(),c.setSelectionRange(0,9999));a.Aj.appendChild(c)}this.Nk=c}}}};kk.prototype.doCancel=function(){null!==this.Ll&&(this.Nk.style.border=this.Ll,this.Ll=null);this.stopTool()};kk.prototype.doMouseUp=function(){!this.ya&&this.canStart()&&this.doActivate()};kk.prototype.doMouseDown=function(){this.ya&&this.acceptText(pk)};
kk.prototype.acceptText=function(a){switch(a){case pk:if(this.qb===xk)"function"===typeof this.Nk.focus&&this.Nk.focus();else if(this.qb===tk||this.qb===wk||this.qb===uk)this.qb=vk,Ak(this);break;case ok:case rk:case qk:if(rk===a&&!0===this.$z.Tx)break;if(this.qb===tk||this.qb===wk||this.qb===uk)this.qb=vk,Ak(this)}};
function Ak(a){var b=a.hh,c=a.g,d=a.Nk;if(null!==b&&null!==d){var e=b.text,g=d.value,h="";d instanceof bk?null!==d.RB&&(h=d.RB()):h="function"===typeof g?g():g;a.isValidText(b,e,h)?(a.$b(a.name),a.qb=xk,d instanceof bk?d.show(b,c,a):null!==a.Ll&&(d.style.border=a.Ll,a.Ll=null),a.Qf=a.name,b.text=h,null!==b.OG&&b.OG(b,e,h),null!==c&&c.Ka("TextEdited",b,e),a.al(),a.stopTool(),null!==c&&c.doFocus()):(a.qb=wk,null!==b.BA&&b.BA(a,e,h),d instanceof bk?d.show(b,c,a):(null===a.Ll&&(a.Ll=d.style.border,d.style.border=
"3px solid red"),"function"===typeof d.focus&&d.focus()))}}kk.prototype.doDeactivate=function(){var a=this.g;if(null!==a){this.qb=mk;this.hh=null;if(null!==this.Nk){var b=this.Nk;if(b instanceof bk)b.Wn(a,this);else{if("function"===typeof b.onDeactivate)b.onDeactivate();null!==b&&a.Aj.removeChild(b)}}this.ya=!1}};kk.prototype.doFocus=function(){u&&z.Nn("TextEditingTool.doFocus","2.0");yk(this)};kk.prototype.doBlur=function(){u&&z.Nn("TextEditingTool.doBlur","2.0");zk(this)};
function yk(a){if(null!==a.Nk){var b=a.ez;a.qb===tk&&(a.qb=uk);"function"===typeof b.select&&a.wy&&(b.select(),b.setSelectionRange(0,9999))}}function zk(a){if(null!==a.Nk){var b=a.ez;"function"===typeof b.focus&&b.focus();"function"===typeof b.select&&a.wy&&(b.select(),b.setSelectionRange(0,9999))}}kk.prototype.isValidText=function(a,b,c){z.l(a,pa,kk,"isValidText:textblock");var d=this.JB;if(null!==d&&!d(a,b,c))return!1;d=a.JB;return null===d||d(a,b,c)?!0:!1};
z.defineProperty(kk,{JB:"textValidation"},function(){return this.Ol},function(a){null!==a&&z.h(a,"function",kk,"textValidation");this.Ol=a});z.defineProperty(kk,{XF:"minimumEditorScale"},function(){return this.rD},function(a){null!==a&&z.h(a,"number",kk,"minimumEditorScale");this.rD=a});z.defineProperty(kk,{wy:"selectsTextOnActivate"},function(){return this.OD},function(a){null!==a&&z.h(a,"boolean",kk,"selectsTextOnActivate");this.OD=a});
z.defineProperty(kk,{state:"state"},function(){return this.qb},function(a){this.qb!==a&&(z.Ca(a,kk,kk,"starting"),this.qb=a)});kk.prototype.measureTemporaryTextBlock=kk.prototype.BJ=function(a){var b=this.Ak;b.text=a;Bk(b,this.hh.pp,Infinity);return b};function Kh(){bh.call(this);this.name="ToolManager";this.oH=new J(bh);this.pH=new J(bh);this.qH=new J(bh);this.WC=this.XC=850;this.KC=(new Fa(2,2)).Na();this.gE=5E3;this.vD=Wh;this.UC=Ck;this.Gv=this.yC=null;this.xn=-1}z.Ta(Kh,bh);
z.ka("ToolManager",Kh);var Wh;Kh.WheelScroll=Wh=z.s(Kh,"WheelScroll",0);var Vh;Kh.WheelZoom=Vh=z.s(Kh,"WheelZoom",1);Kh.WheelNone=z.s(Kh,"WheelNone",2);var Ck;Kh.GestureZoom=Ck=z.s(Kh,"GestureZoom",3);var Dk;Kh.GestureCancel=Dk=z.s(Kh,"GestureCancel",4);var Ek;Kh.GestureNone=Ek=z.s(Kh,"GestureNone",5);z.defineProperty(Kh,{Gu:"mouseWheelBehavior"},function(){return this.vD},function(a){z.Ca(a,Kh,Kh,"mouseWheelBehavior");this.vD=a});
z.defineProperty(Kh,{nq:"gestureBehavior"},function(){return this.UC},function(a){z.Ca(a,Kh,Kh,"gestureBehavior");this.UC=a});Kh.prototype.initializeStandardTools=function(){this.FH=new ak;this.gG=new $h;this.tJ=new pj;this.tG=new Qj;this.dK=new Xj;this.TF=new ua;this.Ee=new Ph;this.rI=new ik;this.PJ=new jk;this.pA=new dk;this.IB=new kk;this.WH=new wa;this.XH=new Zj};
Kh.prototype.updateAdornments=function(a){var b=this.cm;if(b instanceof ea&&this.Gv===a){var c=b.Ab;(null!==a?c.ba===a:null===c)?this.showToolTip(b,c):this.hideToolTip()}};
Kh.prototype.doMouseDown=function(){var a=this.g;if(null!==a){var b=a.U;b.Hj&&this.nq===Dk&&(b.bubbles=!1);if(b.vu){this.cancelWaitAfter();if(this.nq===Ek){b.bubbles=!0;return}if(this.nq===Dk)return;if(a.fb.canStartMultiTouch()){a.fb.standardPinchZoomStart();return}}var c=a.sa;c.lA&&0!==c.Vh&&z.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var c=this.nf.length,d=0;d<c;d++){var e=this.nf.fa(d);null===e.g&&e.$c(this.g);if(e.canStart()){a.doFocus();a.fb=e;
a.fb===e&&(e.ya||e.doActivate(),e.doMouseDown());return}}1===a.U.button&&(this.Gu===Wh?this.Gu=Vh:this.Gu===Vh&&(this.Gu=Wh));this.doActivate();this.standardWaitAfter(this.yF,b)}};
Kh.prototype.doMouseMove=function(){var a=this.g;if(null!==a){var b=a.U;if(b.vu){if(this.nq===Ek){b.bubbles=!0;return}if(this.nq===Dk)return;if(a.fb.canStartMultiTouch()){a.fb.standardPinchZoomMove();return}}if(this.ya)for(var c=this.jg.length,d=0;d<c;d++){var e=this.jg.fa(d);null===e.g&&e.$c(this.g);if(e.canStart()){a.doFocus();a.fb=e;a.fb===e&&(e.ya||e.doActivate(),e.doMouseMove());return}}Fk(this,a);null===b.event||"mousemove"!==b.event.type&&b.event.cancelable||(b.bubbles=!0)}};
function Fk(a,b){a.standardMouseOver();a.isBeyondDragSize()&&a.standardWaitAfter(a.ya?a.yF:a.WI,b.U)}Kh.prototype.doCurrentObjectChanged=function(a,b){var c=this.cm;null===c||null!==b&&c instanceof ea&&(b===c||b.rm(c))||this.hideToolTip()};Kh.prototype.doWaitAfter=function(a){var b=this.g;null!==b&&b.Lb&&(this.doMouseHover(),this.ya||this.doToolTip(),a.Hj&&!b.U.Nc&&(a=a.copy(),a.button=2,a.buttons=2,b.U=a,b.zt=!0,b.doMouseUp()))};
Kh.prototype.doMouseHover=function(){var a=this.g;if(null!==a){var b=a.U;null===b.We&&(b.We=a.He(b.ha,null,null));var c=b.We;if(null!==c)for(b.Nc=!1;null!==c;){a=this.ya?c.cB:c.dB;if(null!==a&&(a(b,c),b.Nc))break;c=c.Q}else a=this.ya?a.cB:a.dB,null!==a&&a(b)}};
Kh.prototype.doToolTip=function(){var a=this.g;if(null!==a){var b=a.U;null===b.We&&(b.We=a.He(b.ha,null,null));b=b.We;if(null!==b){if(a=this.cm,!(a instanceof ea)||b!==a&&!b.rm(a)){for(;null!==b;){a=b.LB;if(null!==a){this.showToolTip(a,b);return}b=b.Q}this.hideToolTip()}}else a=a.LB,null!==a?this.showToolTip(a,null):this.hideToolTip()}};
Kh.prototype.showToolTip=function(a,b){!u||a instanceof ea||a instanceof bk||z.k("showToolTip:tooltip must be an Adornment or HTMLInfo.");null!==b&&z.l(b,O,Kh,"showToolTip:obj");var c=this.g;if(null!==c){a!==this.cm&&this.hideToolTip();if(a instanceof ea){a.Lf="Tool";a.Zk=!1;a.scale=1/c.scale;a.rc="ToolTip";null!==a.placeholder&&(a.placeholder.scale=c.scale);c.add(a);if(null!==b){var c=null,d=b.jm();null!==d&&(c=d.data);a.Ab=b;a.data=c}else a.data=c.ia;a.kf();this.positionToolTip(a,b)}else a instanceof
bk&&a!==this.cm&&a.show(b,c,this);this.cm=a;-1!==this.xn&&(z.clearTimeout(this.xn),this.xn=-1);c=this.zK;if(0<c&&Infinity!==c){var e=this;this.xn=z.setTimeout(function(){e.hideToolTip()},c)}}};Kh.prototype.positionToolTip=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.U.ha.copy(),d=a.Ea,e=b.yb;b.U.Hj&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}}};
Kh.prototype.hideToolTip=function(){-1!==this.xn&&(z.clearTimeout(this.xn),this.xn=-1);var a=this.g;if(null!==a){var b=this.cm;null!==b&&(b instanceof ea?(a.remove(b),null!==this.Gv&&this.Gv.Pj(b.rc),b.data=null,b.Ab=null):b instanceof bk&&null!==b.Wn&&b.Wn(a,this),this.cm=null)}};
z.defineProperty(Kh,{cm:"currentToolTip"},function(){return this.yC},function(a){!u||null===a||a instanceof ea||a instanceof bk||z.k("ToolManager.currentToolTip must be an Adornment or HTMLInfo.");this.yC=a;this.Gv=null!==a?a.$f:null});
Kh.prototype.doMouseUp=function(){this.cancelWaitAfter();var a=this.g;if(null!==a){if(this.ya)for(var b=this.kg.length,c=0;c<b;c++){var d=this.kg.fa(c);null===d.g&&d.$c(this.g);if(d.canStart()){a.doFocus();a.fb=d;a.fb===d&&(d.ya||d.doActivate(),d.doMouseUp());return}}a.doFocus();this.doDeactivate()}};Kh.prototype.doMouseWheel=function(){this.standardMouseWheel()};Kh.prototype.doKeyDown=function(){var a=this.g;null!==a&&a.xb.doKeyDown()};Kh.prototype.doKeyUp=function(){var a=this.g;null!==a&&a.xb.doKeyUp()};
Kh.prototype.doCancel=function(){null!==Yh&&Yh.doCancel();bh.prototype.doCancel.call(this)};Kh.prototype.findTool=function(a){z.h(a,"string",Kh,"findTool:name");for(var b=this.nf.length,c=0;c<b;c++){var d=this.nf.fa(c);if(d.name===a)return d}b=this.jg.length;for(c=0;c<b;c++)if(d=this.jg.fa(c),d.name===a)return d;b=this.kg.length;for(c=0;c<b;c++)if(d=this.kg.fa(c),d.name===a)return d;return null};
Kh.prototype.replaceTool=function(a,b){z.h(a,"string",Kh,"replaceTool:name");null!==b&&(z.l(b,bh,Kh,"replaceTool:newtool"),b.g&&b.g!==this.g&&z.k("Cannot share tools between Diagrams: "+b.toString()),b.$c(this.g));for(var c=this.nf.length,d=0;d<c;d++){var e=this.nf.fa(d);if(e.name===a)return null!==b?this.nf.bh(d,b):this.nf.md(d),e}c=this.jg.length;for(d=0;d<c;d++)if(e=this.jg.fa(d),e.name===a)return null!==b?this.jg.bh(d,b):this.jg.md(d),e;c=this.kg.length;for(d=0;d<c;d++)if(e=this.kg.fa(d),e.name===
a)return null!==b?this.kg.bh(d,b):this.kg.md(d),e;return null};function Gk(a,b,c,d){z.h(b,"string",Kh,"replaceStandardTool:name");z.l(d,J,Kh,"replaceStandardTool:list");null!==c&&(z.l(c,bh,Kh,"replaceStandardTool:newtool"),c.g&&c.g!==a.g&&z.k("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.$c(a.g));a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}z.w(Kh,{nf:"mouseDownTools"},function(){return this.oH});z.w(Kh,{jg:"mouseMoveTools"},function(){return this.pH});
z.w(Kh,{kg:"mouseUpTools"},function(){return this.qH});z.defineProperty(Kh,{WI:"hoverDelay"},function(){return this.XC},function(a){z.h(a,"number",Kh,"hoverDelay");this.XC=a});z.defineProperty(Kh,{yF:"holdDelay"},function(){return this.WC},function(a){z.h(a,"number",Kh,"holdDelay");this.WC=a});z.defineProperty(Kh,{sI:"dragSize"},function(){return this.KC},function(a){z.l(a,Fa,Kh,"dragSize");this.KC=a.V()});
z.defineProperty(Kh,{zK:"toolTipDuration"},function(){return this.gE},function(a){z.h(a,"number",Kh,"toolTipDuration");this.gE=a});z.defineProperty(Kh,{FH:"actionTool"},function(){return this.findTool("Action")},function(a){Gk(this,"Action",a,this.nf)});z.defineProperty(Kh,{gG:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){Gk(this,"Relinking",a,this.nf)});
z.defineProperty(Kh,{tJ:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){Gk(this,"LinkReshaping",a,this.nf)});z.defineProperty(Kh,{tG:"resizingTool"},function(){return this.findTool("Resizing")},function(a){Gk(this,"Resizing",a,this.nf)});z.defineProperty(Kh,{dK:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){Gk(this,"Rotating",a,this.nf)});
z.defineProperty(Kh,{TF:"linkingTool"},function(){return this.findTool("Linking")},function(a){Gk(this,"Linking",a,this.jg)});z.defineProperty(Kh,{Ee:"draggingTool"},function(){return this.findTool("Dragging")},function(a){Gk(this,"Dragging",a,this.jg)});z.defineProperty(Kh,{rI:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){Gk(this,"DragSelecting",a,this.jg)});
z.defineProperty(Kh,{PJ:"panningTool"},function(){return this.findTool("Panning")},function(a){Gk(this,"Panning",a,this.jg)});z.defineProperty(Kh,{pA:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){Gk(this,"ContextMenu",a,this.kg)});z.defineProperty(Kh,{IB:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){Gk(this,"TextEditing",a,this.kg)});
z.defineProperty(Kh,{WH:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){Gk(this,"ClickCreating",a,this.kg)});z.defineProperty(Kh,{XH:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){Gk(this,"ClickSelecting",a,this.kg)});
function nh(){this.zC=Hk;this.Fr=this.Gr=this.ca=null;this.Bo=this.Hr=this.Ir=0;this.Co=this.yc=this.kp=this.jk=!1;this.kk=this.pf=!0;this.Ev=this.Dv=this.uC=null;this.tC=0;this.Fv=null;this.rv=new K("string");this.mz=600;this.uH=new M(0,0);this.iC=this.hC=this.kE=!1;this.en=new oa(O,Ik)}z.ka("AnimationManager",nh);nh.prototype.$c=function(a){this.ca=a};function Hk(a,b,c,d){a/=d/2;return 1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}z.w(nh,{eL:"animationReasons"},function(){return this.rv});
nh.prototype.canStart=function(){return!0};nh.prototype.prepareAutomaticAnimation=nh.prototype.ko=function(a){this.pf&&(this.kk||this.ca.Zn)&&(this.rv.add(a),this.canStart(a)&&(this.jk&&this.Ii(),this.yc=!0))};function Vk(a){if(a.pf&&(a.rv.clear(),a.yc))if(!a.Co)a.yc=!1;else if(0===a.Bo){var b=+new Date;a.Bo=b;requestAnimationFrame(function(){if(!1!==a.yc&&!a.jk&&a.Bo===b){var c=a.ca;c.Dj("temporaryPixelRatio")&&(c.zk=1);al(c);a.yc=!1;c.Ka("AnimationStarting");bl(a,b)}})}}
function cl(a,b,c,d,e,g){if(a.yc&&(u&&z.l(b,O,nh,"addPropToAnimation:obj"),!("position"===c&&d.O(e)||b instanceof D&&!b.CF))){var h=a.en;if(h.contains(b)){var h=h.qa(b),k=h.start,l=h.end;void 0===k[c]&&(k[c]=dl(d));h.sx&&void 0!==l[c]?h.cu[c]=dl(e):(g||(h.cu[c]=dl(e)),l[c]=dl(e));g&&0===c.indexOf("position:")&&(h.cu.location=dl(b.location))}else k=new na,l=new na,k[c]=dl(d),l[c]=dl(e),d=l,e=k.position,e instanceof M&&!e.F()&&a.rv.contains("Expand SubGraph")&&e.assign(d.position),k=new Ik(k,l,g),g&&
0===c.indexOf("position:")&&(k.cu.location=dl(b.location)),h.add(b,k);a.Co=!0}}function dl(a){return a instanceof M?a.copy():a instanceof Fa?a.copy():a}
function bl(a,b){var c;function d(){if(!1!==g.jk&&g.Bo===b){var a=+new Date,c=a>s?m:a-r;el(g);fl(g,e,q,h,c,m);g.Dv&&g.Dv();Vi(e);gl(g);a>s?hl(g):requestAnimationFrame(d)}}void 0===c&&(c=new na);var e=a.ca;if(null!==e){a.jk=!0;var g=a,h=c.GL||a.zC,k=c.fM||null,l=c.gM||null,m=c.duration||a.mz,n=a.uH;for(c=a.en.j;c.next();){var p=c.value.start.position;p instanceof M&&(p.F()||p.assign(n))}a.uC=h;a.Dv=k;a.Ev=l;a.tC=m;a.Fv=a.en;var q=a.Fv;for(c=q.j;c.next();)k=c.value.end,k["position:placeholder"]&&(l=
k["position:placeholder"],n=l.cb(hc),n.x+=l.padding.left,n.y+=l.padding.top,k["position:placeholder"]=n);el(a);fl(a,e,q,h,0,m);Vi(a.ca);gl(a);var r=+new Date,s=r+m;g.Bo===b&&requestAnimationFrame(function(){d()})}}
var il={opacity:function(a,b,c,d,e,g){a.opacity=d(e,b,c-b,g)},position:function(a,b,c,d,e,g){e!==g?a.zy(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g)):a.position=new M(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g))},"position:node":function(a,b,c,d,e,g){var h=a.Z,k=c.Z;c=k.x+k.width/2-h.width/2;h=k.y+k.height/2-h.height/2;e!==g?a.zy(d(e,b.x,c-b.x,g),d(e,b.y,h-b.y,g)):a.position=new M(d(e,b.x,c-b.x,g),d(e,b.y,h-b.y,g))},"position:placeholder":function(a,b,c,d,e,g){e!==g?a.zy(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g)):
a.position=new M(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g))},scale:function(a,b,c,d,e,g){a.scale=d(e,b,c-b,g)},visible:function(a,b,c,d,e,g){a.visible=e!==g?b:c}};function el(a){if(!a.kp){var b=a.ca;a.kE=b.Eb;a.hC=b.Ve;a.iC=b.Zu;b.Eb=!0;b.Ve=!0;b.Zu=!0;a.kp=!0}}function gl(a){var b=a.ca;b.Eb=a.kE;b.Ve=a.hC;b.Zu=a.iC;a.kp=!1}
function fl(a,b,c,d,e,g){for(c=c.j;c.next();){var h=c.key,k=c.value,l=k.start,k=k.end,m;for(m in k)if(("position"!==m||!k["position:placeholder"]&&!k["position:node"])&&void 0!==il[m])il[m](h,l[m],k[m],d,e,g)}d=b.RA;b.RA=!0;m=a.zC;0!==a.Ir&&0!==a.Hr&&(c=a.Ir,b.Rb=m(e,c,a.Hr-c,g));null!==a.Gr&&null!==a.Fr&&(c=a.Gr,a=a.Fr,b.ub=new M(m(e,c.x,a.x-c.x,g),m(e,c.y,a.y-c.y,g)));b.RA=d}
nh.prototype.stopAnimation=nh.prototype.Ii=function(){!0===this.yc&&(this.yc=!1,this.Co&&this.ca.Te());this.jk&&this.pf&&hl(this)};
function hl(a){a.jk=!1;a.Co=!1;el(a);for(var b=a.ca,c=a.uC,d=a.tC,e=a.Fv.j;e.next();){var g=e.key,h=e.value,k=h.start,l=h.end,m=h.cu,n;for(n in l)if(void 0!==il[n]){var p=n;!h.sx||"position:node"!==p&&"position:placeholder"!==p||(p="position");il[p](g,k[n],void 0!==m[n]?m[n]:h.sx?k[n]:l[n],c,d,d)}h.sx&&void 0!==m.location&&(g.location=m.location);h.ny&&g.Kd(!1)}for(c=a.ca.links;c.next();)d=c.value,null!==d.Fp&&(d.points=d.Fp,d.Fp=null);b.$x.clear();b.zk=null;b.Bc();b.ra();b.hg();jl(b);gl(a);a.Ev&&
a.Ev();a.Bo=0;a.Fv=null;a.Ev=null;a.Dv=null;a.Gr=null;a.Fr=null;a.Ir=0;a.Hr=0;a.en=new oa(O,Ik);b.Ka("AnimationFinished");b.Te()}function kl(a,b,c){var d=b.Z,e=c.Z,g=null;c instanceof F&&(g=c.placeholder);null!==g?(d=g.cb(hc),d.x+=g.padding.left,d.y+=g.padding.top,cl(a,b,"position",d,b.position,!1)):cl(a,b,"position",new M(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position,!1);cl(a,b,"scale",.01,b.scale,!1);if(b instanceof F)for(b=b.Oc;b.next();)g=b.value,g instanceof E&&kl(a,g,c)}
function ll(a,b,c){if(b.isVisible()){var d=null;c instanceof F&&(d=c.placeholder);null!==d?cl(a,b,"position:placeholder",b.position,d,!0):cl(a,b,"position:node",b.position,c,!0);cl(a,b,"scale",b.scale,.01,!0);a.yc&&(d=a.en,d.contains(b)&&(d.qa(b).ny=!0));if(b instanceof F)for(b=b.Oc;b.next();)d=b.value,d instanceof E&&ll(a,d,c)}}function ml(a,b,c){a.yc&&(null===a.Gr&&b.F()&&null===a.Fr&&(a.Gr=b.copy()),a.Fr=c.copy(),a.Co=!0)}
function nl(a,b,c){a.yc&&a.ca.Zn&&(0===a.Ir&&0===a.Hr&&(a.Ir=b),a.Hr=c,a.Co=!0)}z.defineProperty(nh,{isEnabled:"isEnabled"},function(){return this.pf},function(a){z.h(a,"boolean",nh,"isEnabled");this.pf=a});z.defineProperty(nh,{duration:"duration"},function(){return this.mz},function(a){z.h(a,"number",nh,"duration");1>a&&z.wa(a,">= 1",nh,"duration");this.mz=a});z.w(nh,{wf:"isAnimating"},function(){return this.jk});z.w(nh,{jJ:"isTicking"},function(){return this.kp});
z.defineProperty(nh,{KF:"isInitial"},function(){return this.kk},function(a){z.h(a,"boolean",nh,"isInitial");this.kk=a});function Ik(a,b,c){this.start=a;this.end=b;this.cu=new na;this.sx=c;this.ny=!1}function ah(){0<arguments.length&&z.wd(ah);z.wc(this);this.ca=null;this.pb=new J(D);this.Xb="";this.Hc=1;this.Ez=!1;this.Ml=this.dA=this.ll=this.kl=this.jl=this.il=this.gl=this.hl=this.fl=this.nl=this.el=this.ml=this.dl=this.cl=!0;this.Az=!1;this.vw=[]}z.ka("Layer",ah);
ah.prototype.$c=function(a){this.ca=a};
ah.prototype.toString=function(a){void 0===a&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,h=0,k=this.pb.j;k.next();){var l=k.value;l instanceof F?e++:l instanceof E?d++:l instanceof H?g++:l instanceof ea?h++:c++}k="";0<c&&(k+=c+" Parts ");0<d&&(k+=d+" Nodes ");0<e&&(k+=e+" Groups ");0<g&&(k+=g+" Links ");0<h&&(k+=h+" Adornments ");if(1<a)for(a=this.pb.j;a.next();)c=a.value,k+="\n    "+c.toString(),d=c.data,null!==d&&z.Hd(d)&&(k+=" #"+z.Hd(d)),c instanceof E?k+=" "+
ka(d):c instanceof H&&(k+=" "+ka(c.aa)+" "+ka(c.ea));return b+" "+this.pb.count+": "+k};
ah.prototype.findObjectAt=ah.prototype.He=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);if(!1===this.Ml)return null;u&&!a.F()&&z.k("findObjectAt: Point must have a real value, not: "+a.toString());var d=!1;null!==this.g&&this.g.yb.Oa(a)&&(d=!0);for(var e=z.P(),g=this.pb.o,h=g.length;h--;){var k=g[h];if((!0!==d||!1!==ol(k))&&k.isVisible()&&(e.assign(a),ub(e,k.Gh),k=k.He(e,b,c),null!==k&&(null!==b&&(k=b(k)),null!==k&&(null===c||c(k)))))return z.A(e),k}z.A(e);return null};
ah.prototype.findObjectsAt=ah.prototype.kq=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof J||d instanceof K||(d=new K(O));if(!1===this.Ml)return d;u&&!a.F()&&z.k("findObjectsAt: Point must have a real value, not: "+a.toString());var e=!1;null!==this.g&&this.g.yb.Oa(a)&&(e=!0);for(var g=z.P(),h=this.pb.o,k=h.length;k--;){var l=h[k];!0===e&&!1===ol(l)||!l.isVisible()||(g.assign(a),ub(g,l.Gh),l.kq(g,b,c,d)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||d.add(l)))}z.A(g);return d};
ah.prototype.findObjectsIn=ah.prototype.Pk=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof J||e instanceof K||(e=new K(O));if(!1===this.Ml)return e;u&&!a.F()&&z.k("findObjectsIn: Rect must have a real value, not: "+a.toString());var g=!1;null!==this.g&&this.g.yb.Lk(a)&&(g=!0);for(var h=this.pb.o,k=h.length;k--;){var l=h[k];(!0!==g||!1!==ol(l))&&l.isVisible()&&l.Pk(a,b,c,d,e)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||e.add(l))}return e};
ah.prototype.CA=function(a,b,c,d,e,g,h){if(!1===this.Ml)return e;for(var k=this.pb.o,l=k.length;l--;){var m=k[l];(!0!==h||!1!==ol(m))&&g(m)&&m.isVisible()&&m.Pk(a,b,c,d,e)&&(null!==b&&(m=b(m)),null===m||null!==c&&!c(m)||e.add(m))}return e};
ah.prototype.findObjectsNear=ah.prototype.On=function(a,b,c,d,e,g){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof J||e instanceof K)g=e;e=!0}g instanceof J||g instanceof K||(g=new K(O));if(!1===this.Ml)return g;u&&!a.F()&&z.k("findObjectsNear: Point must have a real value, not: "+a.toString());var h=!1;null!==this.g&&this.g.yb.Oa(a)&&(h=!0);for(var k=z.P(),l=z.P(),m=this.pb.o,n=m.length;n--;){var p=m[n];!0===h&&!1===ol(p)||!p.isVisible()||(k.assign(a),
ub(k,p.Gh),l.m(a.x+b,a.y),ub(l,p.Gh),p.On(k,l,c,d,e,g)&&(null!==c&&(p=c(p)),null===p||null!==d&&!d(p)||g.add(p)))}z.A(k);z.A(l);return g};f=ah.prototype;
f.Mf=function(a,b){if(this.visible){var c;c=void 0===b?a.yb:b;for(var d=this.pb.o,e=d.length,g=0;g<e;g++){var h=d[g];h.nD=g;if(!(h instanceof H&&!1===h.kh)){if(h instanceof ea){var k=h;if(null!==k.$f)continue}if(Qb(h.Z,c))for(h.Mf(!0),pl(h),h=h.ex;h.next();)k=h.value,Bk(k,Infinity,Infinity),k.qc(),k.Mf(!0);else h.Mf(!1),null!==h.ex&&0<h.ex.count&&pl(h)}}}};
f.Fe=function(a,b,c){if(this.visible&&0!==this.Hc&&(void 0===c&&(c=!0),c||!this.Wc)){c=this.pb.o;var d=c.length;if(0!==d){1!==this.Hc&&(a.globalAlpha=this.Hc);var e=this.vw;e.length=0;for(var g=b.scale,h=0;h<d;h++){var k=c[h];if(ol(k)){if(k instanceof H){var l=k;l.tc&&e.push(l);if(!1===l.kh)continue}l=k.Z;1<l.width*g||1<l.height*g?k.Fe(a,b):ql(k,a)}}a.globalAlpha=1}}};
function rl(a,b,c,d){if(a.visible&&0!==a.Hc){1!==a.Hc&&(b.globalAlpha=a.Hc);var e=a.vw;e.length=0;var g=c.scale;a=a.pb.o;for(var h=a.length,k=d.length,l=0;l<h;l++){var m=a[l];if(ol(m)){if(m instanceof H){var n=m;n.tc&&e.push(n);if(!1===n.kh)continue}var n=sl(m,m.Z),p;a:{p=n;for(var q=d,r=k,s=2/g,v=4/g,t=0;t<r;t++){var x=q[t];if(0!==x.width&&0!==x.height&&p.AF(x.x-s,x.y-s,x.width+v,x.height+v)){p=!0;break a}}p=!1}p&&(1<n.width*g||1<n.height*g?m.Fe(b,c):ql(m,b))}}b.globalAlpha=1}}
f.i=function(a,b,c,d,e){var g=this.g;null!==g&&g.ld(bg,a,this,b,c,d,e)};f.qq=function(a,b,c){var d=this.pb;b.fw=this;if(a>=d.count)a=d.count;else if(d.fa(a)===b)return-1;d.Yd(a,b);b.ou(c);d=this.g;null!==d&&(c?d.ra():d.qq(b));tl(this,a,b);return a};
f.vf=function(a,b,c){if(!c&&b.layer!==this&&null!==b.layer)return b.layer.vf(a,b,c);var d=this.pb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.fa(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.pu(c);d.md(a);d=this.g;null!==d&&(c?d.ra():d.vf(b));b.fw=null;return a};
function tl(a,b,c){b=ul(a,b,c);if(c instanceof F&&null!==c&&isNaN(c.xo)){if(0!==c.Oc.count){for(var d=-1,e=a.pb.o,g=e.length,h=0;h<g;h++){var k=e[h];if(k===c&&(b=h,0<=d))break;if(0>d&&k.Qa===c&&(d=h,0<=b))break}!(0>d)&&d<b&&(e=a.pb,e.md(b),e.Yd(d,c))}c=c.Qa;null!==c&&tl(a,-1,c)}}
function ul(a,b,c){var d=c.xo;if(isNaN(d))return b;a=a.pb;var e=a.count;if(1>=e)return b;0>b&&(b=a.indexOf(c));if(0>b)return-1;for(var g=b-1,h=NaN;0<=g;){h=a.fa(g).xo;if(!isNaN(h))break;g--}for(var k=b+1,l=NaN;k<e;){l=a.fa(k).xo;if(!isNaN(l))break;k++}if(!isNaN(h)&&h>d)for(;;){if(-1===g||h<=d){g++;if(g===b)break;a.md(b);a.Yd(g,c);return g}for(h=NaN;0<=--g&&(h=a.fa(g).xo,isNaN(h)););}else if(!isNaN(l)&&l<d)for(;;){if(k===e||l>=d){k--;if(k===b)break;a.md(b);a.Yd(k,c);return k}for(l=NaN;++k<e&&(l=a.fa(k).xo,
isNaN(l)););}return b}f.clear=function(){for(var a=this.pb.nc(),b=a.length,c=0;c<b;c++)a[c].Mf(!1),this.vf(-1,a[c],!1)};z.w(ah,{Gi:"parts"},function(){return this.pb.j});z.w(ah,{pM:"partsBackwards"},function(){return this.pb.$n});z.w(ah,{g:"diagram"},function(){return this.ca});
z.defineProperty(ah,{name:"name"},function(){return this.Xb},function(a){z.h(a,"string",ah,"name");var b=this.Xb;if(b!==a){var c=this.g;if(null!==c)for(""===b&&z.k("Cannot rename default Layer to: "+a),c=c.ao;c.next();)c.value.name===a&&z.k("Layer.name is already present in this diagram: "+a);this.Xb=a;this.i("name",b,a);for(a=this.pb.j;a.next();)a.value.Lf=this.Xb}});
z.defineProperty(ah,{opacity:"opacity"},function(){return this.Hc},function(a){var b=this.Hc;b!==a&&(z.h(a,"number",ah,"opacity"),(0>a||1<a)&&z.wa(a,"0 <= value <= 1",ah,"opacity"),this.Hc=a,this.i("opacity",b,a),a=this.g,null!==a&&a.ra())});z.defineProperty(ah,{Wc:"isTemporary"},function(){return this.Ez},function(a){var b=this.Ez;b!==a&&(z.h(a,"boolean",ah,"isTemporary"),this.Ez=a,this.i("isTemporary",b,a))});
z.defineProperty(ah,{visible:"visible"},function(){return this.dA},function(a){var b=this.dA;if(b!==a){z.h(a,"boolean",ah,"visible");this.dA=a;this.i("visible",b,a);for(b=this.pb.j;b.next();)b.value.Kd(a);a=this.g;null!==a&&a.ra()}});z.defineProperty(ah,{qg:"pickable"},function(){return this.Ml},function(a){var b=this.Ml;b!==a&&(z.h(a,"boolean",ah,"pickable"),this.Ml=a,this.i("pickable",b,a))});
z.defineProperty(ah,{DF:"isBoundsIncluded"},function(){return this.Az},function(a){this.Az!==a&&(this.Az=a,null!==this.g&&this.g.Bc())});z.defineProperty(ah,{Ik:"allowCopy"},function(){return this.cl},function(a){var b=this.cl;b!==a&&(z.h(a,"boolean",ah,"allowCopy"),this.cl=a,this.i("allowCopy",b,a))});z.defineProperty(ah,{Bn:"allowDelete"},function(){return this.dl},function(a){var b=this.dl;b!==a&&(z.h(a,"boolean",ah,"allowDelete"),this.dl=a,this.i("allowDelete",b,a))});
z.defineProperty(ah,{jx:"allowTextEdit"},function(){return this.ml},function(a){var b=this.ml;b!==a&&(z.h(a,"boolean",ah,"allowTextEdit"),this.ml=a,this.i("allowTextEdit",b,a))});z.defineProperty(ah,{gx:"allowGroup"},function(){return this.el},function(a){var b=this.el;b!==a&&(z.h(a,"boolean",ah,"allowGroup"),this.el=a,this.i("allowGroup",b,a))});
z.defineProperty(ah,{kx:"allowUngroup"},function(){return this.nl},function(a){var b=this.nl;b!==a&&(z.h(a,"boolean",ah,"allowUngroup"),this.nl=a,this.i("allowUngroup",b,a))});z.defineProperty(ah,{Rt:"allowLink"},function(){return this.fl},function(a){var b=this.fl;b!==a&&(z.h(a,"boolean",ah,"allowLink"),this.fl=a,this.i("allowLink",b,a))});
z.defineProperty(ah,{Cn:"allowRelink"},function(){return this.hl},function(a){var b=this.hl;b!==a&&(z.h(a,"boolean",ah,"allowRelink"),this.hl=a,this.i("allowRelink",b,a))});z.defineProperty(ah,{Wl:"allowMove"},function(){return this.gl},function(a){var b=this.gl;b!==a&&(z.h(a,"boolean",ah,"allowMove"),this.gl=a,this.i("allowMove",b,a))});
z.defineProperty(ah,{hx:"allowReshape"},function(){return this.il},function(a){var b=this.il;b!==a&&(z.h(a,"boolean",ah,"allowReshape"),this.il=a,this.i("allowReshape",b,a))});z.defineProperty(ah,{St:"allowResize"},function(){return this.jl},function(a){var b=this.jl;b!==a&&(z.h(a,"boolean",ah,"allowResize"),this.jl=a,this.i("allowResize",b,a))});
z.defineProperty(ah,{ix:"allowRotate"},function(){return this.kl},function(a){var b=this.kl;b!==a&&(z.h(a,"boolean",ah,"allowRotate"),this.kl=a,this.i("allowRotate",b,a))});z.defineProperty(ah,{Df:"allowSelect"},function(){return this.ll},function(a){var b=this.ll;b!==a&&(z.h(a,"boolean",ah,"allowSelect"),this.ll=a,this.i("allowSelect",b,a))});
function C(a){function b(){window.document.removeEventListener("DOMContentLoaded",b,!1);vl(c)}1<arguments.length&&z.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");z.wc(this);wl=[];this.cd=!0;this.eC=new nh;this.eC.$c(this);this.Td=17;this.fs=!1;this.Qz="default";var c=this;null!==window.document.body?vl(this):window.document.addEventListener("DOMContentLoaded",b,!1);this.bc=new J(ah);this.Sb=this.Ob=0;this.wk=this.Tb=this.pd=this.Lb=null;this.nG();this.hp=
null;this.mG();this.ub=(new M(NaN,NaN)).freeze();this.Rb=1;this.Xv=(new M(NaN,NaN)).freeze();this.Yv=NaN;this.nw=1E-4;this.kw=100;this.Jc=new Ga;this.ax=(new M(NaN,NaN)).freeze();this.Pv=(new w(NaN,NaN,NaN,NaN)).freeze();this.Iw=(new Kb(0,0,0,0)).freeze();this.Jw=xl;this.Fw=this.Bw=null;this.Gm=Qh;this.Jo=Rc;this.yl=Qh;this.ep=Rc;this.Zv=this.Wv=hc;this.Ne=!0;this.bs=!1;this.Cg=new K(D);this.sl=new oa(H,w);this.Uo=!0;this.gC=250;this.Do=-1;this.uv=(new Kb(16,16,16,16)).freeze();this.Jv=this.Zf=!1;
this.Zo=!0;this.Zi=new Yf;this.ed=new Yf;this.Ub=new Yf;this.vh=this.Oi=null;this.zt=!1;this.hz=this.iz=null;yl(this);this.yp=new K(E);this.Pl=new K(F);this.rp=new K(H);this.pb=new K(D);this.dw=!0;this.Ww=zl;this.$C=!1;this.Yw=Zi;this.cz=this.fz=this.aA=null;this.Cv="";this.Er="auto";this.Si=this.sj=this.gj=this.qw=this.hj=this.ij=this.jj=this.Ri=this.Wi=this.Pi=null;this.Mz=!1;this.HD={};this.Aw=0;this.nj=[null,null];this.$y=null;this.cr=this.gz=this.Wz=this.PD=this.rj=!1;this.kD=!0;this.Cz=this.ie=
!1;this.xe=null;var d=this;this.sD=function(a){if(a.ia===d.ia&&d.ab){d.ab=!1;try{var b=a.Kc;""===a.Af&&b===bg&&Al(d,a.object,a.propertyName)}finally{d.ab=!0}}};this.tD=function(a){Bl(d,a)};this.nE=!0;this.rh=-2;this.Ti=new oa(Object,D);this.Zj=new oa(Object,H);this.Um=new oa(Object,Array);this.Ap=new oa("string",Array);this.Pz=new J(Cl);this.aj=!1;this.dl=this.cl=this.jv=this.pf=!0;this.lv=this.kv=!1;this.qv=this.ov=this.ll=this.kl=this.jl=this.il=this.gl=this.hl=this.fl=this.nv=this.nl=this.el=this.ml=
!0;this.Sm=this.hD=!1;this.pv=this.mv=this.Uv=this.Tv=!0;this.Lw=this.Hw=16;this.Sz=this.Gw=!1;this.ht=this.Kw=null;this.Tz=this.Uz=0;this.sf=(new Kb(5)).freeze();this.Ow=(new K(D)).freeze();this.lw=999999999;this.Vv=(new K(D)).freeze();this.zl=this.Qm=this.ik=!0;this.wl=this.hk=!1;this.ve=null;this.sv=!0;this.sh=!1;this.nH=new K(H);this.YC=new K(Dl);this.Sd=null;this.yD=1;this.SD=0;this.Eh={scale:1,position:new M,bounds:new w,isScroll:!1};this.mE=(new w(NaN,NaN,NaN,NaN)).freeze();this.Kv=(new w(NaN,
NaN,NaN,NaN)).freeze();this.ww=new K(El);Fl(this);this.hw=this.Rv=this.rw=this.CC=this.BC=this.DC=this.pk=this.ul=this.kj=null;Gl(this);this.Cd=null;this.Qv=!1;this.Mo=null;this.ib=new Kh;this.ib.initializeStandardTools();this.fb=this.$t=this.ib;this.xb=new ta;this.ia=new X;this.rj=!0;this.Wb=new ch;this.rj=!1;this.PC=this.kz=null;this.rd=1;this.zk=null;this.xl=new Hl;void 0!==a&&Il(this,a);var e=z.vfo.split(".");!0!==z.xx.licenseKey&&"1"===e[0]&&7>e[1]&&(z.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version "+
z.vfo+". This license key will do nothing until you upgrade to GoJS 1.7 or later."),z.xx.licenseKey=!0);this.Dl=1;this.Wm=0;this.mD=new M;this.iE=500;this.tv=new M;this.qt=null;this.cd=this.Al=!1}z.ka("Diagram",C);
C.prototype.clear=C.prototype.clear=function(){var a=null;null!==this.Cd&&(a=this.Cd.ba);this.ia.clear();for(var b=this.bc.length,c=0;c<b;c++)this.bc.o[c].clear();this.Cg.clear();this.sl.clear();this.yp.clear();this.Pl.clear();this.rp.clear();this.pb.clear();this.Ti.clear();this.Zj.clear();this.Um.clear();this.Ow.Za();this.Ow.clear();this.Ow.freeze();this.Vv.Za();this.Vv.clear();this.Vv.freeze();Ih=this.Mo=null;Jh="";this.Kv=(new w(NaN,NaN,NaN,NaN)).freeze();null!==a&&(this.add(a),this.pb.remove(a));
this.ra()};
C.prototype.reset=C.prototype.reset=function(){this.cd=!0;this.clear();this.bc=new J(ah);this.nG();this.mG();this.ub=(new M(NaN,NaN)).freeze();this.Rb=1;this.Xv=(new M(NaN,NaN)).freeze();this.Yv=NaN;this.nw=1E-4;this.kw=100;this.ax=(new M(NaN,NaN)).freeze();this.Pv=(new w(NaN,NaN,NaN,NaN)).freeze();this.Iw=(new Kb(0,0,0,0)).freeze();this.Jw=xl;this.Fw=this.Bw=null;this.Gm=Qh;this.Jo=Rc;this.yl=Qh;this.ep=Rc;this.Zv=this.Wv=hc;this.gC=250;this.uv=(new Kb(16,16,16,16)).freeze();this.dw=!0;this.Ww=zl;
this.Yw=Zi;this.Er="auto";this.Si=this.sj=this.gj=this.qw=this.hj=this.ij=this.jj=this.Ri=this.Wi=this.Pi=null;this.aj=!1;this.dl=this.cl=this.jv=this.pf=!0;this.lv=this.kv=!1;this.pv=this.mv=this.Uv=this.Tv=this.qv=this.ov=this.ll=this.kl=this.jl=this.il=this.gl=this.hl=this.fl=this.nv=this.nl=this.el=this.ml=!0;this.Lw=this.Hw=16;this.sf=(new Kb(5)).freeze();this.lw=999999999;this.ve=null;Gl(this);this.Cd=null;this.ib=new Kh;this.ib.initializeStandardTools();this.fb=this.$t=this.ib;this.xb=new ta;
this.rj=!0;Fl(this);this.Wb=new ch;this.rj=!1;this.ia=new X;this.sh=!1;this.Zo=!0;this.cd=this.Zf=!1;this.ra();this.vh=this.Oi=null;yl(this);this.Cv=""};
function Gl(a){a.kj=new oa("string",D);var b=new E,c=new pa;c.bind(new sh("text","",ka));b.add(c);a.DC=b;a.kj.add("",b);b=new E;c=new pa;c.stroke="brown";c.bind(new sh("text","",ka));b.add(c);a.kj.add("Comment",b);b=new E;b.Zk=!1;b.kA=!1;c=new Y;c.Jb="Ellipse";c.fill="black";c.stroke=null;c.Da=(new Fa(3,3)).Na();b.add(c);a.kj.add("LinkLabel",b);a.ul=new oa("string",F);b=new F;b.vy="GROUPPANEL";b.type=Jl;c=new pa;c.font="bold 12pt sans-serif";c.bind(new sh("text","",ka));b.add(c);c=new I(Kl);c.name=
"GROUPPANEL";var d=new Y;d.Jb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Sj;d.padding=(new Kb(5,5,5,5)).Na();c.add(d);b.add(c);a.BC=b;a.ul.add("",b);a.pk=new oa("string",H);b=new H;c=new Y;c.If=!0;b.add(c);c=new Y;c.Xq="Standard";c.fill="black";c.stroke=null;c.mb=0;b.add(c);a.CC=b;a.pk.add("",b);b=new H;c=new Y;c.If=!0;c.stroke="brown";b.add(c);a.pk.add("Comment",b);b=new ea;b.type=Kl;c=new Y;c.fill=null;c.stroke="dodgerblue";c.mb=3;b.add(c);c=new Sj;c.margin=(new Kb(1.5,
1.5,1.5,1.5)).Na();b.add(c);a.rw=b;a.Rv=b;b=new ea;b.type=kj;c=new Y;c.If=!0;c.fill=null;c.stroke="dodgerblue";c.mb=3;b.add(c);a.hw=b}
function vl(a){var b=z.createElement("p");b.style.width="100%";b.style.height="200px";b.style.boxSizing="content-box";var c=z.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.style.boxSizing="content-box";c.appendChild(b);window.document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);window.document.body.removeChild(c);c=d-b;0!==c||z.IF||
(c=11);a.Td=c;c=z.createElement("div");c.dir="rtl";c.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";c.textContent="A";window.document.body.appendChild(c);d="reverse";0<c.scrollLeft?d="default":(c.scrollLeft=1,0===c.scrollLeft&&(d="negative"));window.document.body.removeChild(c);a.Qz=d}C.prototype.pc=function(a){a.Pe===C?this.Zl=a:z.Tj(this,a)};
C.prototype.toString=function(a){void 0===a&&(a=0);var b="";this.id&&(b=this.id);this.Aj&&this.Aj.id&&(b=this.Aj.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.bc.j;c.next();)b+="\n  "+c.value.toString(a-1);return b};C.fromDiv=function(a){var b=a;"string"===typeof a&&(b=window.document.getElementById(a));return b instanceof HTMLDivElement&&b.ca instanceof C?b.ca:null};
z.defineProperty(C,{Aj:"div"},function(){return this.Tb},function(a){null!==a&&z.l(a,HTMLDivElement,C,"div");if(this.Tb!==a){wl=[];var b=this.Tb;null!==b?(b.ca=void 0,b.innerHTML="",null!==this.Lb&&(this.Lb.removeEventListener("touchstart",this.WG,!1),this.Lb.removeEventListener("touchmove",this.VG,!1),this.Lb.removeEventListener("touchend",this.UG,!1),this.Lb.Fd.ca=null),b=this.ib,null!==b&&(b.nf.each(function(a){a.cancelWaitAfter()}),b.jg.each(function(a){a.cancelWaitAfter()}),b.kg.each(function(a){a.cancelWaitAfter()})),
b.cancelWaitAfter(),this.fb.doCancel(),this.pd=this.Lb=null,window.removeEventListener("resize",this.dH,!1),window.removeEventListener("mousemove",this.Bq,!0),window.removeEventListener("mousedown",this.Aq,!0),window.removeEventListener("mouseup",this.Dq,!0),window.removeEventListener("mousewheel",this.Qh,!0),window.removeEventListener("DOMMouseScroll",this.Qh,!0),window.removeEventListener("mouseout",this.Cq,!0)):this.sh=!1;this.Tb=null;if(null!==a){if(b=a.ca)b.Aj=null;Il(this,a);this.Iq()}}});
function Ll(a){var b=a.Lb;b.addEventListener("touchstart",a.WG,!1);b.addEventListener("touchmove",a.VG,!1);b.addEventListener("touchend",a.UG,!1);b.addEventListener("mousemove",a.Bq,!1);b.addEventListener("mousedown",a.Aq,!1);b.addEventListener("mouseup",a.Dq,!1);b.addEventListener("mousewheel",a.Qh,!1);b.addEventListener("DOMMouseScroll",a.Qh,!1);b.addEventListener("mouseout",a.Cq,!1);b.addEventListener("keydown",a.mJ,!1);b.addEventListener("keyup",a.nJ,!1);b.addEventListener("selectstart",function(a){a.preventDefault();
return!1},!1);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("gesturechange",function(b){a.ib.nq===Dk&&b.preventDefault()},!1);b.addEventListener("pointerdown",a.QJ,!1);b.addEventListener("pointermove",a.SJ,!1);b.addEventListener("pointerleave",a.RJ,!1);window.addEventListener("resize",a.dH,!1)}C.prototype.computePixelRatio=function(){return null!==this.zk?this.zk:this.rH};C.prototype.doMouseMove=function(){this.fb.doMouseMove()};
C.prototype.doMouseDown=function(){this.fb.doMouseDown()};C.prototype.doMouseUp=function(){this.fb.doMouseUp()};C.prototype.doMouseWheel=function(){this.fb.doMouseWheel()};C.prototype.doKeyDown=function(){this.fb.doKeyDown()};C.prototype.doKeyUp=function(){this.fb.doKeyUp()};C.prototype.doFocus=function(){this.focus()};C.prototype.focus=C.prototype.focus=function(){this.Lb&&this.Lb.focus()};
function al(a){if(null!==a.Lb){var b=a.Tb;if(0!==b.clientWidth&&0!==b.clientHeight){var c=a.wl?a.Td:0,d=a.hk?a.Td:0,e=a.rd;a.rd=a.computePixelRatio();a.rd!==e&&(a.bs=!0,a.Te());if(b.clientWidth!==a.Ob+c||b.clientHeight!==a.Sb+d)a.Qm=!0,a.Ne=!0,b=a.Wb,null!==b&&b.Vx&&a.Zl===Qh&&b.N(),a.ie||a.Te()}}}
function Fl(a){var b=new ah;b.name="Background";a.Lt(b);b=new ah;b.name="";a.Lt(b);b=new ah;b.name="Foreground";a.Lt(b);b=new ah;b.name="Adornment";b.Wc=!0;a.Lt(b);b=new ah;b.name="Tool";b.Wc=!0;b.DF=!0;a.Lt(b);b=new ah;b.name="Grid";b.Df=!1;b.qg=!1;b.Wc=!0;a.KH(b,a.hm("Background"))}
function Ml(a){a.Cd=new I(Nl);a.Cd.name="GRID";var b=new Y;b.Jb="LineH";b.stroke="lightgray";b.mb=.5;b.interval=1;a.Cd.add(b);b=new Y;b.Jb="LineH";b.stroke="gray";b.mb=.5;b.interval=5;a.Cd.add(b);b=new Y;b.Jb="LineH";b.stroke="gray";b.mb=1;b.interval=10;a.Cd.add(b);b=new Y;b.Jb="LineV";b.stroke="lightgray";b.mb=.5;b.interval=1;a.Cd.add(b);b=new Y;b.Jb="LineV";b.stroke="gray";b.mb=.5;b.interval=5;a.Cd.add(b);b=new Y;b.Jb="LineV";b.stroke="gray";b.mb=1;b.interval=10;a.Cd.add(b);b=new D;b.add(a.Cd);
b.Lf="Grid";b.xo=0;b.Qx=!1;b.CF=!1;b.qg=!1;b.ay="GRID";a.add(b);a.pb.remove(b);a.Cd.visible=!1}C.prototype.tH=function(){this.ca.isEnabled?this.ca.qI(this):Ol(this.ca)};C.prototype.xD=function(a){this.ca.isEnabled?(this.ca.Sz=!0,this.ca.Uz=a.target.scrollTop,this.ca.Tz=a.target.scrollLeft):Ol(this.ca)};
C.prototype.diagramScroll=C.prototype.qI=function(a){if(this.Sz&&null!==this.Lb){this.Gw=!0;var b=this.fd,c=this.yb,d=b.width,e=c.width,g=b.height,h=c.height,k=b.right,l=c.right,m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,r=this.scale,s;s=a.scrollLeft;if(this.fs)switch(this.Qz){case "negative":s=s+a.scrollWidth-a.clientWidth;break;case "reverse":s=a.scrollWidth-s-a.clientWidth}var v=s;e<d||h<g?(s=z.Fb(this.position.x,this.position.y),this.Ae&&this.Tz!==v&&(s.x=v/r+p,this.Tz=v),this.Be&&this.Uz!==
a.scrollTop&&(s.y=a.scrollTop/r+b,this.Uz=a.scrollTop),this.position=s,z.A(s),this.Qm=this.Gw=!1):(s=z.P(),a.wH&&this.Ae&&(p<q&&(this.position=s.m(v+p,this.position.y)),k>l&&(this.position=s.m(-(this.Kw.scrollWidth-this.Ob)+v-this.Ob/r+k,this.position.y))),a.xH&&this.Be&&(b<c&&(this.position=s.m(this.position.x,a.scrollTop+b)),m>n&&(this.position=s.m(this.position.x,-(this.Kw.scrollHeight-this.Sb)+a.scrollTop-this.Sb/r+m))),z.A(s),Pl(this),this.Qm=this.Gw=!1,b=this.fd,c=this.yb,k=b.right,l=c.right,
m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,e>=d&&p>=q&&k<=l&&(this.ht.style.width="1px"),h>=g&&b>=c&&m<=n&&(this.ht.style.height="1px"))}};C.prototype.computeBounds=C.prototype.Jh=function(){0<this.Cg.count&&Li(this);return Ql(this)};
function Ql(a){if(a.jF.F()){var b=a.jF.copy();b.bx(a.padding);return b}for(var c=!0,d=a.bc.o,e=d.length,g=0;g<e;g++){var h=d[g];if(h.visible&&(!h.Wc||h.DF))for(var h=h.pb.o,k=h.length,l=0;l<k;l++){var m=h[l];m.Qx&&m.isVisible()&&(m=m.Z,m.F()&&(c?(c=!1,b=m.copy()):b.Wh(m)))}}c&&(b=new w(0,0,0,0));b.bx(a.padding);return b}
C.prototype.computePartsBounds=function(a,b){void 0===b&&(b=!1);for(var c=null,d=a.j;d.next();){var e=d.value;!b&&e instanceof H||(e.kf(),null===c?c=e.Z.copy():c.Wh(e.Z))}return null===c?new w(NaN,NaN,0,0):c};
function Rl(a,b){if((b||a.sh)&&!a.cd&&null!==a.Lb&&!a.Ya.wf&&a.fd.F()){a.cd=!0;var c=a.Gm;b&&a.yl!==Qh&&(c=a.yl);var d=c!==Qh?Sl(a,c):a.scale,c=a.yb.copy(),e=a.Ob/d,g=a.Sb/d,h=null,k=a.Ya;k.yc&&(h=a.ub.copy());a.position.Za();var l=a.Jo;b&&!l.jd()&&a.ep.jd()&&(l=a.ep);Tl(a,a.ub,a.fd,e,g,l,b);a.position.freeze();null!==h&&ml(k,h,a.ub);e=a.scale;a.scale=d;a.cd=!1;d=a.yb;d.Vc(c)||a.Lu(c,d,e,a.scale,!1)}}
function Sl(a,b){var c=a.xb.vx;if(null===a.Lb)return c;a.ik&&Ul(a,a.Jh());var d=a.fd;if(!d.F())return c;var e=d.width,d=d.height,g=a.Ob,h=a.Sb,k=g/e,l=h/d;return b===Vl?(e=Math.min(l,k),e>c&&(e=c),e<a.Ph&&(e=a.Ph),e>a.Oh&&(e=a.Oh),e):b===Wl?(e=l>k?(h-a.Td)/d:(g-a.Td)/e,e>c&&(e=c),e<a.Ph&&(e=a.Ph),e>a.Oh&&(e=a.Oh),e):a.scale}C.prototype.zoomToFit=C.prototype.zoomToFit=function(){this.scale=Sl(this,Vl)};
C.prototype.zoomToRect=function(a,b){void 0===b&&(b=Vl);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Vl||b===Wl)if(isNaN(c))e=this.yb.height*this.scale/d;else if(isNaN(d))e=this.yb.width*this.scale/c;else var e=this.Ob,g=this.Sb,e=b===Wl?g/d>e/c?(g-(this.hk?this.Td:0))/d:(e-(this.wl?this.Td:0))/c:Math.min(g/d,e/c);this.scale=e;this.position=new M(a.x,a.y)}};z.defineProperty(C,{RA:null},function(){return this.cd},function(a){this.cd=a});
C.prototype.alignDocument=function(a,b){this.ik&&Ul(this,this.Jh());var c=this.fd,d=this.yb;this.position=new M(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY))};
function Tl(a,b,c,d,e,g,h){var k=b.x,l=b.y;if(h||a.uB===xl)g.jd()&&(d>c.width&&(k=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(l=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY))),g=a.xG,h=d-c.width,d<c.width+g.left+g.right?(k=Math.min(k+d/2,c.right+Math.max(h,g.right)-d/2),k=Math.max(k,c.left-Math.max(h,g.left)+d/2),k-=d/2):k>c.left?k=c.left:k<c.right-d&&(k=c.right-d),d=e-c.height,e<c.height+g.top+g.bottom?(l=Math.min(l+e/2,c.bottom+Math.max(d,g.bottom)-e/2),l=Math.max(l,c.top-Math.max(d,
g.top)+e/2),l-=e/2):l>c.top?l=c.top:l<c.bottom-e&&(l=c.bottom-e);b.x=isFinite(k)?k:-a.padding.left;b.y=isFinite(l)?l:-a.padding.top;null!==a.fG&&(a=a.fG(a,b),b.x=a.x,b.y=a.y)}C.prototype.findPartAt=C.prototype.eu=function(a,b){var c=b?Pi(this,a,function(a){return a.ba},function(a){return a.canSelect()}):Pi(this,a,function(a){return a.ba});return c instanceof D?c:null};
C.prototype.findObjectAt=C.prototype.He=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);Li(this);for(var d=this.bc.$n;d.next();){var e=d.value;if(e.visible&&(e=e.He(a,b,c),null!==e))return e}return null};function Pi(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=null);Li(a);for(a=a.bc.$n;a.next();){var e=a.value;if(e.visible&&!e.Wc&&(e=e.He(b,c,d),null!==e))return e}return null}
C.prototype.findObjectsAt=C.prototype.kq=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof J||d instanceof K||(d=new K(O));Li(this);for(var e=this.bc.$n;e.next();){var g=e.value;g.visible&&g.kq(a,b,c,d)}return d};C.prototype.findObjectsIn=C.prototype.Pk=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof J||e instanceof K||(e=new K(O));Li(this);for(var g=this.bc.$n;g.next();){var h=g.value;h.visible&&h.Pk(a,b,c,d,e)}return e};
C.prototype.CA=function(a,b,c,d,e,g){var h=new K(O);Li(this);for(var k=this.bc.$n;k.next();){var l=k.value;l.visible&&l.CA(a,b,c,d,h,e,g)}return h};C.prototype.findObjectsNear=C.prototype.On=function(a,b,c,d,e,g){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof J||e instanceof K)g=e;e=!0}g instanceof J||g instanceof K||(g=new K(O));Li(this);for(var h=this.bc.$n;h.next();){var k=h.value;k.visible&&k.On(a,b,c,d,e,g)}return g};
C.prototype.acceptEvent=function(a){var b=this.ed;this.ed=this.Ub;this.Ub=b;Xl(this,this,a,b,a instanceof MouseEvent);return b};
function Xl(a,b,c,d,e){d.g=b;d.event=c;e?Yl(a,c,d):(d.se=b.Ub.se,d.ha=b.Ub.ha);a=0;c.ctrlKey&&(a+=1);c.altKey&&(a+=2);c.shiftKey&&(a+=4);c.metaKey&&(a+=8);d.Ld=a;d.button=c.button;c.buttons&&(d.buttons=c.buttons);z.Uk&&0===c.button&&c.ctrlKey&&(d.button=2);d.gm=!1;d.up=!1;d.Qe=1;d.fm=0;d.Nc=!1;d.bubbles=!1;d.timestamp=Date.now();d.vu=!1;d.eh=c.target.ca?c.target.ca:null;d.We=null}
function Zl(a,b,c,d,e){d.g=a;Yl(a,c,d);d.Ld=0;d.button=0;d.buttons=1;d.gm=!0;d.up=!1;d.Qe=1;d.fm=0;d.Nc=!1;d.bubbles=!0;d.event=b;d.timestamp=Date.now();d.vu=e;d.eh=b.target.ca?b.target.ca:null;d.We=null;a.Zi=d.copy();Yh=null}
function $l(a,b,c,d,e){var g=null;d.g=a;null!==c?((g=window.document.elementFromPoint(c.clientX,c.clientY))&&g.ca?g=g.ca:(c=b.changedTouches[0],g=a),d.eh=g,Yl(a,c,d)):null!==a.ed?(d.ha=a.ed.ha,d.se=a.ed.se,d.eh=a.ed.eh):null!==a.Zi&&(d.ha=a.Zi.ha,d.se=a.Zi.se,d.eh=a.Zi.eh);d.Ld=0;d.button=0;d.buttons=1;d.gm=!1;d.up=!1;d.Qe=1;d.fm=0;d.Nc=!1;d.bubbles=!1;d.event=b;d.timestamp=Date.now();d.vu=e;d.We=null}
function ia(a,b,c){if(b.bubbles)return u&&u.xF&&z.trace("NOT handled "+c.type+" "+b.toString()),!0;u&&u.xF&&z.trace("handled "+c.type+" "+a.fb.name+" "+b.toString());void 0!==c.stopPropagation&&c.stopPropagation();(void 0===c.touches||2>c.touches.length)&&c.preventDefault();c.cancelBubble=!0;return!1}
C.prototype.mJ=function(a){if(!this.ca.isEnabled)return!1;var b=this.ca.Ub;Xl(this.ca,this.ca,a,b,!1);b.key=String.fromCharCode(a.which);b.gm=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key=
"Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.ca.doKeyDown();return 187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?ia(this.ca,b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)};
C.prototype.nJ=function(a){if(!this.ca.isEnabled)return!1;var b=this.ca.Ub;Xl(this.ca,this.ca,a,b,!1);b.key=String.fromCharCode(a.which);b.up=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 93:a.preventDefault()}this.ca.doKeyUp();
return ia(this.ca,b,a)};C.prototype.ap=function(a){var b=this.Lb;if(null===b)return new M(0,0);var c=this.Ob,d=this.Sb,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left;a=a.clientY-d/b.height*b.top;return null!==this.Jc?(a=new M(c,a),ub(a,this.Jc),a):new M(c,a)};
function Yl(a,b,c){var d=a.Lb,e=a.Ob,g=a.Sb,h=0,k=0;null!==d&&(d=d.getBoundingClientRect(),h=b.clientX-e/d.width*d.left,k=b.clientY-g/d.height*d.top);c.se.m(h,k);null!==a.Jc?(b=z.Fb(h,k),a.Jc.Ci(b),c.ha.assign(b),z.A(b)):c.ha.m(h,k)}
function Zf(a,b,c,d){var e=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;e=b.targetTouches[c]}else if(null!==a.nj[0])e=a.nj[c];else return;c=a.Lb;b=a.Ob;a=a.Sb;var g=0,h=0;null!==c&&null!==e&&(c=c.getBoundingClientRect(),g=e.clientX-b/c.width*c.left,h=e.clientY-a/c.height*c.top);d.m(g,h)}C.prototype.invalidateDocumentBounds=C.prototype.Bc=function(){this.ik||(this.ik=!0,this.Te(!0))};function jl(a){a.ie||Li(a);a.ik&&Ul(a,a.Jh())}
C.prototype.redraw=C.prototype.Iq=function(){this.cd||this.ie||(this.ra(),am(this),Pl(this),this.Bc(),this.hg())};C.prototype.isUpdateRequested=function(){return this.Zf};C.prototype.delayInitialization=function(a){void 0===a&&(a=null);var b=this.Ya,c=b.isEnabled;b.Ii();b.isEnabled=!1;Vi(this);this.sh=!1;b.isEnabled=c;null!==a&&z.setTimeout(a,1)};
C.prototype.requestUpdate=C.prototype.Te=function(a){void 0===a&&(a=!1);if(!0!==this.Zf&&!(this.cd||!1===a&&this.ie)){this.Zf=!0;var b=this;requestAnimationFrame(function(){b.Zf&&b.hg()})}};C.prototype.maybeUpdate=C.prototype.hg=function(){if(!this.Zo||this.Zf)this.Zo&&(this.Zo=!1),Vi(this)};function bm(a,b){a.Ya.wf||a.cd||!a.Qm||Ol(a)||(b&&Li(a),Rl(a,!1))}
function Vi(a){if(!a.ie&&(a.Zf=!1,null!==a.Tb)){a.ie=!0;var b=a.Ya,c=a.Pz;if(!b.kp&&0!==c.length){for(var d=c.o,e=d.length,g=0;g<e;g++){var h=d[g];cm(h,!1);h.K()}c.clear()}c=a.YC;0<c.count&&(c.each(function(a){a.QB()}),c.clear());d=c=!1;b.wf&&(d=!0,c=a.Eb,a.Eb=!0);b.yc||al(a);bm(a,!1);null!==a.Cd&&(a.Cd.visible&&!a.Qv&&(dm(a),a.Qv=!0),!a.Cd.visible&&a.Qv&&(a.Qv=!1));Li(a);e=!1;if(!a.sh||a.sv)a.sh?em(a,!a.Jv):(a.$b("Initial Layout"),!1===b.isEnabled&&b.Ii(),em(a,!1)),e=!0;a.Jv=!1;Li(a);a.Wz||b.wf||
jl(a);bm(a,!0);e&&(a.sh||gm(a),a.Ka("LayoutCompleted"));Li(a);e&&!a.sh&&(a.sh=!0,a.Vd("Initial Layout"),a.Eb||a.sa.clear(),z.setTimeout(function(){a.Fi=!1},1));Am(a);Vk(b);a.Fe(a.pd);d&&(a.Eb=c);a.ie=!1}}z.w(C,{Zn:null},function(){return this.sh});
function gm(a){var b=a.bc.o;a.Mf(b,b.length,a);a.yl!==Qh?a.scale=Sl(a,a.yl):a.Gm!==Qh?a.scale=Sl(a,a.Gm):(b=a.$I,isFinite(b)&&0<b&&(a.scale=b));b=a.ZI;if(b.F())a.position=b;else{b=z.P();b.oo(a.fd,a.YI);var c=a.yb,c=z.fh(0,0,c.width,c.height),d=z.P();d.oo(c,a.aJ);d.m(b.x-d.x,b.y-d.y);a.position=d;z.Mb(c);z.A(d);z.A(b);am(a);bm(a,!0);Rl(a,!0)}a.Ka("InitialLayoutCompleted");dm(a)}
function Li(a){if((a.ie||!a.Ya.wf)&&0!==a.Cg.count){for(var b=0;23>b;b++){var c=a.Cg.j;if(null===c||0===a.Cg.count)break;a.Cg=new K(O);a.QB(c,a.Cg);u&&22===b&&z.trace("failure to validate parts")}a.og.each(function(a){a instanceof F&&0!==(a.Ha&65536)!==!1&&(a.Ha^=65536)})}}
C.prototype.QB=function(a,b){for(a.reset();a.next();){var c=a.value;!c.qe()||c instanceof F||(c.sm()?(Bk(c,Infinity,Infinity),c.qc()):b.add(c))}for(a.reset();a.next();)c=a.value,c instanceof F&&c.isVisible()&&Bm(this,c);for(a.reset();a.next();)c=a.value,c instanceof H&&c.isVisible()&&(c.sm()?(Bk(c,Infinity,Infinity),c.qc()):b.add(c));for(a.reset();a.next();)c=a.value,c instanceof ea&&c.isVisible()&&(c.sm()?(Bk(c,Infinity,Infinity),c.qc()):b.add(c))};
function Bm(a,b){for(var c=z.tb(),d=z.tb(),e=b.Oc;e.next();){var g=e.value;g.isVisible()&&(g instanceof F?(Cm(g)||Dm(g)||Em(g))&&Bm(a,g):g instanceof H?g.aa===b||g.ea===b?d.push(g):c.push(g):(Bk(g,Infinity,Infinity),g.qc()))}for(var e=c.length,h=0;h<e;h++)g=c[h],Bk(g,Infinity,Infinity),g.qc();z.Ba(c);Bk(b,Infinity,Infinity);b.qc();e=d.length;for(h=0;h<e;h++)g=d[h],Bk(g,Infinity,Infinity),g.qc();z.Ba(d)}C.prototype.Mf=function(a,b,c,d){var e=this.Ya;if(this.zl||e.wf)for(e=0;e<b;e++)a[e].Mf(c,d)};
C.prototype.Fe=function(a,b){void 0===b&&(b=null);null===this.Tb&&z.k("No div specified");var c=this.Lb;null===c&&z.k("No canvas specified");var d=this.Ya;if(!d.yc&&(Fm(this),"0"!==this.Tb.style.opacity)){var e=a!==this.pd,g=this.bc.o,h=g.length,k=this;this.Mf(g,h,k);if(e)da(a,!0),Pl(this);else if(!this.Ne&&null===b&&!d.jk)return;var h=this.ub,l=this.Rb,m=Math.round(h.x*l)/l,n=Math.round(h.y*l)/l,d=this.Jc;d.reset();1!==l&&d.scale(l);0===h.x&&0===h.y||d.translate(-m,-n);l=this.rd;z.Xn?(c.width=c.width,
da(a,!0),a.scale(l,l)):(a.setTransform(1,0,0,1,0,0),a.scale(l,l),a.clearRect(0,0,this.Ob,this.Sb));a.setTransform(1,0,0,1,0,0);a.scale(l,l);a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);u&&u.xj&&u.YE(this,a);c=null!==b?function(c){var d=b;if(c.visible&&0!==c.Hc){var e=c.pb.o,g=e.length;if(0!==g){1!==c.Hc&&(a.globalAlpha=c.Hc);c=c.vw;c.length=0;for(var h=k.scale,l=0;l<g;l++){var m=e[l];if(ol(m)&&!d.contains(m)){if(m instanceof H){var n=m;n.tc&&c.push(n);if(!1===n.kh)continue}n=m.Z;1<n.width*h||1<
n.height*h?m.Fe(a,k):ql(m,a)}}a.globalAlpha=1}}}:function(b){b.Fe(a,k)};Gm(this,a);h=g.length;for(m=0;m<h;m++)a.setTransform(1,0,0,1,0,0),a.scale(l,l),a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),c(g[m]);this.xl?this.xl.Cm(this)&&this.lz():this.ap=function(){return new M(0,0)};u&&(u.yA||u.xj)&&u.xA(a,this,d);e?(da(this.pd,!0),Pl(this)):this.Ne=this.zl=!1}};
function Hm(a,b,c,d,e){null===a.Tb&&z.k("No div specified");var g=a.Lb;null===g&&z.k("No canvas specified");if(!a.Ya.yc){var h=a.pd;if(a.Ne){Fm(a);var k=a.rd;z.Xn?(g.width=g.width,da(h,!0)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.Ob*k,a.Sb*k));h.nu=!1;h.drawImage(a.kz.Fd,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.ub;var g=a.Rb,l=Math.round(e.x*g)/g,m=Math.round(e.y*g)/g;d=a.Jc;d.reset();1!==g&&d.scale(g);0===e.x&&0===e.y||d.translate(-l,-m);h.save();h.beginPath();e=c.length;for(g=0;g<e;g++)l=
c[g],0!==l.width&&0!==l.height&&h.rect(Math.floor(l.x),Math.floor(l.y),Math.ceil(l.width),Math.ceil(l.height));h.clip();h.setTransform(1,0,0,1,0,0);h.scale(k,k);h.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);u&&u.xj&&u.YE(a,h);c=a.bc.o;e=c.length;a.Mf(c,e,a);Gm(a,h);for(g=0;g<e;g++)rl(c[g],h,a,b);h.restore();da(h,!0);u&&(u.yA||u.xj)&&u.xA(h,a,d);a.xl?a.xl.Cm(a)&&a.lz():a.ap=function(){return new M(0,0)};a.zl=!1;a.Ne=!1;a.qB()}}}
function Im(a,b,c,d,e,g,h,k,l,m){null===a.Tb&&z.k("No div specified");null===a.Lb&&z.k("No canvas specified");void 0===h&&(h=null);void 0===k&&(k=null);void 0===l&&(l=!1);void 0===m&&(m=!1);Fm(a);da(a.pd,!0);Pl(a);a.Cz=!0;var n=new w(g.x,g.y,d.width/e,d.height/e),p=n.copy();p.bx(c);dm(a,p);Li(a);var p=a.bc.o,q=p.length;a.Mf(p,q,a,n);n=a.rd;b.setTransform(1,0,0,1,0,0);b.scale(n,n);b.clearRect(0,0,d.width,d.height);null!==k&&""!==k&&(b.fillStyle=k,b.fillRect(0,0,d.width,d.height));d=z.Pf();d.reset();
d.translate(c.left,c.top);d.scale(e);0===g.x&&0===g.y||d.translate(-g.x,-g.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);z.Ie(d);Gm(a,b);if(null!==h){var r=new K(O);c=h.j;for(c.reset();c.next();)e=c.value,!1===m&&"Grid"===e.layer.name||null===e||r.add(e);m=function(c){var d=l;if(c.visible&&0!==c.Hc&&(void 0===d&&(d=!0),d||!c.Wc)){var d=c.pb.o,e=d.length;if(0!==e){1!==c.Hc&&(b.globalAlpha=c.Hc);c=c.vw;c.length=0;for(var g=a.scale,h=0;h<e;h++){var k=d[h];if(ol(k)&&r.contains(k)){if(k instanceof
H){var m=k;m.tc&&c.push(m);if(!1===m.kh)continue}m=k.Z;1<m.width*g||1<m.height*g?k.Fe(b,a):ql(k,b)}}b.globalAlpha=1}}}}else if(!l&&m){var s=a.Vn.ba,v=s.layer;m=function(c){c===v?s.Fe(b,a):c.Fe(b,a,l)}}else m=function(c){c.Fe(b,a,l)};for(c=0;c<q;c++)m(p[c]);a.Cz=!1;a.xl?a.xl.Cm(a)&&a.lz():a.ap=function(){return new M(0,0)};da(a.pd,!0);Pl(a);a.Mf(p,q,a);dm(a)}C.prototype.getRenderingHint=C.prototype.Dj=function(a){return this.wk[a]};
C.prototype.setRenderingHint=C.prototype.lK=function(a,b){this.wk[a]=b;this.Iq()};C.prototype.resetRenderingHints=C.prototype.nG=function(){this.wk=new na;this.wk.drawShadows=!0;this.wk.textGreeking=!0;this.wk.viewportOptimizations=z.IF?!1:!0;this.wk.temporaryPixelRatio=!0;this.wk.pictureRatioOptimization=!0};function Gm(a,b){var c=a.wk;if(null!==c){if(void 0!==c.imageSmoothingEnabled){var d=!!c.imageSmoothingEnabled;b.nu=d;b.dM=d}c=c.defaultFont;void 0!==c&&null!==c&&(b.font=c)}}
C.prototype.getInputOption=C.prototype.lu=function(a){return this.hp[a]};C.prototype.setInputOption=function(a,b){this.hp[a]=b};C.prototype.resetInputOptions=C.prototype.mG=function(){this.hp=new na;this.hp.extraTouchArea=10;this.hp.extraTouchThreshold=10;this.hp.hasGestureZoom=!0};C.prototype.setProperties=function(a){z.Vu(this,a)};function Am(a){if(0===a.sa.Vh&&0!==a.sl.count){for(;0<a.sl.count;){var b=a.sl;a.sl=new oa(H,w);for(b=b.j;b.next();){var c=b.key;oj(c,b.value);c.Se()}}a.ra()}}
C.prototype.ra=function(a){void 0===a&&(a=null);if(null===a)this.Ne=!0,this.Te();else{var b=this.yb;null!==a&&a.F()&&b.Vg(a)&&(this.Ne=!0,this.Te())}for(b=this.ww.j;b.next();)b.value.ra(a)};
C.prototype.BF=function(a,b){if(!0!==this.Ne){this.Ne=!0;var c=!0===this.Dj("temporaryPixelRatio");if(!0===this.Dj("viewportOptimizations")&&this.uB!==Jm&&this.xG.Ax(0,0,0,0)&&b.width===a.width&&b.height===a.height){var d=this.scale,e=z.Of(),g=Math.max(a.x,b.x),h=Math.max(a.y,b.y),k=Math.min(a.x+a.width,b.x+b.width),l=Math.min(a.y+a.height,b.y+b.height);e.x=g;e.y=h;e.width=Math.max(0,k-g)*d;e.height=Math.max(0,l-h)*d;if(0<e.width&&0<e.height){if(!this.ie&&(this.Zf=!1,null!==this.Tb)){this.ie=!0;Am(this);
this.fd.F()||Ul(this,this.Jh());var m=this.Lb;if(null!==m){var n=this.rd,h=this.Ob*n,k=this.Sb*n,g=this.scale*n,d=Math.round(Math.round(b.x*g)-Math.round(a.x*g)),g=Math.round(Math.round(b.y*g)-Math.round(a.y*g)),l=this.kz,p=this.PC;l.width!==h&&(l.width=h);l.height!==k&&(l.height=k);p.clearRect(0,0,h,k);var l=190*this.rd,q=70*this.rd,r=Math.max(d,0),s=Math.max(g,0),v=Math.floor(h-r),t=Math.floor(k-s);p.nu=!1;p.drawImage(m.Fd,r,s,v,t,0,0,v,t);this.xl.Cm(this)&&p.clearRect(0,0,l,q);var m=z.tb(),p=z.tb(),
t=Math.abs(d),v=Math.abs(g),x=0===r?0:h-t,r=z.Fb(x,0),t=z.Fb(t+x,k);p.push(new w(Math.min(r.x,t.x),Math.min(r.y,t.y),Math.abs(r.x-t.x),Math.abs(r.y-t.y)));var y=this.Jc;y.reset();y.scale(n,n);1!==this.Rb&&y.scale(this.Rb);n=this.ub;(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&y.translate(-n.x,-n.y);ub(r,y);ub(t,y);m.push(new w(Math.min(r.x,t.x),Math.min(r.y,t.y),Math.abs(r.x-t.x),Math.abs(r.y-t.y)));x=0===s?0:k-v;r.m(0,x);t.m(h,v+x);p.push(new w(Math.min(r.x,t.x),Math.min(r.y,t.y),Math.abs(r.x-
t.x),Math.abs(r.y-t.y)));ub(r,y);ub(t,y);m.push(new w(Math.min(r.x,t.x),Math.min(r.y,t.y),Math.abs(r.x-t.x),Math.abs(r.y-t.y)));this.xl.Cm(this)&&(h=0<d?0:-d,k=0<g?0:-g,r.m(h,k),t.m(l+h,q+k),p.push(new w(Math.min(r.x,t.x),Math.min(r.y,t.y),Math.abs(r.x-t.x),Math.abs(r.y-t.y))),ub(r,y),ub(t,y),m.push(new w(Math.min(r.x,t.x),Math.min(r.y,t.y),Math.abs(r.x-t.x),Math.abs(r.y-t.y))));z.A(r);z.A(t);bm(this,!1);Hm(this,m,p,d,g);z.Ba(m);z.Ba(p);this.ie=!1}}}else this.hg();z.Mb(e);c&&(this.zk=1,this.hg(),
this.zk=null,this.qB())}else c?(this.zk=1,this.hg(),this.zk=null,this.qB()):this.hg()}};function am(a){!1===a.Qm&&(a.Qm=!0)}function Pl(a){!1===a.zl&&(a.zl=!0)}function Fm(a){!1!==a.bs&&(a.bs=!1,Km(a,a.Ob,a.Sb))}function Km(a,b,c){var d=a.Lb,e=a.rd,g=b*e,e=c*e;if(d.width!==g||d.height!==e)d.width=g,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.Ne=!0,da(a.pd,!0)}
function Ol(a){var b=a.Lb;if(null===b)return!0;var c=a.Tb,d=a.Ob,e=a.Sb,g=a.mE.copy();if(!g.F())return!0;var h=!1,k=a.wl?a.Td:0,l=a.hk?a.Td:0,m=c.clientWidth||d+k,n=c.clientHeight||e+l;if(m!==d+k||n!==e+l)a.wl=!1,a.hk=!1,l=k=0,a.Ob=m,a.Sb=n,h=a.bs=!0;a.Qm=!1;var p=a.yb,c=a.fd,m=c.width,n=c.height,q=p.width,r=p.height,s=c.x,v=p.x,t=c.right,x=p.right+k,y=c.y,B=p.y,A=c.bottom,p=p.bottom+l,N="1px",G="1px",c=a.scale;a.uB===xl&&m<q+k&&n<r+l||(a.NA&&a.Ae&&(N=1,s+1<v&&(N=Math.max((v-s)*c+a.Ob,N)),t>x+1&&
(N=Math.max((t-x)*c+a.Ob,N)),q+k+1<m&&(N=Math.max((m-q+k)*c+a.Ob,N)),N+="px"),a.OA&&a.Be&&(G=1,y+1<B&&(G=Math.max((B-y)*c+a.Sb,G)),A>p+1&&(G=Math.max((A-p)*c+a.Sb,G)),r+l+1<n&&(G=Math.max((n-r+l)*c+a.Sb,G)),G+="px"));k="1px"!==N;l="1px"!==G;k&&l||!k&&!l||(l&&(x-=a.Td),k&&(p-=a.Td),a.NA&&a.Ae&&(N=1,s+1<v&&(N=Math.max((v-s)*c+a.Ob,N)),t>x+1&&(N=Math.max((t-x)*c+a.Ob,N)),q+1<m&&(N=Math.max((m-q)*c+a.Ob,N)),N+="px"),k="1px"!==N,l=k!==a.hk?a.Sb-a.Td:a.Sb,a.OA&&a.Be&&(G=1,y+1<B&&(G=Math.max((B-y)*c+l,G)),
A>p+1&&(G=Math.max((A-p)*c+l,G)),r+1<n&&(G=Math.max((n-r)*c+l,G)),G+="px"),l="1px"!==G);if(a.Gw&&k===a.hk&&l===a.wl)return d===a.Ob&&e===a.Sb||a.hg(),!1;k!==a.hk&&(a.Sb="1px"===N?a.Sb+a.Td:Math.max(a.Sb-a.Td,1),h=!0);a.hk=k;a.ht.style.width=N;l!==a.wl&&(a.Ob="1px"===G?a.Ob+a.Td:Math.max(a.Ob-a.Td,1),h=!0,a.fs&&(k=z.P(),l?(b.style.left=a.Td+"px",a.position=k.m(a.ub.x+a.Td/a.scale,a.ub.y)):(b.style.left="0px",a.position=k.m(a.ub.x-a.Td/a.scale,a.ub.y)),z.A(k)));a.wl=l;a.ht.style.height=G;b=a.Kw;k=b.scrollLeft;
a.NA&&a.Ae&&(q+1<m?k=(a.position.x-s)*c:s+1<v?k=b.scrollWidth-b.clientWidth:t>x+1&&(k=a.position.x*c));if(a.fs)switch(a.Qz){case "negative":k=-(b.scrollWidth-k-b.clientWidth);break;case "reverse":k=b.scrollWidth-k-b.clientWidth}b.scrollLeft=k;a.OA&&a.Be&&(r+1<n?b.scrollTop=(a.position.y-y)*c:y+1<B?b.scrollTop=b.scrollHeight-b.clientHeight:A>p+1&&(b.scrollTop=a.position.y*c));h&&(a.bs=!0);m=a.Ob;n=a.Sb;b.style.width=m+(a.wl?a.Td:0)+"px";b.style.height=n+(a.hk?a.Td:0)+"px";a.Sz=!1;return d!==m||e!==
n||a.Ya.yc?(p=a.yb,a.Lu(g,p,c,a.scale,h),!1):!0}
C.prototype.add=C.prototype.add=function(a){z.l(a,D,C,"add:part");var b=a.g;if(b!==this){null!==b&&z.k("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());this.cr&&(a.El="Tool");var c=a.Lf,b=this.hm(c);null===b&&(b=this.hm(""));null===b&&z.k('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=b.qq(99999999,a,a.g===this),0<=c&&this.ld(sg,"parts",b,null,a,null,c),b.Wc||this.Bc(),a.N(Lm),c=a.Yx,null!==
c&&c(a,null,b))}};
C.prototype.qq=function(a){if(a instanceof E){if(this.yp.add(a),a instanceof F){var b=a.Qa;null===b?this.Pl.add(a):b.cn.add(a);b=a.Wb;null!==b&&(b.g=this)}}else a instanceof H?this.rp.add(a):a instanceof ea||this.pb.add(a);var c=this;Mm(a,function(a){Nm(c,a)});a.Qb&&a.K();b=a.data;null!==b&&(a instanceof ea||(a instanceof H?this.Zj.add(b,a):this.Ti.add(b,a)),Mm(a,function(a){Om(c,a)}));!0!==Dm(a)&&!0!==Em(a)||this.Cg.add(a);Pm(a,!0,this);Qm(a)?(a.Z.F()&&this.ra(sl(a,a.Z)),this.Bc()):a.isVisible()&&
a.Z.F()&&this.ra(sl(a,a.Z));this.Te()};
C.prototype.vf=function(a){a.Vt();if(a instanceof E){if(this.yp.remove(a),a instanceof F){var b=a.Qa;null===b?this.Pl.remove(a):b.cn.remove(a);b=a.Wb;null!==b&&(b.g=null)}}else a instanceof H?this.rp.remove(a):a instanceof ea||this.pb.remove(a);var c=this;Mm(a,function(a){Rm(c,a)});b=a.data;null!==b&&(a instanceof ea||(a instanceof H?this.Zj.remove(b):this.Ti.remove(b)),Mm(a,function(a){Sm(c,a)}));this.Cg.remove(a);Qm(a)?(a.Z.F()&&this.ra(sl(a,a.Z)),this.Bc()):a.isVisible()&&a.Z.F()&&this.ra(sl(a,
a.Z));this.Te()};C.prototype.remove=C.prototype.remove=function(a){z.l(a,D,C,"remove:part");Tm(this,a,!0)};function Tm(a,b,c){var d=b.layer;null!==d&&d.g===a&&(b.gb=!1,b.Wg=!1,b.N(Um),c&&b.Mn(),c=d.vf(-1,b,!1),0<=c&&a.ld(tg,"parts",d,b,null,c,null),a=b.Yx,null!==a&&a(b,d,null))}
C.prototype.removeParts=C.prototype.rB=function(a,b){if(z.isArray(a))for(var c=z.bb(a),d=0;d<c;d++){var e=z.Ma(a,d);b&&!e.canDelete()||this.remove(e)}else for(e=new K(D),e.Uc(a),c=e.j;c.next();)e=c.value,b&&!e.canDelete()||this.remove(e)};C.prototype.copyParts=C.prototype.cq=function(a,b,c){return this.xb.cq(a,b,c)};
C.prototype.moveParts=C.prototype.moveParts=function(a,b,c){z.l(b,M,C,"moveParts:offset");var d=this.ib;if(null!==d){d=d.Ee;null===d&&(d=new Ph,d.$c(this));var e=new oa(D,Object);if(null!==a)a=a.j;else{for(a=this.Gi;a.next();)ji(d,e,a.value,c);for(a=this.og;a.next();)ji(d,e,a.value,c);a=this.links}for(;a.next();)ji(d,e,a.value,c);d.moveParts(e,b,c)}};
function Vm(a,b,c){z.l(b,ah,C,"addLayer:layer");null!==b.g&&b.g!==a&&z.k("Cannot share a Layer with another Diagram: "+b+" of "+b.g);null===c?null!==b.g&&z.k("Cannot add an existing Layer to this Diagram again: "+b):(z.l(c,ah,C,"addLayer:existingLayer"),c.g!==a&&z.k("Existing Layer must be in this Diagram: "+c+" not in "+c.g),b===c&&z.k("Cannot move a Layer before or after itself: "+b));if(b.g!==a){b=b.name;a=a.bc;c=a.count;for(var d=0;d<c;d++)a.fa(d).name===b&&z.k("Cannot add Layer with the name '"+
b+"'; a Layer with the same name is already present in this Diagram.")}}C.prototype.addLayer=C.prototype.Lt=function(a){Vm(this,a,null);a.$c(this);var b=this.bc,c=b.count-1;if(!a.Wc)for(;0<=c&&b.fa(c).Wc;)c--;b.Yd(c+1,a);null!==this.xe&&this.ld(sg,"layers",this,null,a,null,c+1);this.ra();this.Bc()};
C.prototype.addLayerBefore=C.prototype.KH=function(a,b){Vm(this,a,b);a.$c(this);var c=this.bc,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.xe&&this.ld(tg,"layers",this,a,null,d,null));for(var e=c.count,g=0;g<e;g++)if(c.fa(g)===b){c.Yd(g,a);break}null!==this.xe&&this.ld(sg,"layers",this,null,a,null,g);this.ra();0>d&&this.Bc()};
C.prototype.addLayerAfter=function(a,b){Vm(this,a,b);a.$c(this);var c=this.bc,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.xe&&this.ld(tg,"layers",this,a,null,d,null));for(var e=c.count,g=0;g<e;g++)if(c.fa(g)===b){c.Yd(g+1,a);break}null!==this.xe&&this.ld(sg,"layers",this,null,a,null,g+1);this.ra();0>d&&this.Bc()};
C.prototype.removeLayer=function(a){z.l(a,ah,C,"removeLayer:layer");a.g!==this&&z.k("Cannot remove a Layer from another Diagram: "+a+" of "+a.g);if(""!==a.name){var b=this.bc,c=b.indexOf(a);if(b.remove(a)){for(b=a.pb.copy().j;b.next();){var d=b.value,e=d.Lf;d.Lf=e!==a.name?e:""}null!==this.xe&&this.ld(tg,"layers",this,a,null,c,null);this.ra();this.Bc()}}};C.prototype.findLayer=C.prototype.hm=function(a){for(var b=this.ao;b.next();){var c=b.value;if(c.name===a)return c}return null};
C.prototype.addModelChangedListener=C.prototype.MH=function(a){z.h(a,"function",C,"addModelChangedListener:listener");null===this.vh&&(this.vh=new J("function"));this.vh.add(a);this.ia.An(a)};C.prototype.removeModelChangedListener=function(a){z.h(a,"function",C,"removeModelChangedListener:listener");null!==this.vh&&(this.vh.remove(a),0===this.vh.count&&(this.vh=null));this.ia.Ou(a)};
C.prototype.addChangedListener=C.prototype.An=function(a){z.h(a,"function",C,"addChangedListener:listener");null===this.Oi&&(this.Oi=new J("function"));this.Oi.add(a)};C.prototype.removeChangedListener=C.prototype.Ou=function(a){z.h(a,"function",C,"removeChangedListener:listener");null!==this.Oi&&(this.Oi.remove(a),0===this.Oi.count&&(this.Oi=null))};
C.prototype.mx=function(a){this.Eb||this.sa.wF(a);a.Kc!==rg&&(this.Fi=!0);if(null!==this.Oi){var b=this.Oi,c=b.length;if(1===c)b=b.fa(0),b(a);else if(0!==c)for(var d=b.nc(),e=0;e<c;e++)b=d[e],b(a)}};C.prototype.raiseChangedEvent=C.prototype.ld=function(a,b,c,d,e,g,h){void 0===g&&(g=null);void 0===h&&(h=null);var k=new ag;k.g=this;k.Kc=a;k.propertyName=b;k.object=c;k.oldValue=d;k.Oj=g;k.newValue=e;k.Mj=h;this.mx(k)};
C.prototype.raiseChanged=C.prototype.i=function(a,b,c,d,e){this.ld(bg,a,this,b,c,d,e)};z.w(C,{Ya:"animationManager"},function(){return this.eC});z.w(C,{sa:"undoManager"},function(){return this.xe.sa});z.defineProperty(C,{Eb:"skipsUndoManager"},function(){return this.rj},function(a){z.h(a,"boolean",C,"skipsUndoManager");this.rj=a;this.xe.rj=a});z.defineProperty(C,{uA:"delaysLayout"},function(){return this.gz},function(a){this.gz=a});
C.prototype.En=function(a,b){if(null!==a&&a.g===this){var c=this.Ve;try{this.Ve=!0;var d=a.Kc,e;if(d===bg){var g=a.object,h=a.propertyName,k=a.qa(b);z.Ua(g,h,k);if(g instanceof O){var l,m=g.ba;null!==m&&m.pe()}this.Fi=!0}else if(d===sg){var n=a.object,p=a.Mj,g=a.newValue;if(n instanceof I)if("number"===typeof p&&g instanceof O){l=g;var q=n;b?q.vf(p):q.Yd(p,l);m=n.ba;null!==m&&m.pe()}else{if("number"===typeof p&&g instanceof mh){var r=g,q=n;b?r.Je?q.lG(p):q.iG(p):(e=r.Je?q.oe(r.index):q.ne(r.index),
e.bq(r))}}else if(n instanceof ah){var s=!0===a.Oj;if("number"===typeof p&&g instanceof D){var m=g,v=n;b?(m.gb=!1,m.Wg=!1,m.pe(),v.vf(s?p:-1,m,s)):v.qq(p,m,s)}}else if(n instanceof C){if("number"===typeof p&&g instanceof ah){var t=g;b?this.bc.md(p):(d=t,d.$c(this),this.bc.Yd(p,d))}}else z.k("unknown ChangedEvent.Insert object: "+a.toString());this.Fi=!0}else d===tg?(n=a.object,p=a.Oj,g=a.oldValue,n instanceof I?"number"===typeof p&&g instanceof O?(q=n,b?q.Yd(p,g):q.vf(p)):"number"===typeof p&&g instanceof
mh&&(r=g,q=n,b?(e=r.Je?q.oe(r.index):q.ne(r.index),e.bq(r)):r.Je?q.lG(p):q.iG(p)):n instanceof ah?(s=!0===a.Mj,"number"===typeof p&&g instanceof D&&(m=g,v=n,b?v.qq(p,m,s):(m.gb=!1,m.Wg=!1,m.pe(),v.vf(s?p:-1,m,s)))):n instanceof C?"number"===typeof p&&g instanceof ah&&(t=g,b?(d=t,d.$c(this),this.bc.Yd(p,d)):this.bc.md(p)):z.k("unknown ChangedEvent.Remove object: "+a.toString()),this.Fi=!0):d!==rg&&z.k("unknown ChangedEvent: "+a.toString())}finally{this.Ve=c}}};
C.prototype.startTransaction=C.prototype.$b=function(a){return this.sa.$b(a)};C.prototype.commitTransaction=C.prototype.Vd=function(a){return this.sa.Vd(a)};C.prototype.rollbackTransaction=C.prototype.Lq=function(){return this.sa.Lq()};C.prototype.updateAllTargetBindings=C.prototype.aH=function(a){void 0===a&&(a="");for(var b=this.Gi;b.next();)b.value.Nb(a);for(b=this.og;b.next();)b.value.Nb(a);for(b=this.links;b.next();)b.value.Nb(a)};
C.prototype.updateAllRelationshipsFromData=C.prototype.DK=function(){for(var a=this.ia,b=new K,c=a.ng,d=0;d<c.length;d++){var e=c[d];b.add(e)}var g=[];this.og.each(function(a){null===a.data||b.contains(a.data)||g.push(a.data)});this.Gi.each(function(a){null===a.data||b.contains(a.data)||g.push(a.data)});g.forEach(function(b){hh(a,b,!1)});for(d=0;d<c.length;d++){var e=c[d],h=this.Mh(e);null===h&&gh(a,e,!1)}if(a instanceof X){for(var k=new K,c=a.Xg,d=0;d<c.length;d++)e=c[d],k.add(e);var l=[];this.links.each(function(a){null===
a.data||k.contains(a.data)||l.push(a.data)});l.forEach(function(b){rh(a,b,!1)});for(d=0;d<c.length;d++)e=c[d],h=this.cg(e),null===h&&qh(a,e,!1)}for(d=this.Gi;d.next();)h=d.value,h.updateRelationshipsFromData();for(d=this.og;d.next();)d.value.updateRelationshipsFromData();for(d=this.links;d.next();)h=d.value,h.updateRelationshipsFromData()};
function Wm(a,b,c){if(a.cd||a.ie)a.Rb=c,c=a.Ya,c.yc&&nl(c,b,a.Rb);else if(a.cd=!0,null===a.Lb)a.Rb=c;else{var d=a.yb.copy(),e=a.Ob,g=a.Sb;d.width=a.Ob/b;d.height=a.Sb/b;var h=a.Dm.x,k=a.Dm.y,l=a.JE;isNaN(h)&&(l.Gj()?l.Fj(sc)?h=0:l.Fj(xc)&&(h=e-1):h=l.jd()?l.x*(e-1):e/2);isNaN(k)&&(l.Gj()?l.Fj(rc)?k=0:l.Fj(yc)&&(k=g-1):k=l.jd()?l.y*(g-1):g/2);null!==a.wG&&(c=a.wG(a,c));c<a.Ph&&(c=a.Ph);c>a.Oh&&(c=a.Oh);e=z.Fb(a.ub.x+h/b-h/c,a.ub.y+k/b-k/c);a.position=e;z.A(e);a.Rb=c;a.Lu(d,a.yb,b,c,!1);a.cd=!1;Rl(a,
!1);c=a.Ya;c.yc&&nl(c,b,a.Rb);a.ra();am(a)}}C.prototype.Lu=function(a,b,c,d,e){a.O(b)||(void 0===e&&(e=!1),e||am(this),Pl(this),d=this.Wb,null===d||!d.Vx||this.Zl!==Qh||e||a.width===b.width&&a.height===b.height||d.N(),d=this.fb,!0===this.Sm&&d instanceof Kh&&(this.U.ha=this.NB(this.U.se),Fk(d,this)),this.cd||this.BF(a,b),dm(this),this.Eh.scale=c,this.Eh.position.x=a.x,this.Eh.position.y=a.y,this.Eh.bounds.set(a),this.Eh.isScroll=e,this.Ka("ViewportBoundsChanged",this.Eh,a))};
function dm(a,b){void 0===b&&(b=null);var c=a.Cd;if(null!==c&&c.visible){for(var d=z.Am(),e=1,g=1,h=c.va.o,k=h.length,l=0;l<k;l++){var m=h[l],n=m.interval;2>n||(Xm(m.Jb)?g=g*n/Te(g,n):e=e*n/Te(e,n))}h=c.Kx;d.m(g*h.width,e*h.height);h=g=l=k=0;if(null!==b)k=b.width,l=b.height,g=b.x,h=b.y;else{e=z.Of();g=a.yb;e.m(g.x,g.y,g.width,g.height);for(h=a.ww.j;h.next();)g=h.value.yb,g.F()&&Rb(e,g.x,g.y,g.width,g.height);if(!e.F()){z.Mb(e);return}k=e.width;l=e.height;g=e.x;h=e.y;z.Mb(e)}c.width=k+2*d.width;c.height=
l+2*d.height;e=z.P();tb(g,h,0,0,d.width,d.height,e);e.offset(-d.width,-d.height);z.Qk(d);c.ba.location=e;z.A(e)}}C.prototype.clearSelection=C.prototype.ox=function(){var a=0<this.selection.count;a&&this.Ka("ChangingSelection");Oh(this);a&&this.Ka("ChangedSelection")};function Oh(a){a=a.selection;if(0<a.count){for(var b=a.nc(),c=b.length,d=0;d<c;d++)b[d].gb=!1;a.Za();a.clear();a.freeze()}}
C.prototype.select=C.prototype.select=function(a){null!==a&&(z.l(a,D,C,"select:part"),a.layer.g===this&&(!a.gb||1<this.selection.count)&&(this.Ka("ChangingSelection"),Oh(this),a.gb=!0,this.Ka("ChangedSelection")))};
C.prototype.selectCollection=C.prototype.AG=function(a){this.Ka("ChangingSelection");Oh(this);if(z.isArray(a))for(var b=z.bb(a),c=0;c<b;c++){var d=z.Ma(a,c);d instanceof D||z.k("Diagram.selectCollection given something that is not a Part: "+d);d.gb=!0}else for(a=a.j;a.next();)d=a.value,d instanceof D||z.k("Diagram.selectCollection given something that is not a Part: "+d),d.gb=!0;this.Ka("ChangedSelection")};
C.prototype.clearHighlighteds=C.prototype.VH=function(){var a=this.om;if(0<a.count){for(var b=a.nc(),c=b.length,d=0;d<c;d++)b[d].Wg=!1;a.Za();a.clear();a.freeze()}};C.prototype.highlight=function(a){null!==a&&a.layer.g===this&&(z.l(a,D,C,"highlight:part"),!a.Wg||1<this.om.count)&&(this.VH(),a.Wg=!0)};
C.prototype.highlightCollection=function(a){for(var b=(new K).Uc(a),c=this.om.copy().oy(b).j;c.next();)a=c.value,a.Wg=!1;for(b=b.j;b.next();)a=b.value,a instanceof D||z.k("Diagram.highlightCollection given something that is not a Part: "+a),a.Wg=!0};
C.prototype.scroll=C.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var d="up"===b||"down"===b,e=0;if("pixel"===a)e=c;else if("line"===a)e=c*(d?this.Uu:this.Tu);else if("page"===a)a=d?this.yb.height:this.yb.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.Uu:this.Tu),0),e*=c);else{if("document"===a){e=this.fd;d=this.yb;c=z.P();"up"===b?this.position=c.m(d.x,e.y):"left"===b?this.position=c.m(e.x,d.y):"down"===b?this.position=c.m(d.x,e.bottom-d.height):"right"===b&&(this.position=c.m(e.right-d.width,
d.y));z.A(c);return}z.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+a)}e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:z.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+b);this.position=c};C.prototype.scrollToRect=C.prototype.gK=function(a){var b=this.yb;b.Lk(a)||(a=a.$l,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};
C.prototype.centerRect=C.prototype.UH=function(a){var b=this.yb;a=a.$l;a.x-=b.width/2;a.y-=b.height/2;this.position=a};C.prototype.transformDocToView=C.prototype.MB=function(a){var b=this.Jc;b.reset();1!==this.Rb&&b.scale(this.Rb);var c=this.ub;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return a.copy().transform(this.Jc)};
C.prototype.transformViewToDoc=C.prototype.NB=function(a){var b=this.Jc;b.reset();1!==this.Rb&&b.scale(this.Rb);var c=this.ub;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return ub(a.copy(),this.Jc)};var Qh;C.None=Qh=z.s(C,"None",0);var Vl;C.Uniform=Vl=z.s(C,"Uniform",1);var Wl;C.UniformToFill=Wl=z.s(C,"UniformToFill",2);var Zi;C.CycleAll=Zi=z.s(C,"CycleAll",10);var cj;C.CycleNotDirected=cj=z.s(C,"CycleNotDirected",11);var ej;
C.CycleNotDirectedFast=ej=z.s(C,"CycleNotDirectedFast",12);var fj;C.CycleNotUndirected=fj=z.s(C,"CycleNotUndirected",13);var $i;C.CycleDestinationTree=$i=z.s(C,"CycleDestinationTree",14);var bj;C.CycleSourceTree=bj=z.s(C,"CycleSourceTree",15);var xl;C.DocumentScroll=xl=z.s(C,"DocumentScroll",1);var Jm;C.InfiniteScroll=Jm=z.s(C,"InfiniteScroll",2);var zl;C.TreeParentCollapsed=zl=z.s(C,"TreeParentCollapsed",21);var Ym;C.AllParentsCollapsed=Ym=z.s(C,"AllParentsCollapsed",22);var Zm;
C.AnyParentsCollapsed=Zm=z.s(C,"AnyParentsCollapsed",23);z.defineProperty(C,{EK:"validCycle"},function(){return this.Yw},function(a){var b=this.Yw;b!==a&&(z.Ca(a,C,C,"validCycle"),this.Yw=a,this.i("validCycle",b,a))});z.w(C,{ao:"layers"},function(){return this.bc.j});z.defineProperty(C,{Hf:"isModelReadOnly"},function(){var a=this.xe;return null===a?!1:a.kb},function(a){var b=this.xe;null!==b&&(b.kb=a)});
z.defineProperty(C,{kb:"isReadOnly"},function(){return this.aj},function(a){var b=this.aj;b!==a&&(z.h(a,"boolean",C,"isReadOnly"),this.aj=a,this.i("isReadOnly",b,a))});z.defineProperty(C,{isEnabled:"isEnabled"},function(){return this.pf},function(a){var b=this.pf;b!==a&&(z.h(a,"boolean",C,"isEnabled"),this.pf=a,this.i("isEnabled",b,a))});
z.defineProperty(C,{hA:"allowClipboard"},function(){return this.jv},function(a){var b=this.jv;b!==a&&(z.h(a,"boolean",C,"allowClipboard"),this.jv=a,this.i("allowClipboard",b,a))});z.defineProperty(C,{Ik:"allowCopy"},function(){return this.cl},function(a){var b=this.cl;b!==a&&(z.h(a,"boolean",C,"allowCopy"),this.cl=a,this.i("allowCopy",b,a))});
z.defineProperty(C,{Bn:"allowDelete"},function(){return this.dl},function(a){var b=this.dl;b!==a&&(z.h(a,"boolean",C,"allowDelete"),this.dl=a,this.i("allowDelete",b,a))});z.defineProperty(C,{Qt:"allowDragOut"},function(){return this.kv},function(a){var b=this.kv;b!==a&&(z.h(a,"boolean",C,"allowDragOut"),this.kv=a,this.i("allowDragOut",b,a))});
z.defineProperty(C,{wE:"allowDrop"},function(){return this.lv},function(a){var b=this.lv;b!==a&&(z.h(a,"boolean",C,"allowDrop"),this.lv=a,this.i("allowDrop",b,a))});z.defineProperty(C,{jx:"allowTextEdit"},function(){return this.ml},function(a){var b=this.ml;b!==a&&(z.h(a,"boolean",C,"allowTextEdit"),this.ml=a,this.i("allowTextEdit",b,a))});
z.defineProperty(C,{gx:"allowGroup"},function(){return this.el},function(a){var b=this.el;b!==a&&(z.h(a,"boolean",C,"allowGroup"),this.el=a,this.i("allowGroup",b,a))});z.defineProperty(C,{kx:"allowUngroup"},function(){return this.nl},function(a){var b=this.nl;b!==a&&(z.h(a,"boolean",C,"allowUngroup"),this.nl=a,this.i("allowUngroup",b,a))});
z.defineProperty(C,{Vp:"allowInsert"},function(){return this.nv},function(a){var b=this.nv;b!==a&&(z.h(a,"boolean",C,"allowInsert"),this.nv=a,this.i("allowInsert",b,a))});z.defineProperty(C,{Rt:"allowLink"},function(){return this.fl},function(a){var b=this.fl;b!==a&&(z.h(a,"boolean",C,"allowLink"),this.fl=a,this.i("allowLink",b,a))});
z.defineProperty(C,{Cn:"allowRelink"},function(){return this.hl},function(a){var b=this.hl;b!==a&&(z.h(a,"boolean",C,"allowRelink"),this.hl=a,this.i("allowRelink",b,a))});z.defineProperty(C,{Wl:"allowMove"},function(){return this.gl},function(a){var b=this.gl;b!==a&&(z.h(a,"boolean",C,"allowMove"),this.gl=a,this.i("allowMove",b,a))});
z.defineProperty(C,{hx:"allowReshape"},function(){return this.il},function(a){var b=this.il;b!==a&&(z.h(a,"boolean",C,"allowReshape"),this.il=a,this.i("allowReshape",b,a))});z.defineProperty(C,{St:"allowResize"},function(){return this.jl},function(a){var b=this.jl;b!==a&&(z.h(a,"boolean",C,"allowResize"),this.jl=a,this.i("allowResize",b,a))});
z.defineProperty(C,{ix:"allowRotate"},function(){return this.kl},function(a){var b=this.kl;b!==a&&(z.h(a,"boolean",C,"allowRotate"),this.kl=a,this.i("allowRotate",b,a))});z.defineProperty(C,{Df:"allowSelect"},function(){return this.ll},function(a){var b=this.ll;b!==a&&(z.h(a,"boolean",C,"allowSelect"),this.ll=a,this.i("allowSelect",b,a))});
z.defineProperty(C,{xE:"allowUndo"},function(){return this.ov},function(a){var b=this.ov;b!==a&&(z.h(a,"boolean",C,"allowUndo"),this.ov=a,this.i("allowUndo",b,a))});z.defineProperty(C,{lx:"allowZoom"},function(){return this.qv},function(a){var b=this.qv;b!==a&&(z.h(a,"boolean",C,"allowZoom"),this.qv=a,this.i("allowZoom",b,a))});
z.defineProperty(C,{OA:"hasVerticalScrollbar"},function(){return this.Uv},function(a){var b=this.Uv;b!==a&&(z.h(a,"boolean",C,"hasVerticalScrollbar"),this.Uv=a,am(this),this.ra(),this.i("hasVerticalScrollbar",b,a),Rl(this,!1))});z.defineProperty(C,{NA:"hasHorizontalScrollbar"},function(){return this.Tv},function(a){var b=this.Tv;b!==a&&(z.h(a,"boolean",C,"hasHorizontalScrollbar"),this.Tv=a,am(this),this.ra(),this.i("hasHorizontalScrollbar",b,a),Rl(this,!1))});
z.defineProperty(C,{Ae:"allowHorizontalScroll"},function(){return this.mv},function(a){var b=this.mv;b!==a&&(z.h(a,"boolean",C,"allowHorizontalScroll"),this.mv=a,this.i("allowHorizontalScroll",b,a),Rl(this,!1))});z.defineProperty(C,{Be:"allowVerticalScroll"},function(){return this.pv},function(a){var b=this.pv;b!==a&&(z.h(a,"boolean",C,"allowVerticalScroll"),this.pv=a,this.i("allowVerticalScroll",b,a),Rl(this,!1))});
z.defineProperty(C,{Tu:"scrollHorizontalLineChange"},function(){return this.Hw},function(a){var b=this.Hw;b!==a&&(z.h(a,"number",C,"scrollHorizontalLineChange"),0>a&&z.wa(a,">= 0",C,"scrollHorizontalLineChange"),this.Hw=a,this.i("scrollHorizontalLineChange",b,a))});
z.defineProperty(C,{Uu:"scrollVerticalLineChange"},function(){return this.Lw},function(a){var b=this.Lw;b!==a&&(z.h(a,"number",C,"scrollVerticalLineChange"),0>a&&z.wa(a,">= 0",C,"scrollVerticalLineChange"),this.Lw=a,this.i("scrollVerticalLineChange",b,a))});z.defineProperty(C,{U:"lastInput"},function(){return this.Ub},function(a){u&&z.l(a,Yf,C,"lastInput");this.Ub=a});z.defineProperty(C,{Mc:"firstInput"},function(){return this.Zi},function(a){u&&z.l(a,Yf,C,"firstInput");this.Zi=a});
z.defineProperty(C,{lc:"currentCursor"},function(){return this.Cv},function(a){""===a&&(a=this.Er);var b=this.Cv;if(b!==a){z.h(a,"string",C,"currentCursor");var c=this.Lb,d=this.Tb;null!==c&&(this.Cv=a,c.style.cursor=a,d.style.cursor=a,c.style.cursor===b&&(c.style.cursor="-webkit-"+a,d.style.cursor="-webkit-"+a,c.style.cursor===b&&(c.style.cursor="-moz-"+a,d.style.cursor="-moz-"+a,c.style.cursor===b&&(c.style.cursor=a,d.style.cursor=a))))}});
z.defineProperty(C,{pL:"defaultCursor"},function(){return this.Er},function(a){""===a&&(a="auto");var b=this.Er;b!==a&&(z.h(a,"string",C,"defaultCursor"),this.Er=a,this.i("defaultCursor",b,a))});z.defineProperty(C,{click:"click"},function(){return this.Pi},function(a){var b=this.Pi;b!==a&&(null!==a&&z.h(a,"function",C,"click"),this.Pi=a,this.i("click",b,a))});
z.defineProperty(C,{au:"doubleClick"},function(){return this.Wi},function(a){var b=this.Wi;b!==a&&(null!==a&&z.h(a,"function",C,"doubleClick"),this.Wi=a,this.i("doubleClick",b,a))});z.defineProperty(C,{oA:"contextClick"},function(){return this.Ri},function(a){var b=this.Ri;b!==a&&(null!==a&&z.h(a,"function",C,"contextClick"),this.Ri=a,this.i("contextClick",b,a))});
z.defineProperty(C,{eB:"mouseOver"},function(){return this.jj},function(a){var b=this.jj;b!==a&&(null!==a&&z.h(a,"function",C,"mouseOver"),this.jj=a,this.i("mouseOver",b,a))});z.defineProperty(C,{dB:"mouseHover"},function(){return this.ij},function(a){var b=this.ij;b!==a&&(null!==a&&z.h(a,"function",C,"mouseHover"),this.ij=a,this.i("mouseHover",b,a))});
z.defineProperty(C,{cB:"mouseHold"},function(){return this.hj},function(a){var b=this.hj;b!==a&&(null!==a&&z.h(a,"function",C,"mouseHold"),this.hj=a,this.i("mouseHold",b,a))});z.defineProperty(C,{JJ:"mouseDragOver"},function(){return this.qw},function(a){var b=this.qw;b!==a&&(null!==a&&z.h(a,"function",C,"mouseDragOver"),this.qw=a,this.i("mouseDragOver",b,a))});
z.defineProperty(C,{bB:"mouseDrop"},function(){return this.gj},function(a){var b=this.gj;b!==a&&(null!==a&&z.h(a,"function",C,"mouseDrop"),this.gj=a,this.i("mouseDrop",b,a))});z.defineProperty(C,{LB:"toolTip"},function(){return this.sj},function(a){var b=this.sj;b!==a&&(!u||null===a||a instanceof ea||a instanceof bk||z.k("Diagram.toolTip must be an Adornment or HTMLInfo."),this.sj=a,this.i("toolTip",b,a))});
z.defineProperty(C,{contextMenu:"contextMenu"},function(){return this.Si},function(a){var b=this.Si;b!==a&&(!u||a instanceof ea||a instanceof bk||z.k("Diagram.contextMenu must be an Adornment or HTMLInfo."),this.Si=a,this.i("contextMenu",b,a))});z.defineProperty(C,{xb:"commandHandler"},function(){return this.$y},function(a){var b=this.$y;b!==a&&(z.l(a,ta,C,"commandHandler"),null!==a.g&&z.k("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.$c(null),this.$y=a,a.$c(this))});
z.defineProperty(C,{ib:"toolManager"},function(){return this.aA},function(a){var b=this.aA;b!==a&&(z.l(a,Kh,C,"toolManager"),null!==a.g&&z.k("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.$c(null),this.aA=a,a.$c(this))});z.defineProperty(C,{$t:"defaultTool"},function(){return this.fz},function(a){var b=this.fz;b!==a&&(z.l(a,bh,C,"defaultTool"),this.fz=a,this.fb===b&&(this.fb=a))});
z.defineProperty(C,{fb:"currentTool"},function(){return this.cz},function(a){var b=this.cz;null!==b&&(b.ya&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());null===a&&(a=this.$t);null!==a&&(z.l(a,bh,C,"currentTool"),this.cz=a,a.$c(this),a.doStart())});z.w(C,{selection:"selection"},function(){return this.Ow});
z.defineProperty(C,{AJ:"maxSelectionCount"},function(){return this.lw},function(a){var b=this.lw;if(b!==a)if(z.h(a,"number",C,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.lw=a,this.i("maxSelectionCount",b,a),!this.sa.lb&&(a=this.selection.count-a,0<a)){this.Ka("ChangingSelection");for(var b=this.selection.nc(),c=0;c<a;c++)b[c].gb=!1;this.Ka("ChangedSelection")}}else z.wa(a,">= 0",C,"maxSelectionCount")});
z.defineProperty(C,{MJ:"nodeSelectionAdornmentTemplate"},function(){return this.rw},function(a){var b=this.rw;b!==a&&(z.l(a,ea,C,"nodeSelectionAdornmentTemplate"),this.rw=a,this.i("nodeSelectionAdornmentTemplate",b,a))});z.defineProperty(C,{SI:"groupSelectionAdornmentTemplate"},function(){return this.Rv},function(a){var b=this.Rv;b!==a&&(z.l(a,ea,C,"groupSelectionAdornmentTemplate"),this.Rv=a,this.i("groupSelectionAdornmentTemplate",b,a))});
z.defineProperty(C,{uJ:"linkSelectionAdornmentTemplate"},function(){return this.hw},function(a){var b=this.hw;b!==a&&(z.l(a,ea,C,"linkSelectionAdornmentTemplate"),this.hw=a,this.i("linkSelectionAdornmentTemplate",b,a))});z.w(C,{om:"highlighteds"},function(){return this.Vv});
z.defineProperty(C,{Fi:"isModified"},function(){var a=this.sa;return a.isEnabled?null!==a.zj?!0:this.Dz&&this.rh!==a.Ej:this.Dz},function(a){if(this.Dz!==a){z.h(a,"boolean",C,"isModified");this.Dz=a;var b=this.sa;!a&&b.isEnabled&&(this.rh=b.Ej);a||$m(this)}});function $m(a){var b=a.Fi;a.nE!==b&&(a.nE=b,a.Ka("Modified"))}
z.defineProperty(C,{ia:"model"},function(){return this.xe},function(a){var b=this.xe;if(b!==a){z.l(a,L,C,"model");this.fb.doCancel();null!==b&&b.sa!==a.sa&&b.sa.JF&&z.k("Do not replace a Diagram.model while a transaction is in progress.");this.Ya.Ii();this.ox();this.sh=!1;this.Zo=!0;this.rh=-2;this.Zf=!1;var c=this.ie;this.ie=!0;this.Ya.ko("Model");null!==b&&(null!==this.vh&&this.vh.each(function(a){b.Ou(a)}),b.Ou(this.tD),b instanceof X&&an(this,b.Xg),an(this,b.ng));this.xe=a;a.An(this.sD);bn(this,
a.ng);a instanceof X&&cn(this,a.Xg);a.Ou(this.sD);a.An(this.tD);null!==this.vh&&this.vh.each(function(b){a.An(b)});this.ie=c;this.cd||this.ra();null!==b&&(a.sa.isEnabled=b.sa.isEnabled)}});z.defineProperty(C,{ab:null},function(){return this.kD},function(a){this.kD=a});z.w(C,{$x:null},function(){return this.nH});
function Bl(a,b){if(b.ia===a.ia){var c=b.Kc,d=b.propertyName;if(c===rg&&"S"===d[0])if("StartingFirstTransaction"===d)c=a.ib,c.nf.each(function(b){b.$c(a)}),c.jg.each(function(b){b.$c(a)}),c.kg.each(function(b){b.$c(a)}),a.ie||a.sh||(a.Jv=!0,a.Zo&&(a.Zf=!0));else if("StartingUndo"===d||"StartingRedo"===d){var e=a.Ya;e.wf&&!a.Eb&&e.Ii();a.Ka("ChangingSelection")}else"StartedTransaction"===d&&(e=a.Ya,e.wf&&!a.Eb&&e.Ii());else if(a.ab){a.ab=!1;try{var g=b.Af;if(""!==g)if(c===bg){if("linkFromKey"===g){var h=
b.object,k=a.cg(h);if(null!==k){var l=b.newValue,m=a.Re(l);k.aa=m}}else if("linkToKey"===g)h=b.object,k=a.cg(h),null!==k&&(l=b.newValue,m=a.Re(l),k.ea=m);else if("linkFromPortId"===g){if(h=b.object,k=a.cg(h),null!==k){var n=b.newValue;"string"===typeof n&&(k.dg=n)}}else if("linkToPortId"===g)h=b.object,k=a.cg(h),null!==k&&(n=b.newValue,"string"===typeof n&&(k.ih=n));else if("nodeGroupKey"===g){var h=b.object,p=a.Mh(h);if(null!==p){var q=b.newValue;if(void 0!==q){var r=a.Re(q);p.Qa=r instanceof F?
r:null}else p.Qa=null}}else if("linkLabelKeys"===g){if(h=b.object,k=a.cg(h),null!==k){var s=b.oldValue,v=b.newValue;if(z.isArray(s))for(var t=z.bb(s),x=0;x<t;x++){var y=z.Ma(s,x),m=a.Re(y);null!==m&&(m.Cc=null)}if(z.isArray(v))for(t=z.bb(v),x=0;x<t;x++)y=z.Ma(v,x),m=a.Re(y),null!==m&&(m.Cc=k)}}else if("nodeParentKey"===g){var B=b.object,A=a.Re(b.newValue),N=a.Ex(B);if(null!==N){var G=N.Pn();null!==G?null===A?a.remove(G):a.ae?G.aa=A:G.ea=A:dn(a,A,N)}}else if("parentLinkCategory"===g){var B=b.object,
N=a.Ex(B),T=b.newValue;null!==N&&"string"===typeof T&&(G=N.Pn(),null!==G&&(G.rc=T))}else if("nodeCategory"===g){var h=b.object,fa=a.Mh(h),T=b.newValue;null!==fa&&"string"===typeof T&&(fa.rc=T)}else if("linkCategory"===g){var h=b.object,W=a.cg(h),T=b.newValue;null!==W&&"string"===typeof T&&(W.rc=T)}else if("nodeDataArray"===g){var P=b.oldValue;an(a,P);var aa=b.newValue;bn(a,aa)}else"linkDataArray"===g&&(P=b.oldValue,an(a,P),aa=b.newValue,cn(a,aa));a.Fi=!0}else c===sg?(aa=b.newValue,"nodeDataArray"===
g&&z.Xa(aa)?en(a,aa):"linkDataArray"===g&&z.Xa(aa)?fn(a,aa):"linkLabelKeys"===g&&fh(aa)&&(k=a.cg(b.object),m=a.Re(aa),null!==k&&null!==m&&(m.Cc=k)),a.Fi=!0):c===tg?(P=b.oldValue,"nodeDataArray"===g&&z.Xa(P)?gn(a,P):"linkDataArray"===g&&z.Xa(P)?gn(a,P):"linkLabelKeys"===g&&fh(P)&&(m=a.Re(P),null!==m&&(m.Cc=null)),a.Fi=!0):c===rg&&("SourceChanged"===g?null!==b.object?Al(a,b.object,b.propertyName):(a.DK(),a.aH()):"ModelDisplaced"===g&&a.vm());else if(c===bg){var Oa=b.propertyName,h=b.object;if(h===a.ia){if("nodeKeyProperty"===
Oa||"nodeCategoryProperty"===Oa||"linkFromKeyProperty"===Oa||"linkToKeyProperty"===Oa||"linkFromPortIdProperty"===Oa||"linkToPortIdProperty"===Oa||"linkLabelKeysProperty"===Oa||"nodeIsGroupProperty"===Oa||"nodeGroupKeyProperty"===Oa||"nodeParentKeyProperty"===Oa||"linkCategoryProperty"===Oa)a.sa.lb||a.vm()}else Al(a,h,Oa);a.Fi=!0}else if(c===sg||c===tg)hn(a,b),a.Fi=!0;else if(c===rg){if("FinishedUndo"===d||"FinishedRedo"===d)a.sa.bj=!0,a.Ka("ChangedSelection"),Li(a),a.sa.bj=!1;e=a.Ya;"RolledBackTransaction"===
d&&e.Ii();a.Jv=!0;a.hg();0===a.sa.Vh&&Vk(e);"CommittedTransaction"===d&&a.sa.Fz&&(a.rh=Math.min(a.rh,a.sa.Ej-1));var sa=b.NF;sa&&($m(a),a.$x.clear());!a.Mz&&sa&&(a.Mz=!0,z.setTimeout(function(){a.fb.standardMouseOver();a.Mz=!1},10))}}finally{a.ab=!0}}}}
function Al(a,b,c){if("string"===typeof c){var d=a.Mh(b);if(null!==d)d.Nb(c),a.ia instanceof Cg&&(d=a.cg(b),null!==d&&d.Nb(c));else{for(var d=null,e=a.Um.j;e.next();){for(var g=e.value,h=0;h<g.length;h++){var k=g[h].CI(b);null!==k&&(null===d&&(d=z.tb()),d.push(k))}if(null!==d)break}if(null!==d){for(e=0;e<d.length;e++)d[e].Nb(c);z.Ba(d)}}b===a.ia.Xk&&a.aH(c)}}z.defineProperty(C,{Ve:"skipsModelSourceBindings"},function(){return this.PD},function(a){this.PD=a});
z.defineProperty(C,{Zu:null},function(){return this.Wz},function(a){this.Wz=a});function hn(a,b){var c=b.Kc===sg,d=c?b.Mj:b.Oj,e=c?b.newValue:b.oldValue,g=a.Um.qa(b.object);if(Array.isArray(g))for(var h=0;h<g.length;h++){var k=g[h];if(c)jn(k,e,d);else{var l=d;if(!(0>l)){var m=l;kn(k)&&m++;k.vf(m);ln(k,m,l)}}}}function Om(a,b){var c=b.cj;if(z.isArray(c)){var d=a.Um.qa(c);if(null===d)d=[],d.push(b),a.Um.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Sm(a,b){var c=b.cj;if(z.isArray(c)){var d=a.Um.qa(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Um.remove(c);break}}}function Nm(a,b){for(var c=b.va.o,d=c.length,e=0;e<d;e++){var g=c[e];g instanceof Cl&&mn(a,g)}}
function mn(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var d=b.Ze;null!==d&&(d.bp instanceof Event&&null!==b.$e&&b.$e(b,d.bp),!0===d.aw&&(null!==b.wi&&b.wi(b,d.Rz),null!==b.g&&b.g.Pz.add(b)));c=c.src;d=a.Ap.qa(c);if(null===d)d=[],d.push(b),a.Ap.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}function Rm(a,b){for(var c=b.va.o,d=c.length,e=0;e<d;e++){var g=c[e];g instanceof Cl&&nn(a,g)}}
function nn(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var c=c.src,d=a.Ap.qa(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Ap.remove(c);break}}}
C.prototype.rebuildParts=C.prototype.vm=function(){for(var a=this.iB.j;a.next();){var b=a.value,c=a.key;(!b.qe()||b instanceof F)&&z.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+c+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.MA.j;a.next();)b=a.value,c=a.key,b instanceof F||z.k('Invalid group template in Diagram.groupTemplateMap: template for "'+c+'" must be a Group, not a normal Node or Link: '+b);for(a=this.VA.j;a.next();)b=a.value,c=a.key,b instanceof
H||z.k('Invalid link template in Diagram.linkTemplateMap: template for "'+c+'" must be a Link, not a normal Node or simple Part: '+b);a=z.tb();for(b=this.selection.j;b.next();)(c=b.value.data)&&a.push(c);for(var b=z.tb(),d=this.om.j;d.next();)(c=d.value.data)&&b.push(c);c=z.tb();for(d=this.og.j;d.next();){var e=d.value;null!==e.data&&(c.push(e.data),c.push(e.location))}for(d=this.links.j;d.next();)e=d.value,null!==e.data&&(c.push(e.data),c.push(e.location));for(d=this.Gi.j;d.next();)e=d.value,null!==
e.data&&(c.push(e.data),c.push(e.location));d=this.ia;d instanceof X&&an(this,d.Xg);an(this,d.ng);bn(this,d.ng);d instanceof X&&cn(this,d.Xg);for(d=0;d<a.length;d++)e=this.Mh(a[d]),null!==e&&(e.gb=!0);for(d=0;d<b.length;d++)e=this.Mh(b[d]),null!==e&&(e.Wg=!0);for(d=0;d<c.length;d+=2)e=this.Mh(c[d]),null!==e&&(e.location=c[d+1]);z.Ba(a);z.Ba(b);z.Ba(c)};
function bn(a,b){if(null!==b){for(var c=a.ia,d=c instanceof X,e=z.bb(b),g=0;g<e;g++){var h=z.Ma(b,g);c.ke(h)?en(a,h,!1):d&&fn(a,h)}if(d||c instanceof Cg){for(g=0;g<e;g++)h=z.Ma(b,g),c.ke(h)&&on(a,h);if(d)for(c=a.links;c.next();)pn(c.value)}qn(a,!1)}}function en(a,b,c){if(void 0!==b&&null!==b&&!a.sa.lb&&!a.Ti.contains(b)){void 0===c&&(c=!0);var d=a.IA(b),e=rn(a,b,d);if(null!==e&&(Nh(e),e=e.copy(),null!==e)){var g=a.Ve;a.Ve=!0;e.Ni=d;e.ge=b;a.add(e);e.ge=null;e.data=b;c&&on(a,b);a.Ve=g}}}
C.prototype.IA=function(a){return this.ia.IA(a)};var sn=!1,tn=!1;function rn(a,b,c){var d=!1,e=a.ia;e instanceof X&&(d=e.SA(b));d?(b=a.MA.qa(c),null===b&&(b=a.MA.qa(""),null===b&&(tn||(tn=!0,z.trace('No Group template found for category "'+c+'"'),z.trace("  Using default group template")),b=a.BC))):(b=a.iB.qa(c),null===b&&(b=a.iB.qa(""),null===b&&(sn||(sn=!0,z.trace('No Node template found for category "'+c+'"'),z.trace("  Using default node template")),b=a.DC)));return b}
function on(a,b){var c=a.ia;if(c instanceof X||c instanceof Cg){var d=c.Cb(b);if(void 0!==d){var e=ih(c,d),g=a.Mh(b);if(null!==e&&null!==g){for(e=e.j;e.next();){var h=e.value;if(c instanceof X){var k=c;if(k.ke(h)){if(g instanceof F&&k.Sn(h)===d){var l=g,h=a.Mh(h);null!==h&&(h.Qa=l)}}else{var m=a.cg(h);if(null!==m&&g instanceof E&&(l=g,k.mm(h)===d&&(m.aa=l),k.nm(h)===d&&(m.ea=l),h=k.Rk(h),z.isArray(h)))for(k=0;k<z.bb(h);k++)if(z.Ma(h,k)===d){l.Cc=m;break}}}else c instanceof Cg&&(m=c,m.ke(h)&&g instanceof
E&&(l=g,m.Un(h)===d&&(h=a.Ex(h),dn(a,l,h))))}kh(c,d)}c instanceof X?(c=c.Sn(b),void 0!==c&&(c=a.Re(c),c instanceof F&&(g.Qa=c))):c instanceof Cg&&(c=c.Un(b),void 0!==c&&g instanceof E&&(l=g,g=a.Re(c),dn(a,g,l)))}}}
function dn(a,b,c){if(null!==b&&null!==c){var d=a.ib.TF,e=b,g=c;if(a.ae)for(b=g.Jd;b.next();){if(b.value.ea===g)return}else for(e=c,g=b,b=e.Jd;b.next();)if(b.value.aa===e)return;if(null===d||!aj(d,e,g,null,!0))if(d=a.Hx(c.data),b=un(a,d),null!==b&&(Nh(b),b=b.copy(),null!==b)){var h=a.Ve;a.Ve=!0;b.Ni=d;b.ge=c.data;b.aa=e;b.ea=g;a.add(b);b.ge=null;b.data=c.data;a.Ve=h}}}function cn(a,b){if(null!==b){for(var c=z.bb(b),d=0;d<c;d++){var e=z.Ma(b,d);fn(a,e)}qn(a,!1)}}
function fn(a,b){if(void 0!==b&&null!==b&&!a.sa.lb&&!a.Zj.contains(b)){var c=a.Hx(b),d=un(a,c);if(null!==d&&(Nh(d),d=d.copy(),null!==d)){var e=a.Ve;a.Ve=!0;d.Ni=c;d.ge=b;var c=a.ia,g=c.JI(b);""!==g&&(d.dg=g);g=c.mm(b);void 0!==g&&(g=a.Re(g),g instanceof E&&(d.aa=g));g=c.NI(b);""!==g&&(d.ih=g);g=c.nm(b);void 0!==g&&(g=a.Re(g),g instanceof E&&(d.ea=g));c=c.Rk(b);if(z.isArray(c))for(var g=z.bb(c),h=0;h<g;h++){var k=z.Ma(c,h),k=a.Re(k);null!==k&&(k.Cc=d)}a.add(d);d.ge=null;d.data=b;a.Ve=e}}}
C.prototype.Hx=function(a){var b=this.ia,c="";b instanceof X?c=b.Hx(a):b instanceof Cg&&(c=b.LI(a));return c};var vn=!1;function un(a,b){var c=a.VA.qa(b);null===c&&(c=a.VA.qa(""),null===c&&(vn||(vn=!0,z.trace('No Link template found for category "'+b+'"'),z.trace("  Using default link template")),c=a.CC));return c}function an(a,b){for(var c=z.bb(b),d=0;d<c;d++){var e=z.Ma(b,d);gn(a,e)}}
function gn(a,b){if(void 0!==b&&null!==b){var c=a.Mh(b);if(null!==c){Tm(a,c,!1);var d=a.ia;if(d instanceof X&&c instanceof E){var e=d.Cb(c.data);if(void 0!==e){for(var g=c.Jd;g.next();)jh(d,e,g.value.data);c.xf&&(g=c.Cc,null!==g&&jh(d,e,g.data));if(c instanceof F)for(c=c.Oc;c.next();)g=c.value.data,d.ke(g)&&jh(d,e,g)}}else if(d instanceof Cg&&c instanceof E){g=a.cg(c.data);if(null!==g){g.gb=!1;g.Wg=!1;var h=g.layer;if(null!==h){var k=h.vf(-1,g,!1);0<=k&&a.ld(tg,"parts",h,g,null,k,null);k=g.Yx;null!==
k&&k(g,h,null)}}g=a.ae;for(c=c.Jd;c.next();)h=c.value,h=(g?h.ea:h.aa).data,d.ke(h)&&jh(d,e,h)}}}}C.prototype.findPartForKey=C.prototype.DI=function(a){if(null===a||void 0===a)return null;var b=this.ia.Ge(a);return null!==b?this.Ti.qa(b):this.ia instanceof X&&(b=this.ia.jq(a),null!==b)?this.Zj.qa(b):null};C.prototype.findNodeForKey=C.prototype.Re=function(a){if(null===a||void 0===a)return null;a=this.ia.Ge(a);if(null===a)return null;a=this.Ti.qa(a);return a instanceof E?a:null};
C.prototype.findPartForData=C.prototype.Mh=function(a){if(null===a)return null;var b=this.Ti.qa(a);return null!==b?b:b=this.Zj.qa(a)};C.prototype.findNodeForData=C.prototype.Ex=function(a){if(null===a)return null;a=this.Ti.qa(a);return a instanceof E?a:null};C.prototype.findLinkForData=C.prototype.cg=function(a){return null===a?null:this.Zj.qa(a)};
C.prototype.findNodesByExample=function(a){for(var b=new K,c=this.yp.j;c.next();){var d=c.value,e=d.data;if(null!==e)for(var g=0;g<arguments.length;g++){var h=arguments[g];if(z.Xa(h)&&wn(this,e,h)){b.add(d);break}}}return b.j};C.prototype.findLinksByExample=function(a){for(var b=new K,c=this.rp.j;c.next();){var d=c.value,e=d.data;if(null!==e)for(var g=0;g<arguments.length;g++){var h=arguments[g];if(z.Xa(h)&&wn(this,e,h)){b.add(d);break}}}return b.j};
function wn(a,b,c){for(var d in c){var e=b[d],g=c[d];if(z.isArray(g)){if(!z.isArray(e)||e.length<g.length)return!1;for(var h=0;h<e.length;h++){var k=e[h],l=g[h];if(void 0!==l&&!xn(a,k,l))return!1}}else if(!xn(a,e,g))return!1}return!0}function xn(a,b,c){if("function"===typeof c){if(!c(b))return!1}else if(c instanceof RegExp){if(!b||!c.test(b.toString()))return!1}else if(z.Xa(b)&&z.Xa(c)){if(!wn(a,b,c))return!1}else if(b!==c)return!1;return!0}
z.defineProperty(C,{eM:"nodeTemplate"},function(){return this.kj.qa("")},function(a){var b=this.kj.qa("");b!==a&&(z.l(a,D,C,"nodeTemplate"),this.kj.add("",a),this.i("nodeTemplate",b,a),this.sa.lb||this.vm())});z.defineProperty(C,{iB:"nodeTemplateMap"},function(){return this.kj},function(a){var b=this.kj;b!==a&&(z.l(a,oa,C,"nodeTemplateMap"),this.kj=a,this.i("nodeTemplateMap",b,a),this.sa.lb||this.vm())});
z.defineProperty(C,{HL:"groupTemplate"},function(){return this.ul.qa("")},function(a){var b=this.ul.qa("");b!==a&&(z.l(a,F,C,"groupTemplate"),this.ul.add("",a),this.i("groupTemplate",b,a),this.sa.lb||this.vm())});z.defineProperty(C,{MA:"groupTemplateMap"},function(){return this.ul},function(a){var b=this.ul;b!==a&&(z.l(a,oa,C,"groupTemplateMap"),this.ul=a,this.i("groupTemplateMap",b,a),this.sa.lb||this.vm())});
z.defineProperty(C,{TL:"linkTemplate"},function(){return this.pk.qa("")},function(a){var b=this.pk.qa("");b!==a&&(z.l(a,H,C,"linkTemplate"),this.pk.add("",a),this.i("linkTemplate",b,a),this.sa.lb||this.vm())});z.defineProperty(C,{VA:"linkTemplateMap"},function(){return this.pk},function(a){var b=this.pk;b!==a&&(z.l(a,oa,C,"linkTemplateMap"),this.pk=a,this.i("linkTemplateMap",b,a),this.sa.lb||this.vm())});z.defineProperty(C,{gJ:null},function(){return this.Sm},function(a){this.Sm=a});
z.defineProperty(C,{lf:"isMouseCaptured"},function(){return this.hD},function(a){var b=this.Lb;null!==b&&(a?(this.U.bubbles=!1,b.removeEventListener("mousemove",this.Bq,!1),b.removeEventListener("mousedown",this.Aq,!1),b.removeEventListener("mouseup",this.Dq,!1),b.removeEventListener("mousewheel",this.Qh,!1),b.removeEventListener("DOMMouseScroll",this.Qh,!1),b.removeEventListener("mouseout",this.Cq,!1),window.addEventListener("mousemove",this.Bq,!0),window.addEventListener("mousedown",this.Aq,!0),
window.addEventListener("mouseup",this.Dq,!0),window.addEventListener("mousewheel",this.Qh,!0),window.addEventListener("DOMMouseScroll",this.Qh,!0),window.addEventListener("mouseout",this.Cq,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.Bq,!0),window.removeEventListener("mousedown",this.Aq,!0),window.removeEventListener("mouseup",this.Dq,!0),window.removeEventListener("mousewheel",this.Qh,!0),window.removeEventListener("DOMMouseScroll",
this.Qh,!0),window.removeEventListener("mouseout",this.Cq,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.Bq,!1),b.addEventListener("mousedown",this.Aq,!1),b.addEventListener("mouseup",this.Dq,!1),b.addEventListener("mousewheel",this.Qh,!1),b.addEventListener("DOMMouseScroll",this.Qh,!1),b.addEventListener("mouseout",this.Cq,!1)),this.hD=a)});
z.defineProperty(C,{position:"position"},function(){return this.ub},function(a){var b=this.ub;if(!b.O(a)){z.l(a,M,C,"position");var c=this.yb.copy();a=a.copy();if(!this.cd&&null!==this.Lb){this.cd=!0;var d=this.scale;Tl(this,a,this.fd,this.Ob/d,this.Sb/d,this.Jo,!1);this.cd=!1}this.ub=a.V();a=this.Ya;a.yc&&ml(a,b,this.ub);this.cd||this.Lu(c,this.yb,this.Rb,this.Rb,!1)}});
z.defineProperty(C,{ZI:"initialPosition"},function(){return this.Xv},function(a){this.Xv.O(a)||(z.l(a,M,C,"initialPosition"),this.Xv=a.V())});z.defineProperty(C,{$I:"initialScale"},function(){return this.Yv},function(a){this.Yv!==a&&(z.h(a,"number",C,"initialScale"),this.Yv=a)});
z.defineProperty(C,{Vn:"grid"},function(){null===this.Cd&&Ml(this);return this.Cd},function(a){var b=this.Cd;if(b!==a){null===b&&(Ml(this),b=this.Cd);z.l(a,I,C,"grid");a.type!==Nl&&z.k("Diagram.grid must be a Panel of type Panel.Grid");var c=b.Q;null!==c&&c.remove(b);this.Cd=a;a.name="GRID";null!==c&&c.add(a);dm(this);this.ra();this.i("grid",b,a)}});
z.w(C,{yb:"viewportBounds"},function(){var a=this.mE;if(null===this.Lb)return a;var b=this.ub,c=this.Rb;a.m(b.x,b.y,Math.max(this.Ob,0)/c,Math.max(this.Sb,0)/c);return a});z.defineProperty(C,{jF:"fixedBounds"},function(){return this.Pv},function(a){var b=this.Pv;b.O(a)||(z.l(a,w,C,"fixedBounds"),(u&&Infinity===a.width||-Infinity===a.width||Infinity===a.height||-Infinity===a.height)&&z.k("fixedBounds width/height must not be Infinity"),this.Pv=a=a.V(),this.Bc(),this.i("fixedBounds",b,a))});
z.defineProperty(C,{xG:"scrollMargin"},function(){return this.Iw},function(a){"number"===typeof a?a=new Kb(a):z.l(a,Kb,C,"scrollMargin");var b=this.Iw;b.O(a)||(this.Iw=a=a.V(),this.Bc(),this.i("scrollMargin",b,a))});z.defineProperty(C,{uB:"scrollMode"},function(){return this.Jw},function(a){var b=this.Jw;b!==a&&(z.Ca(a,C,C,"scrollMode"),this.Jw=a,a===xl&&Rl(this,!1),this.i("scrollMode",b,a))});
z.defineProperty(C,{fG:"positionComputation"},function(){return this.Bw},function(a){var b=this.Bw;b!==a&&(null!==a&&z.h(a,"function",C,"positionComputation"),this.Bw=a,Rl(this,!1),this.i("positionComputation",b,a))});z.defineProperty(C,{wG:"scaleComputation"},function(){return this.Fw},function(a){var b=this.Fw;b!==a&&(null!==a&&z.h(a,"function",C,"scaleComputation"),this.Fw=a,Wm(this,this.scale,this.scale),this.i("scaleComputation",b,a))});z.w(C,{fd:"documentBounds"},function(){return this.Kv});
function Ul(a,b){a.ik=!1;var c=a.Kv;c.O(b)||(b=b.V(),a.Kv=b,Rl(a,!1),a.Ka("DocumentBoundsChanged",null,c.copy()),am(a))}z.defineProperty(C,{scale:"scale"},function(){return this.Rb},function(a){var b=this.Rb;z.p(a,C,"scale");b!==a&&Wm(this,b,a)});z.defineProperty(C,{Zl:"autoScale"},function(){return this.Gm},function(a){var b=this.Gm;b!==a&&(z.Ca(a,C,C,"autoScale"),this.Gm=a,this.i("autoScale",b,a),a!==Qh&&Rl(this,!1))});
z.defineProperty(C,{KL:"initialAutoScale"},function(){return this.yl},function(a){var b=this.yl;b!==a&&(z.Ca(a,C,C,"initialAutoScale"),this.yl=a,this.i("initialAutoScale",b,a))});z.defineProperty(C,{aJ:"initialViewportSpot"},function(){return this.Zv},function(a){var b=this.Zv;b!==a&&(z.l(a,R,C,"initialViewportSpot"),a.jd()||z.k("initialViewportSpot must be a specific Spot: "+a),this.Zv=a,this.i("initialViewportSpot",b,a))});
z.defineProperty(C,{YI:"initialDocumentSpot"},function(){return this.Wv},function(a){var b=this.Wv;b!==a&&(z.l(a,R,C,"initialDocumentSpot"),a.jd()||z.k("initialViewportSpot must be a specific Spot: "+a),this.Wv=a,this.i("initialDocumentSpot",b,a))});z.defineProperty(C,{Ph:"minScale"},function(){return this.nw},function(a){z.p(a,C,"minScale");var b=this.nw;b!==a&&(0<a?(this.nw=a,this.i("minScale",b,a),a>this.scale&&(this.scale=a)):z.wa(a,"> 0",C,"minScale"))});
z.defineProperty(C,{Oh:"maxScale"},function(){return this.kw},function(a){z.p(a,C,"maxScale");var b=this.kw;b!==a&&(0<a?(this.kw=a,this.i("maxScale",b,a),a<this.scale&&(this.scale=a)):z.wa(a,"> 0",C,"maxScale"))});z.defineProperty(C,{Dm:"zoomPoint"},function(){return this.ax},function(a){this.ax.O(a)||(z.l(a,M,C,"zoomPoint"),this.ax=a=a.V())});
z.defineProperty(C,{JE:"contentAlignment"},function(){return this.Jo},function(a){var b=this.Jo;b.O(a)||(z.l(a,R,C,"contentAlignment"),this.Jo=a=a.V(),this.i("contentAlignment",b,a),Rl(this,!1))});z.defineProperty(C,{LL:"initialContentAlignment"},function(){return this.ep},function(a){var b=this.ep;b.O(a)||(z.l(a,R,C,"initialContentAlignment"),this.ep=a=a.V(),this.i("initialContentAlignment",b,a))});
z.defineProperty(C,{padding:"padding"},function(){return this.sf},function(a){"number"===typeof a?a=new Kb(a):z.l(a,Kb,C,"padding");var b=this.sf;b.O(a)||(this.sf=a=a.V(),this.Bc(),this.i("padding",b,a))});z.w(C,{og:"nodes"},function(){return this.yp.j});z.w(C,{links:"links"},function(){return this.rp.j});z.w(C,{Gi:"parts"},function(){return this.pb.j});
C.prototype.findTopLevelNodesAndLinks=function(){for(var a=new K(D),b=this.yp.j;b.next();){var c=b.value;c.vq&&a.add(c)}for(b=this.rp.j;b.next();)c=b.value,c.vq&&a.add(c);return a.j};C.prototype.findTopLevelGroups=function(){return this.Pl.j};z.defineProperty(C,{Wb:"layout"},function(){return this.ve},function(a){var b=this.ve;b!==a&&(z.l(a,ch,C,"layout"),null!==b&&(b.g=null,b.group=null),this.ve=a,a.g=this,a.group=null,this.sv=!0,this.i("layout",b,a),this.Te())});
C.prototype.layoutDiagram=function(a){Li(this);a&&qn(this,!0);em(this,!1)};function qn(a,b){for(var c=a.Pl.j;c.next();)yn(a,c.value,b);null!==a.Wb&&(b?a.Wb.Jf=!1:a.Wb.N())}function yn(a,b,c){if(null!==b){for(var d=b.cn.j;d.next();)yn(a,d.value,c);null!==b.Wb&&(c?b.Wb.Jf=!1:b.Wb.N())}}
function em(a,b){if(!a.gz){var c=a.Wb,d=a.ab;a.ab=!0;try{var e=a.sa.Vh;0===e&&a.$b("Layout");var g=a.Ya;1!==a.sa.Vh||g.wf||g.yc||b||g.ko("Layout");for(var h=a.Pl.j;h.next();)zn(a,h.value,b);c.Jf||b&&!c.MF&&0!==e||(c.doLayout(a),Li(a),c.Jf=!0)}finally{0===e&&a.Vd("Layout"),a.sv=!c.Jf,a.ab=d}}}function zn(a,b,c){if(null!==b){for(var d=b.cn.j;d.next();)zn(a,d.value,c);d=b.Wb;null===d||d.Jf||c&&!d.MF||(b.io=!b.location.F(),d.doLayout(b),b.N(An),d.Jf=!0,Bm(a,b))}}
z.defineProperty(C,{ae:"isTreePathToChildren"},function(){return this.dw},function(a){var b=this.dw;if(b!==a&&(z.h(a,"boolean",C,"isTreePathToChildren"),this.dw=a,this.i("isTreePathToChildren",b,a),!this.sa.lb))for(a=this.og;a.next();)Bn(a.value)});C.prototype.findTreeRoots=function(){for(var a=new J(E),b=this.og;b.next();){var c=b.value;c.vq&&null===c.Pn()&&a.add(c)}return a.j};
z.defineProperty(C,{OB:"treeCollapsePolicy"},function(){return this.Ww},function(a){var b=this.Ww;b!==a&&(a!==zl&&a!==Ym&&a!==Zm&&z.k("Unknown Diagram.treeCollapsePolicy: "+a),this.Ww=a,this.i("treeCollapsePolicy",b,a))});z.defineProperty(C,{Nh:null},function(){return this.$C},function(a){this.$C=a});
function yl(a){function b(a){var b=a.toLowerCase(),h=new J("function");c.add(a,h);c.add(b,h);d.add(a,a);d.add(b,a)}var c=new oa("string",J),d=new oa("string","string");b("AnimationStarting");b("AnimationFinished");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("Modified");
b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.iz=c;a.hz=d}
function Ia(a,b){var c=a.hz.qa(b);return null!==c?c:a.hz.qa(b.toLowerCase())}function Cn(a,b){var c=a.iz.qa(b);if(null!==c)return c;c=a.iz.qa(b.toLowerCase());if(null!==c)return c;z.k("Unknown DiagramEvent name: "+b);return null}C.prototype.addDiagramListener=C.prototype.gA=function(a,b){z.h(a,"string",C,"addDiagramListener:name");z.h(b,"function",C,"addDiagramListener:listener");var c=Cn(this,a);null!==c&&c.add(b)};
C.prototype.removeDiagramListener=C.prototype.jG=function(a,b){z.h(a,"string",C,"removeDiagramListener:name");z.h(b,"function",C,"addDiagramListener:listener");var c=Cn(this,a);null!==c&&c.remove(b)};
C.prototype.raiseDiagramEvent=C.prototype.Ka=function(a,b,c){u&&z.h(a,"string",C,"raiseDiagramEvent:name");var d=Cn(this,a),e=new $f;e.g=this;a=Ia(this,a);null!==a&&(e.name=a);void 0!==b&&(e.HB=b);void 0!==c&&(e.lB=c);b=d.length;if(1===b)d=d.fa(0),d(e);else if(0!==b)for(c=d.nc(),a=0;a<b;a++)d=c[a],d(e);return e.cancel};
function Ui(a,b){var c=!1;a.yb.Lk(b)&&(c=!0);c=a.CA(b,function(a){return a.ba},function(a){return a instanceof H},!0,function(a){return a instanceof H},c);if(0!==c.count)for(c=c.j;c.next();){var d=c.value;d.Di&&d.gc()}}C.prototype.isUnoccupied=C.prototype.tm=function(a,b){void 0===b&&(b=null);return ja(this,!1,null,b).tm(a.x,a.y,a.width,a.height)};
function ja(a,b,c,d){null===a.Sd&&(a.Sd=new Dn);if(a.Sd.rq||a.Sd.group!==c||a.Sd.GB!==d){if(null===c){b=a.ik?Ql(a):a.fd.copy();b.fg(100,100);a.Sd.initialize(b);b=z.Of();for(var e=a.og;e.next();){var g=e.value,h=g.layer;null!==h&&h.visible&&!h.Wc&&En(a,g,d,b)}}else for(c.Z.F()||c.kf(),b=c.Z.copy(),b.fg(20,20),a.Sd.initialize(b),b=z.Of(),e=c.Oc;e.next();)g=e.value,g instanceof E&&En(a,g,d,b);z.Mb(b);a.Sd.group=c;a.Sd.GB=d;a.Sd.rq=!1}else b&&Fn(a.Sd);return a.Sd}
function En(a,b,c,d){if(b!==c)if(b.isVisible()&&b.kA&&!b.xf){c=b.getAvoidableRect(d);d=a.Sd.Zp;b=a.Sd.Xp;for(var e=c.x+c.width,g=c.y+c.height,h=c.x;h<e;h+=d){for(var k=c.y;k<g;k+=b)Gn(a.Sd,h,k);Gn(a.Sd,h,g)}for(k=c.y;k<g;k+=b)Gn(a.Sd,e,k);Gn(a.Sd,e,g)}else if(b instanceof F)for(b=b.Oc;b.next();)e=b.value,e instanceof E&&En(a,e,c,d)}function Hn(a,b){null===a.Sd||a.Sd.rq||null!==b&&(!b.kA||b.xf)||(a.Sd.rq=!0)}
C.prototype.simulatedMouseMove=C.prototype.Ay=function(a,b,c){if(null!==Yh){var d=Yh.g;c instanceof C||(c=null);var e=Zh;c!==e&&(null!==e&&e!==d&&null!==e.ib.Ee&&(yi(e),Yh.Ox=!1,e.ib.Ee.doSimulatedDragLeave()),Zh=c,null!==c&&c!==d&&null!==c.ib.Ee&&(Ei(),e=c.ib.Ee,Ai.contains(e)||Ai.add(e),c.ib.Ee.doSimulatedDragEnter()));if(null===c||c===d||!c.wE||c.kb||!c.Vp)return!1;d=c.ib.Ee;null!==d&&(null!==a?b=c.ap(a):null===b&&(b=new M),c.Ub.ha=b,c.Ub.gm=!1,c.Ub.up=!1,d.doSimulatedDragOver());return!0}return!1};
C.prototype.simulatedMouseUp=C.prototype.HG=function(a,b,c,d){if(null!==Yh){null===d&&(d=b);b=Zh;var e=Yh.g;if(d!==b){if(null!==b&&b!==e&&null!==b.ib.Ee)return yi(b),Yh.Ox=!1,b.ib.Ee.doSimulatedDragLeave(),!1;Zh=d;null!==d&&null!==d.ib.Ee&&(Ei(),b=d.ib.Ee,Ai.contains(b)||Ai.add(b),d.ib.Ee.doSimulatedDragEnter())}if(null===d)return Yh.doCancel(),!0;if(d!==this)return null!==a&&(c=d.ap(a)),d.Ub.ha=c,d.Ub.gm=!1,d.Ub.up=!0,a=d.ib.Ee,null!==a&&a.doSimulatedDrop(),a=Yh,null!==a&&(d=a.mayCopy(),a.Qf=d?"Copy":
"Move",a.stopTool()),!0}return!1};z.defineProperty(C,{CE:"autoScrollRegion"},function(){return this.uv},function(a){"number"===typeof a?a=new Kb(a):z.l(a,Kb,C,"autoScrollRegion");var b=this.uv;b.O(a)||(this.uv=a=a.V(),this.Bc(),this.i("autoScrollRegion",b,a))});C.prototype.doAutoScroll=C.prototype.wA=function(a){this.tv.assign(a);In(this,this.tv).Vc(this.position)?yi(this):Jn(this)};
function Jn(a){-1===a.Do&&(a.Do=z.setTimeout(function(){if(-1!==a.Do){yi(a);var b=a.U.event;if(null!==b){var c=In(a,a.tv);c.Vc(a.position)||(a.position=c,a.U.ha=a.NB(a.tv),a.Ay(b,null,b.target.ca)||a.doMouseMove(),a.ik=!0,Ul(a,a.Jh()),a.Ne=!0,a.hg(),Jn(a))}}},a.gC))}function yi(a){-1!==a.Do&&(z.clearTimeout(a.Do),a.Do=-1)}
function In(a,b){var c=a.position,d=a.CE;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.yb,g=a.scale,e=z.fh(0,0,e.width*g,e.height*g),h=z.Fb(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var k=Math.max(a.Tu,1),k=k|0;h.x-=k;b.x<e.x+d.left/2&&(h.x-=k);b.x<e.x+d.left/4&&(h.x-=4*k)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(k=Math.max(a.Tu,1),k|=0,h.x+=k,b.x>e.x+e.width-d.right/2&&(h.x+=k),b.x>e.x+e.width-d.right/4&&(h.x+=4*k));b.y>=e.y&&b.y<e.y+d.top?(k=Math.max(a.Uu,1),k|=0,h.y-=k,b.y<e.y+
d.top/2&&(h.y-=k),b.y<e.y+d.top/4&&(h.y-=4*k)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(k=Math.max(a.Uu,1),k|=0,h.y+=k,b.y>e.y+e.height-d.bottom/2&&(h.y+=k),b.y>e.y+e.height-d.bottom/4&&(h.y+=4*k));h.Vc(Dd)||(c=new M(c.x+h.x/g,c.y+h.y/g));z.Mb(e);z.A(h);return c}C.prototype.makeSvg=C.prototype.makeSVG=function(a){void 0===a&&(a=new na);a.context="svg";a=Kn(this,a);return null!==a?a.ym:null};
C.prototype.makeImage=function(a){void 0===a&&(a=new na);var b=(a.document||document).createElement("img");b.src=this.vJ(a);return b};
C.prototype.makeImageData=C.prototype.vJ=function(a){void 0===a&&(a=new na);var b=Kn(this,a);if(null!==b){var c=a.returnType,c=void 0===c?"string":c.toLowerCase();switch(c){case "imagedata":return b.Mk.getImageData(0,0,b.width,b.height);case "blob":b=b.Fd;c=a.callback;if("function"!==typeof c){z.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');break}if("function"===typeof b.uK)return b.uK(c,a.type,a.details),"toBlob";if("function"===
typeof b.KJ)return c(b.KJ(a.type,a.details)),"msToBlob";c(null);break;default:return b.toDataURL(a.type,a.details)}}return""};var Ln=!1;
function Kn(a,b){a.Ya.Ii();a.hg();if(null===a.Lb)return null;"object"!==typeof b&&z.k("properties argument must be an Object.");var c=!1,d=b.size||null,e=b.scale||null;void 0!==b.scale&&isNaN(b.scale)&&(e="NaN");var g=b.maxSize;void 0===b.maxSize&&(c=!0,g="svg"===b.context?new Fa(Infinity,Infinity):new Fa(2E3,2E3));var h=b.position||null,k=b.parts||null,l=void 0===b.padding?1:b.padding,m=b.background||null,n=b.omitTemporary;void 0===n&&(n=!0);var p=b.document||document,q=b.elementFinished||null,r=
b.showTemporary;void 0===r&&(r=!n);n=b.showGrid;void 0===n&&(n=r);null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null);"number"===typeof l?l=new Kb(l):l instanceof Kb||(l=new Kb(0));l.left=Math.max(l.left,0);l.right=Math.max(l.right,0);l.top=Math.max(l.top,0);l.bottom=Math.max(l.bottom,0);a.Uo=!1;da(a.pd,!0);var s=new ma(null,p),v=s.Mk,t=s;if(!(d||e||k||h))return s.width=a.Ob+Math.ceil(l.left+l.right),s.height=a.Sb+Math.ceil(l.top+l.bottom),"svg"===b.context&&(v=t=new md(s.Fd,p,q),v instanceof md&&
(a.Uo=!0)),Im(a,v,l,new Fa(s.width,s.height),a.Rb,a.ub,k,m,r,n),a.Uo=!0,t;var x=a.xb.vx,y=new M(0,0),B=a.fd.copy();B.sK(a.padding);if(r)for(var A=!0,A=a.bc.o,N=A.length,G=0;G<N;G++){var T=A[G];if(T.visible&&T.Wc)for(var fa=T.pb.o,T=fa.length,W=0;W<T;W++){var P=fa[W];P.Qx&&P.isVisible()&&(P=P.Z,P.F()&&B.Wh(P))}}y.x=B.x;y.y=B.y;if(null!==k){var aa,A=!0,fa=k.j;for(fa.reset();fa.next();)N=fa.value,N instanceof D&&(P=N,T=P.layer,null!==T&&!T.visible||null!==T&&!r&&T.Wc||!P.isVisible()||(P=P.Z,P.F()&&(A?
(A=!1,aa=P.copy()):aa.Wh(P))));A&&(aa=new w(0,0,0,0));B.width=aa.width;B.height=aa.height;y.x=aa.x;y.y=aa.y}null!==h&&h.F()&&(y=h,e||(e=x));A=fa=0;null!==l&&(fa=l.left+l.right,A=l.top+l.bottom);G=N=0;null!==d&&(N=d.width,G=d.height,isFinite(N)&&(N=Math.max(0,N-fa)),isFinite(G)&&(G=Math.max(0,G-A)));aa=h=0;null!==d&&null!==e?("NaN"===e&&(e=x),d.F()?(h=N,aa=G):isNaN(G)?(h=N,aa=B.height*e):(h=B.width*e,aa=G)):null!==d?d.F()?(e=Math.min(N/B.width,G/B.height),h=N,aa=G):isNaN(G)?(e=N/B.width,h=N,aa=B.height*
e):(e=G/B.height,h=B.width*e,aa=G):null!==e?"NaN"===e&&g.F()?(e=Math.min((g.width-fa)/B.width,(g.height-A)/B.height),e>x?(e=x,h=B.width,aa=B.height):(h=g.width,aa=g.height)):(h=B.width*e,aa=B.height*e):(e=x,h=B.width,aa=B.height);null!==l?(h+=fa,aa+=A):l=new Kb(0);null!==g&&(d=g.width,g=g.height,"svg"!==b.context&&c&&!Ln&&(h>d||aa>g)&&(z.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(h)+"x"+Math.ceil(aa)+" vs 2000x2000) Consider increasing the max size."),
Ln=!0),isNaN(d)&&(d=2E3),isNaN(g)&&(g=2E3),isFinite(d)&&(h=Math.min(h,d)),isFinite(g)&&(aa=Math.min(aa,g)));s.width=Math.ceil(h);s.height=Math.ceil(aa);"svg"===b.context&&(v=t=new md(s.Fd,p,q),v instanceof md&&(a.Uo=!0));Im(a,v,l,new Fa(Math.ceil(h),Math.ceil(aa)),e,y,k,m,r,n);a.Uo=!0;return t}C.inherit=function(a,b){z.h(a,"function",C,"inherit");z.h(b,"function",C,"inherit");b.yH&&z.k("Cannot inherit from "+z.uf(b));z.Ta(a,b)};
function Hl(){this.BH="63ad05bbe23a1786468a4c741b6d2";this.Xi=this.BH===this._tk?!0:null}
function Mn(a){var b="f",c=window[z.Sg("76a715b2f73f148a")][z.Sg("72ba13b5")],d=z.Sg;if(window[d("7da7")]&&window[d("7da7")][d("76a115b6ed251eaf4692")]){a.Xi=!0;var e=window[d("7da7")][d("76a115b6ed251eaf4692")],e=d(e).split(d("39e9"));if(6>e.length)return;var g=d(e[1]).split(".");if("7da71ca0"!==e[4])return;var h=d(z[d("6cae19")]).split(".");if(g[0]>h[0]||g[0]===h[0]&&g[1]>=h[1]){g=c[d("76ad18b4f73e")];for(h=c[d("73a612b6fb191d")](d("35e7"))+2;h<g;h++)b+=c[h];g=b[d("73a612b6fb191d")](d(e[2]));0>
g&&d(e[2])!==d("7da71ca0ad381e90")&&(g=b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));0>g&&(g=b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));a.Xi=!(0<=g&&g<b[d("73a612b6fb191d")](d("35")));if(!a.Xi)return}else return}g=c[d("76ad18b4f73e")];for(h=c[d("73a612b6fb191d")](d("35e7"))+2;h<g;h++)b+=c[h];g=b[d("73a612b6fb191d")](d(z.adym));0>g&&d(z.adym)!==d("7da71ca0ad381e90")&&(g=b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));a.Xi=!(0<=g&&g<b[d("73a612b6fb191d")](d("35")));a.Xi&&(b=window.document[d("79ba13b2f7333e8846865a7d00")]("div"),
c=d("02cncncn"),"."===c[0]&&(c=c[d("69bd14a0f724128a44")](1)),b[d("79a417a0f0181a8946")]=c,window.document[d("78a712aa")]?(window.document[d("78a712aa")][d("7bb806b6ed32388c4a875b")](b),c=window[d("7dad0290ec3b0b91578e5b40007031bf")](b)[d("7dad0283f1390b81519f4645156528bf")](d("78a704b7e62456904c9b12701b6532a8")),window.document[d("78a712aa")][d("68ad1bbcf533388c4a875b")](b),c&&-1!==c.indexOf(d(z.ZH))&&-1!==c.indexOf(d(z.$H))&&(a.Xi=!1)):(a.Xi=null,a.Xi=!1))}
Hl.prototype.Cm=function(a){a.pd.setTransform(a.rd,0,0,a.rd,0,0);null===this.Xi&&Mn(this);return 0<this.Xi&&this!==this.zH?!0:!1};Hl.prototype.t=function(){this.zH=null};
function Il(a,b){void 0!==b&&null!==b||z.k("Diagram setup requires an argument DIV.");null!==a.Tb&&z.k("Diagram has already completed setup.");"string"===typeof b?a.Tb=window.document.getElementById(b):b instanceof HTMLDivElement?a.Tb=b:z.k("No DIV or DIV id supplied: "+b);null===a.Tb&&z.k("Invalid DIV id; could not get element with id: "+b);void 0!==a.Tb.ca&&z.k("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Tb,null).position&&(a.Tb.style.position=
"relative");a.Tb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)";a.Tb.style["-ms-touch-action"]="none";a.Tb.innerHTML="";a.Tb.ca=a;var c=new ma(a);c.Fd.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px","rtl"===window.getComputedStyle(a.Tb,null).getPropertyValue("direction")&&(a.fs=!0),c.style.zIndex="2",c.style.HM="none",c.style.webkitUserSelect="none",c.style.MozUserSelect=
"none");a.Ob=a.Tb.clientWidth||1;a.Sb=a.Tb.clientHeight||1;a.Lb=c;a.pd=c.Mk;var d=a.pd;a.rH=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1);a.rd=a.computePixelRatio();Km(a,a.Ob,a.Sb);a.lz=d[z.Sg("7eba17a4ca3b1a8346")][z.Sg("78a118b7")](d,z.Cm,4,4);a.Tb.insertBefore(c.Fd,a.Tb.firstChild);c=new ma(null);c.width=1;c.height=1;a.kz=c;a.PC=c.Mk;var c=z.createElement("div"),e=z.createElement("div");
c.style.position="absolute";c.style.overflow="auto";c.style.width=a.Ob+"px";c.style.height=a.Sb+"px";c.style.zIndex="1";e.style.position="absolute";e.style.width="1px";e.style.height="1px";a.Tb.appendChild(c);c.appendChild(e);c.onscroll=a.tH;c.onmousedown=a.xD;c.ontouchstart=a.xD;c.ca=a;c.wH=!0;c.xH=!0;a.Kw=c;a.ht=e;a.qB=z.NE(function(){a.zk=null;a.ra()},300,!1);a.dH=z.NE(function(){al(a)},250,!1);a.preventDefault=function(a){a.preventDefault();return!1};a.Bq=function(b){if(a.isEnabled){a.Sm=!0;var c=
a.ed;z.Xn&&c.Hj?(b.preventDefault(),b.simulated=!0,a.qt=b):(a.ed=a.Ub,a.Ub=c,Xl(a,a,b,c,!0),a.Ay(b,null,b.target.ca)||(a.doMouseMove(),a.fb.isBeyondDragSize()&&(a.Dl=0),ia(a,c,b)))}};a.Aq=function(b){if(a.isEnabled){a.Sm=!0;var c=a.ed;if(z.Xn&&null!==a.qt)a.qt=b,b.preventDefault();else if(z.Xn&&400>b.timeStamp-a.Wm)b.preventDefault();else if(a.Al)b.preventDefault();else{a.ed=a.Ub;a.Ub=c;Xl(a,a,b,c,!0);c.gm=!0;c.Qe=b.detail;if(z.GF||z.HF)b.timeStamp-a.Wm<a.iE&&!a.fb.isBeyondDragSize()?a.Dl++:a.Dl=
1,a.Wm=b.timeStamp,c.Qe=a.Dl;a.Zi=c;!0===c.Qr.simulated?(b.preventDefault(),b.simulated=!0):(u&&u.$F&&(window.$F=a.kq(c.ha)),Yh=null,a.doMouseDown(),a.Zi=a.Zi.copy(),1===b.button?b.preventDefault():ia(a,c,b))}}};a.Dq=function(b){if(a.isEnabled)if(a.Al&&2===b.button)b.preventDefault();else if(a.Al&&0===b.button&&(a.Al=!1),a.zt)b.preventDefault();else{a.Sm=!0;var c=a.ed;if(z.Xn){if(400>b.timeStamp-a.Wm){b.preventDefault();return}a.Wm=b.timeStamp}if(z.Xn&&null!==a.qt)a.qt=null,b.preventDefault();else{a.ed=
a.Ub;a.Ub=c;Xl(a,a,b,c,!0);c.up=!0;c.Qe=b.detail;if(z.GF||z.HF)c.Qe=a.Dl;c.bubbles=b.bubbles;b.target.ca&&(c.eh=b.target.ca);a.HG(b,null,new M,c.eh)||(a.doMouseUp(),yi(a),ia(a,c,b))}}};a.Qh=function(b){if(a.isEnabled){var c=a.ed;a.ed=a.Ub;a.Ub=c;Xl(a,a,b,c,!0);c.bubbles=!0;c.fm=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail;a.doMouseWheel();ia(a,c,b)}};a.Cq=function(){if(a.isEnabled){a.Sm=!1;var b=a.fb;b.cancelWaitAfter();b instanceof Kh&&b.hideToolTip()}};a.WG=function(b){if(a.isEnabled){a.zt=!1;
a.Al=!0;var c=a.ed;a.ed=a.Ub;a.Ub=c;Zl(a,b,b.targetTouches[0],c,1<b.touches.length);a.doMouseDown();ia(a,c,b)}};a.VG=function(b){if(a.isEnabled){var c=a.ed;a.ed=a.Ub;a.Ub=c;var d=null;0<b.changedTouches.length?d=b.changedTouches[0]:0<b.targetTouches.length&&(d=b.targetTouches[0]);$l(a,b,d,c,1<b.touches.length);a.Ay(d?d:b,null,c.eh)||a.doMouseMove();ia(a,c,b)}};a.UG=function(b){if(a.isEnabled)if(a.zt)b.preventDefault();else{var c=a.ed;a.ed=a.Ub;a.Ub=c;if(!(1<b.touches.length)){var d=null,e=null;0<
b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);c.g=a;c.Qe=1;if(null!==e){d=window.document.elementFromPoint(e.clientX,e.clientY);null!==d&&d.ca instanceof C&&d.ca!==a&&Yl(d.ca,e,c);Yl(a,b.changedTouches[0],c);var m=e.screenX,n=e.screenY,p=a.mD;b.timeStamp-a.Wm<a.iE&&!(25<Math.abs(p.x-m)||25<Math.abs(p.y-n))?a.Dl++:a.Dl=1;c.Qe=a.Dl;a.Wm=b.timeStamp;a.mD.m(m,n)}c.Ld=0;c.button=0;c.buttons=1;c.gm=!1;c.up=!0;c.fm=0;c.Nc=!1;c.bubbles=!1;c.event=b;c.timestamp=
Date.now();c.eh=null===d?b.target.ca:d.ca?d.ca:null;c.We=null;a.HG(e?e:b,null,new M,c.eh)||a.doMouseUp();ia(a,c,b);a.Al=!1}}};a.QJ=function(b){if("touch"===b.pointerType){var c=a.HD;void 0===c[b.pointerId]&&(a.Aw++,c[b.pointerId]=b);a.nj[0]=null;a.nj[1]=null;for(var d in c)if(null===a.nj[0])a.nj[0]=c[d];else if(null===a.nj[1]){a.nj[1]=c[d];break}a.isEnabled&&(a.zt=!1,a.Al=!0,c=a.ed,a.ed=a.Ub,a.Ub=c,Zl(a,b,b,c,1<a.Aw),a.doMouseDown(),ia(a,c,b))}};a.SJ=function(b){if("touch"===b.pointerType&&!(2>a.Aw)){var c=
a.nj;c[0].pointerId===b.pointerId&&(c[0]=b);c[1].pointerId===b.pointerId&&(c[1]=b);a.isEnabled&&(c=a.ed,a.ed=a.Ub,a.Ub=c,$l(a,b,b,c,!0),a.Ay(b,null,c.eh)||(a.doMouseMove(),ia(a,c,b)))}};a.RJ=function(b){if("touch"===b.pointerType){var c=a.HD;void 0!==c[b.pointerId]&&(a.Aw--,delete c[b.pointerId],c=a.nj,null!==c[0]&&c[0].pointerId===b.pointerId&&(c[0]=null),null!==c[1]&&c[1].pointerId===b.pointerId&&(c[1]=null))}};da(d,!0);Ll(a)}
function Nn(a){1<arguments.length&&z.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");C.call(this,a);this.Qt=!0;this.Wl=!1;this.kb=!0;this.JE=ic;this.Wb=new On}z.Ta(Nn,C);z.ka("Palette",Nn);
function El(a){1<arguments.length&&z.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");C.call(this,a);this.Ya.isEnabled=!1;this.cd=!0;this.vk=null;this.Mv=!0;this.lK("drawShadows",!1);var b=new D,c=new Y;c.stroke="magenta";c.mb=2;c.fill="transparent";c.name="BOXSHAPE";b.Zk=!0;b.vy="BOXSHAPE";b.ay="BOXSHAPE";b.sG="BOXSHAPE";b.cursor="move";b.add(c);this.Hm=b;c=new ea;c.type=Rj;c.yf=mc;var d=new Sj;d.If=!0;c.add(d);d=new Y;d.Fh=mc;d.Jb="Rectangle";d.Da=new Fa(64,
64);d.cursor="se-resize";d.alignment=qc;c.add(d);b.qG=c;this.Bn=this.Ik=!1;this.Df=this.St=!0;this.CE=0;this.Yz=new ma(null);this.AH=this.Yz.Mk;this.ib.Ee=new Pn;this.ib.tG=new Qn;var e=this;this.click=function(){var a=e.vk;if(null!==a){var b=a.yb,c=e.U.ha;a.position=new M(c.x-b.width/2,c.y-b.height/2)}};this.bG=function(){Rn(e)};this.aG=function(){null!==e.vk&&(e.Bc(),e.ra())};this.Zl=Vl;this.cd=!1}z.Ta(El,C);z.ka("Overview",El);
function Sn(a){a.cd||a.ie||!1!==a.Zf||(a.Zf=!0,requestAnimationFrame(function(){if(a.Zf&&!a.ie&&(a.Zf=!1,null!==a.Tb)){a.ie=!0;Li(a);a.fd.F()||Ul(a,a.Jh());null===a.Tb&&z.k("No div specified");null===a.Lb&&z.k("No canvas specified");if(a.Ne){var b=a.vk;if(null!==b&&!b.Ya.wf&&!b.Ya.yc){var b=a.pd,c=a.Yz;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Lb.width,a.Lb.height);b.drawImage(c.Fd,0,0);c=a.Jc;c.reset();1!==a.scale&&c.scale(a.scale);0===a.position.x&&0===a.position.y||c.translate(-a.position.x,
-a.position.y);b.scale(a.rd,a.rd);b.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.bc.o,d=c.length,e=0;e<d;e++)c[e].Fe(b,a);a.zl=!1;a.Ne=!1}}a.ie=!1}}))}El.prototype.computePixelRatio=function(){return 1};
El.prototype.Fe=function(){null===this.Tb&&z.k("No div specified");null===this.Lb&&z.k("No canvas specified");if(this.Ne){var a=this.vk;if(null!==a&&!a.Ya.wf){Fm(this);var b=a.Vn;(null!==b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&dm(a);var c=this.Lb,b=this.pd,d=this.Yz,e=this.AH;d.width=c.width;d.height=c.height;da(b,!0);b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,c.width,c.height);var g=this.Jc;g.reset();1!==this.scale&&g.scale(this.scale);0===this.position.x&&0===this.position.y||g.translate(-this.position.x,
-this.position.y);b.scale(this.rd,this.rd);b.transform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var h=this.Mv,k=this.yb,l=a.bc.o,m=l.length,a=0;a<m;a++){var n=l[a],p=b,q=k,r=h;if(n.visible&&0!==n.Hc&&(void 0===r&&(r=!0),r||!n.Wc)){1!==n.Hc&&(p.globalAlpha=n.Hc);for(var r=this.scale,n=n.pb.o,s=n.length,v=0;v<s;v++){var t=n[v],x=t.Z;x.Vg(q)&&(1<x.width*r||1<x.height*r?t.Fe(p,this):ql(t,p))}p.globalAlpha=1}}e.drawImage(c.Fd,0,0);u&&u.xj&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4));c=this.bc.o;
d=c.length;for(a=0;a<d;a++)c[a].Fe(b,this);u&&(u.yA||u.xj)&&u.xA(b,this,g);this.Ne=this.zl=!1}}};
z.defineProperty(El,{kB:"observed"},function(){return this.vk},function(a){var b=this.vk;null!==a&&z.l(a,C,El,"observed");a instanceof El&&z.k("Overview.observed Diagram may not be an Overview itself: "+a);b!==a&&(null!==b&&(this.remove(this.Ih),b.jG("ViewportBoundsChanged",this.bG),b.jG("DocumentBoundsChanged",this.aG),b.ww.remove(this)),this.vk=a,null!==a&&(a.gA("ViewportBoundsChanged",this.bG),a.gA("DocumentBoundsChanged",this.aG),a.ww.add(this),this.add(this.Ih),Rn(this)),this.Bc(),this.i("observed",
b,a))});z.defineProperty(El,{Ih:"box"},function(){return this.Hm},function(a){var b=this.Hm;b!==a&&(this.Hm=a,this.remove(b),this.add(this.Hm),Rn(this),this.i("box",b,a))});z.defineProperty(El,{EL:"drawsTemporaryLayers"},function(){return this.Mv},function(a){this.Mv!==a&&(this.Mv=a,this.Iq())});
function Rn(a){var b=a.Ih;if(null!==b){var c=a.vk;if(null!==c){a.Ne=!0;var c=c.yb,d=b.no,e=z.Am();e.m(c.width,c.height);d.Da=e;z.Qk(e);a=2/a.scale;d instanceof Y&&(d.mb=a);b.location=new M(c.x-a/2,c.y-a/2)}}}El.prototype.Jh=function(){var a=this.vk;return null===a?Ed:a.fd};El.prototype.BF=function(){!0!==this.Ne&&(this.Ne=!0,Sn(this))};
El.prototype.Lu=function(a,b,c,d,e){this.cd||(Pl(this),this.ra(),am(this),this.Bc(),Rn(this),this.Eh.scale=c,this.Eh.position.x=a.x,this.Eh.position.y=a.y,this.Eh.bounds.set(a),this.Eh.isScroll=e,this.Ka("ViewportBoundsChanged",this.Eh,a))};function Pn(){Ph.call(this);this.Kl=null}z.Ta(Pn,Ph);
Pn.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Wl||!a.Df)return!1;var b=a.kB;if(null===b)return!1;if(null===this.findDraggablePart()){var c=b.yb;this.Kl=new M(c.width/2,c.height/2);a=a.Mc.ha;b.position=new M(a.x-this.Kl.x,a.y-this.Kl.y)}return!0};Pn.prototype.doActivate=function(){this.Kl=null;Ph.prototype.doActivate.call(this)};
Pn.prototype.moveParts=function(){var a=this.g,b=a.kB;if(null!==b){var c=a.Ih;if(null!==c){if(null===this.Kl){var d=a.Mc.ha,c=c.location;this.Kl=new M(d.x-c.x,d.y-c.y)}a=a.U.ha;b.position=new M(a.x-this.Kl.x,a.y-this.Kl.y)}}};function Qn(){Qj.call(this)}z.Ta(Qn,Qj);Qn.prototype.resize=function(a){var b=this.g.kB;if(null!==b){var c=b.yb.copy();b.position=a.position;(c.width!==a.width||c.height!==a.height)&&0<a.width&&0<a.height&&(b.scale=Math.min(c.width/a.width,c.height/a.height))}};
function Ea(a){1<arguments.length&&z.k("Brush constructor can take at most one optional argument, the Brush type.");z.wc(this);this.I=!1;void 0===a?(this.da=Zg,this.Ho="black"):"string"===typeof a?(this.da=Zg,u&&!Da(a)&&z.k('Color "'+a+'" is not a valid color string for Brush constructor'),this.Ho=a):(u&&z.Ca(a,Ea,Ea,"constructor:type"),this.da=a,this.Ho="black");var b=this.da;b===$g?(this.Kp=ic,this.Wo=pc):this.Wo=b===Bd?this.Kp=mc:this.Kp=gc;this.Rw=0;this.Nv=NaN;this.qh=this.zw=this.ph=null;this.az=
this.Io=0}z.ka("Brush",Ea);var Zg;Ea.Solid=Zg=z.s(Ea,"Solid",0);var $g;Ea.Linear=$g=z.s(Ea,"Linear",1);var Bd;Ea.Radial=Bd=z.s(Ea,"Radial",2);var Tn;Ea.Pattern=Tn=z.s(Ea,"Pattern",4);var Un;Ea.Lab=Un=z.s(Ea,"Lab",5);var Vn;Ea.HSL=Vn=z.s(Ea,"HSL",6);function Wn(){this.mg=this.kd=this.Md=this.Pc=0}Ea.prototype.copy=function(){var a=new Ea;a.da=this.da;a.Ho=this.Ho;a.Kp=this.Kp.V();a.Wo=this.Wo.V();a.Rw=this.Rw;a.Nv=this.Nv;null!==this.ph&&(a.ph=this.ph.copy());a.zw=this.zw;return a};f=Ea.prototype;
f.Na=function(){this.freeze();Object.freeze(this);return this};f.freeze=function(){this.I=!0;null!==this.ph&&this.ph.freeze();return this};f.Za=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.I=!1;null!==this.ph&&this.ph.Za();return this};f.pc=function(a){a.Pe===Ea?this.type=a:z.Tj(this,a)};
f.toString=function(){var a="Brush(";if(this.type===Zg)a+=this.color;else if(a=this.type===$g?a+"Linear ":this.type===Bd?a+"Radial ":this.type===Tn?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.Jk)for(var b=this.Jk.j;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Ea.prototype.addColorStop=Ea.prototype.addColorStop=function(a,b){this.I&&z.pa(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&z.wa(a,"0 <= loc <= 1",Ea,"addColorStop:loc");z.h(b,"string",Ea,"addColorStop:color");u&&!Da(b)&&z.k('Color "'+b+'" is not a valid color string for Brush.addColorStop');null===this.ph&&(this.ph=new oa("number","string"));this.ph.add(a,b);this.da===Zg&&(this.type=$g);this.qh=null};
z.defineProperty(Ea,{type:"type"},function(){return this.da},function(a){this.I&&z.pa(this,a);z.Ca(a,Ea,Ea,"type");this.da=a;this.start.$d()&&(a===$g?this.start=ic:a===Bd&&(this.start=mc));this.end.$d()&&(a===$g?this.end=pc:a===Bd&&(this.end=mc));this.qh=null});z.defineProperty(Ea,{color:"color"},function(){return this.Ho},function(a){this.I&&z.pa(this,a);u&&!Da(a)&&z.k('Color "'+a+'" is not a valid color string for Brush.color');this.Ho=a;this.qh=null});
z.defineProperty(Ea,{start:"start"},function(){return this.Kp},function(a){this.I&&z.pa(this,a);z.l(a,R,Ea,"start");this.Kp=a.V();this.qh=null});z.defineProperty(Ea,{end:"end"},function(){return this.Wo},function(a){this.I&&z.pa(this,a);z.l(a,R,Ea,"end");this.Wo=a.V();this.qh=null});z.defineProperty(Ea,{$u:"startRadius"},function(){return this.Rw},function(a){this.I&&z.pa(this,a);z.p(a,Ea,"startRadius");0>a&&z.wa(a,">= zero",Ea,"startRadius");this.Rw=a;this.qh=null});
z.defineProperty(Ea,{bu:"endRadius"},function(){return this.Nv},function(a){this.I&&z.pa(this,a);z.p(a,Ea,"endRadius");0>a&&z.wa(a,">= zero",Ea,"endRadius");this.Nv=a;this.qh=null});z.defineProperty(Ea,{Jk:"colorStops"},function(){return this.ph},function(a){this.I&&z.pa(this,a);u&&z.l(a,oa,Ea,"colorStops");this.ph=a;this.qh=null});z.defineProperty(Ea,{pattern:"pattern"},function(){return this.zw},function(a){this.I&&z.pa(this,a);this.zw=a;this.qh=null});
Ea.randomColor=function(a,b){void 0===a&&(a=128);u&&(z.p(a,Ea,"randomColor:min"),(0>a||255<a)&&z.wa(a,"0 <= min <= 255",Ea,"randomColor:min"));void 0===b&&(b=Math.max(a,255));u&&(z.p(b,Ea,"randomColor:max"),(b<a||255<b)&&z.wa(b,"min <= max <= 255",Ea,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+
d+e+c};var Xn=(new ma(null)).Mk,Da;Ea.isValidColor=Da=function(a){if("black"===a)return!0;if(""===a)return!1;u&&z.h(a,"string",Ea,"isValidColor");Xn.fillStyle="#000000";var b=Xn.fillStyle;Xn.fillStyle=a;if(Xn.fillStyle!==b)return!0;Xn.fillStyle="#FFFFFF";b=Xn.fillStyle;Xn.fillStyle=a;return Xn.fillStyle!==b};var Yn=new Wn,Zn=new Wn,$n=new Wn,ao=new Wn;Ea.lighten=function(a){return bo(a)};
Ea.prototype.lightenBy=function(a,b){this.I&&z.pa(this);var c=void 0===a||"number"!==typeof a?.2:a,d=void 0===b?Un:b;if(this.type===Zg)co(this.color),this.color=eo(c,d);else if((this.type===$g||this.type===Bd)&&null!==this.Jk)for(var e=this.Jk.j;e.next();)co(e.value),this.addColorStop(e.key,eo(c,d));return this};var bo;Ea.lightenBy=bo=function(a,b,c){b=void 0===b||"number"!==typeof b?.2:b;c=void 0===c?Un:c;co(a);return eo(b,c)};Ea.darken=function(a){return fo(a)};
Ea.prototype.darkenBy=function(a,b){this.I&&z.pa(this);var c=void 0===a||"number"!==typeof a?.2:a,d=void 0===b?Un:b;if(this.type===Zg)co(this.color),this.color=eo(-c,d);else if((this.type===$g||this.type===Bd)&&null!==this.Jk)for(var e=this.Jk.j;e.next();)co(e.value),this.addColorStop(e.key,eo(-c,d));return this};var fo;Ea.darkenBy=fo=function(a,b,c){b=void 0===b||"number"!==typeof b?.2:b;c=void 0===c?Un:c;co(a);return eo(-b,c)};
function eo(a,b){switch(b){case Un:var c=100*ho(Yn.Pc),d=100*ho(Yn.Md),e=100*ho(Yn.kd);$n.Pc=.4124564*c+.3575761*d+.1804375*e;$n.Md=.2126729*c+.7151522*d+.072175*e;$n.kd=.0193339*c+.119192*d+.9503041*e;$n.mg=Yn.mg;c=io($n.Pc/jo[0]);d=io($n.Md/jo[1]);e=io($n.kd/jo[2]);ao.Pc=116*d-16;ao.Md=500*(c-d);ao.kd=200*(d-e);ao.mg=$n.mg;ao.Pc=Math.min(100,Math.max(0,ao.Pc+100*a));c=(ao.Pc+16)/116;d=c-ao.kd/200;$n.Pc=jo[0]*ko(ao.Md/500+c);$n.Md=jo[1]*(ao.Pc>lo*mo?Math.pow(c,3):ao.Pc/lo);$n.kd=jo[2]*ko(d);$n.mg=
ao.mg;c=-.969266*$n.Pc+1.8760108*$n.Md+.041556*$n.kd;d=.0556434*$n.Pc+-.2040259*$n.Md+1.0572252*$n.kd;Yn.Pc=255*no((3.2404542*$n.Pc+-1.5371385*$n.Md+-.4985314*$n.kd)/100);Yn.Md=255*no(c/100);Yn.kd=255*no(d/100);Yn.mg=$n.mg;Yn.Pc=Math.round(Yn.Pc);255<Yn.Pc?Yn.Pc=255:0>Yn.Pc&&(Yn.Pc=0);Yn.Md=Math.round(Yn.Md);255<Yn.Md?Yn.Md=255:0>Yn.Md&&(Yn.Md=0);Yn.kd=Math.round(Yn.kd);255<Yn.kd?Yn.kd=255:0>Yn.kd&&(Yn.kd=0);return"rgba("+Yn.Pc+", "+Yn.Md+", "+Yn.kd+", "+Yn.mg+")";case Vn:var e=Yn.Pc/255,g=Yn.Md/
255,h=Yn.kd/255,k=Math.max(e,g,h),d=Math.min(e,g,h),l=k-d,d=(k+d)/2;if(0===l)c=e=0;else{switch(k){case e:c=(g-h)/l%6;break;case g:c=(h-e)/l+2;break;case h:c=(e-g)/l+4}c*=60;0>c&&(c+=360);e=l/(1-Math.abs(2*d-1))}Zn.Pc=Math.round(c);Zn.Md=Math.round(100*e);Zn.kd=Math.round(100*d);Zn.mg=Yn.mg;Zn.kd=Math.min(100,Math.max(0,Zn.kd+100*a));return"hsla("+Zn.Pc+", "+Zn.Md+"%, "+Zn.kd+"%, "+Zn.mg+")";default:return z.k("Unknown color space: "+b),"rgba(0, 0, 0, 1)"}}
function co(a){Xn.clearRect(0,0,1,1);Xn.fillStyle="#000000";var b=Xn.fillStyle;Xn.fillStyle=a;Xn.fillStyle!==b?(Xn.fillRect(0,0,1,1),a=Xn.getImageData(0,0,1,1).data,Yn.Pc=a[0],Yn.Md=a[1],Yn.kd=a[2],Yn.mg=a[3]/255):(Xn.fillStyle="#FFFFFF",b=Xn.fillStyle,Xn.fillStyle=a,Xn.fillStyle===b&&u&&z.k('Color "'+a+'" is not a valid color string for RGBA color conversion'),Yn.Pc=0,Yn.Md=0,Yn.kd=0,Yn.mg=1)}function ho(a){a/=255;return.04045>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)}
function no(a){return.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055}var mo=216/24389,lo=24389/27,jo=[95.047,100,108.883];function io(a){return a>mo?Math.pow(a,1/3):(lo*a+16)/116}function ko(a){var b=a*a*a;return b>mo?b:(116*a-16)/lo}
function O(){z.wc(this);this.T=4225027;this.Hc=1;this.Ah=null;this.Xb="";this.ic=this.Kb=null;this.ub=(new M(NaN,NaN)).freeze();this.Ye=ie;this.li=Sd;this.ki=ge;this.Jc=new Ga;this.Li=new Ga;this.ej=new Ga;this.Rb=this.To=1;this.rg=0;this.Mg=oo;this.an=Nd;this.Dd=(new w(NaN,NaN,NaN,NaN)).freeze();this.ac=(new w(NaN,NaN,NaN,NaN)).freeze();this.Tc=(new w(0,0,NaN,NaN)).freeze();this.Y=this.Us=this.Vs=null;this.Fm=this.te=Rc;this.et=0;this.pj=1;this.pr=0;this.Qi=1;this.ut=null;this.it=-Infinity;this.on=
0;this.pn=Dd;this.qn=nj;this.xr="";this.Ec=this.ma=null;this.Eo=-1;this.hn=this.un=this.ug=this.rl=this.Jp=null}z.Ai(O);z.ka("GraphObject",O);
O.prototype.cloneProtected=function(a){a.T=this.T|6144;a.Hc=this.Hc;a.Xb=this.Xb;a.Kb=this.Kb;a.ic=this.ic;a.ub.assign(this.ub);a.Ye=this.Ye.V();a.li=this.li.V();a.ki=this.ki.V();a.ej=this.ej.copy();a.Rb=this.Rb;a.rg=this.rg;a.Mg=this.Mg;a.an=this.an.V();a.Dd.assign(this.Dd);a.ac.assign(this.ac);a.Tc.assign(this.Tc);a.Us=this.Us;null!==this.Y&&(a.Y=this.Y.copy());a.te=this.te.V();a.Fm=this.Fm.V();a.et=this.et;a.pj=this.pj;a.pr=this.pr;a.Qi=this.Qi;a.ut=this.ut;a.it=this.it;a.on=this.on;a.pn=this.pn.V();
a.qn=this.qn;a.xr=this.xr;null!==this.ma&&(a.ma=this.ma.copy());a.Ec=this.Ec;a.Eo=this.Eo;null!==this.rl&&(a.rl=z.am(this.rl));null!==this.ug&&(a.ug=this.ug.copy());a.un=this.un};O.prototype.addCopyProperty=O.prototype.JH=function(a){var b=this.rl;if(z.isArray(b))for(var c=0;c<b.length;c++){if(b[c]===a)return}else this.rl=b=[];b.push(a)};O.prototype.Bi=function(a){a.Vs=null;a.hn=null;a.K()};
O.prototype.clone=function(){var a=new this.constructor;this.cloneProtected(a);if(null!==this.rl)for(var b=0;b<this.rl.length;b++){var c=this.rl[b];a[c]=this[c]}return a};O.prototype.copy=function(){return this.clone()};O.prototype.pc=function(a){a.Pe===H?0===a.name.indexOf("Orient")?this.Pq=a:z.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+a):a.Pe===O?this.stretch=a:z.Tj(this,a)};O.prototype.toString=function(){return z.uf(Object.getPrototypeOf(this))+"#"+z.Hd(this)};
var Tj;O.None=Tj=z.s(O,"None",0);var oo;O.Default=oo=z.s(O,"Default",0);var po;O.Vertical=po=z.s(O,"Vertical",4);var qo;O.Horizontal=qo=z.s(O,"Horizontal",5);var gf;O.Fill=gf=z.s(O,"Fill",3);var Vj;O.Uniform=Vj=z.s(O,"Uniform",1);var Wj;O.UniformToFill=Wj=z.s(O,"UniformToFill",2);var ro;O.FlipVertical=ro=z.s(O,"FlipVertical",1);var so;O.FlipHorizontal=so=z.s(O,"FlipHorizontal",2);var to;O.FlipBoth=to=z.s(O,"FlipBoth",3);function uo(a){null===a.ma&&(a.ma=new vo)}
O.prototype.Xd=function(){if(null===this.Y){var a=new wo;a.fk=gc;a.Ek=gc;a.dk=10;a.Ck=10;a.ck=xo;a.Bk=xo;a.ek=0;a.Dk=0;this.Y=a}};function yo(a,b,c,d,e,g,h){var k=.001,l=g.length;a.moveTo(b,c);d-=b;k=e-c;0===d&&(d=.001);e=k/d;for(var m=Math.sqrt(d*d+k*k),n=0,p=!0,q=0===h?!1:!0;.1<=m;){if(q){k=g[n++%l];for(k-=h;0>k;)k+=g[n++%l],p=!p;q=!1}else k=g[n++%l];k>m&&(k=m);var r=Math.sqrt(k*k/(1+e*e));0>d&&(r=-r);b+=r;c+=e*r;p?a.lineTo(b,c):a.moveTo(b,c);m-=k;p=!p}}
O.prototype.raiseChangedEvent=O.prototype.ld=function(a,b,c,d,e,g,h){var k=this.ba;if(null!==k&&(k.lo(a,b,c,d,e,g,h),zo(this)&&c===this&&a===bg&&Ao(this,k,b),c===k&&0!==(k.T&16777216)&&null!==k.data))for(a=this.va.o,c=a.length,d=0;d<c;d++)e=a[d],e instanceof I&&Mm(e,function(a){null!==a.data&&0!==(a.T&16777216)&&a.Nb(b)})};
function Ao(a,b,c){var d=a.jm();if(null!==d)for(var e=a.Ec.j;e.next();){var g=e.value,h=null;if(null!==g.Wq){h=vh(g,d,a);if(null===h)continue;g.Cy(a,h,c,null)}else if(g.Ux){var k=b.g;null===k||k.Ve||g.Cy(a,k.ia.Xk,c,d)}else{var l=d.data;if(null===l)continue;k=b.g;null===k||k.Ve||g.Cy(a,l,c,d)}h===a&&(k=d.Cx(g.zm),null!==k&&g.bH(k,h,c))}}O.prototype.Cx=function(a){return this.Eo===a?this:null};O.prototype.raiseChanged=O.prototype.i=function(a,b,c){this.ld(bg,a,this,b,c)};
function Bo(a,b,c,d,e){var g=a.Dd,h=a.ej;h.reset();Co(a,h,b,c,d,e);a.ej=h;g.x=b;g.y=c;g.width=d;g.height=e;h.uu()||h.ZG(g)}function Do(a,b,c,d){if(!1===a.qg)return!1;d.multiply(a.transform);return c?a.Vg(b,d):a.Hn(b,d)}
O.prototype.hF=function(a,b,c){if(!1===this.qg)return!1;var d=this.Ja;b=a.Ef(b);var e=!1;c&&(e=xb(a.x,a.y,0,0,0,d.height)<b||xb(a.x,a.y,0,d.height,d.width,d.height)<b||xb(a.x,a.y,d.width,d.height,d.width,0)<b||xb(a.x,a.y,d.width,0,0,0)<b);c||(e=xb(a.x,a.y,0,0,0,d.height)<b&&xb(a.x,a.y,0,d.height,d.width,d.height)<b&&xb(a.x,a.y,d.width,d.height,d.width,0)<b&&xb(a.x,a.y,d.width,0,0,0)<b);return e};O.prototype.jh=function(){return!0};
O.prototype.containsPoint=O.prototype.Oa=function(a){u&&z.l(a,M,O,"containsPoint:p");var b=z.P();b.assign(a);this.transform.wb(b);var c=this.Z;if(!c.F())return z.A(b),!1;var d=this.g;if(null!==d&&d.Al){var e=d.lu("extraTouchThreshold"),g=d.lu("extraTouchArea"),h=g/2,k=this.Ja,d=this.Cj()*d.scale,l=1/d;if(k.width*d<e&&k.height*d<e)return a=Sb(c.x-h*l,c.y-h*l,c.width+g*l,c.height+g*l,b.x,b.y),z.A(b),a}if(this instanceof ea||this instanceof Y?Sb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Oa(b))return e=
!1,e=this.ug&&!this.ug.Oa(b)?!1:null!==this.ic&&c.Oa(b)?!0:null!==this.Kb&&this.Tc.Oa(a)?!0:this.Kk(a),z.A(b),e;z.A(b);return!1};O.prototype.Kk=function(a){var b=this.Ja;return Sb(0,0,b.width,b.height,a.x,a.y)};
O.prototype.containsRect=O.prototype.Lk=function(a){u&&z.l(a,w,O,"containsRect:r");if(0===this.angle)return this.Z.Lk(a);var b=this.Ja,b=z.fh(0,0,b.width,b.height),c=this.transform,d=!1,e=z.Fb(a.x,a.y);b.Oa(c.Ci(e))&&(e.m(a.x,a.bottom),b.Oa(c.Ci(e))&&(e.m(a.right,a.bottom),b.Oa(c.Ci(e))&&(e.m(a.right,a.y),b.Oa(c.Ci(e))&&(d=!0))));z.A(e);z.Mb(b);return d};
O.prototype.containedInRect=O.prototype.Hn=function(a,b){u&&z.l(a,w,O,"containedInRect:r");if(void 0===b)return a.Lk(this.Z);var c=this.Ja,d=!1,e=z.Fb(0,0);a.Oa(b.wb(e))&&(e.m(0,c.height),a.Oa(b.wb(e))&&(e.m(c.width,c.height),a.Oa(b.wb(e))&&(e.m(c.width,0),a.Oa(b.wb(e))&&(d=!0))));z.A(e);return d};
O.prototype.intersectsRect=O.prototype.Vg=function(a,b){u&&z.l(a,w,O,"intersectsRect:r");if(void 0===b&&(b=this.transform,0===this.angle))return a.Vg(this.Z);var c=this.Ja,d=b,e=z.Fb(0,0),g=z.Fb(0,c.height),h=z.Fb(c.width,c.height),k=z.Fb(c.width,0),l=!1;if(a.Oa(d.wb(e))||a.Oa(d.wb(g))||a.Oa(d.wb(h))||a.Oa(d.wb(k)))l=!0;else{var c=z.fh(0,0,c.width,c.height),m=z.Fb(a.x,a.y);c.Oa(d.Ci(m))?l=!0:(m.m(a.x,a.bottom),c.Oa(d.Ci(m))?l=!0:(m.m(a.right,a.bottom),c.Oa(d.Ci(m))?l=!0:(m.m(a.right,a.y),c.Oa(d.Ci(m))&&
(l=!0))));z.A(m);z.Mb(c);!l&&(Oe(a,e,g)||Oe(a,g,h)||Oe(a,h,k)||Oe(a,k,e))&&(l=!0)}z.A(e);z.A(g);z.A(h);z.A(k);return l};O.prototype.getDocumentPoint=O.prototype.cb=function(a,b){void 0===b&&(b=new M);if(a instanceof R){a.$d()&&z.k("getDocumentPoint:s Spot must be specific: "+a.toString());var c=this.Ja;b.m(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY)}else b.set(a);this.Gh.wb(b);return b};
O.prototype.getDocumentAngle=O.prototype.Rn=function(){var a;a=this.Gh;1===a.m11&&0===a.m12?a=0:(a=180*Math.atan2(a.m12,a.m11)/Math.PI,0>a&&(a+=360));return a};O.prototype.getDocumentScale=O.prototype.Cj=function(){if(0!==(this.T&4096)===!1)return this.To;var a=this.Rb;return null!==this.Q?a*this.Q.Cj():a};O.prototype.getLocalPoint=O.prototype.mF=function(a,b){void 0===b&&(b=new M);b.assign(a);this.Gh.Ci(b);return b};
O.prototype.getNearestIntersectionPoint=O.prototype.nF=function(a,b,c){return this.Tn(a.x,a.y,b.x,b.y,c)};f=O.prototype;f.Tn=function(a,b,c,d,e){var g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),k=g.m22*h,l=-g.m12*h,m=-g.m21*h,n=g.m11*h,p=h*(g.m21*g.dy-g.m22*g.dx),q=h*(g.m12*g.dx-g.m11*g.dy);if(null!==this.Xl)return g=this.Z,Ge(g.left,g.top,g.right,g.bottom,a,b,c,d,e);h=a*k+b*m+p;a=a*l+b*n+q;b=c*k+d*m+p;c=c*l+d*n+q;e.m(0,0);d=this.Ja;c=Ge(0,0,d.width,d.height,h,a,b,c,e);e.transform(g);return c};
function Bk(a,b,c,d,e){if(!1!==Cm(a)){var g=a.margin,h=g.right+g.left,g=g.top+g.bottom;b=Math.max(b-h,0);c=Math.max(c-g,0);e=e||0;d=Math.max((d||0)-h,0);e=Math.max(e-g,0);var h=a.angle,g=0,g=a.Da,k=0;a.mb&&(k=a.mb);90===h||270===h?(b=isFinite(g.height)?g.height+k:b,c=isFinite(g.width)?g.width+k:c):(b=isFinite(g.width)?g.width+k:b,c=isFinite(g.height)?g.height+k:c);var g=d||0,k=e||0,l=a instanceof I;switch(Eo(a,!0)){case Tj:k=g=0;l&&(c=b=Infinity);break;case gf:isFinite(b)&&b>d&&(g=b);isFinite(c)&&
c>e&&(k=c);break;case qo:isFinite(b)&&b>d&&(g=b);k=0;l&&(c=Infinity);break;case po:isFinite(c)&&c>e&&(k=c),g=0,l&&(b=Infinity)}var l=a.mf,m=a.ig;g>l.width&&m.width<l.width&&(g=l.width);k>l.height&&m.height<l.height&&(k=l.height);d=Math.max(g/a.scale,m.width);e=Math.max(k/a.scale,m.height);l.width<d&&(d=Math.min(m.width,d));l.height<e&&(e=Math.min(m.height,e));b=Math.min(l.width,b);c=Math.min(l.height,c);b=Math.max(d,b);c=Math.max(e,c);if(90===h||270===h)g=b,b=c,c=g,g=d,d=e,e=g;a.Dd.Za();a.zq(b,c,
d,e);a.Dd.freeze();a.Dd.F()||z.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Dd.toString());cm(a,!1)}}
f.qc=function(a,b,c,d,e){this.$i();var g=z.Of();g.assign(this.ac);this.ac.Za();if(!1===Dm(this)){var h=this.ac;h.x=a;h.y=b;h.width=c;h.height=d}else this.wj(a,b,c,d);this.ac.freeze();this.ug=void 0===e?null:e;c=!1;void 0!==e?c=!0:null!==this.Q&&(e=this.Q.Tc,d=this.Ea,null!==this.Xl&&(d=this.ac),c=b+d.height,d=a+d.width,c=!(0<=a+.05&&d<=e.width+.05&&0<=b+.05&&c<=e.height+.05),this instanceof pa&&(a=this.Tc,this.jw>a.height||this.gi.rf>a.width))&&(c=!0);this.T=c?this.T|256:this.T&-257;this.ac.F()||
z.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.ac.toString());this.gy(g,this.ac);Fo(this,!1);z.Mb(g)};f.wj=function(){};
function Go(a,b,c,d,e){var g=a.Z;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.Da.F()){g=a.Dd;c=a.margin;b=c.right+c.left;var h=c.top+c.bottom;c=g.width+b;g=g.height+h;d+=b;e+=h;b=Eo(a,!0);c===d&&g===e&&(b=Tj);switch(b){case Tj:if(c>d||g>e)cm(a,!0),Bk(a,c>d?d:c,g>e?e:g);break;case gf:cm(a,!0);Bk(a,d,e,0,0);break;case qo:cm(a,!0);Bk(a,d,g,0,0);break;case po:cm(a,!0),Bk(a,c,e,0,0)}}}
f.gy=function(a,b){var c=this.ba;null!==c&&null!==c.g&&(c.no!==this&&c.rG!==this&&c.vG!==this||Ho(c,!0),this.ra(),Bb(a,b)||(c.pm(),this.sw(c)))};f.sw=function(a){null!==this.vd&&(Ho(a,!0),a instanceof E&&Io(a,this))};z.defineProperty(O,{Tq:"shadowVisible"},function(){return this.un},function(a){var b=this.un;b!==a&&(u&&null!==a&&z.h(a,"boolean",O,"shadowVisible"),this.un=a,this.ra(),this.i("shadowVisible",b,a))});
O.prototype.Fe=function(a,b){if(this.visible){var c=this.ac;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)){var d=this.opacity,e=1;if(1!==d){if(0===d)return;e=a.globalAlpha;a.globalAlpha=e*d}if(a instanceof md)a:{if(this.visible){var g=null,h=a.Wx;if(this instanceof I&&(this.type===Jo||this.type===Ko))Lo(this,a,b);else{var k=this.ac;if(0!==k.width&&0!==k.height&&!isNaN(k.x)&&!isNaN(k.y)){var l=this.transform,m=this.Q;0!==(this.T&4096)===!0&&Mo(this);var c=0!==(this.T&256),n=!1;this instanceof
pa&&(a.font=this.font);if(c){n=m.jh()?m.Ja:m.Z;if(null!==this.ug)var p=this.ug,q=p.x,r=p.y,s=p.width,p=p.height;else q=Math.max(k.x,n.x),r=Math.max(k.y,n.y),s=Math.min(k.right,n.right)-q,p=Math.min(k.bottom,n.bottom)-r;if(q>k.width+k.x||k.x>n.width+n.x||r>k.height+k.y||k.y>n.height+n.y)break a;n=!0;od(a,1,0,0,1,0,0);a.save();a.beginPath();a.rect(q,r,s,p);a.clip()}q=!1;if(this instanceof D){var v=this,q=!0;if(!v.isVisible())break a}a.Lh.Yb=[1,0,0,1,0,0];r=!1;q&&this.Vk&&b.Dj("drawShadows")&&(s=this.tn,
a.FB(s.x*b.scale*b.rd,s.y*b.scale*b.rd,v.Lg),a.qo(),a.shadowColor=v.sn);v=!1;this.ba&&b.Dj("drawShadows")&&(v=this.ba.Vk);!0===this.Tq?(a.qo(),!1===r&&v&&(od(a,1,0,0,1,0,0),a.hb(),r=!0)):!1===this.Tq&&a.po();null!==this.ic&&(No(this,a,this.ic,!0,!0),!1===r&&v&&(od(a,1,0,0,1,0,0),a.hb(),r=!0),this.ic instanceof Ea&&this.ic.type===Bd?(a.beginPath(),a.rect(k.x,k.y,k.width,k.height),a.Tg(this.ic)):a.fillRect(k.x,k.y,k.width,k.height));this instanceof I?od(a,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy):a.Lh.Yb=
[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy];if(null!==this.Kb){!1===r&&v&&(od(a,1,0,0,1,0,0),a.hb(),r=!0);var p=this.Ja,l=k=0,s=p.width,p=p.height,t=0;this instanceof Y&&(p=this.nb.sb,k=p.x,l=p.y,s=p.width,p=p.height,t=this.ef);No(this,a,this.Kb,!0,!1);this.Kb instanceof Ea&&this.Kb.type===Bd?(a.beginPath(),a.rect(k-t/2,l-t/2,s+t,p+t),a.Tg(this.Kb)):a.fillRect(k-t/2,l-t/2,s+t,p+t)}v&&(null!==this.Kb||null!==this.ic||null!==m&&0!==(m.T&512)||null!==m&&(m.type===Kl||m.type===Rj)&&m.Wd()!==this)?(Oo(this,!0),
null===this.Tq&&a.po()):Oo(this,!1);this.Ok(a,b);v&&0!==(this.T&512)===!0&&a.qo();q&&v&&a.po();c&&(a.restore(),n&&a.Gf.pop());this instanceof I&&(g=a.Gf.pop());!0===r&&a.Gf.pop();null!==a.$E&&(null===g&&(h===a.Wx?(od(a,1,0,0,1,0,0),g=a.Gf.pop()):g=a.Wx),a.$E(this,g))}}}}else{if(this instanceof I&&(this.type===Jo||this.type===Ko)){Lo(this,a,b);1!==d&&(a.globalAlpha=e);return}this instanceof H&&this.fo(!1);u&&u.xj&&u.vI(a,this);g=this.transform;h=this.Q;0!==(this.T&4096)===!0&&Mo(this);m=0!==(this.T&
256);a.Wt&&(m=!1);this instanceof pa&&(a.font=this.font);if(m){u&&u.ZE&&z.trace("clip"+this.toString());n=h.jh()?h.Ja:h.Z;null!==this.ug?(v=this.ug,k=v.x,l=v.y,q=v.width,v=v.height):(k=Math.max(c.x,n.x),l=Math.max(c.y,n.y),q=Math.min(c.right,n.right)-k,v=Math.min(c.bottom,n.bottom)-l);if(k>c.width+c.x||c.x>n.width+n.x||l>c.height+c.y||c.y>n.height+n.y){1!==d&&(a.globalAlpha=e);return}u&&u.ZE&&u.xI(a,k,l,q,v);a.save();a.beginPath();a.rect(k,l,q,v);a.clip()}n=!1;if(this instanceof D){n=!0;if(!this.isVisible()){1!==
d&&(a.globalAlpha=e);return}this.Vk&&b.Dj("drawShadows")&&(k=this.tn,a.FB(k.x*b.scale*b.rd,k.y*b.scale*b.rd,this.Lg),a.qo(),a.shadowColor=this.sn)}k=!1;this.ba&&b.Dj("drawShadows")&&(k=this.ba.Vk);!0===this.Tq?a.qo():!1===this.Tq&&a.po();null!==this.ic&&(No(this,a,this.ic,!0,!0),this.ic instanceof Ea&&this.ic.type===Bd?(a.beginPath(),a.rect(c.x,c.y,c.width,c.height),a.Tg(this.ic)):a.fillRect(c.x,c.y,c.width,c.height));g.uu()||a.transform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);null!==this.Kb&&(v=this.Ja,
l=c=0,q=v.width,v=v.height,r=0,this instanceof Y&&(v=this.nb.sb,c=v.x,l=v.y,q=v.width,v=v.height,r=this.ef),No(this,a,this.Kb,!0,!1),this.Kb instanceof Ea&&this.Kb.type===Bd?(a.beginPath(),a.rect(c-r/2,l-r/2,q+r,v+r),a.Tg(this.Kb)):a.fillRect(c-r/2,l-r/2,q+r,v+r));u&&u.xj&&u.wI(a,this);k&&(null!==this.Kb||null!==this.ic||null!==h&&0!==(h.T&512)||null!==h&&(h.type===Kl||h.type===Rj)&&h.Wd()!==this)?(Oo(this,!0),null===this.Tq&&a.po()):Oo(this,!1);this.Ok(a,b);k&&0!==(this.T&512)===!0&&a.qo();n&&k&&
a.po();m?(a.restore(),this instanceof I?da(a,!0):da(a,!1)):g.uu()||(h=1/(g.m11*g.m22-g.m12*g.m21),a.transform(g.m22*h,-g.m12*h,-g.m21*h,g.m11*h,h*(g.m21*g.dy-g.m22*g.dx),h*(g.m12*g.dx-g.m11*g.dy)))}1!==d&&(a.globalAlpha=e)}}};
function Lo(a,b,c){var d=a.ac;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.ic&&(No(a,b,a.ic,!0,!0),a.ic instanceof Ea&&a.ic.type===Bd?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),b.Tg(a.ic)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.Kb&&(No(a,b,a.Kb,!0,!1),a.Kb instanceof Ea&&a.Kb.type===Bd?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),b.Tg(a.Kb)):b.fillRect(d.x,d.y,d.width,d.height)),a.Ok(b,c))}O.prototype.Ok=function(){};
function No(a,b,c,d,e){if(null!==c){var g=1,h=1;if("string"===typeof c)d?b.fillStyle=c:b.strokeStyle=c;else if(c.type===Zg)d?b.fillStyle=c.color:b.strokeStyle=c.color;else{var k,h=a.Ja,g=h.width,h=h.height;if(e)var l=a.Z,g=l.width,h=l.height;var m=b instanceof Ad;if(m&&c.qh&&(c.type===Tn||c.Io===g&&c.az===h))k=c.qh;else{var n=l=0,p=0,q=0,r=0,s=0,s=r=0;e&&(l=a.Z,g=l.width,h=l.height,r=l.x,s=l.y);l=c.start.x*g+c.start.offsetX;n=c.start.y*h+c.start.offsetY;p=c.end.x*g+c.end.offsetX;q=c.end.y*h+c.end.offsetY;
l+=r;p+=r;n+=s;q+=s;if(c.type===$g)k=b.createLinearGradient(l,n,p,q);else if(c.type===Bd)s=isNaN(c.bu)?Math.max(g,h)/2:c.bu,isNaN(c.$u)?(r=0,s=Math.max(g,h)/2):r=c.$u,k=b.createRadialGradient(l,n,r,p,q,s);else if(c.type===Tn)try{k=b.createPattern(c.pattern,"repeat")}catch(v){k=null}else z.hc(c.type,"Brush type");if(c.type!==Tn&&(e=c.Jk,null!==e))for(e=e.j;e.next();)k.addColorStop(e.key,e.value);if(m&&(c.qh=k,null!==k&&(c.Io=g,c.az=h),null===k&&c.type===Tn&&-1!==c.Io)){c.Io=-1;var t=a.g;null!==t&&
-1===c.Io&&z.setTimeout(function(){t.Iq()},600)}}d?b.fillStyle=k:b.strokeStyle=k}}}O.prototype.isContainedBy=O.prototype.rm=function(a){if(a instanceof I)a:{if(this!==a&&null!==a)for(var b=this.Q;null!==b;){if(b===a){a=!0;break a}b=b.Q}a=!1}else a=!1;return a};O.prototype.isVisibleObject=O.prototype.Jj=function(){if(!this.visible)return!1;var a=this.Q;return null!==a?a.Jj():!0};
O.prototype.isEnabledObject=O.prototype.su=function(){for(var a=this instanceof I?this:this.Q;null!==a&&a.isEnabled;)a=a.Q;return null===a};z.defineProperty(O,{aF:"enabledChanged"},function(){return null!==this.ma?this.ma.Nr:null},function(a){uo(this);var b=this.ma.Nr;b!==a&&(null!==a&&z.h(a,"function",O,"enabledChanged"),this.ma.Nr=a,this.i("enabledChanged",b,a))});
function Mo(a){if(0!==(a.T&2048)===!0){var b=a.Jc;b.reset();if(!a.ac.F()||!a.Dd.F()){Po(a,!1);return}b.translate(a.ac.x,a.ac.y);b.translate(-a.Ea.x,-a.Ea.y);var c=a.Ja;Co(a,b,c.x,c.y,c.width,c.height);Po(a,!1);Qo(a,!0)}0!==(a.T&4096)===!0&&(b=a.Q,null===b?(a.Li.set(a.Jc),a.To=a.scale,Qo(a,!1)):null!==b.Gh&&(c=a.Li,c.reset(),b.jh()?c.multiply(b.Li):null!==b.Q&&c.multiply(b.Q.Li),c.multiply(a.Jc),a.To=a.scale*b.To,Qo(a,!1)))}
function Co(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var h=mc;a.yf&&a.yf.jd()&&(h=a.yf);var k=z.P();if(a instanceof D&&a.cc!==a)for(c=a.cc,d=c.Ja,k.Xu(d.x,d.y,d.width,d.height,h),c.ej.wb(k),k.offset(-c.Ea.x,-c.Ea.y),h=c.Q;null!==h&&h!==a;)h.ej.wb(k),k.offset(-h.Ea.x,-h.Ea.y),h=h.Q;else k.Xu(c,d,e,g,h);b.rotate(a.angle,k.x,k.y);z.A(k)}}f=O.prototype;f.K=function(a){void 0===a&&(a=!1);if(!0!==Cm(this)){cm(this,!0);Fo(this,!0);var b=this.Q;null===b||a||b.K()}};
f.tq=function(){!0!==Cm(this)&&(cm(this,!0),Fo(this,!0))};function Ro(a){if(!1===Dm(a)){var b=a.Q;null!==b?b.K():a instanceof D&&(b=a.g,null!==b&&(b.Cg.add(a),a instanceof E&&a.gg(),b.Te()));Fo(a,!0)}}f.$i=function(){0!==(this.T&2048)===!1&&(Po(this,!0),Qo(this,!0))};f.QA=function(){Qo(this,!0)};f.ra=function(){var a=this.ba;null!==a&&a.ra()};
function Eo(a,b){var c=a.stretch,d=a.Q;if(null!==d&&d.da===ha)return So(a,d.oe(a.Zb),d.ne(a.column),b);if(null!==d&&d.da===Kl&&d.Wd()===a)return To(a,gf,b);if(c===oo){if(null!==d){if(d.da===Rj&&d.Wd()===a)return To(a,gf,b);c=d.le;return c===oo?To(a,Tj,b):To(a,c,b)}return To(a,Tj,b)}return To(a,c,b)}
function So(a,b,c,d){var e=a.stretch;if(e!==oo)return To(a,e,d);var g=e=null;switch(b.stretch){case po:g=!0;break;case gf:g=!0}switch(c.stretch){case qo:e=!0;break;case gf:e=!0}b=a.Q.le;null===e&&(e=b===qo||b===gf);null===g&&(g=b===po||b===gf);return!0===e&&!0===g?To(a,gf,d):!0===e?To(a,qo,d):!0===g?To(a,po,d):To(a,Tj,d)}
function To(a,b,c){if(c)return b;if(b===Tj)return Tj;c=a.Da;if(c.F())return Tj;a=a.angle;if(!isNaN(c.width))if(90!==a&&270!==a){if(b===qo)return Tj;if(b===gf)return po}else{if(b===po)return Tj;if(b===gf)return qo}if(!isNaN(c.height))if(90!==a&&270!==a){if(b===po)return Tj;if(b===gf)return qo}else{if(b===qo)return Tj;if(b===gf)return po}return b}
z.defineProperty(O,{Pq:"segmentOrientation"},function(){return this.qn},function(a){var b=this.qn;b!==a&&(u&&z.Ca(a,H,O,"segmentOrientation"),this.qn=a,this.K(),this.i("segmentOrientation",b,a),a===nj&&(this.angle=0))});z.defineProperty(O,{Ue:"segmentIndex"},function(){return this.it},function(a){u&&z.h(a,"number",O,"segmentIndex");a=Math.round(a);var b=this.it;b!==a&&(this.it=a,this.K(),this.i("segmentIndex",b,a))});
z.defineProperty(O,{vB:"segmentFraction"},function(){return this.on},function(a){u&&z.h(a,"number",O,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.on;b!==a&&(this.on=a,this.K(),this.i("segmentFraction",b,a))});z.defineProperty(O,{wB:"segmentOffset"},function(){return this.pn},function(a){var b=this.pn;b.O(a)||(u&&z.l(a,M,O,"segmentOffset"),this.pn=a=a.V(),this.K(),this.i("segmentOffset",b,a))});
z.defineProperty(O,{stretch:"stretch"},function(){return this.Mg},function(a){var b=this.Mg;b!==a&&(u&&z.Ca(a,O,O,"stretch"),this.Mg=a,this.K(),this.i("stretch",b,a))});z.defineProperty(O,{name:"name"},function(){return this.Xb},function(a){var b=this.Xb;b!==a&&(u&&z.h(a,"string",O,"name"),this.Xb=a,null!==this.ba&&(this.ba.Jl=null),this.i("name",b,a))});
z.defineProperty(O,{opacity:"opacity"},function(){return this.Hc},function(a){var b=this.Hc;b!==a&&(z.h(a,"number",O,"opacity"),(0>a||1<a)&&z.wa(a,"0 <= value <= 1",O,"opacity"),this.Hc=a,this.i("opacity",b,a),a=this.g,b=this.ba,null!==a&&null!==b&&a.ra(sl(b,b.Z)))});
z.defineProperty(O,{visible:"visible"},function(){return 0!==(this.T&1)},function(a){var b=0!==(this.T&1);b!==a&&(u&&z.h(a,"boolean",O,"visible"),this.T^=1,this.i("visible",b,a),b=this.Q,null!==b?b.K():this instanceof D&&this.Kd(a),this.ra(),Uo(this))});z.defineProperty(O,{qg:"pickable"},function(){return 0!==(this.T&2)},function(a){var b=0!==(this.T&2);b!==a&&(u&&z.h(a,"boolean",O,"pickable"),this.T^=2,this.i("pickable",b,a))});
z.defineProperty(O,{FI:"fromLinkableDuplicates"},function(){return 0!==(this.T&4)},function(a){var b=0!==(this.T&4);b!==a&&(u&&z.h(a,"boolean",O,"fromLinkableDuplicates"),this.T^=4,this.i("fromLinkableDuplicates",b,a))});z.defineProperty(O,{GI:"fromLinkableSelfNode"},function(){return 0!==(this.T&8)},function(a){var b=0!==(this.T&8);b!==a&&(u&&z.h(a,"boolean",O,"fromLinkableSelfNode"),this.T^=8,this.i("fromLinkableSelfNode",b,a))});
z.defineProperty(O,{wK:"toLinkableDuplicates"},function(){return 0!==(this.T&16)},function(a){var b=0!==(this.T&16);b!==a&&(u&&z.h(a,"boolean",O,"toLinkableDuplicates"),this.T^=16,this.i("toLinkableDuplicates",b,a))});z.defineProperty(O,{xK:"toLinkableSelfNode"},function(){return 0!==(this.T&32)},function(a){var b=0!==(this.T&32);b!==a&&(u&&z.h(a,"boolean",O,"toLinkableSelfNode"),this.T^=32,this.i("toLinkableSelfNode",b,a))});
z.defineProperty(O,{If:"isPanelMain"},function(){return 0!==(this.T&64)},function(a){var b=0!==(this.T&64);b!==a&&(u&&z.h(a,"boolean",O,"isPanelMain"),this.T^=64,this.K(),this.i("isPanelMain",b,a))});z.defineProperty(O,{qu:"isActionable"},function(){return 0!==(this.T&128)},function(a){var b=0!==(this.T&128);b!==a&&(u&&z.h(a,"boolean",O,"isActionable"),this.T^=128,this.i("isActionable",b,a))});
z.defineProperty(O,{Xl:"areaBackground"},function(){return this.ic},function(a){var b=this.ic;b!==a&&(u&&null!==a&&z.Ut(a,"GraphObject.areaBackground"),a instanceof Ea&&a.freeze(),this.ic=a,this.ra(),this.i("areaBackground",b,a))});z.defineProperty(O,{background:"background"},function(){return this.Kb},function(a){var b=this.Kb;b!==a&&(u&&null!==a&&z.Ut(a,"GraphObject.background"),a instanceof Ea&&a.freeze(),this.Kb=a,this.ra(),this.i("background",b,a))});function Oo(a,b){a.T=b?a.T|512:a.T&-513}
function zo(a){return 0!==(a.T&1024)}function Vo(a,b){a.T=b?a.T|1024:a.T&-1025}function Po(a,b){a.T=b?a.T|2048:a.T&-2049}function Qo(a,b){a.T=b?a.T|4096:a.T&-4097}function Cm(a){return 0!==(a.T&8192)}function cm(a,b){a.T=b?a.T|8192:a.T&-8193}function Dm(a){return 0!==(a.T&16384)}function Fo(a,b){a.T=b?a.T|16384:a.T&-16385}z.w(O,{ba:"part"},function(){if(this instanceof D)return this;if(null!==this.hn)return this.hn;var a;for(a=this.Q;a;){if(a instanceof D)return this.hn=a;a=a.Q}return null});
z.w(O,{Q:"panel"},function(){return this.Ah});O.prototype.wm=function(a){this.Ah=a};z.w(O,{layer:"layer"},function(){var a=this.ba;return null!==a?a.layer:null},{configurable:!0});z.w(O,{g:"diagram"},function(){var a=this.ba;return null!==a?a.g:null},{configurable:!0});
z.defineProperty(O,{position:"position"},function(){return this.ub},function(a){u&&z.l(a,M,O,"position");var b=a.x,c=a.y,d=this.ub,e=d.x,g=d.y;(e===b||isNaN(e)&&isNaN(b))&&(g===c||isNaN(g)&&isNaN(c))?this.CB():(a=a.V(),this.BB(a,d)&&this.i("position",d,a))});O.prototype.CB=function(){};O.prototype.BB=function(a){this.ub=a;Ro(this);this.$i();return!0};O.prototype.zy=function(a,b){this.ub.m(a,b);Wo(this);this.$i()};z.w(O,{Z:"actualBounds"},function(){return this.ac});
z.defineProperty(O,{scale:"scale"},function(){return this.Rb},function(a){var b=this.Rb;b!==a&&(u&&z.p(a,O,"scale"),0>=a&&z.k("GraphObject.scale for "+this+" must be greater than zero, not: "+a),this.Rb=a,this.$i(),this.K(),this.i("scale",b,a))});z.defineProperty(O,{angle:"angle"},function(){return this.rg},function(a){var b=this.rg;b!==a&&(u&&z.p(a,O,"angle"),a%=360,0>a&&(a+=360),b!==a&&(this.rg=a,this.K(),this.$i(),this.i("angle",b,a)))});
z.defineProperty(O,{Da:"desiredSize"},function(){return this.Ye},function(a){u&&z.l(a,Fa,O,"desiredSize");var b=a.width,c=a.height,d=this.Ye,e=d.width,g=d.height;(e===b||isNaN(e)&&isNaN(b))&&(g===c||isNaN(g)&&isNaN(c))||(this.Ye=a=a.V(),this.K(),this instanceof Y&&this.Se(),this.i("desiredSize",d,a),zo(this)&&(a=this.ba,null!==a&&(Ao(this,a,"width"),Ao(this,a,"height"))))});
z.defineProperty(O,{width:"width"},function(){return this.Ye.width},function(a){var b=this.Ye.width;b===a||isNaN(b)&&isNaN(a)||(u&&z.h(a,"number",O,"width"),b=this.Ye,this.Ye=a=(new Fa(a,this.Ye.height)).freeze(),this.K(),this instanceof Y&&this.Se(),this.i("desiredSize",b,a),zo(this)&&(a=this.ba,null!==a&&Ao(this,a,"width")))});
z.defineProperty(O,{height:"height"},function(){return this.Ye.height},function(a){var b=this.Ye.height;b===a||isNaN(b)&&isNaN(a)||(u&&z.h(a,"number",O,"height"),b=this.Ye,this.Ye=a=(new Fa(this.Ye.width,a)).freeze(),this.K(),this instanceof Y&&this.Se(),this.i("desiredSize",b,a),zo(this)&&(a=this.ba,null!==a&&Ao(this,a,"height")))});
z.defineProperty(O,{ig:"minSize"},function(){return this.li},function(a){var b=this.li;b.O(a)||(u&&z.l(a,Fa,O,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.li=a,this.K(),this.i("minSize",b,a))});z.defineProperty(O,{mf:"maxSize"},function(){return this.ki},function(a){var b=this.ki;b.O(a)||(u&&z.l(a,Fa,O,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.ki=a,this.K(),this.i("maxSize",b,a))});
z.w(O,{Ea:"measuredBounds"},function(){return this.Dd});z.w(O,{Ja:"naturalBounds"},function(){return this.Tc},{configurable:!0});z.defineProperty(O,{margin:"margin"},function(){return this.an},function(a){"number"===typeof a?a=new Kb(a):u&&z.l(a,Kb,O,"margin");var b=this.an;b.O(a)||(this.an=a=a.V(),this.K(),this.i("margin",b,a))});z.w(O,{transform:null},function(){0!==(this.T&2048)===!0&&Mo(this);return this.Jc});z.w(O,{Gh:null},function(){0!==(this.T&4096)===!0&&Mo(this);return this.Li});
z.defineProperty(O,{alignment:"alignment"},function(){return this.te},function(a){var b=this.te;b.O(a)||(u&&z.l(a,R,O,"alignment"),a.$d()&&!a.hd()&&z.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+a),this.te=a=a.V(),Ro(this),this.i("alignment",b,a))});z.defineProperty(O,{column:"column"},function(){return this.pr},function(a){u&&z.p(a,O,"column");a=Math.round(a);var b=this.pr;b!==a&&(0>a&&z.wa(a,">= 0",O,"column"),this.pr=a,this.K(),this.i("column",b,a))});
z.defineProperty(O,{bI:"columnSpan"},function(){return this.Qi},function(a){u&&z.h(a,"number",O,"columnSpan");a=Math.round(a);var b=this.Qi;b!==a&&(1>a&&z.wa(a,">= 1",O,"columnSpan"),this.Qi=a,this.K(),this.i("columnSpan",b,a))});z.defineProperty(O,{Zb:"row"},function(){return this.et},function(a){u&&z.p(a,O,"row");a=Math.round(a);var b=this.et;b!==a&&(0>a&&z.wa(a,">= 0",O,"row"),this.et=a,this.K(),this.i("row",b,a))});
z.defineProperty(O,{rowSpan:"rowSpan"},function(){return this.pj},function(a){u&&z.h(a,"number",O,"rowSpan");a=Math.round(a);var b=this.pj;b!==a&&(1>a&&z.wa(a,">= 1",O,"rowSpan"),this.pj=a,this.K(),this.i("rowSpan",b,a))});z.defineProperty(O,{By:"spanAllocation"},function(){return this.ut},function(a){var b=this.ut;b!==a&&(null!==a&&z.h(a,"function",O,"spanAllocation"),this.ut=a,this.K(),this.i("spanAllocation",b,a))});
z.defineProperty(O,{Fh:"alignmentFocus"},function(){return this.Fm},function(a){var b=this.Fm;b.O(a)||(u&&z.l(a,R,O,"alignmentFocus"),!a.$d()||a.hd()||a.O(gc)&&this instanceof E||z.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+a),this.Fm=a=a.V(),this.K(),this.i("alignmentFocus",b,a))});
z.defineProperty(O,{vd:"portId"},function(){return this.Us},function(a){var b=this.Us;if(b!==a){u&&null!==a&&z.h(a,"string",O,"portId");var c=this.ba;null===c||c instanceof E||(z.k("Cannot set portID on a Link: "+a),c=null);null!==b&&null!==c&&Xo(c,this);this.Us=a;if(null!==a&&c){c.Tk=!0;null===c.ze&&Yo(c);var d=this.vd;null!==d&&c.ze.add(d,this)}this.i("portId",b,a)}});function Zo(a){var b=a.ba;if(b instanceof E&&(null!==a.vd||a===b.port)){var c=b.g;null===c||c.sa.lb||Io(b,a)}}
function Uo(a){var b=a.g;null===b||b.sa.lb||(a instanceof I?a instanceof E?a.gg():$o(a,a,function(a){Zo(a)}):Zo(a))}z.defineProperty(O,{Hb:"toSpot"},function(){return null!==this.Y?this.Y.Ek:gc},function(a){this.Xd();var b=this.Y.Ek;b.O(a)||(u&&z.l(a,R,O,"toSpot"),a=a.V(),this.Y.Ek=a,this.i("toSpot",b,a),Zo(this))});
z.defineProperty(O,{Bm:"toEndSegmentLength"},function(){return null!==this.Y?this.Y.Ck:10},function(a){this.Xd();var b=this.Y.Ck;b!==a&&(u&&z.h(a,"number",O,"toEndSegmentLength"),0>a&&z.wa(a,">= 0",O,"toEndSegmentLength"),this.Y.Ck=a,this.i("toEndSegmentLength",b,a),Zo(this))});
z.defineProperty(O,{bv:"toEndSegmentDirection"},function(){return null!==this.Y?this.Y.Bk:xo},function(a){this.Xd();var b=this.Y.Bk;b!==a&&(z.Nn("GraphObject.toEndSegmentDirection","2.0"),u&&z.Ca(a,E,O,"toEndSegmentDirection"),this.Y.Bk=a,this.i("toEndSegmentDirection",b,a),Zo(this))});z.defineProperty(O,{cv:"toShortLength"},function(){return null!==this.Y?this.Y.Dk:0},function(a){this.Xd();var b=this.Y.Dk;b!==a&&(u&&z.h(a,"number",O,"toShortLength"),this.Y.Dk=a,this.i("toShortLength",b,a),Zo(this))});
z.defineProperty(O,{QG:"toLinkable"},function(){return null!==this.Y?this.Y.Dt:null},function(a){this.Xd();var b=this.Y.Dt;b!==a&&(u&&null!==a&&z.h(a,"boolean",O,"toLinkable"),this.Y.Dt=a,this.i("toLinkable",b,a))});z.defineProperty(O,{yK:"toMaxLinks"},function(){return null!==this.Y?this.Y.Et:Infinity},function(a){this.Xd();var b=this.Y.Et;b!==a&&(u&&z.h(a,"number",O,"toMaxLinks"),0>a&&z.wa(a,">= 0",O,"toMaxLinks"),this.Y.Et=a,this.i("toMaxLinks",b,a))});
z.defineProperty(O,{Gb:"fromSpot"},function(){return null!==this.Y?this.Y.fk:gc},function(a){this.Xd();var b=this.Y.fk;b.O(a)||(u&&z.l(a,R,O,"fromSpot"),a=a.V(),this.Y.fk=a,this.i("fromSpot",b,a),Zo(this))});z.defineProperty(O,{lm:"fromEndSegmentLength"},function(){return null!==this.Y?this.Y.dk:10},function(a){this.Xd();var b=this.Y.dk;b!==a&&(u&&z.h(a,"number",O,"fromEndSegmentLength"),0>a&&z.wa(a,">= 0",O,"fromEndSegmentLength"),this.Y.dk=a,this.i("fromEndSegmentLength",b,a),Zo(this))});
z.defineProperty(O,{ju:"fromEndSegmentDirection"},function(){return null!==this.Y?this.Y.ck:xo},function(a){this.Xd();var b=this.Y.ck;b!==a&&(z.Nn("GraphObject.fromEndSegmentDirection","2.0"),u&&z.Ca(a,E,O,"fromEndSegmentDirection"),this.Y.ck=a,this.i("fromEndSegmentDirection",b,a),Zo(this))});
z.defineProperty(O,{ku:"fromShortLength"},function(){return null!==this.Y?this.Y.ek:0},function(a){this.Xd();var b=this.Y.ek;b!==a&&(u&&z.h(a,"number",O,"fromShortLength"),this.Y.ek=a,this.i("fromShortLength",b,a),Zo(this))});z.defineProperty(O,{kF:"fromLinkable"},function(){return null!==this.Y?this.Y.Rr:null},function(a){this.Xd();var b=this.Y.Rr;b!==a&&(u&&null!==a&&z.h(a,"boolean",O,"fromLinkable"),this.Y.Rr=a,this.i("fromLinkable",b,a))});
z.defineProperty(O,{GA:"fromMaxLinks"},function(){return null!==this.Y?this.Y.Sr:Infinity},function(a){this.Xd();var b=this.Y.Sr;b!==a&&(u&&z.h(a,"number",O,"fromMaxLinks"),0>a&&z.wa(a,">= 0",O,"fromMaxLinks"),this.Y.Sr=a,this.i("fromMaxLinks",b,a))});z.defineProperty(O,{cursor:"cursor"},function(){return this.xr},function(a){var b=this.xr;b!==a&&(z.h(a,"string",O,"cursor"),this.xr=a,this.i("cursor",b,a))});
z.defineProperty(O,{click:"click"},function(){return null!==this.ma?this.ma.Pi:null},function(a){uo(this);var b=this.ma.Pi;b!==a&&(null!==a&&z.h(a,"function",O,"click"),this.ma.Pi=a,this.i("click",b,a))});z.defineProperty(O,{au:"doubleClick"},function(){return null!==this.ma?this.ma.Wi:null},function(a){uo(this);var b=this.ma.Wi;b!==a&&(null!==a&&z.h(a,"function",O,"doubleClick"),this.ma.Wi=a,this.i("doubleClick",b,a))});
z.defineProperty(O,{oA:"contextClick"},function(){return null!==this.ma?this.ma.Ri:null},function(a){uo(this);var b=this.ma.Ri;b!==a&&(null!==a&&z.h(a,"function",O,"contextClick"),this.ma.Ri=a,this.i("contextClick",b,a))});z.defineProperty(O,{Eu:"mouseEnter"},function(){return null!==this.ma?this.ma.Fs:null},function(a){uo(this);var b=this.ma.Fs;b!==a&&(null!==a&&z.h(a,"function",O,"mouseEnter"),this.ma.Fs=a,this.i("mouseEnter",b,a))});
z.defineProperty(O,{Fu:"mouseLeave"},function(){return null!==this.ma?this.ma.Gs:null},function(a){uo(this);var b=this.ma.Gs;b!==a&&(null!==a&&z.h(a,"function",O,"mouseLeave"),this.ma.Gs=a,this.i("mouseLeave",b,a))});z.defineProperty(O,{eB:"mouseOver"},function(){return null!==this.ma?this.ma.jj:null},function(a){uo(this);var b=this.ma.jj;b!==a&&(null!==a&&z.h(a,"function",O,"mouseOver"),this.ma.jj=a,this.i("mouseOver",b,a))});
z.defineProperty(O,{dB:"mouseHover"},function(){return null!==this.ma?this.ma.ij:null},function(a){uo(this);var b=this.ma.ij;b!==a&&(null!==a&&z.h(a,"function",O,"mouseHover"),this.ma.ij=a,this.i("mouseHover",b,a))});z.defineProperty(O,{cB:"mouseHold"},function(){return null!==this.ma?this.ma.hj:null},function(a){uo(this);var b=this.ma.hj;b!==a&&(null!==a&&z.h(a,"function",O,"mouseHold"),this.ma.hj=a,this.i("mouseHold",b,a))});
z.defineProperty(O,{HJ:"mouseDragEnter"},function(){return null!==this.ma?this.ma.Ds:null},function(a){uo(this);var b=this.ma.Ds;b!==a&&(null!==a&&z.h(a,"function",O,"mouseDragEnter"),this.ma.Ds=a,this.i("mouseDragEnter",b,a))});z.defineProperty(O,{IJ:"mouseDragLeave"},function(){return null!==this.ma?this.ma.Es:null},function(a){uo(this);var b=this.ma.Es;b!==a&&(null!==a&&z.h(a,"function",O,"mouseDragLeave"),this.ma.Es=a,this.i("mouseDragLeave",b,a))});
z.defineProperty(O,{bB:"mouseDrop"},function(){return null!==this.ma?this.ma.gj:null},function(a){uo(this);var b=this.ma.gj;b!==a&&(null!==a&&z.h(a,"function",O,"mouseDrop"),this.ma.gj=a,this.i("mouseDrop",b,a))});z.defineProperty(O,{qE:"actionDown"},function(){return null!==this.ma?this.ma.$q:null},function(a){uo(this);var b=this.ma.$q;b!==a&&(null!==a&&z.h(a,"function",O,"actionDown"),this.ma.$q=a,this.i("actionDown",b,a))});
z.defineProperty(O,{rE:"actionMove"},function(){return null!==this.ma?this.ma.ar:null},function(a){uo(this);var b=this.ma.ar;b!==a&&(null!==a&&z.h(a,"function",O,"actionMove"),this.ma.ar=a,this.i("actionMove",b,a))});z.defineProperty(O,{sE:"actionUp"},function(){return null!==this.ma?this.ma.br:null},function(a){uo(this);var b=this.ma.br;b!==a&&(null!==a&&z.h(a,"function",O,"actionUp"),this.ma.br=a,this.i("actionUp",b,a))});
z.defineProperty(O,{pE:"actionCancel"},function(){return null!==this.ma?this.ma.Zq:null},function(a){uo(this);var b=this.ma.Zq;b!==a&&(null!==a&&z.h(a,"function",O,"actionCancel"),this.ma.Zq=a,this.i("actionCancel",b,a))});z.defineProperty(O,{LB:"toolTip"},function(){return null!==this.ma?this.ma.sj:null},function(a){uo(this);var b=this.ma.sj;b!==a&&(!u||null===a||a instanceof ea||a instanceof bk||z.k("GraphObject.toolTip must be an Adornment or HTMLInfo."),this.ma.sj=a,this.i("toolTip",b,a))});
z.defineProperty(O,{contextMenu:"contextMenu"},function(){return null!==this.ma?this.ma.Si:null},function(a){uo(this);var b=this.ma.Si;b!==a&&(!u||a instanceof ea||a instanceof bk||z.k("GraphObject.contextMenu must be an Adornment or HTMLInfo."),this.ma.Si=a,this.i("contextMenu",b,a))});O.prototype.bind=O.prototype.bind=function(a){a.Ng=this;var b=this.jm();null!==b&&ap(b)&&z.k("Cannot add a Binding to a template that has already been copied: "+a);null===this.Ec&&(this.Ec=new J(sh));this.Ec.add(a)};
O.prototype.findTemplateBinder=O.prototype.jm=function(){for(var a=this instanceof I?this:this.Q;null!==a;){if(null!==a.pl)return a;a=a.Q}return null};O.prototype.setProperties=function(a){z.Vu(this,a)};var bp;
O.make=bp=function(a,b){var c=arguments,d=null,e=null;if("function"===typeof a)e=a;else if("string"===typeof a){var g=cp.qa(a);"function"===typeof g?(c=z.am(arguments),d=g(c)):e=ca[a]}null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&z.k("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),z.k("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||z.k("GraphObject.make requires a class function or class name, not: "+
a),d=new e);g=1;if(d instanceof C&&1<c.length){var h=d,e=c[1];if("string"===typeof e||e instanceof HTMLDivElement)Il(h,e),g++}for(;g<c.length;g++)e=c[g],void 0===e?z.k("Undefined value at argument "+g+" for object being constructed by GraphObject.make: "+d):dp(d,e);return d};
function dp(a,b){if("string"===typeof b)if(a instanceof pa)a.text=b;else if(a instanceof Y)a.Jb=b;else if(a instanceof Cl)a.source=b;else if(a instanceof I){var c=Ja(I,b);null!==c?a.type=c:z.k("Unknown Panel type as an argument to GraphObject.make: "+b)}else a instanceof Ea?(c=Ja(Ea,b),null!==c?a.type=c:z.k("Unknown Brush type as an argument to GraphObject.make: "+b)):a instanceof Ve?(c=Ja(Ve,b),null!==c?a.type=c:z.k("Unknown Geometry type as an argument to GraphObject.make: "+b)):a instanceof Wf?
(c=Ja(Wf,b),null!==c?a.type=c:z.k("Unknown PathSegment type as an argument to GraphObject.make: "+b)):z.k("Unable to use a string as an argument to GraphObject.make: "+b);else if(b instanceof O)c=b,a instanceof I||z.k("A GraphObject can only be added to a Panel, not to: "+a),a.add(c);else if(b instanceof mh){var d=b,c=a,e;d.Je&&c.getRowDefinition?e=c.getRowDefinition(d.index):!d.Je&&c.getColumnDefinition?e=c.getColumnDefinition(d.index):z.k("A RowColumnDefinition can only be added to a Panel, not to: "+
a);e.bq(d)}else if(b instanceof Ca)"function"===typeof a.pc?a.pc(b):z.Tj(a,b);else if(b instanceof sh)a instanceof O?a.bind(b):a instanceof mh?a.bind(b):z.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof Xe)a instanceof Ve?a.mc.add(b):z.k("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof Wf)a instanceof Xe?a.Db.add(b):z.k("A PathSegment can only be added to a PathFigure, not to: "+a);else if(b instanceof ch)a instanceof
C?a.Wb=b:a instanceof F?a.Wb=b:z.k("A Layout can only be assigned to a Diagram or a Group, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)dp(a,b[c]);else if("object"===typeof b&&null!==b)if(a instanceof Ea){e=new na;for(c in b)d=parseFloat(c),isNaN(d)?e[c]=b[c]:a.addColorStop(d,b[c]);z.Vu(a,e)}else if(a instanceof mh){void 0!==b.row?(e=b.row,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&z.k("Must specify non-negative integer row for RowColumnDefinition "+b+", not: "+e),a.Je=!0,
a.index=e):void 0!==b.column&&(e=b.column,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&z.k("Must specify non-negative integer column for RowColumnDefinition "+b+", not: "+e),a.Je=!1,a.index=e);e=new na;for(c in b)"row"!==c&&"column"!==c&&(e[c]=b[c]);z.Vu(a,e)}else z.Vu(a,b);else z.k('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}var cp=new oa("string","function");
O.getBuilders=function(){var a=new oa("string","function"),b;for(b in cp)if(b!==b.toLowerCase()){var c=cp[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};var ep;O.defineBuilder=ep=function(a,b){z.h(a,"string",O,"defineBuilder:name");z.h(b,"function",O,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||z.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);cp.add(a,b)};var fp;
O.takeBuilderArgument=fp=function(a,b,c){void 0===c&&(c=null);var d=a[1];if("function"===typeof c?c(d):"string"===typeof d)return a.splice(1,1),d;if(void 0===b)throw Error("no "+("function"===typeof c?"satisfactory":"string")+" argument for GraphObject builder "+a[0]);return b};
ep("Button",function(){var a=new Ea($g);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Ea($g);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");a=bp(I,Kl,{qu:!0,aF:function(a,b){var e=a.Gd("ButtonBorder");null!==e&&(e.fill=b?a._buttonFillNormal:a._buttonFillDisabled)},_buttonFillNormal:a,_buttonStrokeNormal:"gray",_buttonFillOver:b,_buttonStrokeOver:"blue",_buttonFillDisabled:"darkgray"},bp(Y,{name:"ButtonBorder",Jb:"Rectangle",C:new R(0,0,2.761423749153968,2.761423749153968),
D:new R(1,1,-2.761423749153968,-2.761423749153968),fill:a,stroke:"gray"}));a.Eu=function(a,b){if(b.su()){var e=b.Gd("ButtonBorder");if(e instanceof Y){var g=b._buttonFillOver;b._buttonFillNormal=e.fill;e.fill=g;g=b._buttonStrokeOver;b._buttonStrokeNormal=e.stroke;e.stroke=g}}};a.Fu=function(a,b){if(b.su()){var e=b.Gd("ButtonBorder");e instanceof Y&&(e.fill=b._buttonFillNormal,e.stroke=b._buttonStrokeNormal)}};return a});
ep("TreeExpanderButton",function(){var a=bp("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},bp(Y,{name:"ButtonIcon",Jb:"MinusLine",Da:Ud},(new sh("figure","isTreeExpanded",function(a,c){var d=c.Q;return a?d._treeExpandedFigure:d._treeCollapsedFigure})).ey()),{visible:!1},(new sh("visible","isTreeLeaf",function(a){return!a})).ey());a.click=function(a,c){var d=c.ba;d instanceof ea&&(d=d.$f);if(d instanceof E){var e=d.g;if(null!==e){e=e.xb;if(d.ud){if(!e.canCollapseTree(d))return}else if(!e.canExpandTree(d))return;
a.Nc=!0;d.ud?e.collapseTree(d):e.expandTree(d)}}};return a});
ep("SubGraphExpanderButton",function(){var a=bp("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},bp(Y,{name:"ButtonIcon",Jb:"MinusLine",Da:Ud},(new sh("figure","isSubGraphExpanded",function(a,c){var d=c.Q;return a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure})).ey()));a.click=function(a,c){var d=c.ba;d instanceof ea&&(d=d.$f);if(d instanceof F){var e=d.g;if(null!==e){e=e.xb;if(d.Ke){if(!e.canCollapseSubGraph(d))return}else if(!e.canExpandSubGraph(d))return;a.Nc=
!0;d.Ke?e.collapseSubGraph(d):e.expandSubGraph(d)}}};return a});ep("ContextMenuButton",function(){var a=bp("Button");a.stretch=qo;var b=a.Gd("ButtonBorder");b instanceof Y&&(b.Jb="Rectangle",b.C=new R(0,0,2,3),b.D=new R(1,1,-2,-2));return a});
ep("PanelExpanderButton",function(a){var b=fp(a,"COLLAPSIBLE"),c=bp("Button",{_buttonExpandedFigure:"TriangleUp",_buttonCollapsedFigure:"TriangleDown"},bp(Y,"TriangleUp",{name:"ButtonIcon",Da:new Fa(6,4)},(new sh("figure","visible",function(a){return a?c._buttonExpandedFigure:c._buttonCollapsedFigure})).ey(b)));a=c.Gd("ButtonBorder");a instanceof Y&&(a.stroke=null,a.fill="transparent");c.click=function(a,c){var g=c.g;if(null!==g&&!g.kb){var h=c.jm();null===h&&(h=c.ba);null!==h&&(h=h.Gd(b),null!==
h&&(g.$b("Collapse/Expand Panel"),h.visible=!h.visible,g.Vd("Collapse/Expand Panel")))}};return c});
ep("CheckBoxButton",function(a){var b=fp(a);a=bp("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},bp(Y,{name:"ButtonIcon",HI:"M0 4 L3 9 9 0",mb:2,stretch:gf,HA:Vj,visible:!1},""!==b?(new sh("visible",b)).wJ():[]));a.click=function(a,d){var e=a.g;if(!(null===e||e.kb||""!==b&&e.ia.kb)){a.Nc=!0;var g=d.Gd("ButtonIcon");e.$b("checkbox");g.visible=!g.visible;"function"===typeof d._doClick&&d._doClick(a,d);e.Vd("checkbox")}};return a});
ep("CheckBox",function(a){a=fp(a);a=bp("CheckBoxButton",a,{name:"Button",margin:new Kb(0,1,0,0)});var b=bp(I,"Horizontal",a,{qu:!0,margin:1,_buttonFillNormal:a._buttonFillNormal,_buttonStrokeNormal:a._buttonStrokeNormal,_buttonFillOver:a._buttonFillOver,_buttonStrokeOver:a._buttonStrokeOver,_buttonFillDisabled:a._buttonFillDisabled,Eu:a.Eu,Fu:a.Fu,click:a.click,_buttonClick:a.click});a.Eu=null;a.Fu=null;a.click=null;return b});
function vo(){this.Nr=this.Si=this.sj=this.Zq=this.br=this.ar=this.$q=this.gj=this.Es=this.Ds=this.hj=this.ij=this.jj=this.Gs=this.Fs=this.Ri=this.Wi=this.Pi=null}vo.prototype.copy=function(){var a=new vo;a.Pi=this.Pi;a.Wi=this.Wi;a.Ri=this.Ri;a.Fs=this.Fs;a.Gs=this.Gs;a.jj=this.jj;a.ij=this.ij;a.hj=this.hj;a.Ds=this.Ds;a.Es=this.Es;a.gj=this.gj;a.$q=this.$q;a.ar=this.ar;a.br=this.br;a.Zq=this.Zq;a.sj=this.sj;a.Si=this.Si;a.Nr=this.Nr;return a};
function I(a){O.call(this);void 0===a?0===arguments.length?this.da=Yj:z.k("invalid argument to Panel constructor: undefined"):(z.Ca(a,I,I,"type"),this.da=a);this.va=new J(O);this.sf=Nd;this.da===Nl&&(this.Yn=!0);this.Br=Rc;this.Vi=oo;this.da===ha&&gp(this);this.Tp=Vj;this.Zr=Wd;this.$r=Dd;this.Wr=0;this.Vr=100;this.Yr=10;this.Xr=0;this.pl=this.ge=this.gk=this.Nm=this.Pm=null;this.ls=NaN;this.Eg=this.cj=null;this.mp="category";this.Dg=null;this.uj=new w(NaN,NaN,NaN,NaN);this.Ak=this.ft=this.wn=null;
this.Wj=""}z.Ta(I,O);z.Ai(I);z.ka("Panel",I);function gp(a){a.$j=Nd;a.bi=1;a.Ui=null;a.Km=null;a.ai=1;a.$h=null;a.Jm=null;a.je=[];a.ee=[];a.nn=hp;a.Im=hp;a.tj=0;a.dj=0}
I.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.da=this.da;a.sf=this.sf.V();a.Br=this.Br.V();a.Vi=this.Vi;if(a.da===ha){a.$j=this.$j.V();a.bi=this.bi;a.Ui=this.Ui;a.Km=this.Km;a.ai=this.ai;a.$h=this.$h;a.Jm=this.Jm;var b=[];if(0<this.je.length)for(var c=this.je,d=c.length,e=0;e<d;e++)if(void 0!==c[e]){var g=c[e].copy();g.wm(a);b[e]=g}a.je=b;b=[];if(0<this.ee.length)for(c=this.ee,d=c.length,e=0;e<d;e++)void 0!==c[e]&&(g=c[e].copy(),g.wm(a),b[e]=g);a.ee=b;a.nn=this.nn;
a.Im=this.Im;a.tj=this.tj;a.dj=this.dj}a.Tp=this.Tp;a.Zr=this.Zr.V();a.$r=this.$r.V();a.Wr=this.Wr;a.Vr=this.Vr;a.Yr=this.Yr;a.Xr=this.Xr;a.Pm=this.Pm;a.gk=this.gk;a.ge=this.ge;a.pl=this.pl;a.ls=this.ls;a.cj=this.cj;a.Eg=this.Eg;a.mp=this.mp;a.uj.assign(this.uj);a.Wj=this.Wj;null!==this.ft&&(a.ft=this.ft)};I.prototype.Bi=function(a){O.prototype.Bi.call(this,a);a.va=this.va;for(var b=a.va.o,c=b.length,d=0;d<c;d++)b[d].Ah=a;a.wn=null};
I.prototype.copy=function(){var a=O.prototype.copy.call(this);if(null!==a){for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d].copy(),g=a;e.wm(g);e.hn=null;var h=g.va,k=h.count;h.Yd(k,e);h=g.ba;if(null!==h){h.Jl=null;null!==e.vd&&h instanceof E&&(h.Tk=!0);var l=g.g;null!==l&&l.sa.lb||h.ld(sg,"elements",g,null,e,null,k)}}return a}return null};I.prototype.pc=function(a){a.Pe===I?this.type=a:O.prototype.pc.call(this,a)};I.prototype.toString=function(){return"Panel("+this.type+")#"+z.Hd(this)};var Yj;
I.Position=Yj=z.s(I,"Position",0);I.Horizontal=z.s(I,"Horizontal",1);var Jl;I.Vertical=Jl=z.s(I,"Vertical",2);var Rj;I.Spot=Rj=z.s(I,"Spot",3);var Kl;I.Auto=Kl=z.s(I,"Auto",4);var ha;I.Table=ha=z.s(I,"Table",5);I.Viewbox=z.s(I,"Viewbox",6);var Jo;I.TableRow=Jo=z.s(I,"TableRow",7);var Ko;I.TableColumn=Ko=z.s(I,"TableColumn",8);var kj;I.Link=kj=z.s(I,"Link",9);var Nl;I.Grid=Nl=z.s(I,"Grid",10);var Fp;I.Graduated=Fp=z.s(I,"Graduated",11);
z.defineProperty(I,{type:"type"},function(){return this.da},function(a){var b=this.da;b!==a&&(u&&z.Ca(a,I,I,"type"),b!==Jo&&b!==Ko||z.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.da=a,this.da===Nl?this.Yn=!0:this.da===ha&&gp(this),this.K(),this.i("type",b,a))});z.w(I,{elements:"elements"},function(){return this.va.j});z.w(I,{Ja:"naturalBounds"},function(){return this.Tc});
z.defineProperty(I,{padding:"padding"},function(){return this.sf},function(a){"number"===typeof a?(0>a&&z.wa(a,">= 0",I,"padding"),a=new Kb(a)):(z.l(a,Kb,I,"padding"),0>a.left&&z.wa(a.left,">= 0",I,"padding:value.left"),0>a.right&&z.wa(a.right,">= 0",I,"padding:value.right"),0>a.top&&z.wa(a.top,">= 0",I,"padding:value.top"),0>a.bottom&&z.wa(a.bottom,">= 0",I,"padding:value.bottom"));var b=this.sf;b.O(a)||(this.sf=a=a.V(),this.K(),this.i("padding",b,a))});
z.defineProperty(I,{em:"defaultAlignment"},function(){return this.Br},function(a){var b=this.Br;b.O(a)||(u&&z.l(a,R,I,"defaultAlignment"),this.Br=a=a.V(),this.K(),this.i("defaultAlignment",b,a))});z.defineProperty(I,{le:"defaultStretch"},function(){return this.Vi},function(a){var b=this.Vi;b!==a&&(z.Ca(a,O,I,"defaultStretch"),this.Vi=a,this.K(),this.i("defaultStretch",b,a))});
z.defineProperty(I,{vL:"defaultSeparatorPadding"},function(){return void 0===this.$j?Nd:this.$j},function(a){if(void 0!==this.$j){"number"===typeof a?a=new Kb(a):u&&z.l(a,Kb,I,"defaultSeparatorPadding");var b=this.$j;b.O(a)||(this.$j=a=a.V(),this.K(),this.i("defaultSeparatorPadding",b,a))}});
z.defineProperty(I,{tL:"defaultRowSeparatorStroke"},function(){return void 0===this.Ui?null:this.Ui},function(a){var b=this.Ui;b!==a&&(null===a||"string"===typeof a||a instanceof Ea)&&(a instanceof Ea&&a.freeze(),this.Ui=a,this.ra(),this.i("defaultRowSeparatorStroke",b,a))});
z.defineProperty(I,{uL:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.bi?1:this.bi},function(a){if(void 0!==this.bi){var b=this.bi;b!==a&&isFinite(a)&&0<=a&&(this.bi=a,this.K(),this.i("defaultRowSeparatorStrokeWidth",b,a))}});
z.defineProperty(I,{sL:"defaultRowSeparatorDashArray"},function(){return void 0===this.Km?null:this.Km},function(a){if(void 0!==this.Km){var b=this.Km;if(b!==a){null===a||Array.isArray(a)||z.hc(a,"Array",I,"defaultRowSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("defaultRowSeparatorDashArray value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.Km=a;this.ra();
this.i("defaultRowSeparatorDashArray",b,a)}}});z.defineProperty(I,{nL:"defaultColumnSeparatorStroke"},function(){return void 0===this.$h?null:this.$h},function(a){if(void 0!==this.$h){var b=this.$h;b!==a&&(null===a||"string"===typeof a||a instanceof Ea)&&(a instanceof Ea&&a.freeze(),this.$h=a,this.ra(),this.i("defaultColumnSeparatorStroke",b,a))}});
z.defineProperty(I,{oL:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.ai?1:this.ai},function(a){if(void 0!==this.ai){var b=this.ai;b!==a&&isFinite(a)&&0<=a&&(this.ai=a,this.K(),this.i("defaultColumnSeparatorStrokeWidth",b,a))}});
z.defineProperty(I,{mL:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Jm?null:this.Jm},function(a){if(void 0!==this.Jm){var b=this.Jm;if(b!==a){null===a||Array.isArray(a)||z.hc(a,"Array",I,"defaultColumnSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("defaultColumnSeparatorDashArray value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.Jm=
a;this.ra();this.i("defaultColumnSeparatorDashArray",b,a)}}});z.defineProperty(I,{KM:"viewboxStretch"},function(){return this.Tp},function(a){var b=this.Tp;b!==a&&(z.Ca(a,O,I,"viewboxStretch"),this.Tp=a,this.K(),this.i("viewboxStretch",b,a))});
z.defineProperty(I,{Kx:"gridCellSize"},function(){return this.Zr},function(a){var b=this.Zr;if(!b.O(a)){z.l(a,Fa,I,"gridCellSize");a.F()&&0!==a.width&&0!==a.height||z.k("Invalid Panel.gridCellSize: "+a);this.Zr=a.V();var c=this.g;null!==c&&this===c.Vn&&dm(c);this.ra();this.i("gridCellSize",b,a)}});
z.defineProperty(I,{tF:"gridOrigin"},function(){return this.$r},function(a){var b=this.$r;if(!b.O(a)){z.l(a,M,I,"gridOrigin");a.F()||z.k("Invalid Panel.gridOrigin: "+a);this.$r=a.V();var c=this.g;null!==c&&this===c.Vn&&dm(c);this.ra();this.i("gridOrigin",b,a)}});z.defineProperty(I,{Sk:"graduatedMin"},function(){return this.Wr},function(a){z.p(a,I,"graduatedMin");var b=this.Wr;b!==a&&(this.Wr=a,this.K(),this.i("graduatedMin",b,a),zo(this)&&(a=this.ba,null!==a&&Ao(this,a,"graduatedRange")))});
z.defineProperty(I,{KA:"graduatedMax"},function(){return this.Vr},function(a){z.p(a,I,"graduatedMax");var b=this.Vr;b!==a&&(this.Vr=a,this.K(),this.i("graduatedMax",b,a),zo(this)&&(a=this.ba,null!==a&&Ao(this,a,"graduatedRange")))});z.w(I,{Jx:"graduatedRange"},function(){return this.KA-this.Sk});z.defineProperty(I,{LA:"graduatedTickUnit"},function(){return this.Yr},function(a){z.p(a,I,"graduatedTickUnit");var b=this.Yr;b!==a&&0<a&&(this.Yr=a,this.K(),this.i("graduatedTickUnit",b,a))});
z.defineProperty(I,{sF:"graduatedTickBase"},function(){return this.Xr},function(a){z.p(a,I,"graduatedTickBase");var b=this.Xr;b!==a&&(this.Xr=a,this.K(),this.i("graduatedTickBase",b,a))});f=I.prototype;f.sw=function(a){O.prototype.sw.call(this,a);for(var b=this.va.o,c=b.length,d=0;d<c;d++)b[d].sw(a)};
f.Ok=function(a,b){if(this.da===Nl){var c=this.Cj()*b.scale;0>=c&&(c=1);var d=this.Kx,e=d.width,d=d.height,g=this.Ja,h=g.width,g=g.height,k=Math.ceil(h/e),l=Math.ceil(g/d),m=this.tF;a.save();a.beginPath();a.rect(0,0,h,g);a.clip();for(var n=[],p=this.va.o,q=p.length,r=0;r<q;r++){var s=p[r],v=[];n.push(v);if(s.visible)for(var s=Xm(s.Jb),t=r+1;t<q;t++){var x=p[t];x.visible&&Xm(x.Jb)===s&&(x=x.interval,2<=x&&v.push(x))}}p=this.va.o;q=p.length;for(r=0;r<q;r++){var y=p[r];if(y.visible&&(v=y.interval,!(2>
e*v*c))){var s=n[r],t=!1,B=!0,A=y.MG;null!==A&&(t=!0,B=a.AA(A,y.Oe));if("LineV"===y.Jb){a.lineWidth=y.mb;No(this,a,y.stroke,!1,!1);a.beginPath();for(var N=x=Math.floor(-m.x/e);N<=x+k;N++){var G=N*e+m.x;0<=G&&G<h&&Gp(N,v,s)&&(t&&!B?yo(a,G,0,G,g,A,y.Oe):(a.moveTo(G,0),a.lineTo(G,g)))}a.stroke()}else if("LineH"===y.Jb){a.lineWidth=y.mb;No(this,a,y.stroke,!1,!1);a.beginPath();for(N=x=Math.floor(-m.y/d);N<=x+l;N++)G=N*d+m.y,0<=G&&G<=g&&Gp(N,v,s)&&(t&&!B?yo(a,0,G,h,G,A,y.Oe):(a.moveTo(0,G),a.lineTo(h,G)));
a.stroke()}else if("BarV"===y.Jb)for(No(this,a,y.fill,!0,!1),y=y.width,isNaN(y)&&(y=e),N=x=Math.floor(-m.x/e);N<=x+k;N++)G=N*e+m.x,0<=G&&G<h&&Gp(N,v,s)&&a.fillRect(G,0,y,g);else if("BarH"===y.Jb)for(No(this,a,y.fill,!0,!1),y=y.height,isNaN(y)&&(y=d),N=x=Math.floor(-m.y/d);N<=x+l;N++)G=N*d+m.y,0<=G&&G<=g&&Gp(N,v,s)&&a.fillRect(0,G,h,y);t&&a.vA()}}a.restore();da(a,!1)}else if(this.da===Fp){e=this.Ja;c=e.width;e=e.height;a.save();a.beginPath();a.rect(-1,-1,c+1,e+1);a.clip();c=this.Wd();c.Fe(a,b);e=this.Cj()*
b.scale;0>=e&&(e=1);d=c.Z;h=this.va.o;g=this.Pm;k=h.length;for(l=0;l<k;l++)if(q=h[l],m=g[l],n=m.length,q.visible&&q!==c&&0!==m.length)if(q instanceof Y){if(!(2>this.LA*q.interval*e))for(r=q.Ea,v=q.mb*q.scale,s=q.Fh,s.$d()&&(s=ic),p=0;p<n;p++){var t=q,x=m[p][0],N=d,y=m[p][1],B=r,A=v,G=s,T=t.Jc;T.reset();T.translate(x.x+N.x,x.y+N.y);T.rotate(y+t.angle,0,0);T.translate(-B.width*G.x+G.offsetX+A/2,-B.height*G.y+G.offsetY+A/2);T.scale(t.scale,t.scale);Po(t,!1);t.Li.set(t.Jc);t.To=t.scale;Qo(t,!1);q.Fe(a,
b);q.Jc.reset()}}else if(q instanceof pa)for(null===this.Ak&&(this.Ak=new pa),r=this.Ak,Hp(q,r),p=0;p<n;p++)x=m[p],3<x.length&&(s=x[6],r.Ud=x[2],r.rg=x[3],r.we=x[4],r.gi=x[5],r.Tc=x[8],r.qc(s.x,s.y,s.width,s.height),q=r,v=d,t=x[7],x=x[8],N=q.Jc,N.reset(),N.translate(s.x+v.x,s.y+v.y),N.translate(-t.x,-t.y),Co(q,N,x.x,x.y,x.width,x.height),Po(q,!1),q.Li.set(q.Jc),q.To=q.scale,Qo(q,!1),r.Fe(a,b));a.restore();da(a,!0)}else{this.da===ha&&(a.lineCap="butt",Ip(this,a,!0,this.je,!0),Ip(this,a,!1,this.ee,
!0),Jp(this,a,!0,this.je),Jp(this,a,!1,this.ee),Ip(this,a,!0,this.je,!1),Ip(this,a,!1,this.ee,!1));if(c=this.uq)a.save(),u&&this.type!==Rj&&z.trace("Warning: Panel.isClipping set on non-Spot Panel: "+this.toString());e=this.Wd();d=this.va.o;h=d.length;for(g=0;g<h;g++)k=d[g],c&&k===e&&(a.Wt=!0),k.Fe(a,b),c&&k===e&&(a.Wt=!1);c&&(a.restore(),da(a,!0));u&&u.zI&&this instanceof H&&u.yI(a,b,this)}};
function Hp(a,b){b.T=a.T|6144;b.Hc=a.Hc;b.Kb=a.Kb;b.ic=a.ic;b.Ye=a.Ye.V();b.li=a.li.V();b.ki=a.ki.V();b.ej=a.ej.copy();b.Rb=a.Rb;b.rg=a.rg;b.Mg=a.Mg;b.an=a.an.V();b.te=a.te.V();b.Fm=a.Fm.V();b.on=a.on;b.pn=a.pn.V();b.qn=a.qn;null!==a.ug&&(b.ug=a.ug.copy());b.un=a.un;b.Ud=a.Ud;b.Ac=a.Ac;b.xg=a.xg;b.Nl=a.Nl;b.wg=a.wg;b.Rl=a.Rl;b.Tm=a.Tm;b.mk=a.mk;b.lk=a.lk;b.lj=a.lj;b.Gk=a.Gk;b.Mm=null;b.si=a.si;b.ti=a.ti;b.uh=a.uh;b.pp=a.pp;b.Bg=a.Bg;b.Ag=a.Ag;b.zg=a.zg;b.Om=a.Om}
function Jp(a,b,c,d){for(var e=d.length,g=a.Z,h=c?a.oe(0):a.ne(0),k=0;k<e;k++){var l=d[k];if(void 0!==l&&l!==h&&0!==l.Ra){if(c){if(l.position>g.height)continue}else if(l.position>g.width)continue;var m=l.Rq;isNaN(m)&&(m=c?a.bi:a.ai);var n=l.Qq;null===n&&(n=c?a.Ui:a.$h);if(0!==m&&null!==n){No(a,b,n,!1,!1);var n=!1,p=!0,q=l.jK;null!==q&&(n=!0,void 0!==b.setLineDash?(b.setLineDash(q),b.lineDashOffset=a.Oe):void 0!==b.webkitLineDash?(b.webkitLineDash=q,b.webkitLineDashOffset=a.Oe):void 0!==b.mozDash?
(b.mozDash=q,b.mozDashOffset=a.Oe):p=!1);b.beginPath();var r=l.position+m;c?r>g.height&&(m-=r-g.height):r>g.width&&(m-=r-g.width);l=l.position+m/2;b.lineWidth=m;r=a.padding;c?(l+=r.top,m=r.left,r=g.width-r.right,n&&!p?yo(b,m,l,r,l,q,0):(b.moveTo(m,l),b.lineTo(r,l))):(l+=r.left,m=r.top,r=g.height-r.bottom,n&&!p?yo(b,l,m,l,r,q,0):(b.moveTo(l,m),b.lineTo(l,r)));b.stroke();n&&(void 0!==b.setLineDash?(b.setLineDash(z.bl),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=z.bl,b.webkitLineDashOffset=
0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))}}}}
function Ip(a,b,c,d,e){for(var g=d.length,h=a.Z,k=0;k<g;k++){var l=d[k];if(void 0!==l&&null!==l.background&&l.tA!==e&&0!==l.Ra){var m=c?h.height:h.width;if(!(l.position>m)){var n=l.gf(),p=l.Rq;isNaN(p)&&(p=c?a.bi:a.ai);var q=l.Qq;null===q&&(q=c?a.Ui:a.$h);null===q&&(p=0);n-=p;p=l.position+p;n+=l.Ra;p+n>m&&(n=m-p);0>=n||(m=a.padding,No(a,b,l.background,!0,!1),c?b.fillRect(m.left,p+m.top,h.width-(m.left+m.right),n):b.fillRect(p+m.left,m.top,n,h.height-(m.top+m.bottom)))}}}}
function Gp(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return!1;return!0}function Xm(a){return"LineV"===a||"BarV"===a}
f.Tn=function(a,b,c,d,e){var g=this.jh(),h=this.transform,k=1/(h.m11*h.m22-h.m12*h.m21),l=h.m22*k,m=-h.m12*k,n=-h.m21*k,p=h.m11*k,q=k*(h.m21*h.dy-h.m22*h.dx),r=k*(h.m12*h.dx-h.m11*h.dy);if(null!==this.Xl)return h=this.Z,Ge(h.left,h.top,h.right,h.bottom,a,b,c,d,e);if(null!==this.background)g=a*l+b*n+q,k=a*m+b*p+r,a=c*l+d*n+q,l=c*m+d*p+r,e.m(0,0),c=this.Ja,c=Ge(0,0,c.width,c.height,g,k,a,l,e),e.transform(h);else{g||(l=1,n=m=0,p=1,r=q=0);k=a*l+b*n+q;a=a*m+b*p+r;l=c*l+d*n+q;d=c*m+d*p+r;e.m(l,d);m=(l-
k)*(l-k)+(d-a)*(d-a);c=!1;p=this.va.o;r=p.length;n=z.P();q=null;b=Infinity;var s=null;this.uq&&(s=z.P(),q=this.Wd(),(c=q.Tn(k,a,l,d,s))&&(b=(k-s.x)*(k-s.x)+(a-s.y)*(a-s.y)));for(var v=0;v<r;v++){var t=p[v];t.visible&&t!==q&&t.Tn(k,a,l,d,n)&&(c=!0,t=(k-n.x)*(k-n.x)+(a-n.y)*(a-n.y),t<m&&(m=t,e.set(n)))}this.uq&&(b>m&&e.set(s),z.A(s));z.A(n);g&&e.transform(h)}return c};
f.K=function(a){O.prototype.K.call(this,a);if(this.da===Kl||this.da===kj)a=this.Wd(),null!==a&&a.K(!0);a=this.va.o;for(var b=a.length,c=0;c<b;c++){var d=a[c];if(!d.Da.F()){var e=Eo(d,!1);(d instanceof Sj||d instanceof I||d instanceof pa||e!==Tj)&&d.K(!0)}}};f.tq=function(){if(!1===Cm(this)){cm(this,!0);Fo(this,!0);for(var a=this.va.o,b=a.length,c=0;c<b;c++)a[c].tq()}};f.$i=function(){if(0!==(this.T&2048)===!1){Po(this,!0);Qo(this,!0);for(var a=this.va.o,b=a.length,c=0;c<b;c++)a[c].QA()}};
f.QA=function(){Qo(this,!0);for(var a=this.va.o,b=a.length,c=0;c<b;c++)a[c].QA()};
f.zq=function(a,b,c,d){var e=this.uj;e.width=0;e.height=0;var g=this.Da,h=this.ig;void 0===c&&(c=h.width,d=h.height);c=Math.max(c,h.width);d=Math.max(d,h.height);var k=this.mf;isNaN(g.width)||(a=Math.min(g.width,k.width));isNaN(g.height)||(b=Math.min(g.height,k.height));a=Math.max(c,a);b=Math.max(d,b);var l=this.padding;a=Math.max(a-l.left-l.right,0);b=Math.max(b-l.top-l.bottom,0);var m=this.va.o;if(0!==m.length){var n=this.da.Xb;switch(n){case "Position":var p=a,q=b,r=c,s=d,v=m.length;e.x=0;e.y=
0;e.width=0;for(var t=e.height=0;t<v;t++){var x=m[t];if(x.visible||x===this.cc){var y=x.margin,B=y.right+y.left,A=y.top+y.bottom;Bk(x,p,q,r,s);var N=x.Ea,G=Math.max(N.width+B,0),T=Math.max(N.height+A,0),fa=x.position.x,W=x.position.y;isFinite(fa)||(fa=0);isFinite(W)||(W=0);if(x instanceof Y){var P=x;if(P.FF)var aa=P.mb/2,fa=fa-aa,W=W-aa}Rb(e,fa,W,G,T)}}break;case "Vertical":for(var Oa=a,sa=c,Ma=m.length,va=z.tb(),Pa=0;Pa<Ma;Pa++){var xa=m[Pa];if(xa.visible||xa===this.cc){var Ic=Eo(xa,!1);if(Ic!==
Tj&&Ic!==po)va.push(xa);else{var tc=xa.margin,Fd=tc.right+tc.left,uf=tc.top+tc.bottom;Bk(xa,Oa,Infinity,sa,0);var ac=xa.Ea,Gg=Math.max(ac.width+Fd,0),Hg=Math.max(ac.height+uf,0);e.width=Math.max(e.width,Gg);e.height+=Hg}}}var db=va.length;if(0!==db){this.Da.width?Oa=Math.min(this.Da.width,this.mf.width):0!==e.width&&(Oa=Math.min(e.width,this.mf.width));for(Pa=0;Pa<db;Pa++)if(xa=va[Pa],xa.visible||xa===this.cc)tc=xa.margin,Fd=tc.right+tc.left,uf=tc.top+tc.bottom,Bk(xa,Oa,Infinity,sa,0),ac=xa.Ea,Gg=
Math.max(ac.width+Fd,0),Hg=Math.max(ac.height+uf,0),e.width=Math.max(e.width,Gg),e.height+=Hg;z.Ba(va)}break;case "Horizontal":for(var vb=b,qa=d,ra=m.length,jb=z.tb(),bb=0;bb<ra;bb++){var Ya=m[bb];if(Ya.visible||Ya===this.cc){var re=Eo(Ya,!1);if(re!==Tj&&re!==qo)jb.push(Ya);else{var fd=Ya.margin,Jc=fd.right+fd.left,se=fd.top+fd.bottom;Bk(Ya,Infinity,vb,0,qa);var te=Ya.Ea,cg=Math.max(te.width+Jc,0),vf=Math.max(te.height+se,0);e.width+=cg;e.height=Math.max(e.height,vf)}}}var sj=jb.length;if(0!==sj){this.Da.height?
vb=Math.min(this.Da.height,this.mf.height):0!==e.height&&(vb=Math.min(e.height,this.mf.height));for(bb=0;bb<sj;bb++)if(Ya=jb[bb],Ya.visible||Ya===this.cc)fd=Ya.margin,Jc=fd.right+fd.left,se=fd.top+fd.bottom,Bk(Ya,Infinity,vb,0,qa),te=Ya.Ea,cg=Math.max(te.width+Jc,0),vf=Math.max(te.height+se,0),e.width+=cg,e.height=Math.max(e.height,vf);z.Ba(jb)}break;case "Spot":a:{var pb=a,bc=b,gd=c,ai=d,Mb=m.length,qb=this.Wd(),eb=qb.margin,wf=0,xf=0,Ig=eb.right+eb.left,hd=eb.top+eb.bottom;Bk(qb,pb,bc,gd,ai);for(var Tb=
qb.Ea,id=Tb.width,Ye=Tb.height,Cb=Math.max(id+Ig,0),fb=Math.max(Ye+hd,0),Gd=this.uq,rb=z.fh(-eb.left,-eb.top,Cb,fb),Hd=!0,He=0;He<Mb;He++){var ab=m[He];if(ab!==qb&&(ab.visible||ab===this.cc)){eb=ab.margin;wf=eb.right+eb.left;xf=eb.top+eb.bottom;Bk(ab,pb,bc,0,0);var Tb=ab.Ea,Cb=Math.max(Tb.width+wf,0),fb=Math.max(Tb.height+xf,0),Ta=ab.alignment;Ta.hd()&&(Ta=this.em);Ta.jd()||(Ta=mc);var Ra=ab.Fh;Ra.hd()&&(Ra=mc);var cc=null;ab instanceof I&&""!==ab.Wj&&(ab.qc(0,0,Tb.width,Tb.height),cc=ab.Gd(ab.Wj),
cc===ab&&(cc=null));var dg,eg;if(null!==cc){for(var fg=cc.Ja,bi=cc.margin,Gb=z.Fb(Ra.x*fg.width+Ra.offsetX-bi.left,Ra.y*fg.height+Ra.offsetY-bi.top);cc!==ab;)cc.transform.wb(Gb),cc=cc.Q;dg=Ta.x*id+Ta.offsetX-Gb.x;eg=Ta.y*Ye+Ta.offsetY-Gb.y;z.A(Gb)}else dg=Ta.x*id+Ta.offsetX-(Ra.x*Tb.width-Ra.offsetX)-eb.left,eg=Ta.y*Ye+Ta.offsetY-(Ra.y*Tb.height-Ra.offsetY)-eb.top;Hd?(Hd=!1,e.x=dg,e.y=eg,e.width=Cb,e.height=fb):Rb(e,dg,eg,Cb,fb)}}Hd?e.assign(rb):Gd?e.zF(rb.x,rb.y,rb.width,rb.height):Rb(e,rb.x,rb.y,
rb.width,rb.height);z.Mb(rb);var Ub=qb.stretch;Ub===oo&&(Ub=Eo(qb,!1));switch(Ub){case Tj:break a;case gf:if(!isFinite(pb)&&!isFinite(bc))break a;break;case qo:if(!isFinite(pb))break a;break;case po:if(!isFinite(bc))break a}Tb=qb.Ea;id=Tb.width;Ye=Tb.height;Cb=Math.max(id+Ig,0);fb=Math.max(Ye+hd,0);eb=qb.margin;rb=z.fh(-eb.left,-eb.top,Cb,fb);for(He=0;He<Mb;He++)ab=m[He],ab===qb||!ab.visible&&ab!==this.cc||(eb=ab.margin,wf=eb.right+eb.left,xf=eb.top+eb.bottom,Tb=ab.Ea,Cb=Math.max(Tb.width+wf,0),fb=
Math.max(Tb.height+xf,0),Ta=ab.alignment,Ta.hd()&&(Ta=this.em),Ta.jd()||(Ta=mc),Ra=ab.Fh,Ra.hd()&&(Ra=mc),Hd?(Hd=!1,e.x=Ta.x*id+Ta.offsetX-(Ra.x*Tb.width-Ra.offsetX)-eb.left,e.y=Ta.y*Ye+Ta.offsetY-(Ra.y*Tb.height-Ra.offsetY)-eb.top,e.width=Cb,e.height=fb):Rb(e,Ta.x*id+Ta.offsetX-(Ra.x*Tb.width-Ra.offsetX)-eb.left,Ta.y*Ye+Ta.offsetY-(Ra.y*Tb.height-Ra.offsetY)-eb.top,Cb,fb));Hd?e.assign(rb):Gd?e.zF(rb.x,rb.y,rb.width,rb.height):Rb(e,rb.x,rb.y,rb.width,rb.height);z.Mb(rb)}break;case "Auto":var Wb=a,
Ze=b,Nb=c,Ob=d,Id=m.length,Hb=this.Wd(),uc=Hb.margin,ci=Wb,di=Ze,rd=uc.right+uc.left,$e=uc.top+uc.bottom;Bk(Hb,Wb,Ze,Nb,Ob);var gg=Hb.Ea,jd=0,Ib=null;Hb instanceof Y&&(Ib=Hb,jd=Ib.mb*Ib.scale);var sd=Math.max(gg.width+rd,0),dc=Math.max(gg.height+$e,0),Xb=Kp(Hb),yf=Xb.x*sd+Xb.offsetX,Wc=Xb.y*dc+Xb.offsetY,Ua=Lp(Hb),Ie=Ua.x*sd+Ua.offsetX,ei=Ua.y*dc+Ua.offsetY;isFinite(Wb)&&(ci=Math.max(Math.abs(yf-Ie)-jd,0));isFinite(Ze)&&(di=Math.max(Math.abs(Wc-ei)-jd,0));var Xc=z.Am();Xc.m(0,0);for(var xh=0;xh<Id;xh++){var Kc=
m[xh];if(Kc!==Hb&&(Kc.visible||Kc===this.cc)){var uc=Kc.margin,yh=uc.right+uc.left,Jg=uc.top+uc.bottom;Bk(Kc,ci,di,0,0);gg=Kc.Ea;sd=Math.max(gg.width+yh,0);dc=Math.max(gg.height+Jg,0);Xc.m(Math.max(sd,Xc.width),Math.max(dc,Xc.height))}}if(1===Id)e.width=sd,e.height=dc,z.Qk(Xc);else{var Xb=Kp(Hb),Ua=Lp(Hb),Xd=0,zf=0;Ua.x!==Xb.x&&Ua.y!==Xb.y&&(Xd=Xc.width/Math.abs(Ua.x-Xb.x),zf=Xc.height/Math.abs(Ua.y-Xb.y));z.Qk(Xc);jd=0;null!==Ib&&(jd=Ib.mb*Ib.scale,Uj(Ib)===Vj&&(Xd=zf=Math.max(Xd,zf)));var Xd=Xd+
(Math.abs(Xb.offsetX)+Math.abs(Ua.offsetX)+jd),zf=zf+(Math.abs(Xb.offsetY)+Math.abs(Ua.offsetY)+jd),Jk=Hb.stretch;Jk===oo&&(Jk=Eo(Hb,!1));switch(Jk){case Tj:Ob=Nb=0;break;case gf:isFinite(Wb)&&(Xd=Wb);isFinite(Ze)&&(zf=Ze);break;case qo:isFinite(Wb)&&(Xd=Wb);Ob=0;break;case po:Nb=0,isFinite(Ze)&&(zf=Ze)}Hb.tq();Bk(Hb,Xd,zf,Nb,Ob);e.width=Hb.Ea.width+rd;e.height=Hb.Ea.height+$e}break;case "Table":for(var Kg=a,wb=b,zh=c,Af=d,kb=m.length,fi=z.tb(),tj=z.tb(),la=0;la<kb;la++){var ga=m[la],kd=ga instanceof
I?ga:null;if(null===kd||kd.type!==Jo&&kd.type!==Ko||!ga.visible)fi.push(ga);else{u&&(kd.Da.F()&&z.k(kd.toString()+" TableRow/TableColumn Panels cannot set a desiredSize: "+kd.Da.toString()),kd.ig.O(Sd)||z.k(kd.toString()+" TableRow/TableColumn Panels cannot set a minSize: "+kd.ig.toString()),kd.mf.O(ge)||z.k(kd.toString()+" TableRow/TableColumn Panels cannot set a maxSize: "+kd.mf.toString()));tj.push(ga);for(var Kk=kd.va.o,Lk=Kk.length,zc=0;zc<Lk;zc++){var Jd=Kk[zc];kd.type===Jo?Jd.Zb=ga.Zb:kd.type===
Ko&&(Jd.column=ga.column);fi.push(Jd)}}}kb=fi.length;0===kb&&(this.oe(0),this.ne(0));for(var Pb=[],la=0;la<kb;la++)ga=fi[la],cm(ga,!0),Fo(ga,!0),Pb[ga.Zb]||(Pb[ga.Zb]=[]),Pb[ga.Zb][ga.column]||(Pb[ga.Zb][ga.column]=[]),Pb[ga.Zb][ga.column].push(ga);z.Ba(fi);for(var Bf=z.tb(),hg=z.tb(),Cf=z.tb(),Yd={count:0},Zd={count:0},kc=Kg,vc=wb,af=this.je,kb=af.length,la=0;la<kb;la++){var ba=af[la];void 0!==ba&&(ba.Ra=0)}af=this.ee;kb=af.length;for(la=0;la<kb;la++)ba=af[la],void 0!==ba&&(ba.Ra=0);for(var gi=Pb.length,
ig=0,la=0;la<gi;la++)Pb[la]&&(ig=Math.max(ig,Pb[la].length));for(var uj=Math.min(this.tj,gi-1),vj=Math.min(this.dj,ig-1),Kd=0,gi=Pb.length,la=0;la<gi;la++)if(Pb[la])for(var ig=Pb[la].length,hb=this.oe(la),zc=hb.Ra=0;zc<ig;zc++)if(Pb[la][zc]){var sb=this.ne(zc);void 0===Bf[zc]&&(sb.Ra=0,Bf[zc]=!0);for(var hi=Pb[la][zc],wj=hi.length,Mk=0;Mk<wj;Mk++)if(ga=hi[Mk],ga.visible||ga===this.cc){var Nk=1<ga.pj||1<ga.Qi;Nk&&(la<uj||zc<vj||hg.push(ga));var Ac=ga.margin,ld=Ac.right+Ac.left,Lg=Ac.top+Ac.bottom,
Lc=So(ga,hb,sb,!1),ii=ga.Da,Ok=!isNaN(ii.height),fm=!isNaN(ii.width)&&Ok;Nk||Lc===Tj||fm||la<uj||zc<vj||(void 0!==Yd[zc]||Lc!==gf&&Lc!==qo||(Yd[zc]=-1,Yd.count++),void 0!==Zd[la]||Lc!==gf&&Lc!==po||(Zd[la]=-1,Zd.count++),Cf.push(ga));Bk(ga,Infinity,Infinity,0,0);if(!(la<uj||zc<vj)){var $d=ga.Ea,Yc=Math.max($d.width+ld,0),Je=Math.max($d.height+Lg,0);if(1===ga.pj&&(Lc===Tj||Lc===qo)){var ba=this.oe(la),jg=ba.gf(),Kd=Math.max(Je-ba.Ra,0);Kd+jg>vc&&(Kd=Math.max(vc-jg,0));var xj=0===ba.Ra;ba.Ra+=Kd;vc=
Math.max(vc-(Kd+(xj?jg:0)),0)}1!==ga.Qi||Lc!==Tj&&Lc!==po||(ba=this.ne(zc),jg=ba.gf(),Kd=Math.max(Yc-ba.Ra,0),Kd+jg>kc&&(Kd=Math.max(kc-jg,0)),xj=0===ba.Ra,ba.Ra+=Kd,kc=Math.max(kc-(Kd+(xj?jg:0)),0));Nk&&ga.tq()}}}z.Ba(Bf);for(var ae=0,be=0,kb=this.aq,la=0;la<kb;la++){var Mc=this.ee[la];void 0!==Mc&&(ae+=Mc.$a,0!==Mc.$a&&(ae+=Mc.gf()))}kb=this.Oq;for(la=0;la<kb;la++){var Df=this.je[la];void 0!==Df&&(be+=Df.$a,0!==Df.$a&&(be+=Df.gf()))}for(var kc=Math.max(Kg-ae,0),kg=vc=Math.max(wb-be,0),Zc=kc,kb=
Cf.length,la=0;la<kb;la++){var ga=Cf[la],hb=this.oe(ga.Zb),sb=this.ne(ga.column),Pk=ga.Ea,Ac=ga.margin,ld=Ac.right+Ac.left,Lg=Ac.top+Ac.bottom;Yd[ga.column]=0===sb.Ra&&void 0!==Yd[ga.column]?Math.max(Pk.width+ld,Yd[ga.column]):null;Zd[ga.Zb]=0===hb.Ra&&void 0!==Zd[ga.Zb]?Math.max(Pk.height+Lg,Zd[ga.Zb]):null}var Mg=0,Ng=0;for(la in Zd)"count"!==la&&(Mg+=Zd[la]);for(la in Yd)"count"!==la&&(Ng+=Yd[la]);for(var Eb=z.Am(),la=0;la<kb;la++)if(ga=Cf[la],ga.visible||ga===this.cc){var hb=this.oe(ga.Zb),sb=
this.ne(ga.column),ce=0;isFinite(sb.width)?ce=sb.width:(ce=isFinite(kc)&&null!==Yd[ga.column]?0===Ng?sb.Ra+kc:Yd[ga.column]/Ng*Zc:null!==Yd[ga.column]?kc:sb.Ra||kc,ce=Math.max(0,ce-sb.gf()));var de=0;isFinite(hb.height)?de=hb.height:(de=isFinite(vc)&&null!==Zd[ga.Zb]?0===Mg?hb.Ra+vc:Zd[ga.Zb]/Mg*kg:null!==Zd[ga.Zb]?vc:hb.Ra||vc,de=Math.max(0,de-hb.gf()));Eb.m(Math.max(sb.Lj,Math.min(ce,sb.zf)),Math.max(hb.Lj,Math.min(de,hb.zf)));Lc=So(ga,hb,sb,!1);switch(Lc){case qo:Eb.height=Math.max(Eb.height,hb.Ra+
vc);break;case po:Eb.width=Math.max(Eb.width,sb.Ra+kc)}Ac=ga.margin;ld=Ac.right+Ac.left;Lg=Ac.top+Ac.bottom;ga.tq();Bk(ga,Eb.width,Eb.height,sb.Lj,hb.Lj);$d=ga.Ea;Yc=Math.max($d.width+ld,0);Je=Math.max($d.height+Lg,0);isFinite(kc)&&(Yc=Math.min(Yc,Eb.width));isFinite(vc)&&(Je=Math.min(Je,Eb.height));var Og=0,Og=hb.Ra;hb.Ra=Math.max(hb.Ra,Je);Kd=hb.Ra-Og;vc=Math.max(vc-Kd,0);Og=sb.Ra;sb.Ra=Math.max(sb.Ra,Yc);Kd=sb.Ra-Og;kc=Math.max(kc-Kd,0)}z.Ba(Cf);for(var Ef=z.Am(),kb=hg.length,la=0;la<kb;la++)if(ga=
hg[la],ga.visible||ga===this.cc){hb=this.oe(ga.Zb);sb=this.ne(ga.column);Eb.m(Math.max(sb.Lj,Math.min(Kg,sb.zf)),Math.max(hb.Lj,Math.min(wb,hb.zf)));Lc=So(ga,hb,sb,!1);switch(Lc){case gf:0!==sb.Ra&&(Eb.width=Math.min(Eb.width,sb.Ra));0!==hb.Ra&&(Eb.height=Math.min(Eb.height,hb.Ra));break;case qo:0!==sb.Ra&&(Eb.width=Math.min(Eb.width,sb.Ra));break;case po:0!==hb.Ra&&(Eb.height=Math.min(Eb.height,hb.Ra))}isFinite(sb.width)&&(Eb.width=sb.width);isFinite(hb.height)&&(Eb.height=hb.height);Ef.m(0,0);for(var lb=
1;lb<ga.pj&&!(ga.Zb+lb>=this.Oq);lb++)ba=this.oe(ga.Zb+lb),Ef.height+=Math.max(ba.Lj,isNaN(ba.tf)?ba.zf:Math.min(ba.tf,ba.zf));for(lb=1;lb<ga.Qi&&!(ga.column+lb>=this.aq);lb++)ba=this.ne(ga.column+lb),Ef.width+=Math.max(ba.Lj,isNaN(ba.tf)?ba.zf:Math.min(ba.tf,ba.zf));Eb.width+=Ef.width;Eb.height+=Ef.height;Ac=ga.margin;ld=Ac.right+Ac.left;Lg=Ac.top+Ac.bottom;Bk(ga,Eb.width,Eb.height,zh,Af);for(var $d=ga.Ea,Yc=Math.max($d.width+ld,0),Je=Math.max($d.height+Lg,0),wc=0,lb=0;lb<ga.pj&&!(ga.Zb+lb>=this.Oq);lb++)ba=
this.oe(ga.Zb+lb),wc+=ba.total||0;if(wc<Je){var Jb=Je-wc,Ff=Je-wc;if(null!==ga.By)for(var Gf=ga.By,lb=0;lb<ga.pj&&!(0>=Jb)&&!(ga.Zb+lb>=this.Oq);lb++){var ba=this.oe(ga.Zb+lb),Yb=ba.$a||0,lg=Gf(ga,ba,Ff);u&&"number"!==typeof lg&&z.k(ga+" spanAllocation does not return a number: "+lg);ba.Ra=Math.min(ba.zf,Yb+lg);ba.$a!==Yb&&(Jb-=ba.$a-Yb)}for(;0<Jb;){Yb=ba.$a||0;isNaN(ba.height)&&ba.zf>Yb&&(ba.Ra=Math.min(ba.zf,Yb+Jb),ba.$a!==Yb&&(Jb-=ba.$a-Yb));if(0===ba.index)break;ba=this.oe(ba.index-1)}}for(var Ah=
0,lb=0;lb<ga.Qi&&!(ga.column+lb>=this.aq);lb++)ba=this.ne(ga.column+lb),Ah+=ba.total||0;if(Ah<Yc){Jb=Yc-Ah;Ff=Yc-Ah;if(null!==ga.By)for(Gf=ga.By,lb=0;lb<ga.Qi&&!(0>=Jb)&&!(ga.column+lb>=this.aq);lb++)ba=this.ne(ga.column+lb),Yb=ba.$a||0,lg=Gf(ga,ba,Ff),u&&"number"!==typeof lg&&z.k(ga+" spanAllocation does not return a number: "+lg),ba.Ra=Math.min(ba.zf,Yb+lg),ba.$a!==Yb&&(Jb-=ba.$a-Yb);for(;0<Jb;){Yb=ba.$a||0;isNaN(ba.width)&&ba.zf>Yb&&(ba.Ra=Math.min(ba.zf,Yb+Jb),ba.$a!==Yb&&(Jb-=ba.$a-Yb));if(0===
ba.index)break;ba=this.ne(ba.index-1)}}}z.Ba(hg);z.Qk(Ef);z.Qk(Eb);for(var Ke=0,Pg=0,Lc=Eo(this,!0),mg=this.Da,Hf=this.mf,Le=be=ae=0,Me=0,kb=this.aq,la=0;la<kb;la++)void 0!==this.ee[la]&&(ba=this.ne(la),isFinite(ba.width)?(Le+=ba.width,Le+=ba.gf()):Mp(ba)===Np?(Le+=ba.$a,Le+=ba.gf()):0!==ba.$a&&(ae+=ba.$a,ae+=ba.gf()));var Ke=isFinite(mg.width)?Math.min(mg.width,Hf.width):Lc!==Tj&&isFinite(Kg)?Kg:ae,Ke=Math.max(Ke,this.ig.width),Ke=Math.max(Ke-Le,0),If=Math.max(Ke/ae,1);isFinite(If)||(If=1);for(la=
0;la<kb;la++)void 0!==this.ee[la]&&(ba=this.ne(la),isFinite(ba.width)||Mp(ba)===Np||(ba.Ra=ba.$a*If),ba.position=e.width,0!==ba.$a&&(e.width+=ba.$a,e.width+=ba.gf()));kb=this.Oq;for(la=0;la<kb;la++)void 0!==this.je[la]&&(ba=this.oe(la),isFinite(ba.height)?(Me+=ba.height,Me+=ba.gf()):Mp(ba)===Np?(Me+=ba.$a,Me+=ba.gf()):0!==ba.$a&&(be+=ba.$a,0!==ba.$a&&(be+=ba.gf())));var Pg=isFinite(mg.height)?Math.min(mg.height,Hf.height):Lc!==Tj&&isFinite(wb)?wb:be,Pg=Math.max(Pg,this.ig.height),Pg=Math.max(Pg-Me,
0),yj=Math.max(Pg/be,1);isFinite(yj)||(yj=1);for(la=0;la<kb;la++)void 0!==this.je[la]&&(ba=this.oe(la),isFinite(ba.height)||Mp(ba)===Np||(ba.Ra=ba.$a*yj),ba.position=e.height,0!==ba.$a&&(e.height+=ba.$a,0!==ba.$a&&(e.height+=ba.gf())));kb=tj.length;for(la=0;la<kb;la++){var td=tj[la];td.type===Jo?(ce=e.width,ba=this.oe(td.Zb),de=ba.Ra):(ba=this.ne(td.column),ce=ba.Ra,de=e.height);td.Dd.m(0,0,ce,de);cm(td,!1);Pb[td.Zb]||(Pb[td.Zb]=[]);Pb[td.Zb][td.column]||(Pb[td.Zb][td.column]=[]);Pb[td.Zb][td.column].push(td)}z.Ba(tj);
this.ft=Pb;break;case "Viewbox":var zj=a,ki=b,li=c,bf=d;1<m.length&&z.k("Viewbox Panel cannot contain more than one GraphObject.");var ue=m[0];ue.Rb=1;ue.tq();Bk(ue,Infinity,Infinity,li,bf);var ng=ue.Ea,Bh=ue.margin,hm=Bh.right+Bh.left,it=Bh.top+Bh.bottom;if(isFinite(zj)||isFinite(ki)){var $v=ue.scale,im=ng.width,jm=ng.height,jt=Math.max(zj-hm,0),kt=Math.max(ki-it,0),Qk=1;this.Tp===Vj?0!==im&&0!==jm&&(Qk=Math.min(jt/im,kt/jm)):0!==im&&0!==jm&&(Qk=Math.max(jt/im,kt/jm));0===Qk&&(Qk=1E-4);ue.Rb*=Qk;
$v!==ue.scale&&(cm(ue,!0),Bk(ue,Infinity,Infinity,li,bf))}ng=ue.Ea;e.width=isFinite(zj)?zj:Math.max(ng.width+hm,0);e.height=isFinite(ki)?ki:Math.max(ng.height+it,0);break;case "Link":var lt=m.length,ip=this instanceof ea,Qg=ip?this.$f:this;if(Qg instanceof H)if(0===lt){var km=this.Tc;Ab(km,0,0);var ve=this.Ea;ve.m(0,0,0,0)}else{var lm=ip?null:Qg.path,Rg=Qg.mo,cf=this.uj;cf.assign(Rg);cf.x=0;var Ch=cf.y=0,Sg=Qg.points,Ch=void 0!==this.ua?this.ua:Sg.count;ip?this.fo(!1):Qg.fo(!1);var mt=Rg.width,nt=
Rg.height;this.fj.m(Rg.x,Rg.y);null===this.oh&&(this.oh=new J(w));this.oh.clear();null!==lm&&(Op(lm,mt,nt,this),ve=lm.Ea,cf.Wh(ve),this.oh.add(ve));for(var Tg=z.Pf(),Rk=z.P(),Ug=z.P(),jp=0;jp<lt;jp++){var ec=m[jp];if(ec!==lm)if(ec.If&&ec instanceof Y)Op(ec,mt,nt,this),ve=ec.Ea,cf.Wh(ve),this.oh.add(ve);else if(2>Ch)Bk(ec,Infinity,Infinity),ve=ec.Ea,cf.Wh(ve),this.oh.add(ve);else{var ud=ec.Ue,pt=ec.vB,kp=ec.Fh;kp.$d()&&(kp=mc);var og=ec.Pq,aw=ec.wB,Sk=0,Tk=0,mm=0;if(ud<-Ch||ud>=Ch){var qt=Qg.WF,Jf=
Qg.VF;og!==nj&&(mm=Qg.computeAngle(ec,og,Jf),ec.rg=mm);Sk=qt.x-Rg.x;Tk=qt.y-Rg.y}else{var Ld,df;if(0<=ud)Ld=Sg.fa(ud),df=ud<Ch-1?Sg.fa(ud+1):Ld;else{var mi=Ch+ud;Ld=Sg.fa(mi);df=0<mi?Sg.fa(mi-1):Ld}if(Ld.Vc(df)){var ni,oi;0<=ud?(ni=0<ud?Sg.fa(ud-1):Ld,oi=ud<Ch-2?Sg.fa(ud+2):df):(ni=mi<Ch-1?Sg.fa(mi+1):Ld,oi=1<mi?Sg.fa(mi-2):df);var rt=ni.Ef(Ld),st=df.Ef(oi),Jf=rt>st+10?0<=ud?ni.Lc(Ld):Ld.Lc(ni):st>rt+10?0<=ud?df.Lc(oi):oi.Lc(df):0<=ud?ni.Lc(oi):oi.Lc(ni)}else Jf=0<=ud?Ld.Lc(df):df.Lc(Ld);og!==nj&&
(mm=Qg.computeAngle(ec,og,Jf),ec.rg=mm);Sk=Ld.x+(df.x-Ld.x)*pt-Rg.x;Tk=Ld.y+(df.y-Ld.y)*pt-Rg.y}Bk(ec,Infinity,Infinity);var ve=ec.Ea,km=ec.Ja,Uk=0;ec instanceof Y&&(Uk=ec.mb);var pi=km.width+Uk,Aj=km.height+Uk;Tg.reset();Tg.translate(-ve.x,-ve.y);Tg.scale(ec.scale,ec.scale);Tg.rotate(og===nj?ec.angle:Jf,pi/2,Aj/2);og!==Pp&&og!==Qp||Tg.rotate(90,pi/2,Aj/2);og!==Rp&&og!==Sp||Tg.rotate(-90,pi/2,Aj/2);og===Tp&&(45<Jf&&135>Jf||225<Jf&&315>Jf)&&Tg.rotate(-Jf,pi/2,Aj/2);var Fj=new w(0,0,pi,Aj);Rk.oo(Fj,
kp);Tg.wb(Rk);var bw=-Rk.x+Uk/2,cw=-Rk.y+Uk/2;Ug.assign(aw);isNaN(Ug.x)&&(Ug.x=0<=ud?pi/2+3:-(pi/2+3));isNaN(Ug.y)&&(Ug.y=-(Aj/2+3));Ug.rotate(Jf);Sk+=Ug.x;Tk+=Ug.y;Fj.set(ve);Fj.x=Sk+bw;Fj.y=Tk+cw;this.oh.add(Fj);cf.Wh(Fj)}}if(this.af)for(var tt=this.Kf;tt.next();)Bk(tt.value,Infinity,Infinity);this.uj=cf;var lp=this.fj;lp.m(lp.x+cf.x,lp.y+cf.y);Ab(e,cf.width||0,cf.height||0);z.Ie(Tg);z.A(Rk);z.A(Ug)}break;case "Grid":break;case "Graduated":var dw=a,ew=b,fw=c,gw=d,Vg=this.Wd();this.Nm=[];var Gj=
Vg.margin,hw=Gj.right+Gj.left,iw=Gj.top+Gj.bottom;Bk(Vg,dw,ew,fw,gw);var ut=Vg.Ea,jw=ut.height,kw=Math.max(ut.width+hw,0),lw=Math.max(jw+iw,0),vt=new w(-Gj.left,-Gj.top,kw,lw);this.Nm.push(vt);e.assign(vt);for(var Wk=Vg.Ff,wt=Vg.mb,mp=Wk.DA,Hj=Wk.Gx,qi=Wk.EA,mw=mp.length,np=0,op=0,Ij=z.tb(),pp=0;pp<mw;pp++){for(var qp=mp[pp],xt=[],op=np=0,nw=qp.length,Jj=0;Jj<nw;Jj+=2){var yt=qp[Jj],zt=qp[Jj+1];if(0!==Jj){var vd=180*Math.atan2(zt-op,yt-np)/Math.PI;0>vd&&(vd+=360);xt.push(vd)}np=yt;op=zt}Ij.push(xt)}var At;
if(null===this.gk){for(var Bt=[],rp=this.va.o,Ct=rp.length,sp=0;sp<Ct;sp++){var Xk=rp[sp],Dt=[];Bt.push(Dt);if(Xk.visible)for(var ow=Xk.interval,tp=0;tp<Ct;tp++){var Yk=rp[tp];if(Yk.visible&&Xk!==Yk&&!(Xk instanceof Y&&!(Yk instanceof Y)||Xk instanceof pa&&!(Yk instanceof pa))){var Et=Yk.interval;Et>ow&&Dt.push(Et)}}}this.gk=Bt}At=this.gk;var Ft=this.va.o,pw=Ft.length,Dh=0,Gt=0,Ht=qi;this.Pm=[];for(var nm=[],om=0;om<pw;om++){var Eh=Ft[om],nm=[];if(Eh.visible&&Eh!==Vg){var It=Eh.interval,Jt=this.LA;
if(!(2>Jt*It*qi/this.Jx)){var ee=this.sF,Kt=At[om],ri=Hj[0][0],Kf=0,wd=0,Gt=qi*Eh.rF-1E-4,Ht=qi*Eh.pF+1E-4,Kj=Jt*It;if(ee<this.Sk)var si=(this.Sk-ee)/Kj,si=0===si%1?si:Math.floor(si+1),ee=ee+si*Kj;else ee>this.Sk+Kj&&(si=Math.floor((ee-this.Sk)/Kj),ee-=si*Kj);for(;ee<=this.KA;){var up;a:{for(var qw=Kt.length,vp=0;vp<qw;vp++)if(Db((ee-this.sF)%(Kt[vp]*this.LA),0)){up=!1;break a}up=!0}if(up&&(Dh=(ee-this.Sk)*qi/this.Jx,Dh>qi&&(Dh=qi),Gt<=Dh&&Dh<=Ht)){for(var vd=Ij[Kf][wd],Lj=Hj[Kf][wd];Kf<Hj.length;){for(;Dh>
ri&&wd<Hj[Kf].length-1;)wd++,vd=Ij[Kf][wd],Lj=Hj[Kf][wd],ri+=Lj;if(Dh<=ri)break;Kf++;wd=0;vd=Ij[Kf][wd];Lj=Hj[Kf][wd];ri+=Lj}var Md=mp[Kf],Lt=Md[2*wd],Mt=Md[2*wd+1],pm=(Dh-(ri-Lj))/Lj,wp=new M(Lt+(Md[2*wd+2]-Lt)*pm+wt/2-Wk.sb.x,Mt+(Md[2*wd+3]-Mt)*pm+wt/2-Wk.sb.y);wp.scale(Vg.scale,Vg.scale);var pg=vd,Mj=Ij[Kf];1E-4>pm?0<wd?pg=Mj[wd-1]:Db(Md[0],Md[Md.length-2])&&Db(Md[1],Md[Md.length-1])&&(pg=Mj[Mj.length-1]):.9999<pm&&(wd+1<Mj.length?pg=Mj[wd+1]:Db(Md[0],Md[Md.length-2])&&Db(Md[1],Md[Md.length-1])&&
(pg=Mj[0]));vd!==pg&&(180<Math.abs(vd-pg)&&(vd<pg?vd+=360:pg+=360),vd=(vd+pg)/2%360);if(Eh instanceof pa){var qm="",qm=null!==Eh.qF?Eh.qF(ee):(+ee.toFixed(2)).toString();u&&z.h(qm,"string");""!==qm&&nm.push([wp,vd,qm])}else nm.push([wp,vd])}ee+=Kj}}}this.Pm.push(nm)}z.Ba(Ij);for(var rw=this.Pm,sw=m.length,rm=0;rm<sw;rm++){var ti=m[rm],xp=rw[rm];if(ti.visible&&ti!==Vg&&0!==xp.length){if(ti instanceof Y){var Fh=ti,Nt=xp,tw=e,yp=Fh.Fh;yp.$d()&&(yp=ic);var uw=Fh.angle;Fh.rg=0;Bk(Fh,Infinity,Infinity);
Fh.rg=uw;var Ot=Fh.Ea,zp=Ot.width,Ap=Ot.height,Pt=z.fh(0,0,zp,Ap),fe=z.P();fe.oo(Pt,yp);z.Mb(Pt);for(var sm=-fe.x,tm=-fe.y,ui=new w,vw=Nt.length,um=0;um<vw;um++)for(var Bp=Nt[um],Qt=Bp[0].x,Rt=Bp[0].y,St=Bp[1],vm=0;4>vm;vm++){switch(vm){case 0:fe.m(sm,tm);break;case 1:fe.m(sm+zp,tm);break;case 2:fe.m(sm,tm+Ap);break;case 3:fe.m(sm+zp,tm+Ap)}fe.rotate(St+Fh.angle);fe.offset(Qt,Rt);0===um&&0===vm?ui.m(fe.x,fe.y,0,0):ui.Ki(fe);fe.offset(-Qt,-Rt);fe.rotate(-St-Fh.angle)}z.A(fe);this.Nm.push(ui);Rb(tw,
ui.x,ui.y,ui.width,ui.height)}else if(ti instanceof pa){var Zk=ti,Tt=xp,ww=e;null===this.Ak&&(this.Ak=new pa);var Lf=this.Ak;Hp(Zk,Lf);var Cp=Zk.Fh;Cp.$d()&&(Cp=ic);for(var Gh=Zk.Pq,xw=Zk.wB,vi=null,wm=0,xm=0,Wg=0,Dp=0,yw=Tt.length,ym=0;ym<yw;ym++){var qg=Tt[ym],wm=qg[0].x,xm=qg[0].y,Wg=qg[1];Gh!==nj&&(Dp=Zk.computeAngle(Gh,Wg),Lf.rg=Dp);Lf.text=qg[2];Bk(Lf,Infinity,Infinity);var Hh=Lf.Ea,Nj=Lf.Ja,Oj=Nj.width,Pj=Nj.height,Xg=z.Pf();Xg.reset();Xg.translate(-Hh.x,-Hh.y);Xg.scale(Lf.scale,Lf.scale);
Xg.rotate(Gh===nj?Lf.angle:Wg,Oj/2,Pj/2);Gh!==Pp&&Gh!==Qp||Xg.rotate(90,Oj/2,Pj/2);Gh!==Rp&&Gh!==Sp||Xg.rotate(-90,Oj/2,Pj/2);Gh===Tp&&(45<Wg&&135>Wg||225<Wg&&315>Wg)&&Xg.rotate(-Wg,Oj/2,Pj/2);var Ut=z.fh(0,0,Oj,Pj),$k=z.P();$k.oo(Ut,Cp);Xg.wb($k);var zw=-$k.x,Aw=-$k.y,Yg=z.P();Yg.assign(xw);isNaN(Yg.x)&&(Yg.x=Oj/2+3);isNaN(Yg.y)&&(Yg.y=-(Pj/2+3));Yg.rotate(Wg);var wm=wm+(Yg.x+zw),xm=xm+(Yg.y+Aw),Ep=new w(wm,xm,Hh.width,Hh.height),Bw=new w(Hh.x,Hh.y,Hh.width,Hh.height),Cw=new w(Nj.x,Nj.y,Nj.width,
Nj.height),Vt=new Up;Vt.bq(Lf.gi);qg.push(Dp);qg.push(Lf.we);qg.push(Vt);qg.push(Ep);qg.push(Bw);qg.push(Cw);0===ym?vi=Ep.copy():vi.Wh(Ep);z.A(Yg);z.A($k);z.Mb(Ut);z.Ie(Xg)}this.Nm.push(vi);Rb(ww,vi.x,vi.y,vi.width,vi.height)}cm(ti,!1)}}break;case "TableRow":case "TableColumn":z.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:z.k("Unknown panel type: "+n)}}var ef=e.width,ff=e.height,zm=this.padding,Dw=zm.top+
zm.bottom,ef=ef+(zm.left+zm.right),ff=ff+Dw;isFinite(g.width)&&(ef=g.width);isFinite(g.height)&&(ff=g.height);ef=Math.min(k.width,ef);ff=Math.min(k.height,ff);ef=Math.max(h.width,ef);ff=Math.max(h.height,ff);ef=Math.max(c,ef);ff=Math.max(d,ff);e.width=ef;e.height=ff;Ab(this.Tc,ef,ff);Bo(this,0,0,ef,ff)};I.prototype.findMainElement=I.prototype.Wd=function(){if(null===this.wn){var a=this.va.o,b=a.length;if(0===b)return null;for(var c=0;c<b;c++){var d=a[c];if(!0===d.If)return this.wn=d}this.wn=a[0]}return this.wn};
I.prototype.wj=function(a,b,c,d){var e=this.uj,g=this.va.o,h=z.fh(0,0,0,0);if(0===g.length){var k=this.Z;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.Da.F()){var l=Eo(this,!0),m=this.Dd,n=m.width,p=m.height,q=this.margin,r=q.left+q.right,s=q.top+q.bottom;n===c&&p===d&&(l=Tj);switch(l){case Tj:if(n>c||p>d)this.K(),Bk(this,n>c?c:n,p>d?d:p);break;case gf:this.K(!0);Bk(this,c+r,d+s,0,0);break;case qo:this.K(!0);Bk(this,c+r,p+s,0,0);break;case po:this.K(!0),Bk(this,n+r,d+s,0,0)}}k=this.Z;k.x=a;k.y=b;
k.width=c;k.height=d;var v=this.da.Xb;switch(v){case "Position":for(var t=g.length,x=e.x-this.padding.left,y=e.y-this.padding.top,B=0;B<t;B++){var A=g[B],N=A.Ea,G=A.margin,T=A.position.x,fa=A.position.y;h.x=isNaN(T)?-x:T-x;h.y=isNaN(fa)?-y:fa-y;if(A instanceof Y){var W=A;if(W.FF){var P=W.mb/2;h.x-=P;h.y-=P}}h.x+=G.left;h.y+=G.top;h.width=N.width;h.height=N.height;A.visible&&A.qc(h.x,h.y,h.width,h.height)}break;case "Vertical":for(var aa=g.length,Oa=this.padding.left,sa=this.LF,Ma=sa?e.height:this.padding.top,
va=0;va<aa;va++){var Pa=Oa,xa=g[va];if(xa.visible){var Ic=xa.Ea,tc=xa.margin,Fd=tc.left+tc.right,uf=Oa+this.padding.right,ac=Ic.width,Gg=Eo(xa,!1);if(isNaN(xa.Da.width)&&Gg===gf||Gg===qo)ac=Math.max(e.width-Fd-uf,0);var Hg=ac+Fd+uf,db=xa.alignment;db.hd()&&(db=this.em);db.jd()||(db=mc);sa&&(Ma-=Ic.height+tc.bottom+tc.top);xa.qc(Pa+db.offsetX+tc.left+(e.width*db.x-Hg*db.x),Ma+db.offsetY+tc.top,ac,Ic.height);sa||(Ma+=Ic.height+tc.bottom+tc.top)}}break;case "Horizontal":for(var vb=g.length,qa=this.padding.top,
ra=this.LF,jb=ra?e.width:this.padding.left,bb=0;bb<vb;bb++){var Ya=qa,re=g[bb];if(re.visible){var fd=re.Ea,Jc=re.margin,se=Jc.top+Jc.bottom,te=qa+this.padding.bottom,cg=fd.height,vf=Eo(re,!1);if(isNaN(re.Da.height)&&vf===gf||vf===po)cg=Math.max(e.height-se-te,0);var sj=cg+se+te,pb=re.alignment;pb.hd()&&(pb=this.em);pb.jd()||(pb=mc);ra&&(jb-=fd.width+Jc.left+Jc.right);re.qc(jb+pb.offsetX+Jc.left,Ya+pb.offsetY+Jc.top+(e.height*pb.y-sj*pb.y),fd.width,cg);ra||(jb+=fd.width+Jc.left+Jc.right)}}break;case "Spot":var bc=
g.length,gd=this.Wd(),ai=gd.Ea,Mb=ai.width,qb=ai.height,eb=this.padding,wf=eb.left,xf=eb.top;h.x=wf-e.x;h.y=xf-e.y;gd.qc(h.x,h.y,Mb,qb);for(var Ig=0;Ig<bc;Ig++){var hd=g[Ig];if(hd!==gd){var Tb=hd.Ea,id=Tb.width,Ye=Tb.height,Cb=hd.alignment;Cb.hd()&&(Cb=this.em);Cb.jd()||(Cb=mc);var fb=hd.Fh;fb.hd()&&(fb=mc);var Gd=null;hd instanceof I&&""!==hd.Wj&&(Gd=hd.Gd(hd.Wj),Gd===hd&&(Gd=null));if(null!==Gd){for(var rb=Gd.Ja,Hd=z.Fb(fb.x*rb.width+fb.offsetX,fb.y*rb.height+fb.offsetY);Gd!==hd;)Gd.transform.wb(Hd),
Gd=Gd.Q;h.x=Cb.x*Mb+Cb.offsetX-Hd.x;h.y=Cb.y*qb+Cb.offsetY-Hd.y;z.A(Hd)}else h.x=Cb.x*Mb+Cb.offsetX-(fb.x*id-fb.offsetX),h.y=Cb.y*qb+Cb.offsetY-(fb.y*Ye-fb.offsetY);h.x-=e.x;h.y-=e.y;hd.visible&&hd.qc(wf+h.x,xf+h.y,id,Ye)}}break;case "Auto":var He=g.length,ab=this.Wd(),Ta=ab.Ea,Ra=z.Of();Ra.m(0,0,1,1);var cc=ab.margin,dg=cc.left,eg=cc.top,fg=this.padding,bi=fg.left,Gb=fg.top;h.x=dg;h.y=eg;h.width=Ta.width;h.height=Ta.height;ab.qc(bi+h.x,Gb+h.y,h.width,h.height);var Ub=Kp(ab),Wb=Lp(ab),Ze=0+Ub.y*Ta.height+
Ub.offsetY,Nb=0+Wb.x*Ta.width+Wb.offsetX,Ob=0+Wb.y*Ta.height+Wb.offsetY;Ra.x=0+Ub.x*Ta.width+Ub.offsetX;Ra.y=Ze;Rb(Ra,Nb,Ob,0,0);Ra.x+=dg+bi;Ra.y+=eg+Gb;for(var Id=0;Id<He;Id++){var Hb=g[Id];if(Hb!==ab){var uc=Hb.Ea,cc=Hb.margin,ci=Math.max(uc.width+cc.right+cc.left,0),di=Math.max(uc.height+cc.top+cc.bottom,0),rd=Hb.alignment;rd.hd()&&(rd=this.em);rd.jd()||(rd=mc);h.x=Ra.width*rd.x+rd.offsetX-ci*rd.x+cc.left+Ra.x;h.y=Ra.height*rd.y+rd.offsetY-di*rd.y+cc.top+Ra.y;h.width=Ra.width;h.height=Ra.height;
Hb.visible&&(Sb(Ra.x,Ra.y,Ra.width,Ra.height,h.x,h.y,uc.width,uc.height)?Hb.qc(h.x,h.y,uc.width,uc.height):Hb.qc(h.x,h.y,uc.width,uc.height,new w(Ra.x,Ra.y,Ra.width,Ra.height)))}}z.Mb(Ra);break;case "Table":for(var $e=g.length,gg=this.padding,jd=gg.left,Ib=gg.top,sd=this.ft,dc=0,Xb=0,yf=sd.length,Wc=0,Ua=0;Ua<yf;Ua++)sd[Ua]&&(Wc=Math.max(Wc,sd[Ua].length));for(var Ie=Math.min(this.tj,yf-1);Ie!==yf&&(void 0===this.je[Ie]||0===this.je[Ie].$a);)Ie++;for(var Ie=Math.min(Ie,yf-1),ei=-this.je[Ie].ub,Xc=
Math.min(this.dj,Wc-1);Xc!==Wc&&(void 0===this.ee[Xc]||0===this.ee[Xc].$a);)Xc++;for(var Xc=Math.min(Xc,Wc-1),xh=-this.ee[Xc].ub,Kc=z.Am(),Ua=0;Ua<yf;Ua++)if(sd[Ua]){var Wc=sd[Ua].length,yh=this.oe(Ua),Xb=yh.ub+ei+Ib;0!==yh.$a&&(Xb+=yh.HE());for(var Jg=0;Jg<Wc;Jg++)if(sd[Ua][Jg]){var Xd=this.ne(Jg),dc=Xd.ub+xh+jd;0!==Xd.$a&&(dc+=Xd.HE());for(var zf=sd[Ua][Jg],Jk=zf.length,Kg=0;Kg<Jk;Kg++){var wb=zf[Kg],zh=wb.Ea,Af=wb instanceof I?wb:null;if(null===Af||Af.type!==Jo&&Af.type!==Ko){Kc.m(0,0);for(var kb=
1;kb<wb.rowSpan&&!(Ua+kb>=this.Oq);kb++){var fi=this.oe(Ua+kb);Kc.height+=fi.total}for(kb=1;kb<wb.bI&&!(Jg+kb>=this.aq);kb++){var tj=this.ne(Jg+kb);Kc.width+=tj.total}var la=Xd.$a+Kc.width,ga=yh.$a+Kc.height;h.x=dc;h.y=Xb;h.width=la;h.height=ga;var kd=dc,Kk=Xb,Lk=la,zc=ga;dc+la>e.width&&(Lk=Math.max(e.width-dc,0));Xb+ga>e.height&&(zc=Math.max(e.height-Xb,0));var Jd=wb.alignment,Pb=0,Bf=0,hg=0,Cf=0;if(Jd.hd()){Jd=this.em;Jd.jd()||(Jd=mc);var Pb=Jd.x,Bf=Jd.y,hg=Jd.offsetX,Cf=Jd.offsetY,Yd=Xd.alignment,
Zd=yh.alignment;Yd.jd()&&(Pb=Yd.x,hg=Yd.offsetX);Zd.jd()&&(Bf=Zd.y,Cf=Zd.offsetY)}else Pb=Jd.x,Bf=Jd.y,hg=Jd.offsetX,Cf=Jd.offsetY;if(isNaN(Pb)||isNaN(Bf))Bf=Pb=.5,Cf=hg=0;var kc=zh.width,vc=zh.height,af=wb.margin,ba=af.left+af.right,gi=af.top+af.bottom,ig=So(wb,yh,Xd,!1);!isNaN(wb.Da.width)||ig!==gf&&ig!==qo||(kc=Math.max(la-ba,0));!isNaN(wb.Da.height)||ig!==gf&&ig!==po||(vc=Math.max(ga-gi,0));var uj=wb.mf,vj=wb.ig,kc=Math.min(uj.width,kc),vc=Math.min(uj.height,vc),kc=Math.max(vj.width,kc),vc=Math.max(vj.height,
vc),Kd=vc+gi;h.x+=h.width*Pb-(kc+ba)*Pb+hg+af.left;h.y+=h.height*Bf-Kd*Bf+Cf+af.top;wb.visible&&(Sb(kd,Kk,Lk,zc,h.x,h.y,zh.width,zh.height)?wb.qc(h.x,h.y,kc,vc):wb.qc(h.x,h.y,kc,vc,new w(kd,Kk,Lk,zc)))}else{wb.$i();wb.ac.Za();var hb=wb.ac;hb.x=Af.type===Jo?jd:dc;hb.y=Af.type===Ko?Ib:Xb;hb.width=zh.width;hb.height=zh.height;wb.ac.freeze();Fo(wb,!1)}}}}z.Qk(Kc);for(Ua=0;Ua<$e;Ua++)wb=g[Ua],Af=wb instanceof I?wb:null,null===Af||Af.type!==Jo&&Af.type!==Ko||(hb=wb.ac,wb.Tc.Za(),wb.Tc.m(0,0,hb.width,hb.height),
wb.Tc.freeze());break;case "Viewbox":var sb=g[0],hi=sb.Ea,wj=sb.margin,Mk=wj.top+wj.bottom,Nk=Math.max(hi.width+(wj.right+wj.left),0),Ac=Math.max(hi.height+Mk,0),ld=sb.alignment;ld.hd()&&(ld=this.em);ld.jd()||(ld=mc);h.x=e.width*ld.x-Nk*ld.x+ld.offsetX;h.y=e.height*ld.y-Ac*ld.y+ld.offsetY;h.width=hi.width;h.height=hi.height;sb.qc(h.x,h.y,h.width,h.height);break;case "Link":var Lg=g.length,Lc=this instanceof ea,ii=Lc?this.$f:this;if(ii instanceof H){var Ok=Lc?null:ii.path;if(null!==this.oh){var fm=
this.oh.o,$d=0;if(null!==Ok&&$d<this.oh.count){var Yc=fm[$d];$d++;Ok.qc(Yc.x-this.uj.x,Yc.y-this.uj.y,Yc.width,Yc.height)}for(var Je=0;Je<Lg;Je++){var jg=g[Je];jg!==Ok&&$d<this.oh.count&&(Yc=fm[$d],$d++,jg.qc(Yc.x-this.uj.x,Yc.y-this.uj.y,Yc.width,Yc.height))}}var xj=ii.points,ae=xj.count;if(2<=ae&&this.af)for(var be=this.Kf;be.next();){var Mc=be.value,Df=ae,kg=xj,Zc=Mc.Ue,Pk=Mc.vB,Mg=Mc.Fh,Ng=Mc.Pq,Eb=Mc.wB,ce=0,de=0,Og=0;if(Zc<-Df||Zc>=Df){var Ef=this.WF,lb=this.VF;Ng!==nj&&(Og=this.computeAngle(Mc,
Ng,lb),Mc.angle=Og);ce=Ef.x;de=Ef.y}else{var wc=void 0,Jb=void 0;if(0<=Zc)wc=kg.o[Zc],Jb=Zc<Df-1?kg.o[Zc+1]:wc;else var Ff=Df+Zc,wc=kg.o[Ff],Jb=0<Ff?kg.o[Ff-1]:wc;if(wc.Vc(Jb)){var Gf=void 0,Yb=void 0;0<=Zc?(Gf=0<Zc?kg.o[Zc-1]:wc,Yb=Zc<Df-2?kg.o[Zc+2]:Jb):(Gf=Ff<Df-1?kg.o[Ff+1]:wc,Yb=1<Ff?kg.o[Ff-2]:Jb);var lg=Gf.Ef(wc),Ah=Jb.Ef(Yb),lb=lg>Ah+10?0<=Zc?Gf.Lc(wc):wc.Lc(Gf):Ah>lg+10?0<=Zc?Jb.Lc(Yb):Yb.Lc(Jb):0<=Zc?Gf.Lc(Yb):Yb.Lc(Gf)}else lb=0<=Zc?wc.Lc(Jb):Jb.Lc(wc);Ng!==nj&&(Og=this.computeAngle(Mc,
Ng,lb),Mc.angle=Og);ce=wc.x+(Jb.x-wc.x)*Pk;de=wc.y+(Jb.y-wc.y)*Pk}if(Mg.O(gc))Mc.location=new M(ce,de);else{Mg.$d()&&(Mg=mc);var Ke=z.Pf();Ke.reset();Ke.scale(Mc.scale,Mc.scale);Ke.rotate(Mc.angle,0,0);var Pg=Mc.Ja,mg=z.fh(0,0,Pg.width,Pg.height),Hf=z.P();Hf.oo(mg,Mg);Ke.wb(Hf);var Le=-Hf.x,Me=-Hf.y,If=Eb.copy();isNaN(If.x)&&(If.x=0<=Zc?Hf.x+3:-(Hf.x+3));isNaN(If.y)&&(If.y=-(Hf.y+3));If.rotate(lb);ce+=If.x;de+=If.y;Ke.ZG(mg);var Le=Le+mg.x,Me=Me+mg.y,yj=z.Fb(ce+Le,de+Me);Mc.move(yj);z.A(yj);z.A(Hf);
z.Mb(mg);z.Ie(Ke)}}Lc?this.fo(!1):ii.fo(!1)}break;case "Grid":break;case "Graduated":if(null!==this.Nm){var td=this.Wd(),zj=this.Pm,ki=this.Nm,li=0,bf=ki[li];li++;td.qc(bf.x-e.x,bf.y-e.y,bf.width,bf.height);for(var ue=g.length,ng=0;ng<ue;ng++){var Bh=g[ng],hm=zj[ng];Bh.visible&&Bh!==td&&0!==hm.length&&(bf=ki[li],li++,Bh.qc(bf.x-e.x,bf.y-e.y,bf.width,bf.height))}this.Nm=null}break;case "TableRow":case "TableColumn":z.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");
break;default:z.k("Unknown panel type: "+v)}z.Mb(h)}};I.prototype.Kk=function(a){var b=this.Ja;if(Sb(0,0,b.width,b.height,a.x,a.y)){for(var b=this.va.o,c=b.length,d=z.Fb(0,0);c--;){var e=b[c];if(e.visible||e===this.cc)if(ub(d.set(a),e.transform),e.Oa(d))return z.A(d),!0}z.A(d);return null===this.Kb&&null===this.ic?!1:!0}return!1};I.prototype.Cx=function(a){if(this.Eo===a)return this;for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d].Cx(a);if(null!==e)return e}return null};
function $o(a,b,c){c(a,b);if(b instanceof I){b=b.va.o;for(var d=b.length,e=0;e<d;e++)$o(a,b[e],c)}}function Mm(a,b){Vp(a,a,b)}function Vp(a,b,c){c(b);b=b.va.o;for(var d=b.length,e=0;e<d;e++){var g=b[e];g instanceof I&&Vp(a,g,c)}}I.prototype.walkVisualTree=I.prototype.FK=function(a){Wp(this,this,a)};function Wp(a,b,c){c(b);if(b instanceof I){b=b.va.o;for(var d=b.length,e=0;e<d;e++)Wp(a,b[e],c)}}I.prototype.findInVisualTree=I.prototype.du=function(a){return Xp(this,this,a)};
function Xp(a,b,c){if(c(b))return b;if(b instanceof I){b=b.va.o;for(var d=b.length,e=0;e<d;e++){var g=Xp(a,b[e],c);if(null!==g)return g}}return null}I.prototype.findObject=I.prototype.Gd=function(a){if(this.name===a)return this;for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof I)if(null===e.cj&&null===e.Eg){if(e=e.Gd(a),null!==e)return e}else if(kn(e)&&(e=e.va.first(),null!==e&&(e=e.Gd(a),null!==e)))return e}return null};
function Yp(a){a=a.va.o;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof I)c=Math.max(c,Yp(e));else if(e instanceof Y){a:{if(null!==!e.Yf)switch(e.Xo){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=
0;break a}e=e.ef/2*e.vn*e.Cj()}c=Math.max(c,e)}}return c}f=I.prototype;f.jh=function(){return!(this.type===Jo||this.type===Ko)};
f.He=function(a,b,c){if(!1===this.qg)return null;void 0===b&&(b=null);void 0===c&&(c=null);if(Dm(this))return null;var d=this.Ja,e=1/this.Cj(),g=this.jh(),h=g?a:ub(z.Fb(a.x,a.y),this.transform),k=this.g,l=10,m=5;null!==k&&(l=k.lu("extraTouchArea"),m=l/2);if(Sb(-(m*e),-(m*e),d.width+l*e,d.height+l*e,h.x,h.y)){if(!this.Yn){var e=this.va.o,n=e.length,k=z.P(),m=(l=this.uq)?this.Wd():null;if(l&&(m.jh()?ub(k.set(a),m.transform):k.set(a),!m.Oa(k)))return z.A(k),g||z.A(h),null;for(;n--;){var p=e[n];if(p.visible||
p===this.cc)if(p.jh()?ub(k.set(a),p.transform):k.set(a),!l||p!==m){var q=null;p instanceof I?q=p.He(k,b,c):!0===p.qg&&p.Oa(k)&&(q=p);if(null!==q&&(null!==b&&(q=b(q)),null!==q&&(null===c||c(q))))return z.A(k),g||z.A(h),q}}z.A(k)}if(null===this.background&&null===this.Xl)return g||z.A(h),null;a=Sb(0,0,d.width,d.height,h.x,h.y)?this:null;g||z.A(h);return a}g||z.A(h);return null};
f.kq=function(a,b,c,d){if(!1===this.qg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);d instanceof J||d instanceof K||(d=new J(O));var e=this.Ja,g=this.jh(),h=g?a:ub(z.Fb(a.x,a.y),this.transform);if(Sb(0,0,e.width,e.height,h.x,h.y)){if(!this.Yn){for(var e=this.va.o,k=e.length,l=z.P();k--;){var m=e[k];if(m.visible||m===this.cc){m.jh()?ub(l.set(a),m.transform):l.set(a);var n=m,m=m instanceof I?m:null;(null!==m?m.kq(l,b,c,d):n.Oa(l))&&!1!==n.qg&&(null!==b&&(n=b(n)),null===n||null!==c&&!c(n)||d.add(n))}}z.A(l)}g||
z.A(h);return null!==this.background||null!==this.Xl}g||z.A(h);return!1};
f.Pk=function(a,b,c,d,e,g){if(!1===this.qg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=g;void 0===g&&(h=z.Pf(),h.reset());h.multiply(this.transform);if(this.Hn(a,h))return Zp(this,b,c,e),void 0===g&&z.Ie(h),!0;if(this.Vg(a,h)){if(!this.Yn)for(var k=this.va.o,l=k.length;l--;){var m=k[l];if(m.visible||m===this.cc){var n=m.Z,p=this.Ja;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=m;m=m instanceof I?m:null;p=z.Pf();p.set(h);if(null!==m?m.Pk(a,b,c,d,e,p):Do(n,a,d,p))null!==
b&&(n=b(n)),null===n||null!==c&&!c(n)||e.add(n);z.Ie(p)}}}void 0===g&&z.Ie(h);return d}void 0===g&&z.Ie(h);return!1};function Zp(a,b,c,d){for(var e=a.va.o,g=e.length;g--;){var h=e[g];if(h.visible){var k=h.Z,l=a.Ja;k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height||(h instanceof I&&Zp(h,b,c,d),null!==b&&(h=b(h)),null===h||null!==c&&!c(h)||d.add(h))}}}
f.On=function(a,b,c,d,e,g){if(!1===this.qg)return!1;void 0===c&&(c=null);void 0===d&&(d=null);var h=this.Ja,k=this.jh(),l=k?a:ub(z.Fb(a.x,a.y),this.transform),m=k?b:ub(z.Fb(b.x,b.y),this.transform),n=l.Ef(m),p=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height||xb(l.x,l.y,0,0,0,h.height)<n||xb(l.x,l.y,0,h.height,h.width,h.height)<n||xb(l.x,l.y,h.width,h.height,h.width,0)<n||xb(l.x,l.y,h.width,0,0,0)<n,h=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height&&xb(l.x,l.y,0,0,0,h.height)<n&&xb(l.x,l.y,0,h.height,h.width,h.height)<
n&&xb(l.x,l.y,h.width,h.height,h.width,0)<n&&xb(l.x,l.y,h.width,0,0,0)<n;k||(z.A(l),z.A(m));if(p){if(!this.Yn){k=z.P();l=z.P();m=this.va.o;for(n=m.length;n--;){var q=m[n];if(q.visible||q===this.cc){var r=q.Z,s=this.Ja;r.x>s.width||r.y>s.height||0>r.x+r.width||0>r.y+r.height||(q.jh()?(r=q.transform,ub(k.set(a),r),ub(l.set(b),r)):(k.set(a),l.set(b)),r=q,q=q instanceof I?q:null,null!==q?!q.On(k,l,c,d,e,g):!r.hF(k,l,e))||(null!==c&&(r=c(r)),null===r||null!==d&&!d(r)||g.add(r))}}z.A(k);z.A(l)}return e?
p:h}return!1};function Kp(a){var b=a.C;if(void 0===b||b===Rc)b=null;null===b&&a instanceof Y&&(a=a.Ff,null!==a&&(b=a.C));null===b&&(b=hc);return b}function Lp(a){var b=a.D;if(void 0===b||b===Rc)b=null;null===b&&a instanceof Y&&(a=a.Ff,null!==a&&(b=a.D));null===b&&(b=qc);return b}I.prototype.add=I.prototype.add=function(a){z.l(a,O,I,"add:element");this.Yd(this.va.count,a)};I.prototype.elt=I.prototype.fa=function(a){return this.va.fa(a)};
I.prototype.insertAt=I.prototype.Yd=function(a,b){b instanceof D&&z.k("Cannot add a Part to a Panel: "+b);if(this===b||this.rm(b))this===b&&z.k("Cannot make a Panel contain itself: "+this.toString()),z.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.Q;null!==c&&c!==this&&z.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.da!==Nl||b instanceof Y||z.k("Can only add Shapes to a Grid Panel, not: "+b);this.da!==Fp||b instanceof Y||b instanceof pa||z.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+b);b.wm(this);b.hn=null;if(null!==this.Wk){var d=b.data;null!==d&&"object"===typeof d&&(null===this.Dg&&(this.Dg=new oa(Object,I)),this.Dg.add(d,b))}var e=this.va,d=-1;if(c===this){for(var g=-1,h=this.va.o,k=h.length,l=0;l<k;l++)if(h[l]===b){g=l;break}if(-1!==g){if(g===a||g+1>=e.count&&
a>=e.count)return;e.md(g);d=g}else z.k("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>a||a>e.count)a=e.count;e.Yd(a,b);this.K();b.K();null!==b.vd?this.Tk=!0:b instanceof I&&!0===b.Tk&&(this.Tk=!0);this.gk=null;c=this.ba;null!==c&&(c.Jl=null,c.rk=NaN,this.Tk&&c instanceof E&&(c.Tk=!0),c.Tk&&(c.ze=null),e=this.g,null!==e&&e.sa.lb||(-1!==d&&c.ld(tg,"elements",this,b,null,d,null),c.ld(sg,"elements",this,null,b,null,a),this.su()||$p(this,b,!1)))};
z.defineProperty(I,{Tk:null},function(){return 0!==(this.T&8388608)},function(a){0!==(this.T&8388608)!==a&&(this.T^=8388608)});function aq(a,b){a.T=b?a.T|16777216:a.T&-16777217}I.prototype.remove=I.prototype.remove=function(a){z.l(a,O,I,"remove:element");for(var b=this.va.o,c=b.length,d=-1,e=0;e<c;e++)if(b[e]===a){d=e;break}-1!==d&&this.vf(d)};I.prototype.removeAt=I.prototype.md=function(a){u&&z.p(a,I,"removeAt:idx");0<=a&&this.vf(a)};
I.prototype.vf=function(a){var b=this.va,c=b.fa(a);c.hn=null;c.wm(null);if(null!==this.Dg){var d=c.data;"object"===typeof d&&this.Dg.remove(d)}b.md(a);cm(this,!1);this.K();this.wn===c&&(this.wn=null);this.gk=null;b=this.ba;null!==b&&(b.Jl=null,b.rk=NaN,b.pe(),d=this.g,null!==d&&d.sa.lb||b.ld(tg,"elements",this,c,null,a,null))};z.w(I,{Oq:"rowCount"},function(){return void 0===this.je?0:this.je.length});
I.prototype.getRowDefinition=I.prototype.oe=function(a){u&&z.p(a,I,"getRowDefinition:idx");0>a&&z.wa(a,">= 0",I,"getRowDefinition:idx");a=Math.round(a);var b=this.je;if(void 0===b[a]){var c=new mh;c.wm(this);c.Je=!0;c.index=a;b[a]=c}return b[a]};I.prototype.removeRowDefinition=I.prototype.lG=function(a){u&&z.p(a,I,"removeRowDefinition:idx");0>a&&z.wa(a,">= 0",I,"removeRowDefinition:idx");a=Math.round(a);var b=this.je;this.ld(tg,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.K()};
z.w(I,{aq:"columnCount"},function(){return void 0===this.ee?0:this.ee.length});I.prototype.getColumnDefinition=I.prototype.ne=function(a){u&&z.p(a,I,"getColumnDefinition:idx");0>a&&z.wa(a,">= 0",I,"getColumnDefinition:idx");a=Math.round(a);var b=this.ee;if(void 0===b[a]){var c=new mh;c.wm(this);c.Je=!1;c.index=a;b[a]=c}return b[a]};
I.prototype.removeColumnDefinition=I.prototype.iG=function(a){u&&z.p(a,I,"removeColumnDefinition:idx");0>a&&z.wa(a,">= 0",I,"removeColumnDefinition:idx");a=Math.round(a);var b=this.ee;this.ld(tg,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.K()};
z.defineProperty(I,{fK:"rowSizing"},function(){return void 0===this.nn?hp:this.nn},function(a){if(void 0!==this.nn){var b=this.nn;b!==a&&(a!==hp&&a!==Np&&z.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.nn=a,this.K(),this.i("rowSizing",b,a))}});
z.defineProperty(I,{aI:"columnSizing"},function(){return void 0===this.Im?hp:this.Im},function(a){if(void 0!==this.Im){var b=this.Im;b!==a&&(a!==hp&&a!==Np&&z.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.Im=a,this.K(),this.i("columnSizing",b,a))}});
z.defineProperty(I,{TG:"topIndex"},function(){return void 0===this.tj?0:this.tj},function(a){if(void 0!==this.tj){var b=this.tj;b!==a&&((!isFinite(a)||0>a)&&z.k("Panel.topIndex must be greater than zero and a real number, not: "+a),this.tj=a,this.K(),this.i("topIndex",b,a))}});
z.defineProperty(I,{RF:"leftIndex"},function(){return void 0===this.dj?0:this.dj},function(a){if(void 0!==this.dj){var b=this.dj;b!==a&&((!isFinite(a)||0>a)&&z.k("Panel.leftIndex must be greater than zero and a real number, not: "+a),this.dj=a,this.K(),this.i("leftIndex",b,a))}});I.prototype.findRowForLocalY=function(a){if(0>a)return-1;if(this.type!==ha)return NaN;for(var b=0,c=this.je,d=c.length,e=this.tj;e<d;e++){var g=c[e];if(void 0!==g&&(b+=g.total,a<b))return e}return-1};
I.prototype.findColumnForLocalX=function(a){if(0>a)return-1;if(this.type!==ha)return NaN;for(var b=0,c=this.ee,d=c.length,e=this.dj;e<d;e++){var g=c[e];if(void 0!==g&&(b+=g.total,a<b))return e}return-1};I.prototype.graduatedPointForValue=function(a,b){void 0===b&&(b=new M(NaN,NaN));if(this.type!==Fp)return b.m(NaN,NaN),b;a=Math.min(Math.max(a,this.Sk),this.KA);var c=(a-this.Sk)/this.Jx,d=this.Wd();d.Ff.MI(c,b);c=z.Pf();c.set(d.transform);b.transform(c);z.Ie(c);return b};
I.prototype.graduatedValueForPoint=function(a){if(this.type!==Fp)return NaN;var b=this.Wd(),c=b.Ff,d=z.Pf();d.set(b.transform);d.Mx();a.transform(d);z.Ie(d);return c.II(a)*this.Jx+this.Sk};
z.defineProperty(I,{data:"data"},function(){return this.ge},function(a){var b=this.ge;if(b!==a){var c=this instanceof D&&!(this instanceof ea);c&&z.h(a,"object",I,"data");Nh(this);this.ge=a;var d=this.g;null!==d&&(c?this instanceof H?(null!==b&&d.Zj.remove(b),null!==a&&d.Zj.add(a,this)):this instanceof D&&(null!==b&&d.Ti.remove(b),null!==a&&d.Ti.add(a,this)):(c=this.Q,null!==c&&null!==c.Dg&&(null!==b&&c.Dg.remove(b),null!==a&&c.Dg.add(a,this))));this.i("data",b,a);null!==d&&d.sa.lb||null!==a&&this.Nb()}});
z.defineProperty(I,{xu:"itemIndex"},function(){return this.ls},function(a){var b=this.ls;b!==a&&(this.ls=a,this.i("itemIndex",b,a))});function ap(a){a=a.pl;return null!==a&&a.I}
function Nh(a){var b=a.pl;if(null===b)null!==a.data&&z.k("Template cannot have .data be non-null: "+a),a.pl=b=new J(sh);else if(b.I)return;var c=new J(O);aq(a,!1);$o(a,a,function(a,d){var e=d.Ec;if(null!==e)for(Vo(d,!1),e=e.j;e.next();){var g=e.value;g.mode===uh&&Vo(d,!0);var h=g.Wq;null!==h&&("/"===h&&aq(a,!0),h=vh(g,a,d),null!==h&&(c.add(h),null===h.Jp&&(h.Jp=new J(sh)),h.Jp.add(g)));b.add(g)}if(d instanceof I&&d.type===ha){if(0<d.je.length)for(e=d.je,g=e.length,h=0;h<g;h++){var k=e[h];if(void 0!==
k&&null!==k.Ec)for(var l=k.Ec.j;l.next();){var t=l.value;t.Ng=k;t.At=2;t.Qp=k.index;b.add(t)}}if(0<d.ee.length)for(e=d.ee,g=e.length,h=0;h<g;h++)if(k=e[h],void 0!==k&&null!==k.Ec)for(l=k.Ec.j;l.next();)t=l.value,t.Ng=k,t.At=1,t.Qp=k.index,b.add(t)}});for(var d=c.j;d.next();){var e=d.value;if(null!==e.Jp){Vo(e,!0);for(var g=e.Jp.j;g.next();){var h=g.value;null===e.Ec&&(e.Ec=new J(sh));e.Ec.add(h)}}e.Jp=null}for(d=b.j;d.next();)if(e=d.value,g=e.Ng,null!==g){e.Ng=null;var k=e.av,l=k.indexOf(".");0<l&&
g instanceof I&&(h=k.substring(0,l),k=k.substr(l+1),l=g.Gd(h),null!==l?(g=l,e.av=k):z.trace('Warning: unable to find GraphObject named "'+h+'" for Binding: '+e.toString()));g instanceof mh?(e.zm=z.Hd(g.Q),g.Q.Eo=e.zm):(e.zm=z.Hd(g),g.Eo=e.zm)}b.freeze();a instanceof D&&(a.qe()&&a.kf(),u&&!bq&&$o(a,a,function(a,c){if(c instanceof I&&(c.type===Kl||c.type===Rj||c.type===Fp)&&1>=c.elements.count&&!(c instanceof D)){if(1===c.elements.count){var d=null!==c.Wk;if(!d)for(var e=b.j;e.next();)if("itemArray"===
e.value.av){d=!0;break}}d||(z.trace("Auto, Spot, or Graduated Panel should not have zero or one elements: "+c.toString()+" in "+a.toString()),bq=!0)}}))}var bq=!1;I.prototype.copyTemplate=function(){var a=this.copy();a.FK(function(a){a instanceof I&&(a.pl=null,a.ge=null);var c=a.Ec;null!==c&&(a.Ec=null,c.each(function(c){a.bind(c.copy())}))});return a};
I.prototype.updateTargetBindings=I.prototype.Nb=function(a){var b=this.pl;if(null!==b)for(void 0===a&&(a=""),b=b.j;b.next();){var c=b.value,d=c.JG;if(""===a||""===d||d===a)if(d=c.av,null!==c.fI||""!==d){var d=this.data,e=c.Wq;if(null!==e)d=""===e?this:"/"===e?this:"."===e?this:".."===e?this:this.Gd(e);else{var g=this.g;null!==g&&c.Ux&&(d=g.ia.Xk)}if(null===d)u&&z.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var g=this,h=c.zm;if(-1!==h){if(g=this.Cx(h),null===g)continue}else null!==
c.Ng&&(g=c.Ng);"/"===e?d=g.ba:"."===e?d=g:".."===e&&(d=g.Q);e=c.At;if(0!==e){if(!(g instanceof I))continue;h=g;1===e?g=h.ne(c.Qp):2===e&&(g=h.oe(c.Qp))}void 0!==g&&c.bH(g,d)}}}};
z.defineProperty(I,{Wk:"itemArray"},function(){return this.cj},function(a){var b=this.cj;if(b!==a){u&&null!==a&&!z.isArray(a)&&z.k("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.g;null!==c&&null!==b&&Sm(c,this);this.cj=a;null!==c&&null!==a&&Om(c,this);this.i("itemArray",b,a);null!==c&&c.sa.lb||this.pB()}});function kn(a){return a.type===Rj||a.type===Kl||a.type===kj||a.type===ha&&0<a.va.length&&(a=a.va.fa(0),a.If&&a instanceof I&&(a.type===Jo||a.type===Ko))?!0:!1}
I.prototype.rebuildItemElements=I.prototype.pB=function(){var a=0;for(kn(this)&&(a=1);this.va.length>a;)this.vf(this.va.length-1);a=this.Wk;if(null!==a)for(var b=z.bb(a),c=0;c<b;c++)jn(this,z.Ma(a,c),c)};I.prototype.findItemPanelForData=I.prototype.CI=function(a){if(void 0===a||null===a||null===this.Dg)return null;z.h(a,"object",I,"findItemPanelForData");return this.Dg.qa(a)};
function jn(a,b,c){if(!(void 0===b||null===b||0>c)){var d;d=cq(a,b);var e=a.lJ,g=null;null!==e&&(g=e.qa(d));null===g&&(dq||(dq=!0,z.trace('No item template Panel found for category "'+d+'" on '+a),z.trace("  Using default item template."),d=new I,e=new pa,e.bind(new sh("text","",ka)),d.add(e),eq=d),g=eq);d=g;null!==d&&(Nh(d),d=d.copy(),0!==(d.T&16777216)&&(e=a.jm(),null!==e&&aq(e,!0)),"object"===typeof b&&(null===a.Dg&&(a.Dg=new oa(Object,I)),a.Dg.add(b,d)),e=c,kn(a)&&e++,a.Yd(e,d),d.ge=b,ln(a,e,
c),d.ge=null,d.data=b)}}function ln(a,b,c){for(a=a.va;b<a.length;){var d=a.fa(b);if(d instanceof I){var e=b,g=c;d.type===Jo?d.Zb=e:d.type===Ko&&(d.column=e);d.xu=g}b++;c++}}
z.defineProperty(I,{RL:"itemTemplate"},function(){return null===this.Eg?null:this.Eg.qa("")},function(a){if(null===this.Eg){if(null===a)return;this.Eg=new oa("string",I)}var b=this.Eg.qa("");b!==a&&(z.l(a,I,I,"itemTemplate"),(a instanceof D||a.If)&&z.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+a),this.Eg.add("",a),this.i("itemTemplate",b,a),a=this.g,null!==a&&a.sa.lb||this.pB())});
z.defineProperty(I,{lJ:"itemTemplateMap"},function(){return this.Eg},function(a){var b=this.Eg;if(b!==a){z.l(a,oa,I,"itemTemplateMap");for(var c=a.j;c.next();){var d=c.value;(d instanceof D||d.If)&&z.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+d)}this.Eg=a;this.i("itemTemplateMap",b,a);a=this.g;null!==a&&a.sa.lb||this.pB()}});
z.defineProperty(I,{QL:"itemCategoryProperty"},function(){return this.mp},function(a){var b=this.mp;b!==a&&("string"!==typeof a&&"function"!==typeof a&&z.hc(a,"string or function",I,"itemCategoryProperty"),this.mp=a,this.i("itemCategoryProperty",b,a))});
function cq(a,b){if(null===b)return"";var c=a.mp,d="";if("function"===typeof c)d=c(b);else if("string"===typeof c&&"object"===typeof b){if(""===c)return"";d=z.vb(b,c)}else return"";if(void 0===d)return"";if("string"===typeof d)return d;z.k("Panel.getCategoryForItemData found a non-string category for "+b+": "+d);return""}var dq=!1,eq=null;
z.defineProperty(I,{Yn:"isAtomic"},function(){return 0!==(this.T&1048576)},function(a){var b=0!==(this.T&1048576);b!==a&&(z.h(a,"boolean",I,"isAtomic"),this.T^=1048576,this.i("isAtomic",b,a))});z.defineProperty(I,{uq:"isClipping"},function(){return 0!==(this.T&2097152)},function(a){var b=0!==(this.T&2097152);b!==a&&(z.h(a,"boolean",I,"isClipping"),this.T^=2097152,this.K(),this.i("isClipping",b,a))});
z.defineProperty(I,{LF:"isOpposite"},function(){return 0!==(this.T&33554432)},function(a){var b=0!==(this.T&33554432);b!==a&&(z.h(a,"boolean",I,"isOpposite"),this.T^=33554432,this.K(),this.i("isOpposite",b,a))});z.defineProperty(I,{isEnabled:"isEnabled"},function(){return 0!==(this.T&4194304)},function(a){var b=0!==(this.T&4194304);if(b!==a){z.h(a,"boolean",I,"isEnabled");var c=null===this.Q||this.Q.su();this.T^=4194304;this.i("isEnabled",b,a);b=this.g;null!==b&&b.sa.lb||c&&$p(this,this,a)}});
function $p(a,b,c){var d=b.aF;null!==d&&d(b,c);if(b instanceof I){b=b.va.o;for(var d=b.length,e=0;e<d;e++){var g=b[e];c&&g instanceof I&&!g.isEnabled||$p(a,g,c)}}}z.defineProperty(I,{KK:"alignmentFocusName"},function(){return this.Wj},function(a){var b=this.Wj;b!==a&&(u&&z.h(a,"string",I,"alignmentFocusName"),this.Wj=a,this.K(),this.i("alignmentFocusName",b,a))});
function mh(){z.wc(this);this.Ah=null;this.cw=!0;this.bd=0;this.tf=NaN;this.tk=0;this.sk=Infinity;this.te=Rc;this.ub=this.$a=0;this.Ec=null;this.rt=fq;this.Mg=oo;this.mt=this.xk=null;this.nt=NaN;this.Kb=this.ni=null;this.wr=!1}z.ka("RowColumnDefinition",mh);
mh.prototype.copy=function(){var a=new mh;a.cw=this.cw;a.bd=this.bd;a.tf=this.tf;a.tk=this.tk;a.sk=this.sk;a.te=this.te;a.$a=this.$a;a.ub=this.ub;a.Mg=this.Mg;a.rt=this.rt;a.xk=null===this.xk?null:this.xk.V();a.mt=this.mt;a.nt=this.nt;a.ni=null;null!==this.ni&&(a.ni=z.am(this.ni));a.Kb=this.Kb;a.wr=this.wr;a.Ec=this.Ec;return a};
mh.prototype.bq=function(a){z.l(a,mh,mh,"copyFrom:pd");a.Je?this.height=a.height:this.width=a.width;this.Lj=a.Lj;this.zf=a.zf;this.alignment=a.alignment;this.stretch=a.stretch;this.Yu=a.Yu;this.xk=null===a.xk?null:a.xk.V();this.Qq=a.Qq;this.Rq=a.Rq;this.ni=null;a.ni&&(this.ni=z.am(a.ni));this.background=a.background;this.tA=a.tA;this.Ec=a.Ec};mh.prototype.pc=function(a){a.Pe===mh?this.Yu=a:z.Tj(this,a)};
mh.prototype.toString=function(){return"RowColumnDefinition "+(this.Je?"(Row ":"(Column ")+this.index+") #"+z.Hd(this)};var fq;mh.Default=fq=z.s(mh,"Default",0);var Np;mh.None=Np=z.s(mh,"None",1);var hp;mh.ProportionalExtra=hp=z.s(mh,"ProportionalExtra",2);mh.prototype.wm=function(a){this.Ah=a};
mh.prototype.computeEffectiveSpacingTop=mh.prototype.HE=function(){var a=0;if(0!==this.index){var b=this.Ah,c=this.Qq;null===c&&null!==b&&(c=this.Je?b.Ui:b.$h);null!==c&&(a=this.Rq,isNaN(a)&&(a=null!==b?this.Je?b.bi:b.ai:0))}b=this.CG;if(null===b)if(b=this.Ah,null!==b)b=b.$j;else return a;return a+(this.Je?b.top:b.left)};
mh.prototype.computeEffectiveSpacing=mh.prototype.gf=function(){var a=0;if(0!==this.index){var b=this.Ah,c=this.Qq;null===c&&null!==b&&(c=this.Je?b.Ui:b.$h);null!==c&&(a=this.Rq,isNaN(a)&&(a=null!==b?this.Je?b.bi:b.ai:0))}b=this.CG;if(null===b)if(b=this.Ah,null!==b)b=b.$j;else return a;return a+(this.Je?b.top+b.bottom:b.left+b.right)};
mh.prototype.sd=function(a,b,c,d,e){var g=this.Ah;if(null!==g&&(g.ld(bg,a,this,b,c,d,e),null!==this.Ec&&(b=g.g,null!==b&&!b.Ve&&(g=g.jm(),null!==g&&(b=g.data,null!==b)))))for(c=this.Ec.j;c.next();)c.value.Cy(this,b,a,g)};z.w(mh,{Q:"panel"},function(){return this.Ah});z.defineProperty(mh,{Je:"isRow"},function(){return this.cw},function(a){this.cw=a});z.defineProperty(mh,{index:"index"},function(){return this.bd},function(a){this.bd=a});
z.defineProperty(mh,{height:"height"},function(){return this.tf},function(a){var b=this.tf;b!==a&&(u&&z.h(a,"number",mh,"height"),0>a&&z.wa(a,">= 0",mh,"height"),this.tf=a,this.Ra=this.$a,null!==this.Q&&this.Q.K(),this.sd("height",b,a))});z.defineProperty(mh,{width:"width"},function(){return this.tf},function(a){var b=this.tf;b!==a&&(u&&z.h(a,"number",mh,"width"),0>a&&z.wa(a,">= 0",mh,"width"),this.tf=a,this.Ra=this.$a,null!==this.Q&&this.Q.K(),this.sd("width",b,a))});
z.defineProperty(mh,{Lj:"minimum"},function(){return this.tk},function(a){var b=this.tk;b!==a&&(u&&z.h(a,"number",mh,"minimum"),(0>a||!isFinite(a))&&z.wa(a,">= 0",mh,"minimum"),this.tk=a,this.Ra=this.$a,null!==this.Q&&this.Q.K(),this.sd("minimum",b,a))});z.defineProperty(mh,{zf:"maximum"},function(){return this.sk},function(a){var b=this.sk;b!==a&&(u&&z.h(a,"number",mh,"maximum"),0>a&&z.wa(a,">= 0",mh,"maximum"),this.sk=a,this.Ra=this.$a,null!==this.Q&&this.Q.K(),this.sd("maximum",b,a))});
z.defineProperty(mh,{alignment:"alignment"},function(){return this.te},function(a){var b=this.te;b.O(a)||(u&&z.l(a,R,mh,"alignment"),this.te=a.V(),null!==this.Q&&this.Q.K(),this.sd("alignment",b,a))});z.defineProperty(mh,{stretch:"stretch"},function(){return this.Mg},function(a){var b=this.Mg;b!==a&&(u&&z.Ca(a,O,mh,"stretch"),this.Mg=a,null!==this.Q&&this.Q.K(),this.sd("stretch",b,a))});
z.defineProperty(mh,{CG:"separatorPadding"},function(){return this.xk},function(a){"number"===typeof a?a=new Kb(a):null!==a&&u&&z.l(a,Kb,mh,"separatorPadding");var b=this.xk;null!==a&&null!==b&&b.O(a)||(null!==a&&(a=a.V()),this.xk=a,null!==this.Q&&this.Q.K(),this.sd("separatorPadding",b,a))});
z.defineProperty(mh,{Qq:"separatorStroke"},function(){return this.mt},function(a){var b=this.mt;b!==a&&(null===a||"string"===typeof a||a instanceof Ea)&&(a instanceof Ea&&a.freeze(),this.mt=a,null!==this.Q&&this.Q.K(),this.sd("separatorStroke",b,a))});z.defineProperty(mh,{Rq:"separatorStrokeWidth"},function(){return this.nt},function(a){var b=this.nt;b!==a&&(this.nt=a,null!==this.Q&&this.Q.K(),this.sd("separatorStrokeWidth",b,a))});
z.defineProperty(mh,{jK:"separatorDashArray"},function(){return this.ni},function(a){var b=this.ni;if(b!==a){null===a||Array.isArray(a)||z.hc(a,"Array",mh,"separatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("separatorDashArray value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.ni=a;null!==this.Q&&this.Q.ra();this.sd("separatorDashArray",b,a)}});
z.defineProperty(mh,{background:"background"},function(){return this.Kb},function(a){var b=this.Kb;b!==a&&(null===a||"string"===typeof a||a instanceof Ea)&&(a instanceof Ea&&a.freeze(),this.Kb=a,null!==this.Q&&this.Q.ra(),this.sd("background",b,a))});z.defineProperty(mh,{tA:"coversSeparators"},function(){return this.wr},function(a){var b=this.wr;b!==a&&(z.h(a,"boolean",mh,"coversSeparators"),this.wr=a,null!==this.Q&&this.Q.ra(),this.sd("coversSeparators",b,a))});
z.defineProperty(mh,{Yu:"sizing"},function(){return this.rt},function(a){var b=this.rt;b!==a&&(u&&z.Ca(a,mh,mh,"sizing"),this.rt=a,null!==this.Q&&this.Q.K(),this.sd("sizing",b,a))});function Mp(a){if(a.Yu===fq){var b=a.Ah;return a.Je?b.fK:b.aI}return a.Yu}z.defineProperty(mh,{Ra:"actual"},function(){return this.$a},function(a){this.$a=isNaN(this.tf)?Math.max(Math.min(this.sk,a),this.tk):Math.max(Math.min(this.sk,this.tf),this.tk)});
z.defineProperty(mh,{total:"total"},function(){return this.$a+this.gf()},function(a){this.$a=isNaN(this.tf)?Math.max(Math.min(this.sk,a),this.tk):Math.max(Math.min(this.sk,this.tf),this.tk);this.$a=Math.max(0,this.$a-this.gf())});z.defineProperty(mh,{position:"position"},function(){return this.ub},function(a){this.ub=a});
mh.prototype.bind=mh.prototype.bind=function(a){a.Ng=this;var b=this.Q;if(null!==b){var c=b.jm();null!==c&&ap(c)&&z.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a+" on "+b)}null===this.Ec&&(this.Ec=new J(sh));this.Ec.add(a)};
function Y(){O.call(this);this.Yf=this.nb=null;this.Xo="None";this.Ur=oo;this.Ac=this.Pd="black";this.ef=1;this.Mp="butt";this.Op="miter";this.vn=10;this.Np=null;this.Oe=0;this.vi=this.ui=Rc;this.Rs=this.Qs=NaN;this.cs=!1;this.Ts=null;this.$o=this.Sp="None";this.Bg=1;this.Ag=0;this.zg=1}z.Ta(Y,O);z.ka("Shape",Y);
Y.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.nb=this.nb;a.Xo=this.Xo;a.Ur=this.Ur;a.Yf=this.Yf;a.Pd=this.Pd;a.Ac=this.Ac;a.ef=this.ef;a.Mp=this.Mp;a.Op=this.Op;a.vn=this.vn;null!==this.Np&&(a.Np=z.am(this.Np));a.Oe=this.Oe;a.ui=this.ui.V();a.vi=this.vi.V();a.Qs=this.Qs;a.Rs=this.Rs;a.cs=this.cs;a.Ts=this.Ts;a.Sp=this.Sp;a.$o=this.$o;a.Bg=this.Bg;a.Ag=this.Ag;a.zg=this.zg};
Y.prototype.pc=function(a){a===Tj||a===Vj||a===Wj||a===oo?this.HA=a:O.prototype.pc.call(this,a)};Y.prototype.toString=function(){return"Shape("+("None"!==this.Jb?this.Jb:"None"!==this.Xq?this.Xq:this.FA)+")#"+z.Hd(this)};
function gq(a,b,c,d){var e=c.length;if(!(4>e)){for(var g=d.Ea,h=Math.max(1,g.width),g=g.height,k=c[0],l=c[1],m=0,n=0,p=0,q=0,r=0,s=0,v=q=0,t=z.tb(),x=2;x<e;x+=2)m=c[x],n=c[x+1],p=m-k,q=n-l,0===p&&(p=.001),r=q/p,s=Math.atan2(q,p),q=Math.sqrt(p*p+q*q),t.push([p,s,r,q]),v+=q,k=m,l=n;k=c[0];l=c[1];p=d.Ea.width;d instanceof Y&&(p-=d.mb);1>p&&(p=1);for(var e=c=p,m=h/2,n=0===m?!1:!0,x=0,q=t[x],p=q[0],s=q[1],r=q[2],q=q[3],y=0;.1<=v;){0===y&&(n?(e=c,e-=m,v-=m,n=!1):e=c,0===e&&(e=1));if(e>v){z.Ba(t);return}e>
q?(y=e-q,e=q):y=0;var B=Math.sqrt(e*e/(1+r*r));0>p&&(B=-B);k+=B;l+=r*B;a.translate(k,l);a.rotate(s);a.translate(-(h/2),-(g/2));0===y&&d.Ok(a,b);a.translate(h/2,g/2);a.rotate(-s);a.translate(-k,-l);v-=e;q-=e;if(0!==y){x++;if(x===t.length){z.Ba(t);return}q=t[x];p=q[0];s=q[1];r=q[2];q=q[3];e=y}}z.Ba(t)}}
Y.prototype.Ok=function(a,b){if(null!==this.Ac||null!==this.Pd){null!==this.Pd&&No(this,a,this.Pd,!0,!1);null!==this.Ac&&No(this,a,this.Ac,!1,!1);var c=this.ef;if(0===c){var d=this.ba;d instanceof ea&&d.type===kj&&"Selection"===d.rc&&d.Ab instanceof Y&&d.$f.Wd()===d.Ab&&(c=d.Ab.mb)}a.lineWidth=c;a.lineJoin=this.Op;a.lineCap=this.Mp;a.miterLimit=this.vn;var e=!1;this.ba&&b.Dj("drawShadows")&&(e=this.ba.Vk);var g=!0;null!==this.Ac&&null===this.Pd&&(g=!1);var d=!1,h=!0,k=this.MG;null!==k&&(d=!0,h=a.AA(k,
this.Oe));var l=this.nb;if(null!==l){if(l.da===hf)a.beginPath(),d&&!h?yo(a,l.zc,l.Ic,l.Bb,l.Ib,k,this.Oe):(a.moveTo(l.zc,l.Ic),a.lineTo(l.Bb,l.Ib)),null!==this.Pd&&a.Tg(this.Pd),0!==c&&null!==this.Ac&&a.Rj();else if(l.da===jf){var m=l.zc,n=l.Ic,p=l.Bb,q=l.Ib,l=Math.min(m,p),r=Math.min(n,q),m=Math.abs(p-m),n=Math.abs(q-n);null!==this.Pd&&(a.beginPath(),a.rect(l,r,m,n),a.Tg(this.Pd));if(null!==this.Ac){var s=p=0,v=0;g&&e&&(p=a.shadowOffsetX,s=a.shadowOffsetY,v=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0);d&&!h?(h=z.tb(),h.push(l),h.push(r),h.push(l+m),h.push(r),h.push(l+m),h.push(r+n),h.push(l),h.push(r+n),h.push(l),h.push(r),a.beginPath(),hq(a,h,k,this.Oe),a.Rj(),z.Ba(h)):0!==c&&(a.beginPath(),a.rect(l,r,m,n),a.Rj());g&&e&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=v)}}else if(l.da===kf)m=l.zc,n=l.Ic,p=l.Bb,q=l.Ib,l=Math.abs(p-m)/2,r=Math.abs(q-n)/2,m=Math.min(m,p)+l,n=Math.min(n,q)+r,a.beginPath(),a.moveTo(m,n-r),a.bezierCurveTo(m+Cd*l,n-r,m+l,n-Cd*r,m+l,n),a.bezierCurveTo(m+
l,n+Cd*r,m+Cd*l,n+r,m,n+r),a.bezierCurveTo(m-Cd*l,n+r,m-l,n+Cd*r,m-l,n),a.bezierCurveTo(m-l,n-Cd*r,m-Cd*l,n-r,m,n-r),a.closePath(),null!==this.Pd&&a.Tg(this.Pd),d&&!h&&(h=z.tb(),ye(m,n-r,m+Cd*l,n-r,m+l,n-Cd*r,m+l,n,.5,h),ye(m+l,n,m+l,n+Cd*r,m+Cd*l,n+r,m,n+r,.5,h),ye(m,n+r,m-Cd*l,n+r,m-l,n+Cd*r,m-l,n,.5,h),ye(m-l,n,m-l,n-Cd*r,m-Cd*l,n-r,m,n-r,.5,h),a.beginPath(),hq(a,h,k,this.Oe),z.Ba(h)),0!==c&&null!==this.Ac&&(g&&e?(p=a.shadowOffsetX,s=a.shadowOffsetY,v=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0,a.Rj(),a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=v):a.Rj());else if(l.da===We){r=l.bk;n=r.length;for(q=0;q<n;q++){m=r.o[q];a.beginPath();a.moveTo(m.na,m.la);for(var p=m.Db.o,s=p.length,t=null,v=0;v<s;v++){var x=p[v];switch(x.da){case Mf:a.moveTo(x.G,x.H);break;case mf:a.lineTo(x.G,x.H);break;case Nf:a.bezierCurveTo(x.Rd,x.df,x.Bh,x.Kg,x.Bb,x.Ib);break;case Of:a.quadraticCurveTo(x.Rd,x.df,x.Bb,x.Ib);break;case Pf:if(x.radiusX===x.radiusY)t=Math.PI/180,a.arc(x.Rd,x.df,x.radiusX,
x.Me*t,(x.Me+x.Bf)*t,0>x.Bf);else{var t=Rf(x,m),y=t.length;if(0===y){a.lineTo(x.oa,x.xa);break}for(var B=0;B<y;B++){var A=t[B];0===B&&a.lineTo(A[0],A[1]);a.bezierCurveTo(A[2],A[3],A[4],A[5],A[6],A[7])}}break;case Qf:B=y=0;if(null!==t&&t.type===Pf){t=Rf(t,m);A=t.length;if(0===A){a.lineTo(x.oa,x.xa);break}t=t[A-1]||null;null!==t&&(y=t[6],B=t[7])}else y=null!==t?t.G:m.na,B=null!==t?t.H:m.la;t=Sf(x,m,y,B);y=t.length;if(0===y){a.lineTo(x.oa,x.xa);break}for(B=0;B<y;B++)A=t[B],a.bezierCurveTo(A[2],A[3],
A[4],A[5],A[6],A[7]);break;default:z.k("Segment not of valid type: "+x.da)}x.ei&&a.closePath();t=x}e?(v=s=p=0,m.jp?(!0===m.Rm&&null!==this.Pd?(a.Tg(this.Pd),g=!0):g=!1,0!==c&&null!==this.Ac&&(g&&(p=a.shadowOffsetX,s=a.shadowOffsetY,v=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!h||a.Rj(),g&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=v))):(g&&(p=a.shadowOffsetX,s=a.shadowOffsetY,v=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),!0===m.Rm&&null!==this.Pd&&
a.Tg(this.Pd),0!==c&&null!==this.Ac&&(d&&!h||a.Rj()),g&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=v))):(!0===m.Rm&&null!==this.Pd&&a.Tg(this.Pd),0===c||null===this.Ac||d&&!h||a.Rj())}if(d&&!h)for(c=g,g=l.bk,h=g.length,l=0;l<h;l++){r=g.o[l];a.beginPath();n=z.tb();n.push(r.na);n.push(r.la);q=r.na;m=r.la;p=q;s=m;v=r.Db.o;x=v.length;for(t=0;t<x;t++){y=v[t];switch(y.da){case Mf:hq(a,n,k,this.Oe);n.length=0;n.push(y.G);n.push(y.H);q=y.G;m=y.H;p=q;s=m;break;case mf:n.push(y.G);n.push(y.H);q=y.G;
m=y.H;break;case Nf:ye(q,m,y.Rd,y.df,y.Bh,y.Kg,y.Bb,y.Ib,.5,n);q=y.G;m=y.H;break;case Of:Ce(q,m,y.Rd,y.df,y.Bb,y.Ib,.5,n);q=y.G;m=y.H;break;case Pf:B=Rf(y,r);A=B.length;if(0===A){n.push(y.oa);n.push(y.xa);q=y.oa;m=y.xa;break}for(var N=0;N<A;N++){var G=B[N];ye(q,m,G[2],G[3],G[4],G[5],G[6],G[7],.5,n);q=G[6];m=G[7]}break;case Qf:B=Sf(y,r,q,m);A=B.length;if(0===A){n.push(y.oa);n.push(y.xa);q=y.oa;m=y.xa;break}for(N=0;N<A;N++)G=B[N],ye(q,m,G[2],G[3],G[4],G[5],G[6],G[7],.5,n),q=G[6],m=G[7];break;default:z.k("Segment not of valid type: "+
y.da)}y.ei&&(n.push(p),n.push(s),hq(a,n,k,this.Oe))}hq(a,n,k,this.Oe);z.Ba(n);null!==this.Ac&&(q=n=r=0,c&&e&&(r=a.shadowOffsetX,n=a.shadowOffsetY,q=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.Rj(),c&&e&&(a.shadowOffsetX=r,a.shadowOffsetY=n,a.shadowBlur=q))}}d&&a.vA();if(null!==this.iy){d=this.iy;Bk(d,Infinity,Infinity);k=d.Ea;d.qc(0,0,k.width,k.height);c=this.Ff;a.save();a.beginPath();k=z.tb();if(c.type===hf)k.push(c.na),k.push(c.la),k.push(c.G),k.push(c.H),gq(a,b,k,d);else if(c.type===
We)for(h=c.mc.j;h.next();){l=h.value;k.length=0;k.push(l.na);k.push(l.la);g=l.na;r=l.la;n=g;q=r;m=l.Db.o;p=m.length;for(s=0;s<p;s++){v=m[s];switch(v.da){case Mf:gq(a,b,k,d);k.length=0;k.push(v.G);k.push(v.H);g=v.G;r=v.H;n=g;q=r;break;case mf:k.push(v.G);k.push(v.H);g=v.G;r=v.H;break;case Nf:ye(g,r,v.Rd,v.df,v.Bh,v.Kg,v.Bb,v.Ib,.5,k);g=v.G;r=v.H;break;case Of:Ce(g,r,v.Rd,v.df,v.Bb,v.Ib,.5,k);g=v.G;r=v.H;break;case Pf:c=Rf(v,l);e=c.length;if(0===e){k.push(v.oa);k.push(v.xa);g=v.oa;r=v.xa;break}for(x=
0;x<e;x++)t=c[x],ye(g,r,t[2],t[3],t[4],t[5],t[6],t[7],.5,k),g=t[6],r=t[7];break;case Qf:c=Sf(v,l,g,r);e=c.length;if(0===e){k.push(v.oa);k.push(v.xa);g=v.oa;r=v.xa;break}for(x=0;x<e;x++)t=c[x],ye(g,r,t[2],t[3],t[4],t[5],t[6],t[7],.5,k),g=t[6],r=t[7];break;default:z.k("Segment not of valid type: "+v.da)}v.ei&&(k.push(n),k.push(q),gq(a,b,k,d))}gq(a,b,k,d)}else if(c.type===jf)k.push(c.na),k.push(c.la),k.push(c.G),k.push(c.la),k.push(c.G),k.push(c.H),k.push(c.na),k.push(c.H),k.push(c.na),k.push(c.la),
gq(a,b,k,d);else if(c.type===kf){h=new Xe;h.na=c.G;h.la=(c.la+c.H)/2;g=new Wf(Pf);g.Me=0;g.Bf=360;g.oa=(c.na+c.G)/2;g.xa=(c.la+c.H)/2;g.radiusX=Math.abs(c.na-c.G)/2;g.radiusY=Math.abs(c.la-c.H)/2;h.add(g);c=Rf(g,h);e=c.length;if(0===e)k.push(g.oa),k.push(g.xa);else for(g=h.na,r=h.la,x=0;x<e;x++)t=c[x],ye(g,r,t[2],t[3],t[4],t[5],t[6],t[7],.5,k),g=t[6],r=t[7];gq(a,b,k,d)}z.Ba(k);a.restore();da(a,!1)}}}};
function hq(a,b,c,d){var e=b.length;if(!(4>e)){var g=.001,h=c.length,k=b[0],l=b[1];if(4===e)yo(a,k,l,b[2],b[3],c,d);else{a.moveTo(k,l);for(var m=g=0,n=0,p=0,q=0,r=p=0,s=z.tb(),v=2;v<e;v+=2)g=b[v],m=b[v+1],n=g-k,p=m-l,0===n&&(n=.001),q=p/n,p=Math.sqrt(n*n+p*p),s.push([n,q,p]),r+=p,k=g,l=m;k=b[0];l=b[1];b=0;for(var e=!0,g=c[b%h],m=0!==d,v=0,p=s[v],n=p[0],q=p[1],p=p[2],t=0;.1<=r;){0===t&&(g=c[b%h],b++,m&&(d%=g,g-=d,m=!1));g>r&&(g=r);g>p?(t=g-p,g=p):t=0;var x=Math.sqrt(g*g/(1+q*q));0>n&&(x=-x);k+=x;l+=
q*x;e?a.lineTo(k,l):a.moveTo(k,l);r-=g;p-=g;if(0!==t){v++;if(v===s.length){z.Ba(s);return}p=s[v];n=p[0];q=p[1];p=p[2];g=t}else e=!e}z.Ba(s)}}}Y.prototype.getDocumentPoint=Y.prototype.cb=function(a,b){void 0===b&&(b=new M);if(a instanceof R){a.$d()&&z.k("getDocumentPoint Spot must be a real, specific Spot, not: "+a.toString());var c=this.Ja,d=this.mb;b.m(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY)}else b.set(a);this.Gh.wb(b);return b};
Y.prototype.Kk=function(a,b){var c=this.Ff;if(null===c||null===this.fill&&null===this.stroke)return!1;var d=c.sb,e=this.mb/2;c.type!==hf||b||(e+=2);var g=z.Of();g.assign(d);g.fg(e+2,e+2);if(!g.Oa(a))return z.Mb(g),!1;d=e+1E-4;if(c.type===hf){if(null===this.stroke)return!1;d=(c.G-c.na)*(a.x-c.na)+(c.H-c.la)*(a.y-c.la);if(0>(c.na-c.G)*(a.x-c.G)+(c.la-c.H)*(a.y-c.H)||0>d)return!1;z.Mb(g);return qe(c.na,c.la,c.G,c.H,e,a.x,a.y)}if(c.type===jf){var h=c.na,k=c.la,l=c.G,m=c.H;g.x=Math.min(h,l);g.y=Math.min(k,
m);g.width=Math.abs(l-h);g.height=Math.abs(m-k);if(null===this.fill){g.fg(-d,-d);if(g.Oa(a))return z.Mb(g),!1;g.fg(d,d)}null!==this.stroke&&g.fg(e,e);e=g.Oa(a);z.Mb(g);return e}if(c.type===kf){var h=c.na,k=c.la,l=c.G,m=c.H,c=Math.min(h,l),n=Math.min(k,m),h=Math.abs(l-h)/2,k=Math.abs(m-k)/2,c=a.x-(c+h),n=a.y-(n+k);if(null===this.fill){h-=d;k-=d;if(0>=h||0>=k||1>=c*c/(h*h)+n*n/(k*k))return z.Mb(g),!1;h+=d;k+=d}null!==this.stroke&&(h+=e,k+=e);z.Mb(g);return 0>=h||0>=k?!1:1>=c*c/(h*h)+n*n/(k*k)}if(c.type===
We)return z.Mb(g),null===this.fill?Uf(c,a.x,a.y,e):c.Oa(a,e,1<this.mb,b);z.k("Unknown Geometry type: "+c.type);return!1};
Y.prototype.zq=function(a,b,c,d){var e=this.Da,g=this.ef;a=Math.max(a,0);b=Math.max(b,0);var h;if(null!==this.Yf)h=this.Ff.sb;else{var k=this.Jb,l=me[k];if(void 0===l){var m=iq[k];"string"===typeof m&&(m=iq[m]);"function"===typeof m?(l=m(null,100,100),me[k]=l):z.k("Unsupported Figure: "+k)}h=l.sb}var k=h.width,l=h.height,m=h.width,n=h.height;switch(Eo(this,!0)){case Tj:d=c=0;break;case gf:m=Math.max(a-g,0);n=Math.max(b-g,0);break;case qo:m=Math.max(a-g,0);d=0;break;case po:c=0,n=Math.max(b-g,0)}isFinite(e.width)&&
(m=e.width);isFinite(e.height)&&(n=e.height);e=this.mf;h=this.ig;c=Math.max(c,h.width)-g;d=Math.max(d,h.height)-g;m=Math.min(e.width,m);n=Math.min(e.height,n);m=isFinite(m)?Math.max(c,m):Math.max(k,c);n=isFinite(n)?Math.max(d,n):Math.max(l,d);c=Uj(this);switch(c){case Tj:break;case gf:k=m;l=n;break;case Vj:c=Math.min(m/k,n/l);isFinite(c)||(c=1);k*=c;l*=c;break;default:z.k(c+" is not a valid geometryStretch.")}null!==this.Yf?(k=Math.max(k,.01),l=Math.max(l,.01),h=null!==this.Yf?this.Yf:this.nb,e=k,
d=l,c=h.copy(),h=h.sb,e/=h.width,d/=h.height,isFinite(e)||(e=1),isFinite(d)||(d=1),1===e&&1===d||c.scale(e,d),u&&c.freeze(),this.nb=c):null!==this.nb&&Db(this.nb.ip,a-g)&&Db(this.nb.gp,b-g)||(this.nb=Y.makeGeometry(this,k,l));h=this.nb.sb;Infinity===a||Infinity===b?Bo(this,h.x-g/2,h.y-g/2,0===a&&0===k?0:h.width+g,0===b&&0===l?0:h.height+g):Bo(this,-(g/2),-(g/2),m+g,n+g)};
function Op(a,b,c,d){if(!1!==Cm(a)){a.Dd.Za();var e=a.ef;0===e&&d instanceof ea&&d.type===kj&&d.Ab instanceof Y&&(e=d.Ab.mb);e*=a.Rb;d instanceof H&&null!==d.nb?(b=d.nb.sb,Bo(a,b.x-e/2,b.y-e/2,b.width+e,b.height+e)):Bo(a,-(e/2),-(e/2),b+e,c+e);a.Dd.freeze();a.Dd.F()||z.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Dd.toString());cm(a,!1)}}function Uj(a){var b=a.HA;return null!==a.Yf?b===oo?gf:b:b===oo?me[a.Jb].le:b}Y.prototype.wj=function(a,b,c,d){Go(this,a,b,c,d)};
Y.prototype.getNearestIntersectionPoint=Y.prototype.nF=function(a,b,c){return this.Tn(a.x,a.y,b.x,b.y,c)};
Y.prototype.Tn=function(a,b,c,d,e){var g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),k=g.m22*h,l=-g.m12*h,m=-g.m21*h,n=g.m11*h,p=h*(g.m21*g.dy-g.m22*g.dx),q=h*(g.m12*g.dx-g.m11*g.dy),g=a*k+b*m+p,h=a*l+b*n+q,k=c*k+d*m+p,l=c*l+d*n+q,m=this.mb/2,p=this.nb;null===p&&(Bk(this,Infinity,Infinity),p=this.nb);q=p.sb;n=!1;if(p.type===hf)if(1.5>=this.mb)n=Fe(p.zc,p.Ic,p.Bb,p.Ib,g,h,k,l,e);else{var r=0,s=0;p.zc===p.Bb?(r=m,s=0):(b=(p.Ib-p.Ic)/(p.Bb-p.zc),s=m/Math.sqrt(1+b*b),r=s*b);d=z.tb();b=new M;Fe(p.zc+
r,p.Ic+s,p.Bb+r,p.Ib+s,g,h,k,l,b)&&d.push(b);b=new M;Fe(p.zc-r,p.Ic-s,p.Bb-r,p.Ib-s,g,h,k,l,b)&&d.push(b);b=new M;Fe(p.zc+r,p.Ic+s,p.zc-r,p.Ic-s,g,h,k,l,b)&&d.push(b);b=new M;Fe(p.Bb+r,p.Ib+s,p.Bb-r,p.Ib-s,g,h,k,l,b)&&d.push(b);b=d.length;if(0===b)return z.Ba(d),!1;n=!0;s=Infinity;for(r=0;r<b;r++){var k=d[r],v=(k.x-g)*(k.x-g)+(k.y-h)*(k.y-h);v<s&&(s=v,e.x=k.x,e.y=k.y)}z.Ba(d)}else if(p.type===jf)b=q.x-m,n=Ge(b,q.y-m,q.x+q.width+m,q.y+q.height+m,g,h,k,l,e);else if(p.type===kf)a:if(b=q.copy().fg(m,
m),0===b.width)n=Fe(b.x,b.y,b.x,b.y+b.height,g,h,k,l,e);else if(0===b.height)n=Fe(b.x,b.y,b.x+b.width,b.y,g,h,k,l,e);else{a=b.width/2;var t=b.height/2;d=b.x+a;b=b.y+t;c=9999;g!==k&&(c=(h-l)/(g-k));if(9999>Math.abs(c)){n=h-b-c*(g-d);if(0>a*a*c*c+t*t-n*n){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(a*a*c*c+t*t-n*n);k=(-(a*a*c*n)+a*t*m)/(t*t+a*a*c*c)+d;a=(-(a*a*c*n)-a*t*m)/(t*t+a*a*c*c)+d;l=c*(k-d)+n+b;b=c*(a-d)+n+b;d=Math.abs((g-k)*(g-k))+Math.abs((h-l)*(h-l));h=Math.abs((g-a)*(g-a))+Math.abs((h-b)*(h-
b));d<h?(e.x=k,e.y=l):(e.x=a,e.y=b)}else{k=t*t;l=g-d;k-=k/(a*a)*l*l;if(0>k){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(k);l=b+m;b-=m;d=Math.abs(l-h);h=Math.abs(b-h);d<h?(e.x=g,e.y=l):(e.x=g,e.y=b)}n=!0}else if(p.type===We){var x=0,y=0,B=v=0,q=z.P(),r=k-g,s=l-h,s=r*r+s*s;e.x=k;e.y=l;for(r=0;r<p.mc.count;r++)for(var A=p.mc.o[r],N=A.Db,x=A.na,y=A.la,G=x,T=y,fa=0;fa<N.count;fa++){var W=N.o[fa],P=W.type,v=W.G,B=W.H,aa=!1;switch(P){case Mf:G=v;T=B;break;case mf:aa=jq(x,y,v,B,g,h,k,l,q);break;case Nf:var aa=
W.Dc,P=W.Zc,Oa=W.Rh,sa=W.Sh,aa=De(x,y,aa,P,Oa,sa,v,B,g,h,k,l,.5,q);break;case Of:aa=(x+2*W.Dc)/3;P=(y+2*W.Zc)/3;Oa=(2*W.Dc+v)/3;sa=(2*W.Dc+v)/3;aa=De(x,y,aa,P,Oa,sa,v,B,g,h,k,l,.5,q);break;case Pf:case Qf:P=W.type===Pf?Rf(W,A):Sf(W,A,x,y);Oa=P.length;if(0===Oa){aa=jq(x,y,W.oa,W.xa,g,h,k,l,q);break}for(B=0;B<Oa;B++)t=P[B],0===B&&jq(x,y,t[0],t[1],g,h,k,l,q)&&(v=kq(g,h,q,s,e),v<s&&(s=v,n=!0)),De(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],g,h,k,l,.5,q)&&(v=kq(g,h,q,s,e),v<s&&(s=v,n=!0));v=t[6];B=t[7];break;
default:z.k("Unknown Segment type: "+P)}x=v;y=B;aa&&(v=kq(g,h,q,s,e),v<s&&(s=v,n=!0));W.Nx&&(v=G,B=T,jq(x,y,v,B,g,h,k,l,q)&&(v=kq(g,h,q,s,e),v<s&&(s=v,n=!0)))}g=c-a;h=d-b;b=Math.sqrt(g*g+h*h);0!==b&&(g/=b,h/=b);e.x-=g*m;e.y-=h*m;z.A(q)}else z.k("Unknown Geometry type: "+p.type);if(!n)return!1;this.transform.wb(e);return!0};function kq(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function jq(a,b,c,d,e,g,h,k,l){var m=!1,n=(e-h)*(b-d)-(g-k)*(a-c);if(0===n)return!1;l.x=((e*k-g*h)*(a-c)-(e-h)*(a*d-b*c))/n;l.y=((e*k-g*h)*(b-d)-(g-k)*(a*d-b*c))/n;(a>c?a-c:c-a)<(b>d?b-d:d-b)?(e=b<d?b:d,a=b<d?d:b,(l.y>e||Db(l.y,e))&&(l.y<a||Db(l.y,a))&&(m=!0)):(e=a<c?a:c,a=a<c?c:a,(l.x>e||Db(l.x,e))&&(l.x<a||Db(l.x,a))&&(m=!0));return m}
Y.prototype.containedInRect=Y.prototype.Hn=function(a,b){if(void 0===b)return a.Lk(this.Z);var c=this.nb;null===c&&(Bk(this,Infinity,Infinity),c=this.nb);var c=c.sb,d=this.mb/2,e=!1,g=z.P();g.m(c.x-d,c.y-d);a.Oa(b.wb(g))&&(g.m(c.x-d,c.bottom+d),a.Oa(b.wb(g))&&(g.m(c.right+d,c.bottom+d),a.Oa(b.wb(g))&&(g.m(c.right+d,c.y-d),a.Oa(b.wb(g))&&(e=!0))));z.A(g);return e};
Y.prototype.intersectsRect=Y.prototype.Vg=function(a,b){if(this.Hn(a,b)||void 0===b&&(b=this.transform,a.Lk(this.Z)))return!0;var c=z.Pf();c.set(b);c.Mx();var d=a.left,e=a.right,g=a.top,h=a.bottom,k=z.P();k.m(d,g);c.wb(k);if(this.Kk(k,!0))return z.A(k),!0;k.m(e,g);c.wb(k);if(this.Kk(k,!0))return z.A(k),!0;k.m(d,h);c.wb(k);if(this.Kk(k,!0))return z.A(k),!0;k.m(e,h);c.wb(k);if(this.Kk(k,!0))return z.A(k),!0;var l=z.P(),m=z.P();c.set(b);c.fB(this.transform);c.Mx();l.x=e;l.y=g;l.transform(c);k.x=d;k.y=
g;k.transform(c);var n=!1;lq(this,k,l,m)?n=!0:(k.x=e,k.y=h,k.transform(c),lq(this,k,l,m)?n=!0:(l.x=d,l.y=h,l.transform(c),lq(this,k,l,m)?n=!0:(k.x=d,k.y=g,k.transform(c),lq(this,k,l,m)&&(n=!0))));z.A(k);z.Ie(c);z.A(l);z.A(m);return n};function lq(a,b,c,d){if(!a.nF(b,c,d))return!1;a=b.x;b=b.y;var e=c.x;c=c.y;var g=d.x;d=d.y;if(a===e){var h=0;a=0;b<c?(h=b,a=c):(h=c,a=b);return d>=h&&d<=a}a<e?(h=a,a=e):h=e;return g>=h&&g<=a}
Y.prototype.hF=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d+=2)if(b.hq(a[d],a[d+1])>e)return!0;return!1}if(c&&null!==this.fill&&this.Kk(a,!0))return!0;var e=a.Ef(b);b=e;1.5<this.mb&&(e=this.mb/2+Math.sqrt(e),e*=e);var g=this.nb;if(null===g&&(Bk(this,Infinity,Infinity),g=this.nb,null===g))return!1;if(!c){var h=g.sb,k=h.x,l=h.y,m=h.x+h.width,h=h.y+h.height;if(yb(a.x,a.y,k,l)<=e&&yb(a.x,a.y,m,l)<=e&&yb(a.x,a.y,k,h)<=e&&yb(a.x,a.y,m,h)<=e)return!0}k=g.zc;l=g.Ic;m=g.Bb;h=g.Ib;if(g.type===
hf){if(c=xb(a.x,a.y,k,l,m,h),g=(k-m)*(a.x-m)+(l-h)*(a.y-h),c<=(0<=(m-k)*(a.x-k)+(h-l)*(a.y-l)&&0<=g?e:b))return!0}else{if(g.type===jf)return b=!1,c&&(b=xb(a.x,a.y,k,l,k,h)<=e||xb(a.x,a.y,k,l,m,l)<=e||xb(a.x,a.y,m,l,m,h)<=e||xb(a.x,a.y,k,h,m,h)<=e),b;if(g.type===kf){b=a.x-(k+m)/2;var g=a.y-(l+h)/2,n=Math.abs(m-k)/2,p=Math.abs(h-l)/2;if(0===n||0===p)return c=xb(a.x,a.y,k,l,m,h),c<=e?!0:!1;if(c){if(a=Ue(n,p,b,g),a*a<=e)return!0}else return yb(b,g,-n,0)>=e||yb(b,g,0,-p)>=e||yb(b,g,0,p)>=e||yb(b,g,n,0)>=
e?!1:!0}else if(g.type===We){h=g.sb;k=h.x;l=h.y;m=h.x+h.width;h=h.y+h.height;if(a.x>m&&a.x<k&&a.y>h&&a.y<l&&xb(a.x,a.y,k,l,k,h)>e&&xb(a.x,a.y,k,l,m,l)>e&&xb(a.x,a.y,m,h,k,h)>e&&xb(a.x,a.y,m,h,m,l)>e)return!1;b=Math.sqrt(e);if(c){if(null===this.fill?Uf(g,a.x,a.y,b):g.Oa(a,b,!0))return!0}else{c=g.mc;for(b=0;b<c.count;b++){k=c.o[b];n=k.na;p=k.la;if(a.hq(n,p)>e)return!1;l=k.Db.o;m=l.length;for(h=0;h<m;h++){var q=l[h];switch(q.type){case Mf:case mf:n=q.G;p=q.H;if(a.hq(n,p)>e)return!1;break;case Nf:g=z.tb();
ye(n,p,q.Dc,q.Zc,q.Rh,q.Sh,q.G,q.H,.8,g);n=d(g,a);z.Ba(g);if(n)return!1;n=q.G;p=q.H;if(a.hq(n,p)>e)return!1;break;case Of:g=z.tb();Ce(n,p,q.Dc,q.Zc,q.G,q.H,.8,g);n=d(g,a);z.Ba(g);if(n)return!1;n=q.G;p=q.H;if(a.hq(n,p)>e)return!1;break;case Pf:case Qf:var r=q.type===Pf?Rf(q,k):Sf(q,k,n,p),s=r.length;if(0===s){n=q.oa;p=q.xa;if(a.hq(n,p)>e)return!1;break}q=null;g=z.tb();for(b=0;b<s;b++)if(q=r[b],g.length=0,ye(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.8,g),d(g,a))return z.Ba(g),!1;z.Ba(g);null!==q&&(n=
q[6],p=q[7]);break;default:z.k("Unknown Segment type: "+q.type)}}}return!0}}}return!1};z.defineProperty(Y,{Ff:"geometry"},function(){return null!==this.nb?this.nb:this.Yf},function(a){var b=this.nb;if(b!==a){null!==a?(u&&z.l(a,Ve,Y,"geometry"),this.Yf=this.nb=a.freeze()):this.Yf=this.nb=null;var c=this.ba;null!==c&&(c.rk=NaN);this.K();this.i("geometry",b,a);zo(this)&&(a=this.ba,null!==a&&Ao(this,a,"geometryString"))}});
z.defineProperty(Y,{HI:"geometryString"},function(){return null===this.Ff?"":this.Ff.toString()},function(a){a=of(a);var b=a.normalize();this.Ff=a;this.position=a=z.Fb(-b.x,-b.y);z.A(a)});z.defineProperty(Y,{FF:"isGeometryPositioned"},function(){return this.cs},function(a){u&&z.h(a,"boolean",Y,"isGeometryPositioned");var b=this.cs;b!==a&&(this.cs=a,this.K(),this.i("isGeometryPositioned",b,a))});Y.prototype.Se=function(){this.nb=null};
z.defineProperty(Y,{fill:"fill"},function(){return this.Pd},function(a){var b=this.Pd;b!==a&&(u&&null!==a&&z.Ut(a,"Shape.fill"),a instanceof Ea&&a.freeze(),this.Pd=a,this.ra(),this.i("fill",b,a))});z.defineProperty(Y,{stroke:"stroke"},function(){return this.Ac},function(a){var b=this.Ac;b!==a&&(u&&null!==a&&z.Ut(a,"Shape.stroke"),a instanceof Ea&&a.freeze(),this.Ac=a,this.ra(),this.i("stroke",b,a))});
z.defineProperty(Y,{mb:"strokeWidth"},function(){return this.ef},function(a){var b=this.ef;if(b!==a)if(u&&z.p(a,Y,"strokeWidth"),0<=a){this.ef=a;this.K();var c=this.ba;null!==c&&(c.rk=NaN);this.i("strokeWidth",b,a)}else z.wa(a,"value >= 0",Y,"strokeWidth:value")});
z.defineProperty(Y,{AM:"strokeCap"},function(){return this.Mp},function(a){var b=this.Mp;b!==a&&("string"!==typeof a||"butt"!==a&&"round"!==a&&"square"!==a?z.wa(a,'"butt", "round", or "square"',Y,"strokeCap"):(this.Mp=a,this.ra(),this.i("strokeCap",b,a)))});
z.defineProperty(Y,{CM:"strokeJoin"},function(){return this.Op},function(a){var b=this.Op;b!==a&&("string"!==typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?z.wa(a,'"miter", "bevel", or "round"',Y,"strokeJoin"):(this.Op=a,this.ra(),this.i("strokeJoin",b,a)))});
z.defineProperty(Y,{DM:"strokeMiterLimit"},function(){return this.vn},function(a){var b=this.vn;if(b!==a)if(u&&z.p(a,Y,"strokeMiterLimit"),1<=a){this.vn=a;this.ra();var c=this.ba;null!==c&&(c.rk=NaN);this.i("strokeMiterLimit",b,a)}else z.wa(a,"value >= 1",Y,"strokeWidth:value")});
z.defineProperty(Y,{MG:"strokeDashArray"},function(){return this.Np},function(a){var b=this.Np;if(b!==a){null===a||Array.isArray(a)||z.hc(a,"Array",Y,"strokeDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("strokeDashArray:value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.Np=a;this.ra();this.i("strokeDashArray",b,a)}});
z.defineProperty(Y,{BM:"strokeDashOffset"},function(){return this.Oe},function(a){var b=this.Oe;b!==a&&(u&&z.p(a,Y,"strokeDashOffset"),0<=a&&(this.Oe=a,this.ra(),this.i("strokeDashOffset",b,a)))});
z.defineProperty(Y,{Jb:"figure"},function(){return this.Xo},function(a){var b=this.Xo;if(b!==a){u&&z.h(a,"string",Y,"figure");var c=iq[a];"function"===typeof c?c=a:(c=iq[a.toLowerCase()])||z.k("Unknown Shape.figure: "+a);b!==c&&(a=this.ba,null!==a&&(a.rk=NaN),this.Xo=c,this.Yf=null,this.Se(),this.K(),this.i("figure",b,c))}});
z.defineProperty(Y,{Xq:"toArrow"},function(){return this.Sp},function(a){var b=this.Sp;!0===a?a="Standard":!1===a&&(a="");if(b!==a){u&&z.h(a,"string",Y,"toArrow");var c=mq(a);null===c?z.k("Unknown Shape.toArrow: "+a):b!==c&&(this.Sp=c,this.Yf=null,this.Se(),this.K(),nq(this),this.i("toArrow",b,c))}});
z.defineProperty(Y,{FA:"fromArrow"},function(){return this.$o},function(a){var b=this.$o;!0===a?a="Standard":!1===a&&(a="");if(b!==a){u&&z.h(a,"string",Y,"fromArrow");var c=mq(a);null===c?z.k("Unknown Shape.fromArrow: "+a):b!==c&&(this.$o=c,this.Yf=null,this.Se(),this.K(),nq(this),this.i("fromArrow",b,c))}});function nq(a){var b=a.g;null!==b&&b.sa.lb||(a.Pq=oq,"None"!==a.Sp?(a.Ue=-1,a.Fh=bd):"None"!==a.$o&&(a.Ue=0,a.Fh=new R(1-bd.x,bd.y)))}
z.defineProperty(Y,{C:"spot1"},function(){return this.ui},function(a){z.l(a,R,Y,"spot1");var b=this.ui;b.O(a)||(this.ui=a=a.V(),this.K(),this.i("spot1",b,a))});z.defineProperty(Y,{D:"spot2"},function(){return this.vi},function(a){z.l(a,R,Y,"spot2");var b=this.vi;b.O(a)||(this.vi=a=a.V(),this.K(),this.i("spot2",b,a))});z.defineProperty(Y,{Qc:"parameter1"},function(){return this.Qs},function(a){var b=this.Qs;b!==a&&(this.Qs=a,this.Se(),this.K(),this.i("parameter1",b,a))});
z.defineProperty(Y,{Mu:"parameter2"},function(){return this.Rs},function(a){var b=this.Rs;b!==a&&(this.Rs=a,this.Se(),this.K(),this.i("parameter2",b,a))});z.w(Y,{Ja:"naturalBounds"},function(){if(null!==this.nb)return this.Tc.assign(this.nb.sb),this.Tc;var a=this.Da;return new w(0,0,a.width,a.height)});z.defineProperty(Y,{iy:"pathPattern"},function(){return this.Ts},function(a){var b=this.Ts;b!==a&&(u&&z.l(a,O,Y,"pathPattern"),this.Ts=a,this.ra(),this.i("pathPattern",b,a))});
z.defineProperty(Y,{qM:"pathObject"},function(){return this.iy},function(a){this.iy=a});z.defineProperty(Y,{HA:"geometryStretch"},function(){return this.Ur},function(a){var b=this.Ur;b!==a&&(z.Ca(a,O,Y,"geometryStretch"),this.Ur=a,this.i("geometryStretch",b,a))});
z.defineProperty(Y,{interval:"interval"},function(){return this.Bg},function(a){var b=this.Bg;u&&z.p(a,Y,"interval");a=Math.floor(a);if(b!==a&&0<=a){this.Bg=a;var c=this.g;null!==c&&this.Q===c.Vn&&dm(c);this.K();c=this.Q;null!==c&&c.type===Fp&&(c.gk=null);this.i("interval",b,a)}});z.defineProperty(Y,{rF:"graduatedStart"},function(){return this.Ag},function(a){var b=this.Ag;u&&z.p(a,Y,"graduatedStart");b!==a&&(0>a?a=0:1<a&&(a=1),this.Ag=a,this.K(),this.i("graduatedStart",b,a))});
z.defineProperty(Y,{pF:"graduatedEnd"},function(){return this.zg},function(a){var b=this.zg;u&&z.p(a,Y,"graduatedEnd");b!==a&&(0>a?a=0:1<a&&(a=1),this.zg=a,this.K(),this.i("graduatedEnd",b,a))});Y.makeGeometry=function(a,b,c){var d=null;if("None"!==a.Xq)d=ne[a.Xq];else if("None"!==a.FA)d=ne[a.FA];else{var e=iq[a.Jb];"string"===typeof e&&(e=iq[e]);void 0===e&&z.k("Unknown Shape.figure: "+a.Jb);d=e(a,b,c);d.ip=b;d.gp=c}null===d&&(e=iq.Rectangle,"function"===typeof e&&(d=e(a,b,c)));return d};
Y.getFigureGenerators=function(){var a=new oa("string","function"),b;for(b in iq)if(b!==b.toLowerCase()){var c=iq[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};
Y.defineFigureGenerator=function(a,b){z.h(a,"string",Y,"defineFigureGenerator:name");"string"===typeof b?""!==b&&iq[b]||z.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+b):z.h(b,"function",Y,"defineFigureGenerator:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||z.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);iq[a]=b;iq[c]=a};
Y.getArrowheadGeometries=function(){var a=new oa("string",Ve),b;for(b in pq)if(void 0===ne[b]){var c=of(pq[b],!1);ne[b]=c;c=b.toLowerCase();c!==b&&(ne[c]=b)}for(b in ne)b!==b.toLowerCase()&&(c=ne[b],c instanceof Ve&&a.add(b,c));a.freeze();return a};
Y.defineArrowheadGeometry=function(a,b){z.h(a,"string",Y,"defineArrowheadGeometry:name");var c=null;"string"===typeof b?(z.h(b,"string",Y,"defineArrowheadGeometry:pathstr"),c=of(b,!1)):(z.l(b,Ve,Y,"defineArrowheadGeometry:pathstr"),c=b);var d=a.toLowerCase();""!==a&&"none"!==d&&a!==d||z.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a);ne[a]=c;ne[d]=a};
function pa(){O.call(this);this.Ud="";this.Ac="black";this.xg="13px sans-serif";this.Nl="start";this.wg=Tj;this.Rl=Uc;this.Tm=!0;this.lk=this.mk=!1;this.lj=qq;this.Gk=rq;this.jw=this.we=0;this.Mm=this.Iz=this.Jz=null;this.gi=new Up;this.Mr=!1;this.$e=this.or=this.Bt=this.Ol=this.Ct=null;this.ti=this.si=0;this.uh=Infinity;this.pp=0;this.Bg=1;this.Ag=0;this.zg=1;this.Om=null}z.Ta(pa,O);z.ka("TextBlock",pa);var sq=/[ \u200b\u00ad]/;
pa.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.Ud=this.Ud;a.Ac=this.Ac;a.xg=this.xg;a.Nl=this.Nl;a.wg=this.wg;a.Rl=this.Rl;a.Tm=this.Tm;a.mk=this.mk;a.lk=this.lk;a.lj=this.lj;a.Gk=this.Gk;a.we=this.we;a.jw=this.jw;a.Jz=this.Jz;a.Iz=this.Iz;a.Mm=this.Mm;a.gi.bq(this.gi);a.Mr=this.Mr;a.Ct=this.Ct;a.Ol=this.Ol;a.Bt=this.Bt;a.or=this.or;a.$e=this.$e;a.si=this.si;a.ti=this.ti;a.uh=this.uh;a.pp=this.pp;a.Bg=this.Bg;a.Ag=this.Ag;a.zg=this.zg;a.Om=this.Om};
pa.prototype.pc=function(a){a.Pe===pa?this.eH=a:O.prototype.pc.call(this,a)};pa.prototype.toString=function(){return 22<this.Ud.length?'TextBlock("'+this.Ud.substring(0,20)+'"...)':'TextBlock("'+this.Ud+'")'};var tq=new na,uq=0,vq=new na,wq=0,xq="...",yq="",zq=(new ma(null)).Mk;pa.getEllipsis=function(){return xq};pa.setEllipsis=function(a){xq=a;vq=new na;wq=0};var Aq;pa.None=Aq=z.s(pa,"None",0);var Bq;pa.WrapFit=Bq=z.s(pa,"WrapFit",1);var rq;pa.WrapDesiredSize=rq=z.s(pa,"WrapDesiredSize",2);var qq;
pa.OverflowClip=qq=z.s(pa,"OverflowClip",0);var Cq;pa.OverflowEllipsis=Cq=z.s(pa,"OverflowEllipsis",1);pa.prototype.K=function(){O.prototype.K.call(this);this.Iz=this.Jz=null};z.defineProperty(pa,{font:"font"},function(){return this.xg},function(a){var b=this.xg;b!==a&&(u&&(z.h(a,"string",pa,"font"),Dq(a)||z.k('Not a valid font: "'+a+'"')),this.xg=a,this.Mm=null,this.K(),this.i("font",b,a))});var Dq;
pa.isValidFont=Dq=function(a){var b=zq.font;if(a===b||"10px sans-serif"===a)return!0;zq.font="10px sans-serif";var c;zq.font=a;var d=zq.font;if("10px sans-serif"!==d)return zq.font=b,!0;zq.font="19px serif";c=zq.font;zq.font=a;d=zq.font;zq.font=b;return d!==c};z.defineProperty(pa,{text:"text"},function(){return this.Ud},function(a){var b=this.Ud;a=null!==a&&void 0!==a?a.toString():"";b!==a&&(this.Ud=a,this.K(),this.i("text",b,a))});
z.defineProperty(pa,{textAlign:"textAlign"},function(){return this.Nl},function(a){var b=this.Nl;b!==a&&(u&&z.h(a,"string",pa,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.Nl=a,this.ra(),this.i("textAlign",b,a)):z.wa(a,'"start", "end", "left", "right", or "center"',pa,"textAlign"))});z.defineProperty(pa,{gu:"flip"},function(){return this.wg},function(a){var b=this.wg;b!==a&&(z.Ca(a,O,pa,"flip"),this.wg=a,this.ra(),this.i("flip",b,a))});
z.defineProperty(pa,{IM:"verticalAlignment"},function(){return this.Rl},function(a){var b=this.Rl;b.O(a)||(u&&z.l(a,R,pa,"verticalAlignment"),a.$d()&&z.k("TextBlock.verticalAlignment for "+this+" must be a real Spot, not:"+a),this.Rl=a=a.V(),Ro(this),this.i("verticalAlignment",b,a))});z.w(pa,{Ja:"naturalBounds"},function(){if(!this.Tc.F()){var a=Eq(this,this.Ud,this.gi,999999).width,b=Fq(this,a,this.gi),c=this.Da;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);Ab(this.Tc,a,b)}return this.Tc});
z.defineProperty(pa,{Tx:"isMultiline"},function(){return this.Tm},function(a){var b=this.Tm;b!==a&&(u&&z.h(a,"boolean",pa,"isMultiline"),this.Tm=a,this.K(),this.i("isMultiline",b,a))});z.defineProperty(pa,{PL:"isUnderline"},function(){return this.mk},function(a){var b=this.mk;b!==a&&(u&&z.h(a,"boolean",pa,"isUnderline"),this.mk=a,this.ra(),this.i("isUnderline",b,a))});
z.defineProperty(pa,{OL:"isStrikethrough"},function(){return this.lk},function(a){var b=this.lk;b!==a&&(u&&z.h(a,"boolean",pa,"isStrikethrough"),this.lk=a,this.ra(),this.i("isStrikethrough",b,a))});z.defineProperty(pa,{eH:"wrap"},function(){return this.Gk},function(a){var b=this.Gk;b!==a&&(u&&z.Ca(a,pa,pa,"wrap"),this.Gk=a,this.K(),this.i("wrap",b,a))});
z.defineProperty(pa,{overflow:"overflow"},function(){return this.lj},function(a){var b=this.lj;b!==a&&(u&&z.Ca(a,pa,pa,"overflow"),this.lj=a,this.K(),this.i("overflow",b,a))});z.defineProperty(pa,{stroke:"stroke"},function(){return this.Ac},function(a){var b=this.Ac;b!==a&&(u&&null!==a&&z.Ut(a,"TextBlock.stroke"),a instanceof Ea&&a.freeze(),this.Ac=a,this.ra(),this.i("stroke",b,a))});z.w(pa,{qJ:"lineCount"},function(){return this.we});
z.defineProperty(pa,{zA:"editable"},function(){return this.Mr},function(a){var b=this.Mr;b!==a&&(u&&z.h(a,"boolean",pa,"editable"),this.Mr=a,this.i("editable",b,a))});z.defineProperty(pa,{PG:"textEditor"},function(){return this.Ct},function(a){var b=this.Ct;b!==a&&(!u||a instanceof Element||a instanceof bk||z.k("TextEditingTool.defaultTextEditor must be an HTML Element or HTMLInfo."),this.Ct=a,this.i("textEditor",b,a))});
z.defineProperty(pa,{BA:"errorFunction"},function(){return this.$e},function(a){var b=this.$e;b!==a&&(null!==a&&z.h(a,"function",pa,"errorFunction"),this.$e=a,this.i("errorFunction",b,a))});z.defineProperty(pa,{interval:"interval"},function(){return this.Bg},function(a){var b=this.Bg;u&&z.p(a,pa,"interval");a=Math.floor(a);if(b!==a&&0<=a){this.Bg=a;this.K();var c=this.Q;null!==c&&c.type===Fp&&(c.gk=null);this.i("interval",b,a)}});
z.defineProperty(pa,{rF:"graduatedStart"},function(){return this.Ag},function(a){var b=this.Ag;u&&z.p(a,pa,"graduatedStart");b!==a&&(0>a?a=0:1<a&&(a=1),this.Ag=a,this.K(),this.i("graduatedStart",b,a))});z.defineProperty(pa,{pF:"graduatedEnd"},function(){return this.zg},function(a){var b=this.zg;u&&z.p(a,pa,"graduatedEnd");b!==a&&(0>a?a=0:1<a&&(a=1),this.zg=a,this.K(),this.i("graduatedEnd",b,a))});
z.defineProperty(pa,{qF:"graduatedFunction"},function(){return this.Om},function(a){var b=this.Om;b!==a&&(null!==a&&z.h(a,"function",pa,"graduatedFunction"),this.Om=a,this.K(),this.i("graduatedFunction",b,a))});
pa.prototype.Ok=function(a,b){if(null!==this.Ac&&0!==this.Ud.length&&null!==this.xg){var c=this.Ja.width,d=this.Ja.height,e=Gq(this),g=a.textAlign=this.Nl,h=b.fs;"start"===g&&(g=h?"right":"left");"end"===g&&(g=h?"left":"right");No(this,a,this.Ac,!0,!1);(this.mk||this.lk)&&No(this,a,this.Ac,!1,!1);var k=0,h=!1,l=z.Fb(0,0);this.Gh.wb(l);var m=z.Fb(0,e);this.Gh.wb(m);var n=l.Ef(m);z.A(l);z.A(m);l=b.scale;8>n*l*l&&(h=!0);b.pd!==a&&(h=!1);!1===b.Dj("textGreeking")&&(h=!1);n=this.si;l=this.ti;switch(this.gu){case so:a.translate(c,
0);a.scale(-1,1);break;case ro:a.translate(0,d);a.scale(1,-1);break;case to:a.translate(c,d),a.scale(-1,-1)}var m=this.we,p=(n+e+l)*m;d>p&&(k=this.Rl,k=k.y*d-k.y*p+k.offsetY);for(var p=this.gi,q=0;q<m;q++){var r=p.Cf[q],s=p.Xe[q];r>c&&(r=c);var k=k+n,v=s,s=a,t=k,x=c,y=e,B=g,A=0;h?("left"===B?A=0:"right"===B?A=x-r:"center"===B&&(A=(x-r)/2),s.fillRect(0+A,t+.25*y,r,1)):("left"===B?A=0:"right"===B?A=x:"center"===B&&(A=x/2),s.fillText(v,0+A,t+y-.25*y),v=y/20|0,0===v&&(v=1),"right"===B?A-=r:"center"===
B&&(A-=r/2),this.mk&&(s.beginPath(),s.lineWidth=v,s.moveTo(0+A,t+y-.2*y),s.lineTo(0+A+r,t+y-.2*y),s.stroke()),this.lk&&(s.beginPath(),s.lineWidth=v,t=t+y-y/2.2|0,0!==v%2&&(t+=.5),s.moveTo(0+A,t),s.lineTo(0+A+r,t),s.stroke()));k+=e+l}switch(this.gu){case so:a.scale(-1,1);a.translate(-c,0);break;case ro:a.scale(1,-1);a.translate(0,-d);break;case to:a.scale(-1,-1),a.translate(-c,-d)}}};
pa.prototype.computeAngle=function(a,b){var c=0;switch(a){default:case nj:c=0;break;case oq:c=b;break;case Pp:c=b+90;break;case Rp:c=b-90;break;case Hq:c=b+180;break;case Iq:c=Re(b);90<c&&270>c&&(c-=180);break;case Qp:c=Re(b+90);90<c&&270>c&&(c-=180);break;case Sp:c=Re(b-90);90<c&&270>c&&(c-=180);break;case Tp:c=Re(b);if(45<c&&135>c||225<c&&315>c)return 0;90<c&&270>c&&(c-=180)}return Re(c)};
pa.prototype.zq=function(a,b,c,d){this.pp=a;var e=this.gi;e.reset();var g=0,h=0;if(isNaN(this.Da.width)){g=this.Ud.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===g.length)g=0;else if(this.Tx){for(var k=h=0,l=!1;!l;){var m=g.indexOf("\n",k);-1===m&&(m=g.length,l=!0);k=Jq(g.substr(k,m-k).replace(/^\s+|\s+$/g,""),this.xg);k>h&&(h=k);k=m+1}g=h}else h=g.indexOf("\n",0),0<=h&&(g=g.substr(0,h)),g=k=Jq(g,this.xg);g=Math.min(g,a/this.scale);g=Math.max(8,g)}else g=this.Da.width;null!==this.Q&&(g=Math.min(g,
this.Q.mf.width),g=Math.max(g,this.Q.ig.width));h=Fq(this,g,e);m=h=isNaN(this.Da.height)?Math.min(h,b/this.scale):this.Da.height;if(0!==e.rf&&1!==e.Xe.length&&this.lj===Cq&&(b=this.xg,l=this.lj===Cq?Kq(b):0,k=this.si+this.ti,k=Math.max(0,Gq(this)+k),m=Math.min(this.yJ-1,Math.max(Math.floor(m/k+.01)-1,0)),!(m+1>=e.Xe.length))){k=e.Xe[m];for(a=Math.max(1,a-l);Jq(k,b)>a&&1<k.length;)k=k.substr(0,k.length-1);k+=xq;a=Jq(k,b);e.Xe[m]=k;e.Xe=e.Xe.slice(0,m+1);e.Cf[m]=a;e.Cf=e.Cf.slice(0,m+1);e.vj=e.Xe.length;
e.rf=Math.max(e.rf,a);this.we=e.vj}if(this.eH===Bq||isNaN(this.Da.width))g=e.rf,isNaN(this.Da.width)&&(g=Math.max(8,g));g=Math.max(c,g);h=Math.max(d,h);Ab(this.Tc,g,h);Bo(this,0,0,g,h)};pa.prototype.wj=function(a,b,c,d){Go(this,a,b,c,d)};
function Eq(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");var e=0,g=0,h=0,k=a.xg,g=a.si+a.ti,l=Math.max(0,Gq(a)+g),h=a.lj===Cq?Kq(k):0;if(a.we>=a.uh)return new Fa(0,l);if(a.Gk===Aq){c.vj=1;g=Jq(b,k);if(0===h||g<=d)return c.rf=g,c.Cf.push(c.rf),c.Xe.push(b),new Fa(g,l);var m=Lq(b);b=b.substr(m.length);for(var n=Lq(b),g=Jq(m+n,k);0<n.length&&g<=d;)m+=n,b=b.substr(n.length),n=Lq(b),g=Jq((m+n).replace(/^\s+|\s+$/g,""),k);m+=n.replace(/^\s+|\s+$/g,"");for(d=Math.max(1,d-h);Jq(m,k)>d&&1<m.length;)m=m.substr(0,
m.length-1);m+=xq;h=Jq(m,k);c.Cf.push(h);c.rf=h;c.Xe.push(m);return new Fa(h,l)}var p=0;0===b.length&&(p=1,c.Cf.push(0),c.Xe.push(b));for(;0<b.length;){m=Lq(b);for(b=b.substr(m.length);Jq(m,k)>d;){n=1;g=Jq(m.substr(0,n),k);for(h=0;g<=d;)n++,h=g,g=Jq(m.substr(0,n),k);1===n?(c.Cf[a.we+p]=g,e=Math.max(e,g)):(c.Cf[a.we+p]=h,e=Math.max(e,h));n--;1>n&&(n=1);c.Xe[a.we+p]=m.substr(0,n);p++;m=m.substr(n);if(a.we+p>a.uh)break}n=Lq(b);for(g=Jq(m+n,k);0<n.length&&g<=d;)m+=n,b=b.substr(n.length),n=Lq(b),g=Jq((m+
n).replace(/^\s+|\s+$/g,""),k);m=m.replace(/^\s+|\s+$/g,"");if(""!==m&&("\u00ad"===m[m.length-1]&&(m=m.substring(0,m.length-1)+"\u2010"),0===n.length?(c.Cf.push(g),e=Math.max(e,g)):(h=Jq(m,k),c.Cf.push(h),e=Math.max(e,h)),c.Xe.push(m),p++,a.we+p>a.uh))break}c.vj=Math.min(a.uh,p);c.rf=Math.max(c.rf,e);return new Fa(c.rf,l*c.vj)}function Lq(a){for(var b=a.length,c=0;c<b&&!sq.test(a.charAt(c));)c++;for(;c<b&&sq.test(a.charAt(c));)c++;return c>=b?a:a.substr(0,c)}
function Jq(a,b){yq!==b&&(yq=zq.font=b);return zq.measureText(a).width}function Gq(a){if(null!==a.Mm)return a.Mm;var b=a.xg;yq!==b&&(yq=zq.font=b);var c=0;void 0!==tq[b]&&5E3>uq?c=tq[b]:(c=1.3*zq.measureText("M").width,tq[b]=c,uq++);return a.Mm=c}function Kq(a){yq!==a&&(yq=zq.font=a);var b=0;void 0!==vq[a]&&5E3>wq?b=vq[a]:(b=zq.measureText(xq).width,vq[a]=b,wq++);return b}
function Fq(a,b,c){var d=a.Ud.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e=a.si+a.ti,e=Math.max(0,Gq(a)+e);if(0===d.length)return c.rf=0,a.we=1,e;if(!a.Tx){var g=d.indexOf("\n",0);0<=g&&(d=d.substr(0,g))}for(var g=0,h=a.we=0,k=-1,l=!1;!l;)k=d.indexOf("\n",h),-1===k&&(k=d.length,l=!0),h<=k&&(h=d.substr(h,k-h),a.Gk!==Aq?(c.vj=0,h=Eq(a,h,c,b),g+=h.height,a.we+=c.vj):(Eq(a,h,c,b),g+=e,a.we++),a.we===a.uh&&(l=!0)),h=k+1;return a.jw=g}
z.defineProperty(pa,{JB:"textValidation"},function(){return this.Ol},function(a){var b=this.Ol;b!==a&&(null!==a&&z.h(a,"function",pa,"textValidation"),this.Ol=a,this.i("textValidation",b,a))});z.defineProperty(pa,{OG:"textEdited"},function(){return this.Bt},function(a){var b=this.Bt;b!==a&&(null!==a&&z.h(a,"function",pa,"textEdited"),this.Bt=a,this.i("textEdited",b,a))});
z.defineProperty(pa,{xM:"spacingAbove"},function(){return this.si},function(a){var b=this.si;b!==a&&(u&&z.h(a,"number",pa,"spacingAbove"),this.si=a,this.i("spacingAbove",b,a))});z.defineProperty(pa,{yM:"spacingBelow"},function(){return this.ti},function(a){var b=this.ti;b!==a&&(u&&z.h(a,"number",pa,"spacingBelow"),this.ti=a,this.i("spacingBelow",b,a))});
z.defineProperty(pa,{yJ:"maxLines"},function(){return this.uh},function(a){var b=this.uh;b!==a&&(u&&z.h(a,"number",pa,"maxLines"),a=Math.floor(a),0>=a&&z.wa(a,"> 0",pa,"maxLines"),this.uh=a,this.i("maxLines",b,a),this.K())});z.w(pa,{$L:"metrics"},function(){return this.gi});z.defineProperty(pa,{hL:"choices"},function(){return this.or},function(a){var b=this.or;b!==a&&(null===a||Array.isArray(a)||z.hc(a,"Array",pa,"choices:value"),this.or=a,this.i("choices",b,a))});
function Up(){this.rf=this.vj=0;this.Cf=[];this.Xe=[]}Up.prototype.reset=function(){this.rf=this.vj=0;this.Cf=[];this.Xe=[]};Up.prototype.bq=function(a){this.vj=a.vj;this.rf=a.rf;this.Cf=z.am(a.Cf);this.Xe=z.am(a.Xe)};z.w(Up,{fL:"arrSize"},function(){return this.Cf});z.w(Up,{gL:"arrText"},function(){return this.Xe});z.w(Up,{ZL:"maxLineWidth"},function(){return this.rf});
function Cl(){O.call(this);this.Ze=null;this.tt="";this.yk=je;this.dp=gf;this.wi=this.$e=null;this.cp=mc;this.wg=Tj;this.Pp=null;this.Bz=!1;this.Yo=!0;this.Hp=null}z.Ta(Cl,O);z.ka("Picture",Cl);Cl.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.element=this.Ze;a.tt=this.tt;a.yk=this.yk.V();a.dp=this.dp;a.wg=this.wg;a.$e=this.$e;a.wi=this.wi;a.cp=this.cp.V();a.Yo=this.Yo;a.Hp=this.Hp};
Cl.prototype.pc=function(a){a===Tj||a===Vj||a===Wj?this.XI=a:O.prototype.pc.call(this,a)};Cl.prototype.toString=function(){return"Picture("+this.source+")#"+z.Hd(this)};var Mq=new na,Nq=0,wl=[];function Oq(){var a=wl;if(0===a.length)for(var b=window.document.getElementsByTagName("canvas"),c=b.length,d=0;d<c;d++){var e=b[d];e.parentElement&&e.parentElement.ca&&a.push(e.parentElement.ca)}return a}var Pq;
Cl.clearCache=Pq=function(a){void 0===a&&(a="");z.h(a,"string",Cl,"clearCache:url");""!==a?Mq[a]&&(delete Mq[a],Nq--):(Mq=new na,Nq=0)};
z.defineProperty(Cl,{element:"element"},function(){return this.Ze},function(a){var b=this.Ze;if(b!==a){null===a||a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||z.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+a);this.Bz=a instanceof HTMLCanvasElement;this.Ze=a;if(null!==a)if(!0===a.complete||void 0===a.complete)a.bp instanceof Event&&null!==this.$e&&this.$e(this,a.bp),!0===a.aw&&null!==this.wi&&this.wi(this,a.Rz),a.aw=!0,this.Da.F()||
(cm(this,!1),this.K());else{var c=this;a.VC||(a.addEventListener("load",function(b){Qq(a,b);c.Da.F()||(cm(c,!1),c.K())}),a.addEventListener("error",function(b){Rq(a,b)}),a.VC=!0)}this.i("element",b,a);this.ra()}});
z.defineProperty(Cl,{source:"source"},function(){return this.tt},function(a){var b=this.tt;if(b!==a){z.h(a,"string",Cl,"source");this.tt=a;var c=Mq,d=this.g;if(void 0!==c[a])var e=c[a].Wp[0].source;else{30<Nq&&(Pq(),c=Mq);var e=z.createElement("img"),g=this;e.addEventListener("load",function(a){Qq(e,a);g.Da.F()||(cm(g,!1),g.K())});e.addEventListener("error",function(a){Rq(e,a)});e.VC=!0;var h=this.Hp;null!==h&&(e.crossOrigin=h(this));e.src=a;c[a]=new Sq(e);Nq++}null!==d&&nn(d,this);this.element=e;
null!==d&&mn(d,this);this.K();this.ra();this.i("source",b,a)}});function Qq(a,b){a.aw=!0;a.bp=!1;for(var c=null,d=Oq(),e=d.length,g=0;g<e;g++){var h=d[g],k=h.Ap.qa(a.src);if(null!==k)for(e=k.length,g=0;g<e;g++)c=k[g],h.Pz.add(c),h.Te(),null===a.Rz&&(a.Rz=b,null!==c.wi&&c.wi(c,b))}}function Rq(a,b){a.bp=b;for(var c=null,d=Oq(),e=d.length,g=0;g<e;g++)if(c=d[g].Ap.qa(a.src),null!==c){for(var e=c.length,h=z.tb(),g=0;g<e;g++)h.push(c[g]);for(g=0;g<e;g++)c=h[g],null!==c.$e&&c.$e(c,b);z.Ba(h)}}
z.defineProperty(Cl,{wM:"sourceCrossOrigin"},function(){return this.Hp},function(a){if(this.Hp!==a&&(null!==a&&z.h(a,"function",Cl,"sourceCrossOrigin"),this.Hp=a,null!==this.element)){var b=this.element.src;null===a&&"string"===typeof b?this.element.crossOrigin=null:null!==a&&(this.element.crossOrigin=a(this));this.element.src=b}});
z.defineProperty(Cl,{Qj:"sourceRect"},function(){return this.yk},function(a){var b=this.yk;b.O(a)||(z.l(a,w,Cl,"sourceRect"),this.yk=a=a.V(),this.ra(),this.i("sourceRect",b,a))});z.defineProperty(Cl,{XI:"imageStretch"},function(){return this.dp},function(a){var b=this.dp;b!==a&&(z.Ca(a,O,Cl,"imageStretch"),this.dp=a,this.ra(),this.i("imageStretch",b,a))});
z.defineProperty(Cl,{gu:"flip"},function(){return this.wg},function(a){var b=this.wg;b!==a&&(z.Ca(a,O,Cl,"flip"),this.wg=a,this.ra(),this.i("flip",b,a))});z.defineProperty(Cl,{IL:"imageAlignment"},function(){return this.cp},function(a){z.l(a,R,Cl,"imageAlignment");var b=this.cp;b.O(a)||(this.cp=a=a.V(),this.K(),this.i("imageAlignment",b,a))});
z.defineProperty(Cl,{BA:"errorFunction"},function(){return this.$e},function(a){var b=this.$e;b!==a&&(null!==a&&z.h(a,"function",Cl,"errorFunction"),this.$e=a,this.i("errorFunction",b,a))});z.defineProperty(Cl,{GM:"successFunction"},function(){return this.wi},function(a){var b=this.wi;b!==a&&(null!==a&&z.h(a,"function",Cl,"successFunction"),this.wi=a,this.i("successFunction",b,a))});
Cl.prototype.Ok=function(a,b){var c=this.Ze;if(null!==c){var d=c.src;null!==d&&""!==d||z.k('Element has no source ("src") attribute: '+c);if(!(c.bp instanceof Event)&&!0===c.aw){var d=this.Ja,e=0,g=0,h=this.Bz,k=h?+c.width:c.naturalWidth,h=h?+c.height:c.naturalHeight;void 0===k&&c.videoWidth&&(k=c.videoWidth);void 0===h&&c.videoHeight&&(h=c.videoHeight);k=k||d.width;h=h||d.height;if(0!==k&&0!==h){var l=k,m=h;this.Qj.F()&&(e=this.yk.x,g=this.yk.y,k=this.yk.width,h=this.yk.height);var n=k,p=h,q=this.dp,
r=this.cp;switch(q){case Tj:if(this.Qj.F())break;n>=d.width&&(e=e+r.offsetX+(n*r.x-d.width*r.x));p>=d.height&&(g=g+r.offsetY+(p*r.y-d.height*r.y));k=Math.min(d.width,n);h=Math.min(d.height,p);break;case gf:n=d.width;p=d.height;break;case Vj:case Wj:var s=0;q===Vj?(s=Math.min(d.height/p,d.width/n),n*=s,p*=s):q===Wj&&(s=Math.max(d.height/p,d.width/n),n*=s,p*=s,n>=d.width&&(e=(e+r.offsetX+(n*r.x-d.width*r.x)/n)*k),p>=d.height&&(g=(g+r.offsetY+(p*r.y-d.height*r.y)/p)*h),k*=1/(n/d.width),h*=1/(p/d.height),
n=d.width,p=d.height)}var q=this.Cj()*b.scale,v=k*h/(n*q*p*q),s=Mq[this.source],q=null;if(void 0!==s&&16<v){2>s.Wp.length&&(Tq(s,4,l,m),Tq(s,16,l,m));for(var l=s.Wp,m=l.length,q=l[0],t=0;t<m;t++)if(l[t].Hq*l[t].Hq<v)q=l[t];else break}if(!b.Uo){if(null===this.Pp)if(null===this.Ze)this.Pp=!1;else{l=(new ma(null)).Mk;l.drawImage(this.Ze,0,0);try{l.getImageData(0,0,1,1).data[3]&&(this.Pp=!1),this.Pp=!1}catch(x){this.Pp=!0}}if(this.Pp)return}l=0;n<d.width&&(l=r.offsetX+(d.width*r.x-n*r.x));m=0;p<d.height&&
(m=r.offsetY+(d.height*r.y-p*r.y));switch(this.gu){case so:a.translate(Math.min(d.width,n),0);a.scale(-1,1);break;case ro:a.translate(0,Math.min(d.height,p));a.scale(1,-1);break;case to:a.translate(Math.min(d.width,n),Math.min(d.height,p)),a.scale(-1,-1)}if(b.Dj("pictureRatioOptimization")&&!b.Cz&&void 0!==s&&null!==q&&1!==q.Hq){a.save();s=q.Hq;try{a.drawImage(q.source,e/s,g/s,Math.min(q.source.width,k/s),Math.min(q.source.height,h/s),l,m,Math.min(d.width,n),Math.min(d.height,p))}catch(y){u&&this.Yo&&
z.trace(y.toString()),this.Yo=!1}a.restore()}else try{a.drawImage(c,e,g,k,h,l,m,Math.min(d.width,n),Math.min(d.height,p))}catch(B){u&&this.Yo&&z.trace(B.toString()),this.Yo=!1}switch(this.gu){case so:a.scale(-1,1);a.translate(-Math.min(d.width,n),0);break;case ro:a.scale(1,-1);a.translate(0,-Math.min(d.height,p));break;case to:a.scale(-1,-1),a.translate(-Math.min(d.width,n),-Math.min(d.height,p))}}}}};z.w(Cl,{Ja:"naturalBounds"},function(){return this.Tc});
Cl.prototype.zq=function(a,b,c,d){var e=this.Da,g=Eo(this,!0),h=this.Ze,k=this.Bz;if(k||!this.Hz&&h&&h.complete)this.Hz=!0;null===h&&(isFinite(a)||(a=0),isFinite(b)||(b=0));isFinite(e.width)||g===gf||g===qo?(isFinite(a)||(a=this.Qj.F()?this.Qj.width:k?+h.width:h.naturalWidth),c=0):null!==h&&!1!==this.Hz&&(a=this.Qj.F()?this.Qj.width:k?+h.width:h.naturalWidth);isFinite(e.height)||g===gf||g===po?(isFinite(b)||(b=this.Qj.F()?this.Qj.height:k?+h.height:h.naturalHeight),d=0):null!==h&&!1!==this.Hz&&(b=
this.Qj.F()?this.Qj.height:k?+h.height:h.naturalHeight);isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);e=this.mf;g=this.ig;c=Math.max(c,g.width);d=Math.max(d,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);null===h||h.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0));Ab(this.Tc,a,b);Bo(this,0,0,a,b)};Cl.prototype.wj=function(a,b,c,d){Go(this,a,b,c,d)};function Sq(a){this.Wp=[new Uq(a,1)]}
function Tq(a,b,c,d){var e=new ma(null),g=e.Mk,h=1/b;e.width=c/b;e.height=d/b;b=new Uq(e.Fd,b);c=a.Wp[a.Wp.length-1];g.setTransform(h*c.Hq,0,0,h*c.Hq,0,0);g.drawImage(c.source,0,0);a.Wp.push(b)}function Uq(a,b){this.source=a;this.Hq=b}function Ha(){this.q=new Ve;this.dc=null}f=Ha.prototype;f.reset=function(){this.q=new Ve;this.dc=null};
function S(a,b,c,d,e,g){null===a.q&&z.k("StreamGeometryContext has been closed");void 0!==e&&!0===e?(null===a.dc&&z.k("Need to call beginFigure first"),d=new Wf(Mf),d.G=b,d.H=c,a.dc.Db.add(d)):(a.dc=new Xe,a.dc.na=b,a.dc.la=c,a.dc.tu=d,a.q.mc.add(a.dc));void 0!==g&&(a.dc.jp=g)}function V(a){null===a.q&&z.k("StreamGeometryContext has been closed");null===a.dc&&z.k("Need to call beginFigure first");var b=a.dc.Db.length;0<b&&a.dc.Db.fa(b-1).close()}
function rf(a){null===a.q&&z.k("StreamGeometryContext has been closed");null===a.dc&&z.k("Need to call beginFigure first");0<a.dc.Db.length&&(a.dc.tu=!0)}f.hb=function(a){null===this.q&&z.k("StreamGeometryContext has been closed");null===this.dc&&z.k("Need to call beginFigure first");this.dc.Vk=a};f.moveTo=function(a,b,c){void 0===c&&(c=!1);null===this.q&&z.k("StreamGeometryContext has been closed");null===this.dc&&z.k("Need to call beginFigure first");var d=new Wf(Mf);d.G=a;d.H=b;c&&d.close();this.dc.Db.add(d)};
f.lineTo=function(a,b,c){void 0===c&&(c=!1);null===this.q&&z.k("StreamGeometryContext has been closed");null===this.dc&&z.k("Need to call beginFigure first");var d=new Wf(mf);d.G=a;d.H=b;c&&d.close();this.dc.Db.add(d)};function U(a,b,c,d,e,g,h,k){void 0===k&&(k=!1);null===a.q&&z.k("StreamGeometryContext has been closed");null===a.dc&&z.k("Need to call beginFigure first");var l=new Wf(Nf);l.Dc=b;l.Zc=c;l.Rh=d;l.Sh=e;l.G=g;l.H=h;k&&l.close();a.dc.Db.add(l)}
function pf(a,b,c,d,e){var g;void 0===g&&(g=!1);null===a.q&&z.k("StreamGeometryContext has been closed");null===a.dc&&z.k("Need to call beginFigure first");var h=new Wf(Of);h.Dc=b;h.Zc=c;h.G=d;h.H=e;g&&h.close();a.dc.Db.add(h)}f.arcTo=function(a,b,c,d,e,g,h){void 0===g&&(g=0);void 0===h&&(h=!1);null===this.q&&z.k("StreamGeometryContext has been closed");null===this.dc&&z.k("Need to call beginFigure first");var k=new Wf(Pf);k.Me=a;k.Bf=b;k.oa=c;k.xa=d;k.radiusX=e;k.radiusY=0!==g?g:e;h&&k.close();this.dc.Db.add(k)};
function qf(a,b,c,d,e,g,h,k){var l;void 0===l&&(l=!1);null===a.q&&z.k("StreamGeometryContext has been closed");null===a.dc&&z.k("Need to call beginFigure first");b=new Wf(Qf,h,k,b,c,d,e,g);l&&b.close();a.dc.Db.add(b)}function Vq(a){a=Wq(a);var b=z.tb();b[0]=a[0];for(var c=1,d=1;d<a.length;)b[c]=a[d],b[c+1]=a[d],b[c+2]=a[d+1],d+=2,c+=3;z.Ba(a);return b}
function Wq(a){var b=Xq(a),c=z.tb(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var g=0;g<e;g++){var h=b[g],k=b[g+1],l=b[(d+g-1)%e],m=b[(d+g+a)%e];c[2*g]=h;c[2*g+1]=Ne(h.x,h.y,l.x,l.y,k.x,k.y,m.x,m.y,new M)}c[c.length]=c[0];z.Ba(b);return c}function Xq(a){for(var b=z.tb(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new M(.5+.5*Math.cos(d),.5+.5*Math.sin(d));b.push(b[0]);return b}
var iq={None:"Rectangle",Rectangle:function(a,b,c){a=new Ve;a.type=jf;a.na=0;a.la=0;a.G=b;a.H=c;return a},Square:function(a,b,c){a=new Ve;a.le=Vj;a.type=jf;a.na=0;a.la=0;a.G=Math.min(b,c);a.H=Math.min(b,c);return a},Ellipse:function(a,b,c){a=new Ve;a.type=kf;a.na=0;a.la=0;a.G=b;a.H=c;a.C=ke;a.D=le;return a},Circle:function(a,b,c){a=new Ve;a.le=Vj;a.type=kf;a.na=0;a.la=0;a.G=Math.min(b,c);a.H=Math.min(b,c);a.C=ke;a.D=le;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new Ve;var d=new Xe,
e=new Wf;e.G=b;e.H=.5*c;d.Db.add(e);b=new Wf;b.G=0;b.H=c;d.Db.add(b.close());a.mc.add(d);a.C=new R(0,.25);a.D=new R(.5,.75);return a},TriangleDown:function(a,b,c){a=new Ve;var d=new Xe,e=new Wf;e.G=b;e.H=0;d.Db.add(e);e=new Wf;e.G=.5*b;e.H=c;d.Db.add(e.close());a.mc.add(d);a.C=new R(.25,0);a.D=new R(.75,.5);return a},TriangleLeft:function(a,b,c){a=new Ve;var d=new Xe;d.na=b;d.la=c;var e=new Wf;e.G=0;e.H=.5*c;d.Db.add(e);c=new Wf;c.G=b;c.H=0;d.Db.add(c.close());a.mc.add(d);a.C=new R(.5,.25);a.D=new R(1,
.75);return a},TriangleUp:function(a,b,c){a=new Ve;var d=new Xe;d.na=b;d.la=c;var e=new Wf;e.G=0;e.H=c;d.Db.add(e);c=new Wf;c.G=.5*b;c.H=0;d.Db.add(c.close());a.mc.add(d);a.C=new R(.25,.5);a.D=new R(.75,1);return a},Line1:function(a,b,c){a=new Ve;a.type=hf;a.na=0;a.la=0;a.G=b;a.H=c;return a},Line2:function(a,b,c){a=new Ve;a.type=hf;a.na=b;a.la=0;a.G=0;a.H=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new Ve;a.type=hf;a.na=0;a.la=c/2;a.G=b;a.H=c/2;return a},LineV:function(a,b,c){a=new Ve;a.type=
hf;a.na=b/2;a.la=0;a.G=b/2;a.H=c;return a},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(a,b,c){a=z.v();S(a,0,0,!1);U(a,Cd*b,0,1*b,(1-Cd)*c,b,c);b=a.q;z.u(a);return b},Curve2:function(a,b,c){a=z.v();S(a,0,0,!1);U(a,0,Cd*c,(1-Cd)*b,c,b,c);b=a.q;z.u(a);return b},Curve3:function(a,b,c){a=z.v();S(a,1*b,0,!1);U(a,1*b,Cd*c,Cd*b,1*c,0,1*c);b=a.q;z.u(a);return b},Curve4:function(a,b,c){a=z.v();S(a,1*b,0,!1);U(a,(1-Cd)*b,0,0,(1-Cd)*c,0,1*c);b=a.q;z.u(a);return b},Alternative:"Triangle",Merge:"Triangle",
Triangle:function(a,b,c){a=z.v();S(a,.5*b,0*c,!0);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,!0);b=a.q;b.C=new R(.25,.5);b.D=new R(.75,1);z.u(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=z.v();S(a,.5*b,0,!0);a.lineTo(0,.5*c);a.lineTo(.5*b,1*c);a.lineTo(1*b,.5*c,!0);b=a.q;b.C=new R(.25,.25);b.D=new R(.75,.75);z.u(a);return b},Pentagon:function(a,b,c){var d=Xq(5);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.2,.22);b.D=new R(.8,
.9);z.u(a);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=Xq(6);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.07,.25);b.D=new R(.93,.75);z.u(a);return b},Heptagon:function(a,b,c){var d=Xq(7);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.2,.15);b.D=new R(.8,.85);z.u(a);return b},Octagon:function(a,b,c){var d=Xq(8);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);
for(var e=1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.15,.15);b.D=new R(.85,.85);z.u(a);return b},Nonagon:function(a,b,c){var d=Xq(9);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.17,.13);b.D=new R(.82,.82);z.u(a);return b},Decagon:function(a,b,c){var d=Xq(10);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.16,.16);b.D=new R(.84,.84);z.u(a);return b},
Dodecagon:function(a,b,c){var d=Xq(12);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.16,.16);b.D=new R(.84,.84);z.u(a);return b},FivePointedStar:function(a,b,c){var d=Wq(5);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.312,.383);b.D=new R(.693,.765);z.u(a);return b},SixPointedStar:function(a,b,c){var d=Wq(6);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*
b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.17,.251);b.D=new R(.833,.755);z.u(a);return b},SevenPointedStar:function(a,b,c){var d=Wq(7);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.363,.361);b.D=new R(.641,.709);z.u(a);return b},EightPointedStar:function(a,b,c){var d=Wq(8);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.252,.255);b.D=new R(.75,.75);z.u(a);return b},NinePointedStar:function(a,
b,c){var d=Wq(9);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.355,.361);b.D=new R(.645,.651);z.u(a);return b},TenPointedStar:function(a,b,c){var d=Wq(10);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.281,.261);b.D=new R(.723,.748);z.u(a);return b},FivePointedBurst:function(a,b,c){var d=Vq(5);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)U(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.312,.383);b.D=new R(.693,.765);z.u(a);return b},SixPointedBurst:function(a,b,c){var d=Vq(6);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)U(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.17,.251);b.D=new R(.833,.755);z.u(a);return b},SevenPointedBurst:function(a,b,c){var d=Vq(7);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)U(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.363,.361);b.D=new R(.641,.709);z.u(a);return b},EightPointedBurst:function(a,b,c){var d=Vq(8);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)U(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.252,.255);b.D=new R(.75,.75);z.u(a);return b},NinePointedBurst:function(a,b,c){var d=Vq(9);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)U(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.355,.361);b.D=new R(.645,.651);z.u(a);return b},TenPointedBurst:function(a,b,c){var d=Vq(10);a=z.v();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)U(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.Ba(d);V(a);b=a.q;b.C=new R(.281,.261);b.D=new R(.723,.748);z.u(a);return b},Cloud:function(a,b,c){a=z.v();S(a,.08034461*b,.1944299*c,!0);U(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*
b,.05349299*c);U(a,.2450511*b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c);U(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c);U(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c);U(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c);U(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c);U(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c);U(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*
c);U(a,.7431877*b,1.009325*c,.5624123*b,1.021761*c,.5101666*b,.9310455*c);U(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c);U(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c);U(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c);U(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c);U(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c);V(a);b=a.q;b.C=new R(.1,.1);b.D=new R(.9,.9);z.u(a);return b},
Gate:"Crescent",Crescent:function(a,b,c){a=z.v();S(a,0,0,!0);U(a,1*b,0,1*b,1*c,0,1*c);U(a,.5*b,.75*c,.5*b,.25*c,0,0);V(a);b=a.q;b.C=new R(.511,.19);b.D=new R(.776,.76);z.u(a);return b},FramedRectangle:function(a,b,c){var d=z.v(),e=a?a.Qc:NaN;a=a?a.Mu:NaN;isNaN(e)&&(e=.1);isNaN(a)&&(a=.1);S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,!0);S(d,e*b,a*c,!1,!0);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,!0);b=d.q;b.C=new R(e,a);b.D=new R(1-e,1-a);z.u(d);return b},
Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=z.v();S(a,0,0,!0);U(a,Cd*b,0,1*b,(.5-Cd/2)*c,1*b,.5*c);U(a,1*b,(.5+Cd/2)*c,Cd*b,1*c,0,1*c);V(a);b=a.q;b.C=new R(0,.2);b.D=new R(.75,.8);z.u(a);return b},Heart:function(a,b,c){a=z.v();S(a,.5*b,1*c,!0);U(a,.1*b,.8*c,0,.5*c,0*b,.3*c);U(a,0*b,0,.45*b,0,.5*b,.3*c);U(a,.55*b,0,1*b,0,1*b,.3*c);U(a,b,.5*c,.9*b,.8*c,.5*b,1*c);V(a);b=a.q;b.C=new R(.15,.29);b.D=new R(.86,.68);z.u(a);return b},Spade:function(a,b,c){a=z.v();S(a,.5*b,0,!0);a.lineTo(.51*b,.01*c);
U(a,.6*b,.2*c,b,.25*c,b,.5*c);U(a,b,.8*c,.6*b,.8*c,.55*b,.7*c);U(a,.5*b,.75*c,.55*b,.95*c,.75*b,c);a.lineTo(.25*b,c);U(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c);U(a,.4*b,.8*c,0,.8*c,0,.5*c);U(a,0,.25*c,.4*b,.2*c,.49*b,.01*c);V(a);b=a.q;b.C=new R(.19,.26);b.D=new R(.8,.68);z.u(a);return b},Club:function(a,b,c){a=z.v();S(a,.4*b,.6*c,!0);U(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c);a.lineTo(.85*b,c);U(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,g=0,h=4*(Math.SQRT2-1)/3*d;U(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*
b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);U(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);U(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e+.05)*b,(.5-h+g-.02)*c,.65*b,.36771243*c);d=.2;e=0;g=-.3;h=4*(Math.SQRT2-1)/3*d;U(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);U(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);U(a,(.5-d+
e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,.35*b,.36771243*c);d=.2;e=-.3;g=0;h=4*(Math.SQRT2-1)/3*d;U(a,(.5+d+e-.05)*b,(.5-h+g-.02)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);U(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);U(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,.4*b,.6*c);V(a);b=a.q;b.C=new R(.06,.39);b.D=new R(.93,.58);z.u(a);return b},Ring:function(a,b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;S(a,b,.5*
c,!0);U(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);U(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);U(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);U(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;S(a,.5*b,.1*c,!0,!0);U(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);U(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);U(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);U(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);b=a.q;b.C=new R(.146,.146);b.D=new R(.853,.853);b.le=Vj;z.u(a);return b},YinYang:function(a,b,c){var d=.5;a=z.v();d=.5;S(a,.5*b,0,!0);a.arcTo(270,
180,.5*b,.5*b,.5*b);U(a,1*b,d*c,0,d*c,d*b,0,!0);var d=.1,e=.25;S(a,(.5+d)*b,e*c,!0,!0);a.arcTo(0,-360,.5*b,c*e,d*b);V(a);S(a,.5*b,0,!1);a.arcTo(270,-180,.5*b,.5*b,.5*b);a.hb(!1);e=.75;S(a,(.5+d)*b,e*c,!0);a.arcTo(0,360,.5*b,c*e,d*b);V(a);b=a.q;b.le=Vj;z.u(a);return b},Peace:function(a,b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;S(a,b,.5*c,!0);U(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);U(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);U(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);U(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;
S(a,.5*b,.1*c,!0,!0);U(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);U(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);U(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);U(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);var d=.07,e=0,g=-.707*.11,h=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+g)*c,!0);U(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);U(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);U(a,(.5+h+e)*b,(.5+d+g)*
c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);d=.07;e=-.707*.11;g=.707*.11;h=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+g)*c,!0);U(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);U(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);U(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);d=.07;e=.707*.11;g=.707*.11;h=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+g)*c,!0);U(a,(.5+d+e)*b,(.5-h+
g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);U(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);U(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);b=a.q;b.C=new R(.146,.146);b.D=new R(.853,.853);b.le=Vj;z.u(a);return b},NotAllowed:function(a,b,c){var d=.5*Cd,e=.5;a=z.v();S(a,.5*b,(.5-e)*c,!0);U(a,(.5-d)*b,(.5-e)*c,(.5-e)*b,(.5-d)*c,(.5-e)*b,.5*c);U(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,
(.5+e)*c);U(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+e)*b,.5*c);U(a,(.5+e)*b,(.5-d)*c,(.5+d)*b,(.5-e)*c,.5*b,(.5-e)*c);var e=.4,d=.4*Cd,g=z.P(),h=z.P(),k=z.P(),l=z.P();ze(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.42,g,h,k,l,l);var m=z.P(),n=z.P(),p=z.P();ze(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.58,l,l,p,m,n);var q=z.P(),r=z.P(),s=z.P();ze(.5,.5+e,.5-d,.5+e,.5-e,.5+d,.5-e,.5,.42,q,r,s,l,l);var v=z.P(),t=z.P(),x=z.P();ze(.5,.5+e,.5-d,.5+e,.5-e,.5+d,.5-e,.5,.58,l,l,x,v,t);S(a,x.x*b,x.y*c,!0,!0);U(a,v.x*b,
v.y*c,t.x*b,t.y*c,(.5-e)*b,.5*c);U(a,(.5-e)*b,(.5-d)*c,(.5-d)*b,(.5-e)*c,.5*b,(.5-e)*c);U(a,g.x*b,g.y*c,h.x*b,h.y*c,k.x*b,k.y*c);a.lineTo(x.x*b,x.y*c);V(a);S(a,s.x*b,s.y*c,!0,!0);a.lineTo(p.x*b,p.y*c);U(a,m.x*b,m.y*c,n.x*b,n.y*c,(.5+e)*b,.5*c);U(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);U(a,q.x*b,q.y*c,r.x*b,r.y*c,s.x*b,s.y*c);V(a);z.A(g);z.A(h);z.A(k);z.A(l);z.A(m);z.A(n);z.A(p);z.A(q);z.A(r);z.A(s);z.A(v);z.A(t);z.A(x);b=a.q;z.u(a);b.le=Vj;return b},Fragile:function(a,b,c){a=z.v();S(a,
0,0,!0);a.lineTo(.25*b,0);a.lineTo(.2*b,.15*c);a.lineTo(.3*b,.25*c);a.lineTo(.29*b,.33*c);a.lineTo(.35*b,.25*c);a.lineTo(.3*b,.15*c);a.lineTo(.4*b,0);a.lineTo(1*b,0);U(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c);a.lineTo(.55*b,.9*c);a.lineTo(.7*b,.9*c);a.lineTo(.7*b,1*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.9*c);a.lineTo(.45*b,.9*c);a.lineTo(.45*b,.5*c);U(a,.25*b,.5*c,0,.25*c,0,0);V(a);b=a.q;b.C=new R(.25,0);b.D=new R(.75,.4);z.u(a);return b},HourGlass:function(a,b,c){a=z.v();S(a,.65*b,.5*c,!0);a.lineTo(1*b,
1*c);a.lineTo(0,1*c);a.lineTo(.35*b,.5*c);a.lineTo(0,0);a.lineTo(1*b,0);V(a);b=a.q;z.u(a);return b},Lightning:function(a,b,c){a=z.v();S(a,0*b,.55*c,!0);a.lineTo(.75*b,0);a.lineTo(.25*b,.45*c);a.lineTo(.9*b,.48*c);a.lineTo(.4*b,1*c);a.lineTo(.65*b,.55*c);V(a);b=a.q;z.u(a);return b},Parallelogram1:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.1);var d=z.v();S(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);V(d);b=d.q;b.C=new R(a,0);b.D=new R(1-a,1);z.u(d);return b},Input:"Output",Output:function(a,
b,c){a=z.v();S(a,0,1*c,!0);a.lineTo(.1*b,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);V(a);b=a.q;b.C=new R(.1,0);b.D=new R(.9,1);z.u(a);return b},Parallelogram2:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.25);var d=z.v();S(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);V(d);b=d.q;b.C=new R(a,0);b.D=new R(1-a,1);z.u(d);return b},ThickCross:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.25);var d=z.v();S(d,(.5-a/2)*b,0,!0);d.lineTo((.5+a/2)*b,0);d.lineTo((.5+a/2)*b,(.5-a/2)*c);d.lineTo(1*b,(.5-
a/2)*c);d.lineTo(1*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,1*c);d.lineTo((.5-a/2)*b,1*c);d.lineTo((.5-a/2)*b,(.5+a/2)*c);d.lineTo(0,(.5+a/2)*c);d.lineTo(0,(.5-a/2)*c);d.lineTo((.5-a/2)*b,(.5-a/2)*c);V(d);b=d.q;b.C=new R(.5-a/2,.5-a/2);b.D=new R(.5+a/2,.5+a/2);z.u(d);return b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=z.v();S(d,.3*b,0,!0);d.lineTo(.5*b,.2*c);d.lineTo(.7*b,0);d.lineTo(1*b,.3*c);d.lineTo(.8*b,.5*c);d.lineTo(1*b,.7*c);d.lineTo(.7*b,1*c);d.lineTo(.5*b,.8*
c);d.lineTo(.3*b,1*c);d.lineTo(0,.7*c);d.lineTo(.2*b,.5*c);d.lineTo(0,.3*c);V(d);b=d.q;b.C=new R(.5-a,.5-a);b.D=new R(.5+a,.5+a);z.u(d);return b},ThinCross:function(a,b,c){var d=a?a.Qc:NaN;isNaN(d)&&(d=.1);a=z.v();S(a,(.5-d/2)*b,0,!0);a.lineTo((.5+d/2)*b,0);a.lineTo((.5+d/2)*b,(.5-d/2)*c);a.lineTo(1*b,(.5-d/2)*c);a.lineTo(1*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,1*c);a.lineTo((.5-d/2)*b,1*c);a.lineTo((.5-d/2)*b,(.5+d/2)*c);a.lineTo(0,(.5+d/2)*c);a.lineTo(0,(.5-d/2)*c);a.lineTo((.5-
d/2)*b,(.5-d/2)*c);V(a);b=a.q;z.u(a);return b},ThinX:function(a,b,c){a=z.v();S(a,.1*b,0,!0);a.lineTo(.5*b,.4*c);a.lineTo(.9*b,0);a.lineTo(1*b,.1*c);a.lineTo(.6*b,.5*c);a.lineTo(1*b,.9*c);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.6*c);a.lineTo(.1*b,1*c);a.lineTo(0,.9*c);a.lineTo(.4*b,.5*c);a.lineTo(0,.1*c);V(a);b=a.q;z.u(a);return b},RightTriangle:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);V(a);b=a.q;b.C=new R(0,.5);b.D=new R(.5,1);z.u(a);return b},RoundedIBeam:function(a,b,c){a=
z.v();S(a,0,0,!0);a.lineTo(1*b,0);U(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c);a.lineTo(0,1*c);U(a,.5*b,.75*c,.5*b,.25*c,0,0);V(a);b=a.q;z.u(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.Qc:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*Cd;var e=z.v();S(e,d,0,!0);e.lineTo(b-d,0);U(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);U(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);U(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);U(e,0,a,a,0,d,0);V(e);b=e.q;1<a?(b.C=new R(0,0,a,a),b.D=new R(1,1,-a,-a)):(b.C=hc,b.D=qc);z.u(e);return b},
Border:function(a,b,c){var d=a?a.Qc:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=z.v();S(a,d,0,!0);a.lineTo(b-d,0);U(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);U(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);U(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);U(a,0,0,0,0,d,0);V(a);b=a.q;b.C=hc;b.D=qc;z.u(a);return b},SquareIBeam:function(a,b,c){var d=a?a.Qc:NaN;isNaN(d)&&(d=.2);a=z.v();S(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,d*c);a.lineTo((.5+d/2)*b,d*c);a.lineTo((.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*
c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((.5-d/2)*b,(1-d)*c);a.lineTo((.5-d/2)*b,d*c);a.lineTo(0,d*c);V(a);b=a.q;z.u(a);return b},Trapezoid:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.2);var d=z.v();S(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);V(d);b=d.q;b.C=new R(a,0);b.D=new R(1-a,1);z.u(d);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.Qc:NaN;isNaN(d)&&(d=0);a=z.v();S(a,d,0,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*
b,1*c);V(a);b=a.q;b.C=new R(.1,0);b.D=new R(.9,1);z.u(a);return b},GenderMale:function(a,b,c){a=z.v();var d=.4*Cd,e=.4,g=z.P(),h=z.P(),k=z.P(),l=z.P();S(a,(.5-e)*b,.5*c,!0);U(a,(.5-e)*b,(.5-d)*c,(.5-d)*b,(.5-e)*c,.5*b,(.5-e)*c);ze(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.44,k,l,h,g,g);U(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);var m=z.Fb(h.x,h.y);ze(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.56,g,g,h,k,l);var n=z.Fb(h.x,h.y);a.lineTo((.1*m.x+.855)*b,.1*m.y*c);a.lineTo(.85*b,.1*m.y*c);a.lineTo(.85*b,0);a.lineTo(1*
b,0);a.lineTo(1*b,.15*c);a.lineTo((.1*n.x+.9)*b,.15*c);a.lineTo((.1*n.x+.9)*b,(.1*n.y+.05*.9)*c);a.lineTo(n.x*b,n.y*c);U(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+e)*b,.5*c);U(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);U(a,(.5-d)*b,(.5+e)*c,(.5-e)*b,(.5+d)*c,(.5-e)*b,.5*c);e=.35;d=.35*Cd;S(a,.5*b,(.5-e)*c,!0,!0);U(a,(.5-d)*b,(.5-e)*c,(.5-e)*b,(.5-d)*c,(.5-e)*b,.5*c);U(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,(.5+e)*c);U(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+e)*b,.5*c);U(a,(.5+e)*b,(.5-d)*c,(.5+
d)*b,(.5-e)*c,.5*b,(.5-e)*c);S(a,(.5-e)*b,.5*c,!0);z.A(g);z.A(h);z.A(k);z.A(l);z.A(m);z.A(n);b=a.q;b.C=new R(.202,.257);b.D=new R(.692,.839);b.le=Vj;z.u(a);return b},GenderFemale:function(a,b,c){a=z.v();var d=.375,e=0,g=-.125,h=4*(Math.SQRT2-1)/3*d;S(a,(.525+e)*b,(.5+d+g)*c,!0);U(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);U(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);U(a,(.5-d+e)*b,
(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.475+e)*b,(.5+d+g)*c);a.lineTo(.475*b,.85*c);a.lineTo(.425*b,.85*c);a.lineTo(.425*b,.9*c);a.lineTo(.475*b,.9*c);a.lineTo(.475*b,1*c);a.lineTo(.525*b,1*c);a.lineTo(.525*b,.9*c);a.lineTo(.575*b,.9*c);a.lineTo(.575*b,.85*c);a.lineTo(.525*b,.85*c);V(a);d=.325;e=0;g=-.125;h=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+g)*c,!0,!0);U(a,(.5+d+e)*b,(.5+h+g)*c,(.5+h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);U(a,(.5-h+e)*b,(.5+d+g)*c,(.5-d+e)*b,(.5+h+g)*c,(.5-d+e)*b,(.5+g)*c);U(a,(.5-
d+e)*b,(.5-h+g)*c,(.5-h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);U(a,(.5+h+e)*b,(.5-d+g)*c,(.5+d+e)*b,(.5-h+g)*c,(.5+d+e)*b,(.5+g)*c);S(a,(.525+e)*b,(.5+d+g)*c,!0);b=a.q;b.C=new R(.232,.136);b.D=new R(.782,.611);b.le=Vj;z.u(a);return b},PlusLine:function(a,b,c){a=z.v();S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.q;z.u(a);return b},XLine:function(a,b,c){a=z.v();S(a,0,1*c,!1);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},AsteriskLine:function(a,b,c){a=
z.v();var d=.2/Math.SQRT2;S(a,d*b,(1-d)*c,!1);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,.5*c);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0*c);a.lineTo(.5*b,1*c);b=a.q;z.u(a);return b},CircleLine:function(a,b,c){var d=.5*Cd;a=z.v();S(a,1*b,.5*c,!1);U(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);U(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.q;b.C=new R(.146,.146);b.D=new R(.853,.853);b.le=Vj;z.u(a);return b},Pie:function(a,
b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;S(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0);U(a,.7*b,0*c,.5*b,0*c,.5*b,0*c);U(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);U(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c);U(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);a.lineTo(.5*b,.5*c);V(a);b=a.q;z.u(a);return b},PiePiece:function(a,b,c){var d=Cd/Math.SQRT2*.5,e=Math.SQRT2/2,g=1-Math.SQRT2/2;a=z.v();S(a,b,c,!0);U(a,b,(1-d)*c,(e+d)*b,(g+d)*c,e*b,g*c);a.lineTo(0,c);V(a);b=a.q;z.u(a);return b},StopSign:function(a,
b,c){a=1/(Math.SQRT2+2);var d=z.v();S(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,(1-a)*c);d.lineTo(0,a*c);V(d);b=d.q;b.C=new R(a/2,a/2);b.D=new R(1-a/2,1-a/2);z.u(d);return b},LogicImplies:function(a,b,c){var d=a?a.Qc:NaN;isNaN(d)&&(d=.2);a=z.v();S(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);b=a.q;b.C=hc;b.D=new R(.8,.5);z.u(a);return b},LogicIff:function(a,b,c){var d=a?a.Qc:
NaN;isNaN(d)&&(d=.2);a=z.v();S(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(d*b,0);a.lineTo(0,.5*c);a.lineTo(d*b,c);b=a.q;b.C=new R(.2,0);b.D=new R(.8,.5);z.u(a);return b},LogicNot:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},LogicAnd:function(a,b,c){a=z.v();S(a,0,1*c,!1);a.lineTo(.5*b,0);a.lineTo(1*b,1*c);b=a.q;b.C=new R(.25,.5);b.D=new R(.75,1);z.u(a);return b},LogicOr:function(a,b,c){a=z.v();
S(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);b=a.q;b.C=new R(.219,0);b.D=new R(.78,.409);z.u(a);return b},LogicXor:function(a,b,c){a=z.v();S(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);var d=.5*Cd;U(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);U(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.q;b.le=Vj;z.u(a);return b},LogicTruth:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);
b=a.q;z.u(a);return b},LogicFalsity:function(a,b,c){a=z.v();S(a,0,1*c,!1);a.lineTo(1*b,1*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);b=a.q;z.u(a);return b},LogicThereExists:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,.5*c);a.lineTo(0,.5*c);a.moveTo(1*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.q;z.u(a);return b},LogicForAll:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);a.moveTo(.25*b,.5*c);a.lineTo(.75*b,.5*c);b=a.q;b.C=new R(.25,0);b.D=new R(.75,.5);z.u(a);
return b},LogicIsDefinedAs:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(b,0);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.q;b.C=new R(.01,.01);b.D=new R(.99,.49);z.u(a);return b},LogicIntersect:function(a,b,c){var d=.5*Cd;a=z.v();S(a,0,1*c,!1);a.lineTo(0,.5*c);U(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);a.lineTo(1*b,1*c);b=a.q;b.C=new R(0,.5);b.D=qc;z.u(a);return b},LogicUnion:function(a,b,c){var d=.5*Cd;a=z.v();S(a,1*b,0,!1);a.lineTo(1*b,.5*c);U(a,
1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);a.lineTo(0,0);b=a.q;b.C=hc;b.D=new R(1,.5);z.u(a);return b},Arrow:function(a,b,c){var d=a?a.Qc:NaN,e=a?a.Mu:NaN;isNaN(d)&&(d=.3);isNaN(e)&&(e=.3);a=z.v();S(a,0,(.5-e/2)*c,!0);a.lineTo((1-d)*b,(.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(.5+e/2)*c);a.lineTo(0,(.5+e/2)*c);V(a);b=a.q;b.C=new R(0,.5-e/2);d=Ne(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,z.P());b.D=new R(d.x,d.y);z.A(d);z.u(a);return b},
ISOProcess:"Chevron",Chevron:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);V(a);b=a.q;z.u(a);return b},DoubleArrow:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(.3*b,.214*c);a.lineTo(.3*b,0);a.lineTo(1*b,.5*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.786*c);a.lineTo(0,1*c);V(a);S(a,.3*b,.214*c,!1);a.lineTo(.3*b,.786*c);a.hb(!1);b=a.q;z.u(a);return b},DoubleEndArrow:function(a,b,c){a=z.v();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);
a.lineTo(.7*b,.7*c);a.lineTo(.3*b,.7*c);a.lineTo(.3*b,1*c);a.lineTo(0,.5*c);a.lineTo(.3*b,0);a.lineTo(.3*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);V(a);b=a.q;c=Ne(0,.5,.3,0,0,.3,.3,.3,z.P());b.C=new R(c.x,c.y);c=Ne(.7,1,1,.5,.7,.7,1,.7,c);b.D=new R(c.x,c.y);z.A(c);z.u(a);return b},IBeamArrow:function(a,b,c){a=z.v();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.2*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.2*b,0);a.lineTo(.2*b,.3*c);a.lineTo(.7*b,.3*c);
a.lineTo(.7*b,0);V(a);b=a.q;b.C=new R(0,.3);c=Ne(.7,1,1,.5,.7,.7,1,.7,z.P());b.D=new R(c.x,c.y);z.A(c);z.u(a);return b},Pointer:function(a,b,c){a=z.v();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(.2*b,.5*c);a.lineTo(0,0);V(a);b=a.q;b.C=new R(.2,.35);c=Ne(.2,.65,1,.65,0,1,1,.5,z.P());b.D=new R(c.x,c.y);z.A(c);z.u(a);return b},RoundedPointer:function(a,b,c){a=z.v();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);U(a,.5*b,.75*c,.5*b,.25*c,0,0);V(a);b=a.q;b.C=new R(.4,.35);c=Ne(.2,.65,1,.65,0,1,1,.5,z.P());b.D=new R(c.x,
c.y);z.A(c);z.u(a);return b},SplitEndArrow:function(a,b,c){a=z.v();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(0,.7*c);a.lineTo(.2*b,.5*c);a.lineTo(0,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);V(a);b=a.q;b.C=new R(.2,.3);c=Ne(.7,1,1,.5,.7,.7,1,.7,z.P());b.D=new R(c.x,c.y);z.A(c);z.u(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=z.v();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.7*b,0);V(a);b=a.q;b.C=hc;b.D=new R(.7,1);z.u(a);
return b},Cone1:function(a,b,c){var d=.5*Cd,e=.1*Cd;a=z.v();S(a,0,.9*c,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.9*c);U(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);V(a);b=a.q;b.C=new R(.25,.5);b.D=new R(.75,.97);z.u(a);return b},Cone2:function(a,b,c){a=z.v();S(a,0,.9*c,!0);U(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c);a.lineTo(.5*b,0);a.lineTo(0,.9*c);V(a);S(a,0,.9*c,!1);U(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c);a.hb(!1);b=a.q;b.C=new R(.25,.5);b.D=new R(.75,.82);z.u(a);return b},
Cube1:function(a,b,c){a=z.v();S(a,.5*b,1*c,!0);a.lineTo(1*b,.85*c);a.lineTo(1*b,.15*c);a.lineTo(.5*b,0*c);a.lineTo(0*b,.15*c);a.lineTo(0*b,.85*c);V(a);S(a,.5*b,1*c,!1);a.lineTo(.5*b,.3*c);a.lineTo(0,.15*c);a.moveTo(.5*b,.3*c);a.lineTo(1*b,.15*c);a.hb(!1);b=a.q;b.C=new R(0,.3);b.D=new R(.5,.85);z.u(a);return b},Cube2:function(a,b,c){a=z.v();S(a,0,.3*c,!0);a.lineTo(0*b,1*c);a.lineTo(.7*b,c);a.lineTo(1*b,.7*c);a.lineTo(1*b,0*c);a.lineTo(.3*b,0*c);V(a);S(a,0,.3*c,!1);a.lineTo(.7*b,.3*c);a.lineTo(1*b,
0*c);a.moveTo(.7*b,.3*c);a.lineTo(.7*b,1*c);a.hb(!1);b=a.q;b.C=new R(0,.3);b.D=new R(.7,1);z.u(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=.5*Cd,e=.1*Cd;a=z.v();S(a,0,.1*c,!0);U(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);a.lineTo(b,.9*c);U(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);S(a,0,.1*c,!1);U(a,0,(.1+e)*c,(.5-d)*b,.2*c,.5*b,.2*c);U(a,(.5+d)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c);a.hb(!1);b=a.q;b.C=new R(0,
.2);b.D=new R(1,.9);z.u(a);return b},Cylinder2:function(a,b,c){var d=.5*Cd,e=.1*Cd;a=z.v();S(a,0,.9*c,!0);a.lineTo(0,.1*c);U(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);a.lineTo(1*b,.9*c);U(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);S(a,0,.9*c,!1);U(a,0,(.9-e)*c,(.5-d)*b,.8*c,.5*b,.8*c);U(a,(.5+d)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c);a.hb(!1);b=a.q;b.C=new R(0,.1);b.D=new R(1,.8);z.u(a);return b},Cylinder3:function(a,b,c){var d=.1*Cd,e=.5*Cd;a=z.v();
S(a,.1*b,0,!0);a.lineTo(.9*b,0);U(a,(.9+d)*b,0,1*b,(.5-e)*c,1*b,.5*c);U(a,1*b,(.5+e)*c,(.9+d)*b,1*c,.9*b,1*c);a.lineTo(.1*b,1*c);U(a,(.1-d)*b,1*c,0,(.5+e)*c,0,.5*c);U(a,0,(.5-e)*c,(.1-d)*b,0,.1*b,0);S(a,.1*b,0,!1);U(a,(.1+d)*b,0,.2*b,(.5-e)*c,.2*b,.5*c);U(a,.2*b,(.5+e)*c,(.1+d)*b,1*c,.1*b,1*c);a.hb(!1);b=a.q;b.C=new R(.2,0);b.D=new R(.9,1);z.u(a);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=.1*Cd,e=.5*Cd;a=z.v();S(a,.9*b,0,!0);U(a,(.9+d)*b,0,1*b,(.5-e)*c,1*b,.5*c);U(a,1*b,(.5+
e)*c,(.9+d)*b,1*c,.9*b,1*c);a.lineTo(.1*b,1*c);U(a,(.1-d)*b,1*c,0,(.5+e)*c,0,.5*c);U(a,0,(.5-e)*c,(.1-d)*b,0,.1*b,0);a.lineTo(.9*b,0);S(a,.9*b,0,!1);U(a,(.9-d)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);U(a,.8*b,(.5+e)*c,(.9-d)*b,1*c,.9*b,1*c);a.hb(!1);b=a.q;b.C=new R(.1,0);b.D=new R(.8,1);z.u(a);return b},Prism1:function(a,b,c){a=z.v();S(a,.25*b,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(b,.5*c);a.lineTo(.5*b,c);a.lineTo(0,c);V(a);S(a,.25*b,.25*c,!1);a.lineTo(.5*b,c);a.hb(!1);b=a.q;b.C=new R(.408,.172);b.D=new R(.833,
.662);z.u(a);return b},Prism2:function(a,b,c){a=z.v();S(a,0,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);V(a);S(a,0,c,!1);a.lineTo(.25*b,.5*c);a.lineTo(b,.25*c);a.moveTo(0,.25*c);a.lineTo(.25*b,.5*c);a.hb(!1);b=a.q;b.C=new R(.25,.5);b.D=new R(.75,.75);z.u(a);return b},Pyramid1:function(a,b,c){a=z.v();S(a,.5*b,0,!0);a.lineTo(b,.75*c);a.lineTo(.5*b,1*c);a.lineTo(0,.75*c);V(a);S(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.hb(!1);b=a.q;b.C=new R(.25,.367);b.D=new R(.75,
.875);z.u(a);return b},Pyramid2:function(a,b,c){a=z.v();S(a,.5*b,0,!0);a.lineTo(b,.85*c);a.lineTo(.5*b,1*c);a.lineTo(0,.85*c);V(a);S(a,.5*b,0,!1);a.lineTo(.5*b,.7*c);a.lineTo(0,.85*c);a.moveTo(.5*b,.7*c);a.lineTo(1*b,.85*c);a.hb(!1);b=a.q;b.C=new R(.25,.367);b.D=new R(.75,.875);z.u(a);return b},Actor:function(a,b,c){var d=.2*Cd,e=.1*Cd,g=.5,h=.1;a=z.v();S(a,g*b,(h+.1)*c,!0);U(a,(g-d)*b,(h+.1)*c,(g-.2)*b,(h+e)*c,(g-.2)*b,h*c);U(a,(g-.2)*b,(h-e)*c,(g-d)*b,(h-.1)*c,g*b,(h-.1)*c);U(a,(g+d)*b,(h-.1)*c,
(g+.2)*b,(h-e)*c,(g+.2)*b,h*c);U(a,(g+.2)*b,(h+e)*c,(g+d)*b,(h+.1)*c,g*b,(h+.1)*c);d=.05;e=Cd*d;S(a,.5*b,.2*c,!0);a.lineTo(.95*b,.2*c);g=.95;h=.25;U(a,(g+e)*b,(h-d)*c,(g+d)*b,(h-e)*c,(g+d)*b,h*c);a.lineTo(1*b,.6*c);a.lineTo(.85*b,.6*c);a.lineTo(.85*b,.35*c);d=.025;e=Cd*d;g=.825;h=.35;U(a,(g+d)*b,(h-e)*c,(g+e)*b,(h-d)*c,g*b,(h-d)*c);U(a,(g-e)*b,(h-d)*c,(g-d)*b,(h-e)*c,(g-d)*b,h*c);a.lineTo(.8*b,1*c);a.lineTo(.55*b,1*c);a.lineTo(.55*b,.7*c);d=.05;e=Cd*d;g=.5;h=.7;U(a,(g+d)*b,(h-e)*c,(g+e)*b,(h-d)*c,
g*b,(h-d)*c);U(a,(g-e)*b,(h-d)*c,(g-d)*b,(h-e)*c,(g-d)*b,h*c);a.lineTo(.45*b,1*c);a.lineTo(.2*b,1*c);a.lineTo(.2*b,.35*c);d=.025;e=Cd*d;g=.175;h=.35;U(a,(g+d)*b,(h-e)*c,(g+e)*b,(h-d)*c,g*b,(h-d)*c);U(a,(g-e)*b,(h-d)*c,(g-d)*b,(h-e)*c,(g-d)*b,h*c);a.lineTo(.15*b,.6*c);a.lineTo(0*b,.6*c);a.lineTo(0*b,.25*c);d=.05;e=Cd*d;g=.05;h=.25;U(a,(g-d)*b,(h-e)*c,(g-e)*b,(h-d)*c,g*b,(h-d)*c);a.lineTo(.5*b,.2*c);b=a.q;b.C=new R(.2,.2);b.D=new R(.8,.65);z.u(a);return b},Card:function(a,b,c){a=z.v();S(a,1*b,0*c,!0);
a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,.2*c);a.lineTo(.2*b,0*c);V(a);b=a.q;b.C=new R(0,.2);b.D=qc;z.u(a);return b},Collate:function(a,b,c){a=z.v();S(a,.5*b,.5*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);S(a,.5*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);b=a.q;b.C=new R(.25,0);b.D=new R(.75,.25);z.u(a);return b},CreateRequest:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.1);var d=z.v();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);V(d);S(d,0,
a*c,!1);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.hb(!1);b=d.q;b.C=new R(0,a);b.D=new R(1,1-a);z.u(d);return b},Database:function(a,b,c){a=z.v();var d=.5*Cd,e=.1*Cd;S(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);U(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);U(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);S(a,1*b,.1*c,!1);U(a,1*b,(.1+e)*c,(.5+d)*b,.2*c,.5*b,.2*c);U(a,(.5-d)*b,.2*c,0,(.1+e)*c,0,.1*c);a.moveTo(1*b,.2*c);
U(a,1*b,(.2+e)*c,(.5+d)*b,.3*c,.5*b,.3*c);U(a,(.5-d)*b,.3*c,0,(.2+e)*c,0,.2*c);a.moveTo(1*b,.3*c);U(a,1*b,(.3+e)*c,(.5+d)*b,.4*c,.5*b,.4*c);U(a,(.5-d)*b,.4*c,0,(.3+e)*c,0,.3*c);a.hb(!1);b=a.q;b.C=new R(0,.4);b.D=new R(1,.9);z.u(a);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(.75*b,0);U(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(0,1*c);U(a,.25*b,.9*c,.25*b,.1*c,0,0);V(a);b=a.q;b.C=new R(.226,0);b.D=new R(.81,1);z.u(a);return b},DiskStorage:function(a,b,c){a=
z.v();var d=.5*Cd,e=.1*Cd;S(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);U(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);U(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);S(a,1*b,.1*c,!1);U(a,1*b,(.1+e)*c,(.5+d)*b,.2*c,.5*b,.2*c);U(a,(.5-d)*b,.2*c,0,(.1+e)*c,0,.1*c);a.moveTo(1*b,.2*c);U(a,1*b,(.2+e)*c,(.5+d)*b,.3*c,.5*b,.3*c);U(a,(.5-d)*b,.3*c,0,(.2+e)*c,0,.2*c);a.hb(!1);b=a.q;b.C=new R(0,.3);b.D=new R(1,.9);z.u(a);return b},Display:function(a,
b,c){a=z.v();S(a,.25*b,0,!0);a.lineTo(.75*b,0);U(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(.25*b,1*c);a.lineTo(0,.5*c);V(a);b=a.q;b.C=new R(.25,0);b.D=new R(.75,1);z.u(a);return b},DividedEvent:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)?a=.2:.15>a&&(a=.15);var d=z.v(),e=.2*Cd;S(d,0,.2*c,!0);U(d,0,(.2-e)*c,(.2-e)*b,0,.2*b,0);d.lineTo(.8*b,0);U(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c);d.lineTo(1*b,.8*c);U(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c);d.lineTo(.2*b,1*c);U(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c);d.lineTo(0,.2*c);
S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.hb(!1);b=d.q;b.C=new R(0,a);b.D=new R(1,1-a);z.u(d);return b},DividedProcess:function(a,b,c){a=a?a.Qc:NaN;if(isNaN(a)||.1>a)a=.1;var d=z.v();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);V(d);S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.hb(!1);b=d.q;b.C=new R(0,a);b.D=qc;z.u(d);return b},Document:function(a,b,c){c/=.8;a=z.v();S(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);U(a,.5*b,.4*c,.5*b,1*c,0,.7*c);V(a);b=a.q;b.C=hc;b.D=new R(1,.6);z.u(a);
return b},ExternalOrganization:function(a,b,c){a=a?a.Qc:NaN;if(isNaN(a)||.2>a)a=.2;var d=z.v();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);V(d);S(d,a*b,0,!1);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);d.hb(!1);b=d.q;b.C=new R(a/2,a/2);b.D=new R(1-a/2,1-a/2);z.u(d);return b},ExternalProcess:function(a,b,c){a=z.v();S(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);V(a);
S(a,.1*b,.4*c,!1);a.lineTo(.1*b,.6*c);a.moveTo(.9*b,.6*c);a.lineTo(.9*b,.4*c);a.moveTo(.6*b,.1*c);a.lineTo(.4*b,.1*c);a.moveTo(.4*b,.9*c);a.lineTo(.6*b,.9*c);a.hb(!1);b=a.q;b.C=new R(.25,.25);b.D=new R(.75,.75);z.u(a);return b},File:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);V(a);S(a,.75*b,0,!1);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.25*c);a.hb(!1);b=a.q;b.C=new R(0,.25);b.D=qc;z.u(a);return b},Interrupt:function(a,b,c){a=z.v();S(a,1*b,
.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,1*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,0);b=a.q;b.C=new R(0,.25);b.D=new R(.5,.75);z.u(a);return b},InternalStorage:function(a,b,c){var d=a?a.Qc:NaN;a=a?a.Mu:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.1);var e=z.v();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);V(e);S(e,d*b,0,!1);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);e.hb(!1);b=e.q;b.C=new R(d,a);b.D=qc;z.u(e);return b},Junction:function(a,b,
c){a=z.v();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=.5*Cd;S(a,1*b,.5*c,!0);U(a,1*b,(.5+g)*c,(.5+g)*b,1*c,.5*b,1*c);U(a,(.5-g)*b,1*c,0,(.5+g)*c,0,.5*c);U(a,0,(.5-g)*c,(.5-g)*b,0,.5*b,0);U(a,(.5+g)*b,0,1*b,(.5-g)*c,1*b,.5*c);S(a,(e+d)*b,(e+d)*c,!1);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);a.hb(!1);b=a.q;b.le=Vj;z.u(a);return b},LinedDocument:function(a,b,c){c/=.8;a=z.v();S(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);U(a,.5*b,.4*c,.5*b,1*c,0,.7*c);V(a);S(a,.1*
b,0,!1);a.lineTo(.1*b,.75*c);a.hb(!1);b=a.q;b.C=new R(.1,0);b.D=new R(1,.6);z.u(a);return b},LoopLimit:function(a,b,c){a=z.v();S(a,0,1*c,!0);a.lineTo(0,.25*c);a.lineTo(.25*b,0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);V(a);b=a.q;b.C=new R(0,.25);b.D=qc;z.u(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=z.v();var d=.5*Cd;S(a,.5*b,1*c,!0);U(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);U(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);U(a,1*b,(.5+
d)*c,(.5+d)*b,.9*c,.6*b,.9*c);a.lineTo(1*b,.9*c);a.lineTo(1*b,1*c);a.lineTo(.5*b,1*c);b=a.q;b.C=new R(.15,.15);b.D=new R(.85,.8);z.u(a);return b},ManualInput:function(a,b,c){a=z.v();S(a,1*b,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.25*c);V(a);b=a.q;b.C=new R(0,.25);b.D=qc;z.u(a);return b},MessageFromUser:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.7);var d=z.v();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(a*b,.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);V(d);b=d.q;b.C=hc;b.D=new R(a,1);z.u(d);return b},
MicroformProcessing:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.25);var d=z.v();S(d,0,0,!0);d.lineTo(.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.5*b,(1-a)*c);d.lineTo(0,1*c);V(d);b=d.q;b.C=new R(0,a);b.D=new R(1,1-a);z.u(d);return b},MicroformRecording:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.15*c);a.lineTo(1*b,.85*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);V(a);b=a.q;b.C=new R(0,.25);b.D=new R(1,.75);z.u(a);return b},MultiDocument:function(a,b,c){c/=.8;a=z.v();
S(a,b,0,!0);a.lineTo(b,.5*c);U(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c);a.lineTo(.9*b,.6*c);U(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c);a.lineTo(.8*b,.7*c);U(a,.4*b,.4*c,.4*b,1*c,0,.7*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);a.lineTo(.1*b,.1*c);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);V(a);S(a,.1*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.54*c);a.moveTo(.2*b,.1*c);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.44*c);a.hb(!1);b=a.q;b.C=new R(0,.25);b.D=new R(.8,.77);z.u(a);return b},MultiProcess:function(a,b,c){a=z.v();
S(a,.1*b,.1*c,!0);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.8*c);a.lineTo(.9*b,.8*c);a.lineTo(.9*b,.9*c);a.lineTo(.8*b,.9*c);a.lineTo(.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);V(a);S(a,.2*b,.1*c,!1);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.8*c);a.moveTo(.1*b,.2*c);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.9*c);a.hb(!1);b=a.q;b.C=new R(0,.2);b.D=new R(.8,1);z.u(a);return b},OfflineStorage:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.1);var d=1-a,e=z.v();S(e,0,0,!0);e.lineTo(1*
b,0);e.lineTo(.5*b,1*c);V(e);S(e,.5*a*b,a*c,!1);e.lineTo((1-.5*a)*b,a*c);e.hb(!1);b=e.q;b.C=new R(d/4+.5*a,a);b.D=new R(3*d/4+.5*a,a+.5*d);z.u(e);return b},OffPageConnector:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.5*c);a.lineTo(.75*b,1*c);a.lineTo(0,1*c);V(a);b=a.q;b.C=hc;b.D=new R(.75,1);z.u(a);return b},Or:function(a,b,c){a=z.v();var d=.5*Cd;S(a,1*b,.5*c,!0);U(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);U(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);U(a,
(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(0,.5*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);a.hb(!1);b=a.q;b.le=Vj;z.u(a);return b},PaperTape:function(a,b,c){c/=.8;a=z.v();S(a,0,.7*c,!0);a.lineTo(0,.3*c);U(a,.5*b,.6*c,.5*b,0,1*b,.3*c);a.lineTo(1*b,.7*c);U(a,.5*b,.4*c,.5*b,1*c,0,.7*c);V(a);b=a.q;b.C=new R(0,.49);b.D=new R(1,.75);z.u(a);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.Qc:NaN;a=a?a.Mu:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=z.v();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo((1-
a)*b,.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);V(e);b=e.q;b.C=new R(d,0);b.D=new R(1-a,1);z.u(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Qc:NaN;a=a?a.Mu:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=z.v();S(e,0,0,!0);e.lineTo((1-a)*b,0);e.lineTo(1*b,.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);V(e);b=e.q;b.C=new R(d,0);b.D=new R(1-a,1);z.u(e);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.1);var d=z.v();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,
1*c);V(d);S(d,(1-a)*b,0,!1);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);d.hb(!1);b=d.q;b.C=new R(a,0);b.D=new R(1-a,1);z.u(d);return b},Process:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.1);var d=z.v();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);V(d);S(d,a*b,0,!1);d.lineTo(a*b,1*c);d.hb(!1);b=d.q;b.C=new R(a,0);b.D=qc;z.u(d);return b},Sort:function(a,b,c){a=z.v();S(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);V(a);S(a,0,.5*c,!1);a.lineTo(1*b,.5*
c);a.hb(!1);b=a.q;b.C=new R(.25,.25);b.D=new R(.75,.5);z.u(a);return b},Start:function(a,b,c){a=z.v();S(a,.25*b,0,!0);S(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);S(a,.25*b,0,!1);a.lineTo(.25*b,1*c);a.moveTo(.75*b,0);a.lineTo(.75*b,1*c);a.hb(!1);b=a.q;b.C=new R(.25,0);b.D=new R(.75,1);z.u(a);return b},Terminator:function(a,b,c){a=z.v();S(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);b=a.q;b.C=new R(.23,0);
b.D=new R(.77,1);z.u(a);return b},TransmittalTape:function(a,b,c){a=a?a.Qc:NaN;isNaN(a)&&(a=.1);var d=z.v();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);V(d);b=d.q;b.C=hc;b.D=new R(1,1-a);z.u(d);return b},AndGate:function(a,b,c){a=z.v();var d=.5*Cd;S(a,0,0,!0);a.lineTo(.5*b,0);U(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);U(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);a.lineTo(0,1*c);V(a);b=a.q;b.C=hc;b.D=new R(.55,1);z.u(a);return b},Buffer:function(a,b,c){a=z.v();S(a,
0,0,!0);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);V(a);b=a.q;b.C=new R(0,.25);b.D=new R(.5,.75);z.u(a);return b},Clock:function(a,b,c){a=z.v();var d=.5*Cd;S(a,1*b,.5*c,!0);U(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);U(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,.5*c);S(a,.8*b,.75*c,!1);a.lineTo(.8*b,.25*c);a.lineTo(.6*b,.25*c);a.lineTo(.6*b,.75*c);a.lineTo(.4*b,.75*c);a.lineTo(.4*b,.25*c);a.lineTo(.2*b,.25*c);a.lineTo(.2*
b,.75*c);a.hb(!1);b=a.q;b.le=Vj;z.u(a);return b},Ground:function(a,b,c){a=z.v();S(a,.5*b,0,!1);a.lineTo(.5*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.3*b,.8*c);a.lineTo(.7*b,.8*c);a.moveTo(.4*b,1*c);a.lineTo(.6*b,1*c);b=a.q;z.u(a);return b},Inverter:function(a,b,c){a=z.v();var d=.1*Cd;S(a,.8*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.8*b,.5*c);S(a,1*b,.5*c,!0);U(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c);U(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);U(a,.8*b,(.5-d)*c,(.9-d)*b,.4*
c,.9*b,.4*c);U(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.q;b.C=new R(0,.25);b.D=new R(.4,.75);z.u(a);return b},NandGate:function(a,b,c){a=z.v();var d=.5*Cd,e=.4*Cd,g=.1*Cd;S(a,.8*b,.5*c,!0);U(a,.8*b,(.5+e)*c,(.4+d)*b,1*c,.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.4*b,0);U(a,(.4+d)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);S(a,1*b,.5*c,!0);U(a,1*b,(.5+g)*c,(.9+g)*b,.6*c,.9*b,.6*c);U(a,(.9-g)*b,.6*c,.8*b,(.5+g)*c,.8*b,.5*c);U(a,.8*b,(.5-g)*c,(.9-g)*b,.4*c,.9*b,.4*c);U(a,(.9+g)*b,.4*c,1*b,(.5-g)*c,1*b,.5*
c);b=a.q;b.C=new R(0,.05);b.D=new R(.55,.95);z.u(a);return b},NorGate:function(a,b,c){a=z.v();var d=.5,e=Cd*d,g=0,h=.5;S(a,.8*b,.5*c,!0);U(a,.7*b,(h+e)*c,(g+e)*b,(h+d)*c,0,1*c);U(a,.25*b,.75*c,.25*b,.25*c,0,0);U(a,(g+e)*b,(h-d)*c,.7*b,(h-e)*c,.8*b,.5*c);d=.1;e=.1*Cd;g=.9;h=.5;S(a,(g-d)*b,h*c,!0);U(a,(g-d)*b,(h-e)*c,(g-e)*b,(h-d)*c,g*b,(h-d)*c);U(a,(g+e)*b,(h-d)*c,(g+d)*b,(h-e)*c,(g+d)*b,h*c);U(a,(g+d)*b,(h+e)*c,(g+e)*b,(h+d)*c,g*b,(h+d)*c);U(a,(g-e)*b,(h+d)*c,(g-d)*b,(h+e)*c,(g-d)*b,h*c);b=a.q;b.C=
new R(.2,.25);b.D=new R(.6,.75);z.u(a);return b},OrGate:function(a,b,c){a=z.v();var d=.5*Cd;S(a,0,0,!0);U(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c);U(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c);U(a,.25*b,.75*c,.25*b,.25*c,0,0);V(a);b=a.q;b.C=new R(.2,.25);b.D=new R(.75,.75);z.u(a);return b},XnorGate:function(a,b,c){a=z.v();var d=.5,e=Cd*d,g=.2,h=.5;S(a,.1*b,0,!1);U(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);S(a,.8*b,.5*c,!0);U(a,.7*b,(h+e)*c,(g+e)*b,(h+d)*c,.2*b,1*c);U(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);U(a,(g+e)*
b,(h-d)*c,.7*b,(h-e)*c,.8*b,.5*c);d=.1;e=.1*Cd;g=.9;h=.5;S(a,(g-d)*b,h*c,!0);U(a,(g-d)*b,(h-e)*c,(g-e)*b,(h-d)*c,g*b,(h-d)*c);U(a,(g+e)*b,(h-d)*c,(g+d)*b,(h-e)*c,(g+d)*b,h*c);U(a,(g+d)*b,(h+e)*c,(g+e)*b,(h+d)*c,g*b,(h+d)*c);U(a,(g-e)*b,(h+d)*c,(g-d)*b,(h+e)*c,(g-d)*b,h*c);b=a.q;b.C=new R(.4,.25);b.D=new R(.65,.75);z.u(a);return b},XorGate:function(a,b,c){a=z.v();var d=.5*Cd;S(a,.1*b,0,!1);U(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);S(a,.2*b,0,!0);U(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c);U(a,.9*b,(.5+d)*
c,(.2+d)*b,1*c,.2*b,1*c);U(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);V(a);b=a.q;b.C=new R(.4,.25);b.D=new R(.8,.75);z.u(a);return b},Capacitor:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},Resistor:function(a,b,c){a=z.v();S(a,0,.5*c,!1);a.lineTo(.1*b,0);a.lineTo(.2*b,1*c);a.lineTo(.3*b,0);a.lineTo(.4*b,1*c);a.lineTo(.5*b,0);a.lineTo(.6*b,1*c);a.lineTo(.7*b,.5*c);b=a.q;z.u(a);return b},Inductor:function(a,b,c){a=z.v();var d=.1*Cd,e=.1;S(a,(e-.5*
d)*b,c,!1);U(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.3;U(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);U(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.5;U(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);U(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.7;U(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);U(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.9;U(a,(e+.1)*b,0,(e+d)*b,c,(e+.5*d)*b,c);b=a.q;z.u(a);return b},ACvoltageSource:function(a,b,c){a=z.v();var d=.5*Cd;S(a,0*b,.5*c,!1);U(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);U(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);U(a,1*b,(.5+d)*
c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);a.moveTo(.1*b,.5*c);U(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c);b=a.q;b.le=Vj;z.u(a);return b},DCvoltageSource:function(a,b,c){a=z.v();S(a,0,.75*c,!1);a.lineTo(0,.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},Diode:function(a,b,c){a=z.v();S(a,1*b,0,!1);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);a.lineTo(1*b,1*c);b=a.q;b.C=new R(0,.25);b.D=new R(.5,.75);z.u(a);return b},Wifi:function(a,b,c){var d=b,e=c;
b*=.38;c*=.6;a=z.v();var g=.8*Cd,h=.8,k=0,l=.5,d=(d-b)/2,e=(e-c)/2;S(a,k*b+d,(l+h)*c+e,!0);U(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);U(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);U(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);U(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);V(a);g=.4*Cd;h=.4;k=.2;l=.5;S(a,k*b+d,(l+h)*c+e,!0);U(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);U(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*
b+d,(l-h)*c+e);U(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);U(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);V(a);g=.2*Cd;h=.2;l=k=.5;S(a,(k-h)*b+d,l*c+e,!0);U(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);U(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);U(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);U(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);g=.4*Cd;h=.4;k=.8;l=.5;S(a,k*b+d,(l-h)*c+e,!0);U(a,(k+g)*b+d,(l-
h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);U(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);U(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+g)*c+e,(k+h-.5*g)*b+d,l*c+e);U(a,(k+h-.5*g)*b+d,(l-g)*c+e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);V(a);g=.8*Cd;h=.8;k=1;l=.5;S(a,k*b+d,(l-h)*c+e,!0);U(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);U(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);U(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+g)*c+e,(k+h-.5*g)*b+d,l*c+e);U(a,(k+h-.5*g)*b+d,(l-g)*c+
e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);V(a);b=a.q;z.u(a);return b},Email:function(a,b,c){a=z.v();S(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);V(a);S(a,0,0,!1);a.lineTo(.5*b,.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(.45*b,.54*c);a.moveTo(1*b,1*c);a.lineTo(.55*b,.54*c);a.hb(!1);b=a.q;z.u(a);return b},Ethernet:function(a,b,c){a=z.v();S(a,.35*b,0,!0);a.lineTo(.65*b,0);a.lineTo(.65*b,.4*c);a.lineTo(.35*b,.4*c);a.lineTo(.35*b,0);V(a);S(a,.1*b,1*c,!0,!0);a.lineTo(.4*b,1*c);
a.lineTo(.4*b,.6*c);a.lineTo(.1*b,.6*c);a.lineTo(.1*b,1*c);V(a);S(a,.6*b,1*c,!0,!0);a.lineTo(.9*b,1*c);a.lineTo(.9*b,.6*c);a.lineTo(.6*b,.6*c);a.lineTo(.6*b,1*c);V(a);S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.5*b,.4*c);a.moveTo(.75*b,.5*c);a.lineTo(.75*b,.6*c);a.moveTo(.25*b,.5*c);a.lineTo(.25*b,.6*c);a.hb(!1);b=a.q;z.u(a);return b},Power:function(a,b,c){a=z.v();var d=.4*Cd,e=.4,g=z.P(),h=z.P(),k=z.P(),l=z.P();ze(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.5,g,g,h,k,l);var m=z.Fb(h.x,
h.y);S(a,h.x*b,h.y*c,!0);U(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+e)*b,.5*c);U(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);U(a,(.5-d)*b,(.5+e)*c,(.5-e)*b,(.5+d)*c,(.5-e)*b,.5*c);ze(.5-e,.5,.5-e,.5-d,.5-d,.5-e,.5,.5-e,.5,k,l,h,g,g);U(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);d=.3*Cd;e=.3;ze(.5-e,.5,.5-e,.5-d,.5-d,.5-e,.5,.5-e,.5,k,l,h,g,g);a.lineTo(h.x*b,h.y*c);U(a,l.x*b,l.y*c,k.x*b,k.y*c,(.5-e)*b,.5*c);U(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,(.5+e)*c);U(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+
e)*b,.5*c);ze(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.5,g,g,h,k,l);U(a,l.x*b,l.y*c,k.x*b,k.y*c,h.x*b,h.y*c);V(a);S(a,.45*b,0,!0);a.lineTo(.45*b,.5*c);a.lineTo(.55*b,.5*c);a.lineTo(.55*b,0);V(a);z.A(g);z.A(h);z.A(k);z.A(l);z.A(m);b=a.q;b.C=new R(.25,.55);b.D=new R(.75,.8);z.u(a);return b},Fallout:function(a,b,c){a=z.v();var d=.5*Cd;S(a,0*b,.5*c,!0);U(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);U(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);U(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,
.5*c);var e=d=0;S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.4;e=0;V(a);S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.2;e=-.3;V(a);S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);V(a);b=a.q;b.le=Vj;z.u(a);return b},IrritationHazard:function(a,b,c){a=z.v();S(a,.2*b,0*c,!0);a.lineTo(.5*b,.3*c);a.lineTo(.8*
b,0*c);a.lineTo(1*b,.2*c);a.lineTo(.7*b,.5*c);a.lineTo(1*b,.8*c);a.lineTo(.8*b,1*c);a.lineTo(.5*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0*b,.8*c);a.lineTo(.3*b,.5*c);a.lineTo(0*b,.2*c);V(a);b=a.q;b.C=new R(.3,.3);b.D=new R(.7,.7);z.u(a);return b},ElectricalHazard:function(a,b,c){a=z.v();S(a,.37*b,0*c,!0);a.lineTo(.5*b,.11*c);a.lineTo(.77*b,.04*c);a.lineTo(.33*b,.49*c);a.lineTo(1*b,.37*c);a.lineTo(.63*b,.86*c);a.lineTo(.77*b,.91*c);a.lineTo(.34*b,1*c);a.lineTo(.34*b,.78*c);a.lineTo(.44*b,.8*c);a.lineTo(.65*
b,.56*c);a.lineTo(0*b,.68*c);V(a);b=a.q;z.u(a);return b},FireHazard:function(a,b,c){a=z.v();S(a,.1*b,1*c,!0);U(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c);U(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c);U(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c);U(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c);U(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c);U(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c);V(a);b=a.q;b.C=new R(.05,.645);b.D=new R(.884,.908);z.u(a);return b},BpmnActivityLoop:function(a,b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;S(a,.65*b,1*c,
!1);U(a,(1-d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);U(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c);U(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);U(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c);a.moveTo(.25*b,.8*c);a.lineTo(.35*b,1*c);a.lineTo(.1*b,1*c);b=a.q;z.u(a);return b},BpmnActivityParallel:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},BpmnActivitySequential:function(a,b,c){a=z.v();S(a,0,0,!1);a.lineTo(1*
b,0);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},BpmnActivityAdHoc:function(a,b,c){a=z.v();S(a,0,0,!1);S(a,1*b,1*c,!1);S(a,0,.5*c,!1);U(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c);U(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c);b=a.q;z.u(a);return b},BpmnActivityCompensation:function(a,b,c){a=z.v();S(a,0,.5*c,!0);a.lineTo(.5*b,0);a.lineTo(.5*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);a.lineTo(.5*b,1*c);V(a);b=a.q;z.u(a);return b},BpmnTaskMessage:function(a,
b,c){a=z.v();S(a,0,.2*c,!0);a.lineTo(1*b,.2*c);a.lineTo(1*b,.8*c);a.lineTo(0,.8*c);a.lineTo(0,.8*c);V(a);S(a,0,.2*c,!1);a.lineTo(.5*b,.5*c);a.lineTo(1*b,.2*c);a.hb(!1);b=a.q;z.u(a);return b},BpmnTaskScript:function(a,b,c){a=z.v();S(a,.7*b,1*c,!0);a.lineTo(.3*b,1*c);U(a,.6*b,.5*c,0,.5*c,.3*b,0);a.lineTo(.7*b,0);U(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c);V(a);S(a,.45*b,.73*c,!1);a.lineTo(.7*b,.73*c);a.moveTo(.38*b,.5*c);a.lineTo(.63*b,.5*c);a.moveTo(.31*b,.27*c);a.lineTo(.56*b,.27*c);a.hb(!1);b=a.q;z.u(a);return b},
BpmnTaskUser:function(a,b,c){a=z.v();S(a,0,0,!1);S(a,.335*b,(1-.555)*c,!0);a.lineTo(.335*b,.595*c);a.lineTo(.665*b,.595*c);a.lineTo(.665*b,(1-.555)*c);U(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.68*c);U(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c);a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;U(a,(.5-(e+d)/2)*b,(d+(d+g)/2)*c,(.5-d)*b,(d+g)*c,(.5-d)*b,d*c);U(a,(.5-d)*b,(d-g)*c,(.5-e)*b,(d-d)*c,.5*b,(d-d)*c);
U(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-g)*c,(.5+d)*b,d*c);U(a,(.5+d)*b,(d+g)*c,(.5+(e+d)/2)*b,(d+(d+g)/2)*c,.635*b,.405*c);a.lineTo(.635*b,.405*c);a.lineTo(.665*b,(1-.555)*c);a.lineTo(.665*b,.595*c);a.lineTo(.335*b,.595*c);S(a,.2*b,1*c,!1);a.lineTo(.2*b,.8*c);S(a,.8*b,1*c,!1);a.lineTo(.8*b,.8*c);b=a.q;z.u(a);return b},BpmnEventConditional:function(a,b,c){a=z.v();S(a,.1*b,0,!0);a.lineTo(.9*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);V(a);S(a,.2*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.moveTo(.2*b,.4*c);a.lineTo(.8*
b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.2*b,.8*c);a.lineTo(.8*b,.8*c);a.hb(!1);b=a.q;z.u(a);return b},BpmnEventError:function(a,b,c){a=z.v();S(a,0,1*c,!0);a.lineTo(.33*b,0);a.lineTo(.66*b,.5*c);a.lineTo(1*b,0);a.lineTo(.66*b,1*c);a.lineTo(.33*b,.5*c);V(a);b=a.q;z.u(a);return b},BpmnEventEscalation:function(a,b,c){a=z.v();S(a,0,0,!1);S(a,1*b,1*c,!1);S(a,.1*b,1*c,!0);a.lineTo(.5*b,0);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.5*c);V(a);b=a.q;z.u(a);return b},BpmnEventTimer:function(a,b,c){a=
z.v();var d=.5*Cd;S(a,1*b,.5*c,!0);U(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);U(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);U(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);U(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,.5*b,0,!1);a.lineTo(.5*b,.15*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,.85*c);a.moveTo(0,.5*c);a.lineTo(.15*b,.5*c);a.moveTo(1*b,.5*c);a.lineTo(.85*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.58*b,.1*c);a.moveTo(.5*b,.5*c);a.lineTo(.78*b,.54*c);a.hb(!1);b=a.q;b.le=Vj;z.u(a);return b}},Yq;for(Yq in iq)iq[Yq.toLowerCase()]=Yq;
var pq={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",
BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};
function mq(a){var b=ne[a];if(void 0===b){var c=a.toLowerCase();if("none"===c)return"None";b=ne[c];if(void 0===b){var d=null,e;for(e in pq)if(e.toLowerCase()===c){d=e;break}if(null!==d)return a=of(pq[d],!1),ne[d]=a,c!==d&&(ne[c]=d),d}}return"string"===typeof b?b:b instanceof Ve?a:null}
function D(a){0===arguments.length?I.call(this):I.call(this,a);this.S=2408959;this.El=this.Ni="";this.ct=this.$s=this.jt=this.ns=null;this.lt="";this.lh=this.as=this.kt=this.rn=null;this.bt="";this.Cp=null;this.at=ie;this.dt="";this.Ep=null;this.Ud="";this.fw=this.qr=this.ql=null;this.fj=(new M(NaN,NaN)).freeze();this.ss="";this.Hl=null;this.ts=hc;this.Bs=Qd;this.us=Rd;this.Jr=null;this.os=Zq;this.tn=Pd;this.sn="gray";this.Lg=4;this.nD=-1;this.Kt=NaN;this.kH=new w;this.Jl=null;this.rk=NaN}
z.Ta(D,I);z.ka("Part",D);D.prototype.cloneProtected=function(a){I.prototype.cloneProtected.call(this,a);a.S=this.S&-4097|49152;a.Ni=this.Ni;a.El=this.El;a.ns=this.ns;a.jt=this.jt;a.$s=this.$s;a.ct=this.ct;a.lt=this.lt;a.kt=this.kt;a.as=this.as;a.lh=null;a.bt=this.bt;a.at=this.at.V();a.dt=this.dt;a.Ud=this.Ud;a.qr=this.qr;a.fj.assign(this.fj);a.ss=this.ss;a.ts=this.ts.V();a.Bs=this.Bs.V();a.us=this.us.V();a.Jr=this.Jr;a.os=this.os;a.tn=this.tn.V();a.sn=this.sn;a.Lg=this.Lg;a.Kt=this.Kt};
D.prototype.Bi=function(a){I.prototype.Bi.call(this,a);a.pm();a.rn=null;a.Cp=null;a.Ep=null;a.Hl=null;a.Jl=null};D.prototype.toString=function(){var a=z.uf(Object.getPrototypeOf(this))+"#"+z.Hd(this);null!==this.data&&(a+="("+ka(this.data)+")");return a};D.LayoutNone=0;var Lm;D.LayoutAdded=Lm=1;var Um;D.LayoutRemoved=Um=2;D.LayoutShown=4;D.LayoutHidden=8;D.LayoutNodeSized=16;var An;D.LayoutGroupLayout=An=32;D.LayoutNodeReplaced=64;var Zq;D.LayoutStandard=Zq=Lm|Um|28|An|64;D.LayoutAll=16777215;
D.prototype.lo=function(a,b,c,d,e,g,h){var k=this.g;null!==k&&(a===sg&&"elements"===b?e instanceof I?Mm(e,function(a){Om(k,a);Nm(k,a)}):e instanceof Cl&&mn(k,e):a===tg&&"elements"===b&&(e instanceof I?Mm(e,function(a){Sm(k,a);Rm(k,a)}):e instanceof Cl&&nn(k,e)),k.ld(a,b,c,d,e,g,h))};D.prototype.updateTargetBindings=D.prototype.Nb=function(a){I.prototype.Nb.call(this,a);if(null!==this.data){a=this.va.o;for(var b=a.length,c=0;c<b;c++){var d=a[c];d instanceof I&&Mm(d,function(a){null!==a.data&&a.Nb()})}}};
D.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.ia;c instanceof X&&(a=c.Sn(a),b=b.DI(a),null===b||b instanceof F)&&(this.Qa=b)}}};z.w(D,{ex:"adornments"},function(){return null===this.lh?Na:this.lh.PF});D.prototype.findAdornment=D.prototype.iq=function(a){u&&z.h(a,"string",D,"findAdornment:category");var b=this.lh;return null===b?null:b.qa(a)};
D.prototype.addAdornment=D.prototype.Sl=function(a,b){if(null!==b){u&&(z.h(a,"string",D,"addAdornment:category"),z.l(b,ea,D,"addAdornment:ad"));var c=null,d=this.lh;null!==d&&(c=d.qa(a));if(c!==b){if(null!==c){var e=c.g;null!==e&&e.remove(c)}null===d&&(this.lh=d=new oa("string",ea));b.Ni!==a&&(b.rc=a);d.add(a,b);c=this.g;null!==c&&(c.add(b),b.data=this.data)}}};
D.prototype.removeAdornment=D.prototype.Pj=function(a){u&&z.h(a,"string",D,"removeAdornment:category");var b=this.lh;if(null!==b){var c=b.qa(a);if(null!==c){var d=c.g;null!==d&&d.remove(c)}b.remove(a);0===b.count&&(this.lh=null)}};D.prototype.clearAdornments=D.prototype.Vt=function(){var a=this.lh;if(null!==a){for(var b=z.tb(),a=a.j;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.Pj(b[c]);z.Ba(b)}};
D.prototype.updateAdornments=function(){var a=this.g;if(null!==a){a:{if(this.gb&&this.BG){var b=this.no;if(!(null!==b&&this.Z.F()&&this.isVisible()&&b.Jj()&&b.Z.F()))break a;var c=this.iq("Selection");if(null===c){c=this.hK;null===c&&(c=this instanceof H?a.uJ:this instanceof F?a.SI:a.MJ);if(!(c instanceof ea))break a;Nh(c);c=c.copy();null!==c&&(c.rc="Selection",c.Ab=b)}if(null!==c){var d=c.placeholder;if(null!==d){var e=b.Cj(),g=0;b instanceof Y&&(g=b.mb);var h=z.Am();h.m((b.Ja.width+g)*e,(b.Ja.height+
g)*e);d.Da=h;z.Qk(h)}c.angle=b.Rn();c.type!==kj&&(d=z.P(),c.location=b.cb(hc,d),z.A(d));this.Sl("Selection",c);break a}}this.Pj("Selection")}$q(this,a);for(a=this.ex;a.next();)b=a.value,b.Nb(),b.K()}};function $q(a,b){b.ib.nf.each(function(b){b.isEnabled&&b.updateAdornments(a)});b.ib.updateAdornments(a)}z.w(D,{layer:"layer"},function(){return this.fw});z.w(D,{g:"diagram"},function(){var a=this.fw;return null!==a?a.g:null});
z.defineProperty(D,{Lf:"layerName"},function(){return this.El},function(a){var b=this.El;if(b!==a){z.h(a,"string",D,"layerName");var c=this.g;if(null===c||null!==c.hm(a)&&!c.cr)if(this.El=a,null!==c&&c.Bc(),this.i("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.g,null!==c&&(a=c.hm(a),null!==a&&a!==b))){var d=b.vf(-1,this,!0);0<=d&&c.ld(tg,"parts",b,this,null,d,!0);b.visible!==a.visible&&this.Kd(a.visible);d=a.qq(99999999,this,!0);0<=d&&c.ld(sg,"parts",a,null,this,!0,d);d=this.Yx;if(null!==
d){var e=c.ab;c.ab=!0;d(this,b,a);c.ab=e}}}});z.defineProperty(D,{Yx:"layerChanged"},function(){return this.ns},function(a){var b=this.ns;b!==a&&(null!==a&&z.h(a,"function",D,"layerChanged"),this.ns=a,this.i("layerChanged",b,a))});z.defineProperty(D,{xo:"zOrder"},function(){return this.Kt},function(a){var b=this.Kt;if(b!==a){z.h(a,"number",D,"zOrder");this.Kt=a;var c=this.layer;null!==c&&tl(c,-1,this);this.i("zOrder",b,a);a=this.g;null!==a&&a.ra()}});
D.prototype.invalidateAdornments=D.prototype.pe=function(){var a=this.g;null!==a&&(Pl(a),0!==(this.S&16384)!==!0&&(this.S|=16384,a.Te()))};function pl(a){0!==(a.S&16384)!==!1&&(a.updateAdornments(),a.S&=-16385)}function Wo(a){if(!1===Em(a)){var b=a.g;null!==b&&(b.Cg.add(a),b.Te());ar(a,!0);a.$i()}}function br(a){a.S|=2097152;if(!1!==Em(a)){var b=a.position,c=a.location;c.F()&&b.F()||cr(a,b,c);var c=a.ac,d=c.copy();c.Za();c.x=b.x;c.y=b.y;c.freeze();a.gy(d,c);ar(a,!1)}}
z.w(D,{cc:"locationObject"},function(){if(null===this.Hl){var a=this.ay;""!==a?(a=this.Gd(a),this.Hl=null!==a?a:this):this.Hl=this instanceof ea?this.type!==kj&&null!==this.placeholder?this.placeholder:this:this}return this.Hl.visible?this.Hl:this});z.defineProperty(D,{FJ:"minLocation"},function(){return this.Bs},function(a){var b=this.Bs;b.O(a)||(u&&z.l(a,M,D,"minLocation"),this.Bs=a=a.V(),this.i("minLocation",b,a))});
z.defineProperty(D,{zJ:"maxLocation"},function(){return this.us},function(a){var b=this.us;b.O(a)||(u&&z.l(a,M,D,"maxLocation"),this.us=a=a.V(),this.i("maxLocation",b,a))});z.defineProperty(D,{ay:"locationObjectName"},function(){return this.ss},function(a){var b=this.ss;b!==a&&(u&&z.h(a,"string",D,"locationObjectName"),this.ss=a,this.Hl=null,Ro(this),this.i("locationObjectName",b,a))});
z.defineProperty(D,{yf:"locationSpot"},function(){return this.ts},function(a){var b=this.ts;b.O(a)||(u&&(z.l(a,R,D,"locationSpot"),a.jd()||z.k("Part.locationSpot must be a specific Spot value, not: "+a)),this.ts=a=a.V(),Ro(this),this.i("locationSpot",b,a))});D.prototype.move=function(a){this.position=a};D.prototype.moveTo=D.prototype.moveTo=function(a,b){var c=z.Fb(a,b);this.move(c);z.A(c)};
D.prototype.isVisible=function(){if(!this.visible)return!1;var a=this.layer;if(null!==a&&!a.visible)return!1;a=this.g;if(null!==a&&(a=a.Ya,a.wf&&(a=a.en.qa(this),null!==a&&a.ny)))return!0;a=this.Qa;return null===a||a.Ke&&a.isVisible()?!0:!1};D.prototype.Kd=function(a){var b=this.g;a?(this.N(4),this.pe(),null!==b&&b.Cg.add(this)):(this.N(8),this.Vt());this.pm();null!==b&&(b.Bc(),b.ra())};
D.prototype.findObject=D.prototype.Gd=function(a){if(this.name===a)return this;var b=this.Jl;null===b&&(this.Jl=b=new na);if(void 0!==b[a])return b[a];for(var c=this.va.o,d=c.length,e=0;e<d;e++){var g=c[e];if(g.name===a)return b[a]=g;if(g instanceof I)if(null===g.cj&&null===g.Eg){if(g=g.Gd(a),null!==g)return b[a]=g}else if(kn(g)&&(g=g.va.first(),null!==g&&g.name===a))return b[a]=g}return b[a]=null};
function dr(a,b,c,d){void 0===d&&(d=new M);c=c.$d()?mc:c;var e=b.Ja;d.m(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(null===b||b===a)return d;b.transform.wb(d);for(b=b.Q;null!==b&&b!==a;)b.transform.wb(d),b=b.Q;a.ej.wb(d);d.offset(-a.Dd.x,-a.Dd.y);return d}D.prototype.ensureBounds=D.prototype.kf=function(){Bk(this,Infinity,Infinity);this.qc()};
function sl(a,b){var c=a.kH,d;isNaN(a.rk)&&(a.rk=Yp(a));d=a.rk;var e=2*d;if(!a.Vk)return c.m(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,g=b.width,h=b.height,k=a.shadowBlur,l=a.mK,g=g+k,h=h+k;d-=k/2;e-=k/2;0<l.x?g+=l.x:(d+=l.x,g-=l.x);0<l.y?h+=l.y:(e+=l.y,h-=l.y);c.m(d-1,e-1,g+2,h+2);return c}
D.prototype.qc=function(){this.$i();if(!1===Dm(this))br(this);else{var a=this.ac,b=z.Of();b.assign(a);a.Za();var c=ol(this);this.wj(0,0,this.Dd.width,this.Dd.height);var d=this.position;cr(this,d,this.location);a.x=d.x;a.y=d.y;a.freeze();this.gy(b,a);Fo(this,!1);b.O(a)?this.Mf(c):!this.qe()||Q(b.width,a.width)&&Q(b.height,a.height)||0<=this.nD&&this.N(16);z.Mb(b);ar(this,!1)}};
D.prototype.gy=function(a,b){var c=this.g;if(null!==c){var d=!1;if(!1===c.ik&&a.F()){var e=c.fd,g=c.padding,h=e.x+g.left,k=e.y+g.top,l=e.width-2*g.right,e=e.height-2*g.bottom;a.x>h&&a.y>k&&a.right<l&&a.bottom<e&&b.x>h&&b.y>k&&b.right<l&&b.bottom<e&&(d=!0)}0!==(this.S&65536)!==!0&&a.O(b)||Pm(this,d,c);c.ra();Bb(a,b)||(this instanceof E&&!c.sa.lb&&this.gg(),this.pm())}};
z.defineProperty(D,{location:"location"},function(){return this.fj},function(a){u&&z.l(a,M,D,"location");var b=a.x,c=a.y,d=this.fj,e=d.x,g=d.y;(e===b||isNaN(e)&&isNaN(b))&&(g===c||isNaN(g)&&isNaN(c))||(a=a.V(),b=a,this instanceof H?b=!1:(this.fj=b,this.S|=2097152,!1===Dm(this)&&(Wo(this),c=this.ub,c.F()&&(e=c.copy(),c.m(c.x+(b.x-d.x),c.y+(b.y-d.y)),er(this,this.g,c,e),this.i("position",e,c))),b=!0),b&&this.i("location",d,a))});f=D.prototype;
f.BB=function(a,b){if(this instanceof H||!a.F())return!1;var c=this.g;if(null!==c&&(er(this,c,a,b),!0===c.sa.lb))return!0;this.ub=a;this.S&=-2097153;c=this.fj;if(c.F()){var d=c.copy();c.m(c.x+(a.x-b.x),c.y+(a.y-b.y));this.i("location",d,c)}!1===Em(this)&&!1===Dm(this)&&(Wo(this),br(this));return!0};function er(a,b,c,d){null===b||a instanceof ea||(b=b.Ya,b.yc&&cl(b,a,"position",d.copy(),c.copy(),!1))}
f.zy=function(a,b){var c=this.fj,d=this.ub;Em(this)||Dm(this)?c.m(NaN,NaN):c.m(c.x+a-d.x,c.y+b-d.y);d.m(a,b);Wo(this)};f.CB=function(){this.S&=-2097153;Wo(this)};
function cr(a,b,c){var d=z.P(),e=a.yf,g=a.cc;e.$d()&&z.k("determineOffset: Part's locationSpot must be real: "+e.toString());var h=g.Ja,k=g instanceof Y?g.mb:0;d.Xu(0,0,h.width+k,h.height+k,e);if(g!==a)for(d.offset(-k/2,-k/2),g.transform.wb(d),e=g.Q;null!==e&&e!==a;)e.transform.wb(d),e=e.Q;a.ej.wb(d);d.offset(-a.Dd.x,-a.Dd.y);e=a.g;g=c.F();h=b.F();g&&h?0!==(a.S&2097152)?fr(a,b,c,e,d):gr(a,b,c,e,d):g?fr(a,b,c,e,d):h&&gr(a,b,c,e,d);a.S|=2097152;z.A(d);a.$i()}
function fr(a,b,c,d,e){var g=b.x,h=b.y;b.m(c.x-e.x,c.y-e.y);null!==d&&(c=d.Ya,(e=c.jk)||!c.yc||a instanceof ea||cl(c,a,"position",new M(g,h),b,!1),e||b.x===g&&b.y===h||(c=d.Eb,d.Eb=!0,a.i("position",new M(g,h),b),d.Eb=c))}function gr(a,b,c,d,e){var g=c.copy();c.m(b.x+e.x,b.y+e.y);c.O(g)||null===d||(b=d.Eb,d.Eb=!0,a.i("location",g,c),d.Eb=b)}
function Pm(a,b,c){Ho(a,!1);a instanceof E&&Hn(c,a);a.layer.Wc||b||c.Bc();b=a.ac;var d=c.yb;d.F()?(ol(a)?Qb(b,d)||a.Mf(!1):b.Vg(d)&&a.Mf(!0),a.updateAdornments()):c.zl=!0}f.sm=function(){return!0};
function ql(a,b){var c=a.ac;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)&&a.isVisible()){var d=a.transform;null!==a.ic&&(No(a,b,a.ic,!0,!0),b.fillRect(c.x,c.y,c.width,c.height));null===a.ic&&null===a.Kb&&(No(a,b,"rgba(0,0,0,0.4)",!0,!1),b.fillRect(c.x,c.y,c.width,c.height));null!==a.Kb&&(d.uu()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),c=a.Ja,No(a,b,a.Kb,!0,!1),b.fillRect(0,0,c.width,c.height),d.uu()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*
d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}f.qe=function(){return!0};
z.defineProperty(D,{rc:"category"},function(){return this.Ni},function(a){var b=this.Ni;if(b!==a){z.h(a,"string",D,"category");var c=this.g,d=this.data,e=null;if(null!==c&&null!==d&&!(this instanceof ea)){var g=c.ia.sa;g.isEnabled&&!g.lb&&(e=this.clone(),e.va.Uc(this.va))}this.Ni=a;this.i("category",b,a);null===c||null===d||this instanceof ea?(e=this.$f,null!==e&&(a=e.lh,null!==a&&a.remove(b),e.Sl(this.rc,this))):(g=c.ia,g.sa.lb||(this instanceof H?(g instanceof X?g.DG(d,a):g instanceof Cg&&g.kK(d,
a),c=un(c,a),null!==c&&(Nh(c),c=c.copy(),null!==c&&hr(this,c,b,a))):(null!==g&&g.xy(d,a),c=rn(c,d,a),null!==c&&(Nh(c),c=c.copy(),null===c||c instanceof H||(c.location=this.location,hr(this,c,b,a)))),null!==e&&(b=this.clone(),b.va.Uc(this.va),this.i("self",e,b))))}});z.defineProperty(D,{self:"self"},function(){return this},function(a){hr(this,a,this.rc,a.rc)});var ir=!1;
function hr(a,b,c,d){b.constructor===a.constructor||ir||(ir=!0,z.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),z.trace("  Old class: "+z.uf(a)+", new class: "+z.uf(b)+", part: "+a.toString()));a.Vt();var e=a.data;c=a.Lf;var g=a.gb,h=a.Wg,k=!0,l=!0,m=!1;if(a instanceof E)var n=a,k=n.Ij,l=n.ud,m=n.ev;b.Bi(a);b.cloneProtected(a);a.Ni=d;a.K();a.ra();b=a.g;d=!0;null!==b&&(d=b.Eb,b.Eb=!0);a.ge=e;null!==e&&a.Nb();null!==b&&(b.Eb=d);e=a.Lf;e!==c&&(a.El=c,
a.Lf=e);a instanceof E&&(n=a,n.Ij=k,n.ud=l,n.ev=m,n.qe()&&n.N(64));a.gb=g;a.Wg=h}D.prototype.canCopy=function(){if(!this.ME)return!1;var a=this.layer;if(null===a)return!0;if(!a.Ik)return!1;a=a.g;return null===a?!0:a.Ik?!0:!1};D.prototype.canDelete=function(){if(!this.QE)return!1;var a=this.layer;if(null===a)return!0;if(!a.Bn)return!1;a=a.g;return null===a?!0:a.Bn?!0:!1};
D.prototype.canEdit=function(){if(!this.NG)return!1;var a=this.layer;if(null===a)return!0;if(!a.jx)return!1;a=a.g;return null===a?!0:a.jx?!0:!1};D.prototype.canGroup=function(){if(!this.vF)return!1;var a=this.layer;if(null===a)return!0;if(!a.gx)return!1;a=a.g;return null===a?!0:a.gx?!0:!1};D.prototype.canMove=function(){if(!this.YF)return!1;var a=this.layer;if(null===a)return!0;if(!a.Wl)return!1;a=a.g;return null===a?!0:a.Wl?!0:!1};
D.prototype.canReshape=function(){if(!this.oG)return!1;var a=this.layer;if(null===a)return!0;if(!a.hx)return!1;a=a.g;return null===a?!0:a.hx?!0:!1};D.prototype.canResize=function(){if(!this.pG)return!1;var a=this.layer;if(null===a)return!0;if(!a.St)return!1;a=a.g;return null===a?!0:a.St?!0:!1};D.prototype.canRotate=function(){if(!this.uG)return!1;var a=this.layer;if(null===a)return!0;if(!a.ix)return!1;a=a.g;return null===a?!0:a.ix?!0:!1};
D.prototype.canSelect=function(){if(!this.Zk)return!1;var a=this.layer;if(null===a)return!0;if(!a.Df)return!1;a=a.g;return null===a?!0:a.Df?!0:!1};z.defineProperty(D,{ME:"copyable"},function(){return 0!==(this.S&1)},function(a){var b=0!==(this.S&1);b!==a&&(u&&z.h(a,"boolean",D,"copyable"),this.S^=1,this.i("copyable",b,a))});
z.defineProperty(D,{QE:"deletable"},function(){return 0!==(this.S&2)},function(a){var b=0!==(this.S&2);b!==a&&(u&&z.h(a,"boolean",D,"deletable"),this.S^=2,this.i("deletable",b,a))});z.defineProperty(D,{NG:"textEditable"},function(){return 0!==(this.S&4)},function(a){var b=0!==(this.S&4);b!==a&&(u&&z.h(a,"boolean",D,"textEditable"),this.S^=4,this.i("textEditable",b,a),this.pe())});
z.defineProperty(D,{vF:"groupable"},function(){return 0!==(this.S&8)},function(a){var b=0!==(this.S&8);b!==a&&(u&&z.h(a,"boolean",D,"groupable"),this.S^=8,this.i("groupable",b,a))});z.defineProperty(D,{YF:"movable"},function(){return 0!==(this.S&16)},function(a){var b=0!==(this.S&16);b!==a&&(u&&z.h(a,"boolean",D,"movable"),this.S^=16,this.i("movable",b,a))});
z.defineProperty(D,{BG:"selectionAdorned"},function(){return 0!==(this.S&32)},function(a){var b=0!==(this.S&32);b!==a&&(u&&z.h(a,"boolean",D,"selectionAdorned"),this.S^=32,this.i("selectionAdorned",b,a),this.pe())});z.defineProperty(D,{Qx:"isInDocumentBounds"},function(){return 0!==(this.S&64)},function(a){var b=0!==(this.S&64);if(b!==a){u&&z.h(a,"boolean",D,"isInDocumentBounds");this.S^=64;var c=this.g;null!==c&&c.Bc();this.i("isInDocumentBounds",b,a)}});
z.defineProperty(D,{TA:"isLayoutPositioned"},function(){return 0!==(this.S&128)},function(a){var b=0!==(this.S&128);b!==a&&(u&&z.h(a,"boolean",D,"isLayoutPositioned"),this.S^=128,this.i("isLayoutPositioned",b,a),this.N(a?4:8))});z.defineProperty(D,{Zk:"selectable"},function(){return 0!==(this.S&256)},function(a){var b=0!==(this.S&256);b!==a&&(u&&z.h(a,"boolean",D,"selectable"),this.S^=256,this.i("selectable",b,a),this.pe())});
z.defineProperty(D,{oG:"reshapable"},function(){return 0!==(this.S&512)},function(a){var b=0!==(this.S&512);b!==a&&(u&&z.h(a,"boolean",D,"reshapable"),this.S^=512,this.i("reshapable",b,a),this.pe())});z.defineProperty(D,{pG:"resizable"},function(){return 0!==(this.S&1024)},function(a){var b=0!==(this.S&1024);b!==a&&(u&&z.h(a,"boolean",D,"resizable"),this.S^=1024,this.i("resizable",b,a),this.pe())});
z.defineProperty(D,{uG:"rotatable"},function(){return 0!==(this.S&2048)},function(a){var b=0!==(this.S&2048);b!==a&&(u&&z.h(a,"boolean",D,"rotatable"),this.S^=2048,this.i("rotatable",b,a),this.pe())});
z.defineProperty(D,{gb:"isSelected"},function(){return 0!==(this.S&4096)},function(a){var b=0!==(this.S&4096);if(b!==a){u&&z.h(a,"boolean",D,"isSelected");var c=this.g;if(!a||this.canSelect()&&!(null!==c&&c.selection.count>=c.AJ)){this.S^=4096;var d=!1;if(null!==c){d=c.Eb;c.Eb=!0;var e=c.selection;e.Za();a?e.add(this):e.remove(this);e.freeze()}this.i("isSelected",b,a);this.pe();a=this.iK;null!==a&&a(this);null!==c&&(c.Te(),c.Eb=d)}}});
z.defineProperty(D,{Wg:"isHighlighted"},function(){return 0!==(this.S&524288)},function(a){var b=0!==(this.S&524288);if(b!==a){u&&z.h(a,"boolean",D,"isHighlighted");this.S^=524288;var c=this.g;null!==c&&(c=c.om,c.Za(),a?c.add(this):c.remove(this),c.freeze());this.i("isHighlighted",b,a);this.ra();a=this.VI;null!==a&&a(this)}});
z.defineProperty(D,{Vk:"isShadowed"},function(){return 0!==(this.S&8192)},function(a){var b=0!==(this.S&8192);b!==a&&(u&&z.h(a,"boolean",D,"isShadowed"),this.S^=8192,this.i("isShadowed",b,a),this.ra())});function Em(a){return 0!==(a.S&32768)}function ar(a,b){a.S=b?a.S|32768:a.S&-32769}function Ho(a,b){a.S=b?a.S|65536:a.S&-65537}function ol(a){return 0!==(a.S&131072)}D.prototype.Mf=function(a){this.S=a?this.S|131072:this.S&-131073};function jr(a,b){a.S=b?a.S|1048576:a.S&-1048577}
z.defineProperty(D,{CF:"isAnimated"},function(){return 0!==(this.S&262144)},function(a){var b=0!==(this.S&262144);b!==a&&(u&&z.h(a,"boolean",D,"isAnimated"),this.S^=262144,this.i("isAnimated",b,a))});z.defineProperty(D,{VI:"highlightedChanged"},function(){return this.as},function(a){var b=this.as;b!==a&&(null!==a&&z.h(a,"function",D,"highlightedChanged"),this.as=a,this.i("highlightedChanged",b,a))});
z.defineProperty(D,{vy:"selectionObjectName"},function(){return this.lt},function(a){var b=this.lt;b!==a&&(u&&z.h(a,"string",D,"selectionObjectName"),this.lt=a,this.rn=null,this.i("selectionObjectName",b,a))});z.defineProperty(D,{hK:"selectionAdornmentTemplate"},function(){return this.jt},function(a){var b=this.jt;b!==a&&(u&&z.l(a,ea,D,"selectionAdornmentTemplate"),this instanceof H&&(a.type=kj),this.jt=a,this.i("selectionAdornmentTemplate",b,a))});
z.w(D,{no:"selectionObject"},function(){if(null===this.rn){var a=this.vy;null!==a&&""!==a?(a=this.Gd(a),this.rn=null!==a?a:this):this instanceof H?(a=this.path,this.rn=null!==a?a:this):this.rn=this}return this.rn});z.defineProperty(D,{iK:"selectionChanged"},function(){return this.kt},function(a){var b=this.kt;b!==a&&(null!==a&&z.h(a,"function",D,"selectionChanged"),this.kt=a,this.i("selectionChanged",b,a))});
z.defineProperty(D,{qG:"resizeAdornmentTemplate"},function(){return this.$s},function(a){var b=this.$s;b!==a&&(u&&z.l(a,ea,D,"resizeAdornmentTemplate"),this.$s=a,this.i("resizeAdornmentTemplate",b,a))});z.defineProperty(D,{sG:"resizeObjectName"},function(){return this.bt},function(a){var b=this.bt;b!==a&&(u&&z.h(a,"string",D,"resizeObjectName"),this.bt=a,this.Cp=null,this.i("resizeObjectName",b,a))});
z.w(D,{rG:"resizeObject"},function(){if(null===this.Cp){var a=this.sG;null!==a&&""!==a?(a=this.Gd(a),this.Cp=null!==a?a:this):this.Cp=this}return this.Cp});z.defineProperty(D,{$J:"resizeCellSize"},function(){return this.at},function(a){var b=this.at;b.O(a)||(u&&z.l(a,Fa,D,"resizeCellSize"),this.at=a=a.V(),this.i("resizeCellSize",b,a))});
z.defineProperty(D,{bK:"rotateAdornmentTemplate"},function(){return this.ct},function(a){var b=this.ct;b!==a&&(u&&z.l(a,ea,D,"rotateAdornmentTemplate"),this.ct=a,this.i("rotateAdornmentTemplate",b,a))});z.defineProperty(D,{cK:"rotateObjectName"},function(){return this.dt},function(a){var b=this.dt;b!==a&&(u&&z.h(a,"string",D,"rotateObjectName"),this.dt=a,this.Ep=null,this.i("rotateObjectName",b,a))});
z.w(D,{vG:"rotateObject"},function(){if(null===this.Ep){var a=this.cK;null!==a&&""!==a?(a=this.Gd(a),this.Ep=null!==a?a:this):this.Ep=this}return this.Ep});z.defineProperty(D,{text:"text"},function(){return this.Ud},function(a){var b=this.Ud;b!==a&&(u&&z.h(a,"string",D,"text"),this.Ud=a,this.i("text",b,a))});
z.defineProperty(D,{Qa:"containingGroup"},function(){return this.ql},function(a){if(this.qe()){var b=this.ql;if(b!==a){u&&null!==a&&z.l(a,F,D,"containingGroup");null===a||this!==a&&!a.Ei(this)||(this===a&&z.k("Cannot make a Group a member of itself: "+this.toString()),z.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString()));this.N(Um);var c=this.g;null!==b?kr(b,this):this instanceof F&&null!==c&&c.Pl.remove(this);this.ql=a;null!==a?lr(a,this):this instanceof
F&&null!==c&&c.Pl.add(this);this.N(Lm);if(null!==c){var d=this.data,e=c.ia;null!==d&&e instanceof X&&e.zB(d,e.Cb(null!==a?a.data:null))}d=this.IE;null!==d&&(e=!0,null!==c&&(e=c.ab,c.ab=!0),d(this,b,a),null!==c&&(c.ab=e));if(this instanceof F)for(c=new K(D),Lh(c,this,!0,0,!0),c=c.j;c.next();)if(d=c.value,d instanceof E)for(d=d.Jd;d.next();)pn(d.value);if(this instanceof E)for(d=this.Jd;d.next();)pn(d.value);this.i("containingGroup",b,a);null!==a&&(b=a.layer,null!==b&&tl(b,-1,a))}}else z.k("cannot set the Part.containingGroup of a Link or Adornment")});
f=D.prototype;f.pm=function(){var a=this.Qa;null!==a&&(a.K(),null!==a.Qb&&a.Qb.K(),a.gg())};f.ra=function(){var a=this.g;null!==a&&!Dm(this)&&!Em(this)&&this.isVisible()&&this.ac.F()&&a.ra(sl(this,this.ac))};f.K=function(){I.prototype.K.call(this);var a=this.g;null!==a&&(a.Cg.add(this),this instanceof E&&null!==this.Cc&&Ro(this.Cc),a.Te(!0))};f.ou=function(a){a||(a=this.ql,null!==a&&lr(a,this))};f.pu=function(a){a||(a=this.ql,null!==a&&kr(a,this))};
f.Mn=function(){var a=this.data;if(null!==a){var b=this.g;null!==b&&(b=b.ia,null!==b&&b.qy(a))}};z.defineProperty(D,{IE:"containingGroupChanged"},function(){return this.qr},function(a){var b=this.qr;b!==a&&(null!==a&&z.h(a,"function",D,"containingGroupChanged"),this.qr=a,this.i("containingGroupChanged",b,a))});D.prototype.findSubGraphLevel=function(){return mr(this,this)};function mr(a,b){var c=b.Qa;return null!==c?1+mr(a,c):b instanceof E&&(c=b.Cc,null!==c)?mr(a,c):0}
D.prototype.findTopLevelPart=function(){return nr(this,this)};function nr(a,b){var c=b.Qa;return null!==c?nr(a,c):b instanceof E&&(c=b.Cc,null!==c)?nr(a,c):b}z.w(D,{vq:"isTopLevel"},function(){return null!==this.Qa||this instanceof E&&this.xf?!1:!0});D.prototype.isMemberOf=D.prototype.Ei=function(a){return a instanceof F?or(this,this,a):!1};function or(a,b,c){if(b===c||null===c)return!1;var d=b.Qa;return null===d||d!==c&&!or(a,d,c)?b instanceof E&&(b=b.Cc,null!==b)?or(a,b,c):!1:!0}
D.prototype.findCommonContainingGroup=D.prototype.BI=function(a){if(null===a)return null;u&&z.l(a,D,D,"findCommonContainingGroup:other");if(this===a)return this.Qa;for(var b=this;null!==b;)b instanceof F&&jr(b,!0),b=b.Qa;for(var c=null,b=a;null!==b;){if(0!==(b.S&1048576)){c=b;break}b=b.Qa}for(b=this;null!==b;)b instanceof F&&jr(b,!1),b=b.Qa;return c};
z.defineProperty(D,{pJ:"layoutConditions"},function(){return this.os},function(a){var b=this.os;b!==a&&(u&&z.h(a,"number",D,"layoutConditions"),this.os=a,this.i("layoutConditions",b,a))});D.prototype.canLayout=function(){if(!this.TA||!this.isVisible())return!1;var a=this.layer;return null!==a&&a.Wc||this instanceof E&&this.xf?!1:!0};
D.prototype.invalidateLayout=D.prototype.N=function(a){void 0===a&&(a=16777215);var b;this.TA&&0!==(a&this.pJ)?(b=this.layer,null!==b&&b.Wc||this instanceof E&&this.xf?b=!1:(b=this.g,b=null!==b&&b.sa.lb?!1:!0)):b=!1;if(b)if(b=this.ql,null!==b){var c=b.Wb;null!==c?c.N():b.N(a)}else a=this.g,null!==a&&(c=a.Wb,null!==c&&c.N())};function Qm(a){if(!a.isVisible())return!1;a=a.layer;return null!==a&&a.Wc?!1:!0}
z.defineProperty(D,{VE:"dragComputation"},function(){return this.Jr},function(a){var b=this.Jr;b!==a&&(null!==a&&z.h(a,"function",D,"dragComputation"),this.Jr=a,this.i("dragComputation",b,a))});z.defineProperty(D,{mK:"shadowOffset"},function(){return this.tn},function(a){var b=this.tn;b.O(a)||(u&&z.l(a,M,D,"shadowOffset"),this.tn=a=a.V(),this.ra(),this.i("shadowOffset",b,a))});
z.defineProperty(D,{shadowColor:"shadowColor"},function(){return this.sn},function(a){var b=this.sn;b!==a&&(u&&z.h(a,"string",D,"shadowColor"),this.sn=a,this.ra(),this.i("shadowColor",b,a))});z.defineProperty(D,{shadowBlur:"shadowBlur"},function(){return this.Lg},function(a){var b=this.Lg;b!==a&&(u&&z.h(a,"number",D,"shadowBlur"),this.Lg=a,this.ra(),this.i("shadowBlur",b,a))});
function ea(a){0===arguments.length?D.call(this,Yj):D.call(this,a);this.S&=-257;this.El="Adornment";this.Qb=this.oh=this.Rc=null}z.Ta(ea,D);z.ka("Adornment",ea);ea.prototype.toString=function(){var a=this.$f;return"Adornment("+this.rc+")"+(null!==a?a.toString():"")};ea.prototype.updateRelationshipsFromData=function(){};
ea.prototype.fo=function(a){var b=this.Ab.ba,c=this.Ab;if(b instanceof H&&c instanceof Y){var d=b.path,c=d.Ff;b.fo(a);c=d.Ff;a=this.va.o;b=a.length;for(d=0;d<b;d++){var e=a[d];e.If&&e instanceof Y&&(e.nb=c)}}};z.w(ea,{placeholder:"placeholder"},function(){return this.Qb});
z.defineProperty(ea,{Ab:"adornedObject"},function(){return this.Rc},function(a){u&&null!==a&&z.l(a,O,D,"adornedObject:value");var b=this.$f,c=null;null!==a&&(c=a.ba);null===b||null!==a&&b===c||b.Pj(this.rc);this.Rc=a;null!==c&&c.Sl(this.rc,this)});z.w(ea,{$f:"adornedPart"},function(){var a=this.Rc;return null!==a?a.ba:null});ea.prototype.sm=function(){var a=this.Rc;if(null===a)return!0;a=a.ba;return null===a||!Dm(a)};ea.prototype.qe=function(){return!1};z.w(ea,{Qa:"containingGroup"},function(){return null});
ea.prototype.lo=function(a,b,c,d,e,g,h){if(a===sg&&"elements"===b)if(e instanceof Sj){var k=e;null===this.Qb?this.Qb=k:this.Qb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else e instanceof I&&(k=e.du(function(a){return a instanceof Sj}),k instanceof Sj&&(null===this.Qb?this.Qb=k:this.Qb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else a===tg&&"elements"===b&&null!==this.Qb&&(d===this.Qb?this.Qb=null:d instanceof I&&
this.Qb.rm(d)&&(this.Qb=null));D.prototype.lo.call(this,a,b,c,d,e,g,h)};ea.prototype.updateAdornments=function(){};ea.prototype.Mn=function(){};function E(a){0===arguments.length?D.call(this,Yj):D.call(this,a);this.Ha=13;this.xc=new J(H);this.Gt=this.np=this.Gl=this.qs=this.ps=null;this.kr=Od;this.ze=this.Xh=null;this.Ws=pr;this.Fk=!1}z.Ta(E,D);z.ka("Node",E);
E.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a);a.Ha=this.Ha;a.Ha=this.Ha&-17;a.ps=this.ps;a.qs=this.qs;a.Gl=this.Gl;a.Gt=this.Gt;a.kr=this.kr.V();a.Ws=this.Ws};E.prototype.Bi=function(a){D.prototype.Bi.call(this,a);a.gg();a.Xh=this.Xh;a.ze=null};var qr;E.DirectionDefault=qr=z.s(E,"DirectionDefault",0);E.DirectionAbsolute=z.s(E,"DirectionAbsolute",1);var rr;E.DirectionRotatedNode=rr=z.s(E,"DirectionRotatedNode",2);var xo;
E.DirectionRotatedNodeOrthogonal=xo=z.s(E,"DirectionRotatedNodeOrthogonal",3);E.SpreadingNone=z.s(E,"SpreadingNone",10);var pr;E.SpreadingEvenly=pr=z.s(E,"SpreadingEvenly",11);var sr;E.SpreadingPacked=sr=z.s(E,"SpreadingPacked",12);function tr(a,b){null!==b&&(null===a.Xh&&(a.Xh=new K(Dl)),a.Xh.add(b))}
function ur(a,b,c,d){if(null===b||null===a.Xh)return null;for(var e=a.Xh.j;e.next();){var g=e.value;if(g.Fq===a&&g.Hu===b&&g.jy===c&&g.ky===d||g.Fq===b&&g.Hu===a&&g.jy===d&&g.ky===c)return g}return null}E.prototype.invalidateLinkBundle=function(a,b,c){if(void 0===b||null===b)b="";if(void 0===c||null===c)c="";a=ur(this,a,b,c);null!==a&&a.sq()};
E.prototype.lo=function(a,b,c,d,e,g,h){a===sg&&"elements"===b?this.ze=null:a===tg&&"elements"===b&&(null===this.g?this.ze=null:d instanceof O&&$o(this,d,function(a,b){Xo(a,b,!0)}));D.prototype.lo.call(this,a,b,c,d,e,g,h)};E.prototype.invalidateConnectedLinks=E.prototype.gg=function(a){void 0===a&&(a=null);for(var b=this.Jd;b.next();){var c=b.value;null!==a&&a.contains(c)||(vr(this,c.gd),vr(this,c.Nd),c.gc())}};
function Io(a,b){for(var c=a.Jd;c.next();){var d=c.value;if(d.gd===b||d.Nd===b)vr(a,d.gd),vr(a,d.Nd),d.gc()}}function vr(a,b){if(null!==b){var c=b.Vs;null!==c&&c.sq();c=a.Qa;null===c||c.Ke||vr(c,c.im(""))}}E.prototype.sm=function(){return!0};z.defineProperty(E,{TJ:"portSpreading"},function(){return this.Ws},function(a){var b=this.Ws;b!==a&&(u&&z.Ca(a,E,E,"portSpreading"),this.Ws=a,this.i("portSpreading",b,a),a=this.g,null!==a&&a.sa.lb||this.gg())});
z.defineProperty(E,{kA:"avoidable"},function(){return 0!==(this.Ha&8)},function(a){var b=0!==(this.Ha&8);if(b!==a){u&&z.h(a,"boolean",E,"avoidable");this.Ha^=8;var c=this.g;null!==c&&Hn(c,this);this.i("avoidable",b,a)}});z.defineProperty(E,{SH:"avoidableMargin"},function(){return this.kr},function(a){"number"===typeof a?a=new Kb(a):z.l(a,Kb,E,"avoidableMargin");var b=this.kr;if(!b.O(a)){this.kr=a=a.V();var c=this.g;null!==c&&Hn(c,this);this.i("avoidableMargin",b,a)}});
E.prototype.getAvoidableRect=function(a){a.set(this.Z);a.bx(this.SH);return a};E.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.isVisible();)a=a.Qa;return a};
E.prototype.isVisible=function(){if(!D.prototype.isVisible.call(this))return!1;var a=!0,b=zl,c=this.g;if(null!==c){a=c.Ya;if(a.wf&&(a=a.en.qa(this),null!==a&&a.ny))return!0;a=c.ae;b=c.OB}if(b===zl){if(c=this.km(),null!==c&&!c.ud)return!1}else if(b===Ym){if(c=a?this.fF():this.gF(),0<c.count&&c.all(function(a){return!a.ud}))return!1}else if(b===Zm&&(c=a?this.fF():this.gF(),0<c.count&&c.any(function(a){return!a.ud})))return!1;c=this.Cc;return null!==c?c.isVisible():!0};
E.prototype.Kd=function(a){D.prototype.Kd.call(this,a);for(var b=this.Jd;b.next();)b.value.Kd(a)};z.w(E,{Jd:"linksConnected"},function(){return this.xc.j});E.prototype.findLinksConnected=E.prototype.dF=function(a){void 0===a&&(a=null);if(null===a)return this.xc.j;u&&z.h(a,"string",E,"findLinksConnected:pid");var b=new Va(this.xc),c=this;b.Gq=function(b){return b.aa===c&&b.dg===a||b.ea===c&&b.ih===a};return b};
E.prototype.findLinksOutOf=E.prototype.Dx=function(a){void 0===a&&(a=null);u&&null!==a&&z.h(a,"string",E,"findLinksOutOf:pid");var b=new Va(this.xc),c=this;b.Gq=function(b){return b.aa!==c?!1:null===a?!0:b.dg===a};return b};E.prototype.findLinksInto=E.prototype.Ug=function(a){void 0===a&&(a=null);u&&null!==a&&z.h(a,"string",E,"findLinksInto:pid");var b=new Va(this.xc),c=this;b.Gq=function(b){return b.ea!==c?!1:null===a?!0:b.ih===a};return b};
E.prototype.findNodesConnected=E.prototype.eF=function(a){void 0===a&&(a=null);u&&null!==a&&z.h(a,"string",E,"findNodesConnected:pid");for(var b=null,c=null,d=this.xc.j;d.next();){var e=d.value;if(e.aa===this){if(null===a||e.dg===a)e=e.ea,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e}else e.ea!==this||null!==a&&e.ih!==a||(e=e.aa,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e)}return null!==b?b.j:null!==c?new Qa(c):Na};
E.prototype.findNodesOutOf=E.prototype.gF=function(a){void 0===a&&(a=null);u&&null!==a&&z.h(a,"string",E,"findNodesOutOf:pid");for(var b=null,c=null,d=this.xc.j;d.next();){var e=d.value;e.aa!==this||null!==a&&e.dg!==a||(e=e.ea,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e)}return null!==b?b.j:null!==c?new Qa(c):Na};
E.prototype.findNodesInto=E.prototype.fF=function(a){void 0===a&&(a=null);u&&null!==a&&z.h(a,"string",E,"findNodesInto:pid");for(var b=null,c=null,d=this.xc.j;d.next();){var e=d.value;e.ea!==this||null!==a&&e.ih!==a||(e=e.aa,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e)}return null!==b?b.j:null!==c?new Qa(c):Na};
E.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);u&&(z.l(a,E,E,"findLinksBetween:othernode"),null!==b&&z.h(b,"string",E,"findLinksBetween:pid"),null!==c&&z.h(c,"string",E,"findLinksBetween:otherpid"));var d=new Va(this.xc),e=this;d.Gq=function(d){return(d.aa!==e||d.ea!==a||null!==b&&d.dg!==b||null!==c&&d.ih!==c)&&(d.aa!==a||d.ea!==e||null!==c&&d.dg!==c||null!==b&&d.ih!==b)?!1:!0};return d};
E.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);u&&(z.l(a,E,E,"findLinksTo:othernode"),null!==b&&z.h(b,"string",E,"findLinksTo:pid"),null!==c&&z.h(c,"string",E,"findLinksTo:otherpid"));var d=new Va(this.xc),e=this;d.Gq=function(d){return d.aa!==e||d.ea!==a||null!==b&&d.dg!==b||null!==c&&d.ih===c?!1:!0};return d};
z.defineProperty(E,{rJ:"linkConnected"},function(){return this.ps},function(a){var b=this.ps;b!==a&&(null!==a&&z.h(a,"function",E,"linkConnected"),this.ps=a,this.i("linkConnected",b,a))});z.defineProperty(E,{sJ:"linkDisconnected"},function(){return this.qs},function(a){var b=this.qs;b!==a&&(null!==a&&z.h(a,"function",E,"linkDisconnected"),this.qs=a,this.i("linkDisconnected",b,a))});
z.defineProperty(E,{Zx:"linkValidation"},function(){return this.Gl},function(a){var b=this.Gl;b!==a&&(null!==a&&z.h(a,"function",E,"linkValidation"),this.Gl=a,this.i("linkValidation",b,a))});
function wr(a,b,c){vr(a,c);if(!a.xc.contains(b)){a.xc.add(b);var d=a.rJ;if(null!==d){var e=!0,g=a.g;null!==g&&(e=g.ab,g.ab=!0);d(a,b,c);null!==g&&(g.ab=e)}b.Xc&&(c=b.aa,b=b.ea,null!==c&&null!==b&&c!==b&&(d=!0,g=a.g,null!==g&&(d=g.ae),a=d?b:c,e=d?c:b,a.Fk||(a.Fk=e),!e.Ij||null!==g&&g.sa.lb||(d?c===e&&(e.Ij=!1):b===e&&(e.Ij=!1))))}}
function xr(a,b,c){vr(a,c);if(a.xc.remove(b)){var d=a.sJ,e=a.g;if(null!==d){var g=!0;null!==e&&(g=e.ab,e.ab=!0);d(a,b,c);null!==e&&(e.ab=g)}b.Xc&&(c=!0,null!==e&&(c=e.ae),a=c?b.ea:b.aa,b=c?b.aa:b.ea,null!==a&&(a.Fk=!1),null===b||b.Ij||(0===b.xc.count?(b.Fk=null,null!==e&&e.sa.lb||(b.Ij=!0)):Bn(b)))}}
function Bn(a){a.Fk=!1;if(0!==a.xc.count){var b=!0,c=a.g;if(null===c||!c.sa.lb){null!==c&&(b=c.ae);for(c=a.xc.j;c.next();){var d=c.value;if(d.Xc)if(b){if(d.aa===a){a.Ij=!1;return}}else if(d.ea===a){a.Ij=!1;return}}a.Ij=!0}}}
E.prototype.updateRelationshipsFromData=function(){D.prototype.updateRelationshipsFromData.call(this);var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.ia;c instanceof Cg&&(a=c.Un(a),a=b.Re(a),c=this.km(),a!==c&&(c=this.Pn(),null!==a?null!==c?b.ae?c.aa=a:c.ea=a:dn(b,a,this):null!==c&&Tm(b,c,!1)))}}};E.prototype.ou=function(a){D.prototype.ou.call(this,a);a||(Bn(this),a=this.np,null!==a&&yr(a,this))};
E.prototype.pu=function(a){D.prototype.pu.call(this,a);a||(a=this.np,null!==a&&null!==a.af&&(a.af.remove(this),a.K()))};E.prototype.Mn=function(){if(0<this.xc.count){var a=this.g;if(null!==a)for(var b=a.xb.UE,c=this.xc.copy().j;c.next();){var d=c.value;b?a.remove(d):(d.aa===this&&(d.aa=null),d.ea===this&&(d.ea=null))}}this.Cc=null;D.prototype.Mn.call(this)};z.w(E,{xf:"isLinkLabel"},function(){return null!==this.np});
z.defineProperty(E,{Cc:"labeledLink"},function(){return this.np},function(a){var b=this.np;if(b!==a){u&&null!==a&&z.l(a,H,E,"labeledLink");var c=this.g,d=this.data;if(null!==b&&(null!==b.af&&(b.af.remove(this),b.K()),null!==c&&null!==d&&!c.sa.lb)){var e=b.data,g=c.ia;if(null!==e&&g instanceof X){var h=g.Cb(d);void 0!==h&&g.YJ(e,h)}}this.np=a;null!==a&&(yr(a,this),null===c||null===d||c.sa.lb||(e=a.data,g=c.ia,null!==e&&g instanceof X&&(h=g.Cb(d),void 0!==h&&g.uE(e,h))));Ro(this);this.i("labeledLink",
b,a)}});E.prototype.findPort=E.prototype.im=function(a){u&&z.h(a,"string",E,"findPort:pid");if(null===this.ze){if(""===a&&!1===this.Tk)return this;Yo(this)}var b=this.ze.qa(a);return null!==b||""!==a&&(b=this.ze.qa(""),null!==b)?b:this};z.w(E,{port:"port"},function(){return this.im("")});z.w(E,{ports:"ports"},function(){null===this.ze&&Yo(this);return this.ze.PF});
function Yo(a){null===a.ze?a.ze=new oa("string",O):a.ze.clear();$o(a,a,function(a,c){var d=c.vd;null!==d&&a.ze.add(d,c)});0===a.ze.count&&a.ze.add("",a)}function Xo(a,b,c){var d=b.vd;if(null!==d&&(null!==a.ze&&a.ze.remove(d),b=a.g,null!==b&&c)){c=null;for(d=a.dF(d);d.next();)a=d.value,null===c&&(c=z.tb()),c.push(a);if(null!==c){for(d=0;d<c.length;d++)a=c[d],b.remove(a);z.Ba(c)}}}
E.prototype.isInTreeOf=function(a){if(null===a||a===this)return!1;var b=!0,c=this.g;null!==c&&(b=c.ae);c=this;if(b)for(;c!==a;){for(var b=null,d=c.xc.j;d.next();){var e=d.value;if(e.Xc&&(b=e.aa,b!==c&&b!==this))break}if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){b=null;for(d=c.xc.j;d.next()&&(e=d.value,!e.Xc||(b=e.ea,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0};
E.prototype.findTreeRoot=function(){var a=!0,b=this.g;null!==b&&(a=b.ae);b=this;if(a)for(;;){for(var a=null,c=b.xc.j;c.next();){var d=c.value;if(d.Xc&&(a=d.aa,a!==b&&a!==this))break}if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){a=null;for(c=b.xc.j;c.next()&&(d=c.value,!d.Xc||(a=d.ea,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}};
E.prototype.findCommonTreeParent=function(a){if(null===a)return null;u&&z.l(a,E,E,"findCommonTreeParent:other");if(this===a)return this;for(var b=this;null!==b;)jr(b,!0),b=b.km();for(var c=null,b=a;null!==b;){if(0!==(b.S&1048576)){c=b;break}b=b.km()}for(b=this;null!==b;)jr(b,!1),b=b.km();return c};
E.prototype.findTreeParentLink=E.prototype.Pn=function(){var a=!0,b=this.g;null!==b&&(a=b.ae);b=this.xc.j;if(a)for(;b.next();){if(a=b.value,a.Xc&&a.aa!==this)return a}else for(;b.next();)if(a=b.value,a.Xc&&a.ea!==this)return a;return null};
E.prototype.findTreeParentNode=E.prototype.km=function(){var a=this.Fk;if(null===a)return null;if(a instanceof E)return a;var b=!0,a=this.g;null!==a&&(b=a.ae);a=this.xc.j;if(b)for(;a.next();){if(b=a.value,b.Xc&&(b=b.aa,b!==this))return this.Fk=b}else for(;a.next();)if(b=a.value,b.Xc&&(b=b.ea,b!==this))return this.Fk=b;return this.Fk=null};E.prototype.findTreeParentChain=function(){function a(b,d){if(null!==b){d.add(b);var e=b.Pn();null!==e&&(d.add(e),a(b.km(),d))}}var b=new K(D);a(this,b);return b};
E.prototype.findTreeLevel=function(){return zr(this,this)};function zr(a,b){var c=b.km();return null===c?0:1+zr(a,c)}E.prototype.findTreeChildrenLinks=E.prototype.Fx=function(){var a=!0,b=this.g;null!==b&&(a=b.ae);var b=new Va(this.xc),c=this;b.Gq=a?function(a){return a.Xc&&a.aa===c?!0:!1}:function(a){return a.Xc&&a.ea===c?!0:!1};return b};
E.prototype.findTreeChildrenNodes=E.prototype.iF=function(){var a=!0,b=this.g;null!==b&&(a=b.ae);var c=b=null,d=this.xc.j;if(a)for(;d.next();)a=d.value,a.Xc&&a.aa===this&&(a=a.ea,null!==b?b.add(a):null!==c&&c!==a?(b=new J(E),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.Xc&&a.ea===this&&(a=a.aa,null!==b?b.add(a):null!==c&&c!==a?(b=new J(E),b.add(c),b.add(a)):c=a);return null!==b?b.j:null!==c?new Qa(c):Na};
E.prototype.findTreeParts=function(a){void 0===a&&(a=Infinity);z.h(a,"number",E,"findTreeParts:level");var b=new K(D);Lh(b,this,!1,a,!0);return b};E.prototype.collapseTree=E.prototype.collapseTree=function(a){void 0===a&&(a=1);z.p(a,E,"collapseTree:level");1>a&&(a=1);var b=this.g;if(null!==b&&!b.Nh){b.Nh=!0;var c=new K(E);c.add(this);Ar(this,c,b.ae,a,b.Ya,this,b.OB===zl);b.Nh=!1}};
function Ar(a,b,c,d,e,g,h){if(1<d)for(var k=c?a.Dx():a.Ug();k.next();){var l=k.value;l.Xc&&(l=l.JA(a),null===l||l===a||b.contains(l)||(b.add(l),Ar(l,b,c,d-1,e,g,h)))}else Br(a,b,c,e,g,h)}function Br(a,b,c,d,e,g){for(var h=e===a?!0:a.ud,k=c?a.Dx():a.Ug();k.next();){var l=k.value;l.Xc&&(l=l.JA(a),null===l||l===a||b.contains(l)||(b.add(l),h&&(g&&ll(d,l,e),l.pm(),l.Kd(!1)),l.ud&&(l.ev=l.ud,Br(l,b,c,d,e,g))))}a.ud=!1}
E.prototype.expandTree=E.prototype.expandTree=function(a){void 0===a&&(a=2);z.p(a,E,"expandTree:level");2>a&&(a=2);var b=this.g;if(null!==b&&!b.Nh){b.Nh=!0;var c=new K(E);c.add(this);Cr(this,c,b.ae,a,b.Ya,this,b.OB===zl);b.Nh=!1}};function Cr(a,b,c,d,e,g,h){for(var k=g===a?!1:a.ud,l=c?a.Dx():a.Ug();l.next();){var m=l.value;m.Xc&&(k||m.kh||m.gc(),m=m.JA(a),null!==m&&m!==a&&!b.contains(m)&&(b.add(m),k||(m.Kd(!0),m.pm(),h&&kl(e,m,g)),2<d||m.ev))&&(m.ev=!1,Cr(m,b,c,d-1,e,g,h))}a.ud=!0}
z.defineProperty(E,{ud:"isTreeExpanded"},function(){return 0!==(this.Ha&1)},function(a){var b=0!==(this.Ha&1);if(b!==a){u&&z.h(a,"boolean",E,"isTreeExpanded");this.Ha^=1;var c=this.g;this.i("isTreeExpanded",b,a);b=this.AK;if(null!==b){var d=!0;null!==c&&(d=c.ab,c.ab=!0);b(this);null!==c&&(c.ab=d)}null!==c&&c.sa.lb?this.Kd(a):a?this.expandTree():this.collapseTree()}});
z.defineProperty(E,{ev:"wasTreeExpanded"},function(){return 0!==(this.Ha&2)},function(a){var b=0!==(this.Ha&2);b!==a&&(u&&z.h(a,"boolean",E,"wasTreeExpanded"),this.Ha^=2,this.i("wasTreeExpanded",b,a))});z.defineProperty(E,{AK:"treeExpandedChanged"},function(){return this.Gt},function(a){var b=this.Gt;b!==a&&(null!==a&&z.h(a,"function",E,"treeExpandedChanged"),this.Gt=a,this.i("treeExpandedChanged",b,a))});
z.defineProperty(E,{Ij:"isTreeLeaf"},function(){return 0!==(this.Ha&4)},function(a){var b=0!==(this.Ha&4);b!==a&&(u&&z.h(a,"boolean",E,"isTreeLeaf"),this.Ha^=4,this.i("isTreeLeaf",b,a))});
function H(){D.call(this,kj);this.ec=8;this.yg=null;this.ci="";this.Og=this.Tr=null;this.xi="";this.Ft=null;this.dr=nj;this.vr=0;this.yr=nj;this.zr=NaN;this.kn=Dr;this.st=.5;this.af=null;this.dd=(new J(M)).freeze();this.oh=this.GC=this.AC=this.Mi=this.Yi=this.nb=this.Cw=this.Fp=this.cf=null;this.Zz=new M;this.Y=this.ZD=this.YD=null}z.Ta(H,D);z.ka("Link",H);
H.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a);a.ec=this.ec&-113;a.ci=this.ci;a.Tr=this.Tr;a.xi=this.xi;a.Ft=this.Ft;a.dr=this.dr;a.vr=this.vr;a.yr=this.yr;a.zr=this.zr;a.kn=this.kn;a.st=this.st;null!==this.Y&&(a.Y=this.Y.copy())};H.prototype.Bi=function(a){D.prototype.Bi.call(this,a);this.ci=a.ci;this.xi=a.xi;a.cf=null;a.gc();a.Mi=this.Mi};
H.prototype.pc=function(a){a.Pe===H?2===(a.value&2)?this.ty=a:a===Dj||a===mj||a===lj?this.hf=a:a===Er||a===Fr||a===Gr?this.Ot=a:a!==Dr&&a!==nj&&z.k("Unknown Link enum value for a Link property: "+a):D.prototype.pc.call(this,a)};var Dr;H.Normal=Dr=z.s(H,"Normal",1);H.Orthogonal=z.s(H,"Orthogonal",2);H.AvoidsNodes=z.s(H,"AvoidsNodes",6);var Hr;H.AvoidsNodesStraight=Hr=z.s(H,"AvoidsNodesStraight",7);var nj;H.None=nj=z.s(H,"None",0);var Dj;H.Bezier=Dj=z.s(H,"Bezier",9);var mj;
H.JumpGap=mj=z.s(H,"JumpGap",10);var lj;H.JumpOver=lj=z.s(H,"JumpOver",11);var Er;H.End=Er=z.s(H,"End",17);var Fr;H.Scale=Fr=z.s(H,"Scale",18);var Gr;H.Stretch=Gr=z.s(H,"Stretch",19);var oq;H.OrientAlong=oq=z.s(H,"OrientAlong",21);var Pp;H.OrientPlus90=Pp=z.s(H,"OrientPlus90",22);var Rp;H.OrientMinus90=Rp=z.s(H,"OrientMinus90",23);var Hq;H.OrientOpposite=Hq=z.s(H,"OrientOpposite",24);var Iq;H.OrientUpright=Iq=z.s(H,"OrientUpright",25);var Qp;H.OrientPlus90Upright=Qp=z.s(H,"OrientPlus90Upright",26);
var Sp;H.OrientMinus90Upright=Sp=z.s(H,"OrientMinus90Upright",27);var Tp;H.OrientUpright45=Tp=z.s(H,"OrientUpright45",28);f=H.prototype;f.Xd=function(){null===this.Y&&(this.Y=new wo)};f.sm=function(){var a=this.aa;if(null!==a){var b=a.findVisibleNode();null!==b&&(a=b);if(Dm(a)||Em(a))return!1}a=this.ea;return null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),Dm(a)||Em(a))?!1:!0};f.BB=function(){return!1};f.CB=function(){};f.qe=function(){return!1};
H.prototype.computeAngle=function(a,b,c){a=0;switch(b){default:case nj:a=0;break;case oq:a=c;break;case Pp:a=c+90;break;case Rp:a=c-90;break;case Hq:a=c+180;break;case Iq:a=Re(c);90<a&&270>a&&(a-=180);break;case Qp:a=Re(c+90);90<a&&270>a&&(a-=180);break;case Sp:a=Re(c-90);90<a&&270>a&&(a-=180);break;case Tp:a=Re(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return Re(a)};
z.defineProperty(H,{aa:"fromNode"},function(){return this.yg},function(a){var b=this.yg;if(b!==a){u&&null!==a&&z.l(a,E,H,"fromNode");var c=this.gd;null!==b&&(this.Og!==b&&xr(b,this,c),Ir(this),this.N(Um));this.yg=a;null!==a&&this.Kd(a.isVisible());this.Yi=null;this.gc();var d=this.g;if(null!==d){var e=this.data,g=d.ia;if(null!==e)if(g instanceof X){var h=null!==a?a.data:null;g.xB(e,g.Cb(h))}else g instanceof Cg&&(h=null!==a?a.data:null,d.ae?g.Hi(e,g.Cb(h)):(null!==b&&g.Hi(b.data,void 0),g.Hi(h,g.Cb(null!==
this.Og?this.Og.data:null))))}e=this.gd;g=this.lF;null!==g&&(h=!0,null!==d&&(h=d.ab,d.ab=!0),g(this,c,e),null!==d&&(d.ab=h));null!==a&&(this.Og!==a&&wr(a,this,e),Jr(this),this.N(Lm));this.i("fromNode",b,a);pn(this)}});
z.defineProperty(H,{dg:"fromPortId"},function(){return this.ci},function(a){var b=this.ci;if(b!==a){u&&z.h(a,"string",H,"fromPortId");var c=this.gd;null!==c&&vr(this.aa,c);Ir(this);this.ci=a;var d=this.gd;null!==d&&vr(this.aa,d);var e=this.g;if(null!==e){var g=this.data,h=e.ia;null!==g&&h instanceof X&&h.yB(g,a)}c!==d&&(this.Yi=null,this.gc(),g=this.lF,null!==g&&(h=!0,null!==e&&(h=e.ab,e.ab=!0),g(this,c,d),null!==e&&(e.ab=h)));Jr(this);this.i("fromPortId",b,a)}});
z.w(H,{gd:"fromPort"},function(){var a=this.yg;return null===a?null:a.im(this.ci)});z.defineProperty(H,{lF:"fromPortChanged"},function(){return this.Tr},function(a){var b=this.Tr;b!==a&&(null!==a&&z.h(a,"function",H,"fromPortChanged"),this.Tr=a,this.i("fromPortChanged",b,a))});
z.defineProperty(H,{ea:"toNode"},function(){return this.Og},function(a){var b=this.Og;if(b!==a){u&&null!==a&&z.l(a,E,H,"toNode");var c=this.Nd;null!==b&&(this.yg!==b&&xr(b,this,c),Ir(this),this.N(Um));this.Og=a;null!==a&&this.Kd(a.isVisible());this.Yi=null;this.gc();var d=this.g;if(null!==d){var e=this.data,g=d.ia;if(null!==e)if(g instanceof X){var h=null!==a?a.data:null;g.DB(e,g.Cb(h))}else g instanceof Cg&&(h=null!==a?a.data:null,d.ae?(null!==b&&g.Hi(b.data,void 0),g.Hi(h,g.Cb(null!==this.yg?this.yg.data:
null))):g.Hi(e,g.Cb(h)))}e=this.Nd;g=this.RG;null!==g&&(h=!0,null!==d&&(h=d.ab,d.ab=!0),g(this,c,e),null!==d&&(d.ab=h));null!==a&&(this.yg!==a&&wr(a,this,e),Jr(this),this.N(Lm));this.i("toNode",b,a);pn(this)}});
z.defineProperty(H,{ih:"toPortId"},function(){return this.xi},function(a){var b=this.xi;if(b!==a){u&&z.h(a,"string",H,"toPortId");var c=this.Nd;null!==c&&vr(this.ea,c);Ir(this);this.xi=a;var d=this.Nd;null!==d&&vr(this.ea,d);var e=this.g;if(null!==e){var g=this.data,h=e.ia;null!==g&&h instanceof X&&h.EB(g,a)}c!==d&&(this.Yi=null,this.gc(),g=this.RG,null!==g&&(h=!0,null!==e&&(h=e.ab,e.ab=!0),g(this,c,d),null!==e&&(e.ab=h)));Jr(this);this.i("toPortId",b,a)}});
z.w(H,{Nd:"toPort"},function(){var a=this.Og;return null===a?null:a.im(this.xi)});z.defineProperty(H,{RG:"toPortChanged"},function(){return this.Ft},function(a){var b=this.Ft;b!==a&&(null!==a&&z.h(a,"function",H,"toPortChanged"),this.Ft=a,this.i("toPortChanged",b,a))});z.defineProperty(H,{Gb:"fromSpot"},function(){return null!==this.Y?this.Y.fk:Rc},function(a){this.Xd();var b=this.Y.fk;b.O(a)||(u&&z.l(a,R,H,"fromSpot"),a=a.V(),this.Y.fk=a,this.i("fromSpot",b,a),this.gc())});
z.defineProperty(H,{lm:"fromEndSegmentLength"},function(){return null!==this.Y?this.Y.dk:NaN},function(a){this.Xd();var b=this.Y.dk;b!==a&&(u&&z.h(a,"number",H,"fromEndSegmentLength"),0>a&&z.wa(a,">= 0",H,"fromEndSegmentLength"),this.Y.dk=a,this.i("fromEndSegmentLength",b,a),this.gc())});
z.defineProperty(H,{ju:"fromEndSegmentDirection"},function(){return null!==this.Y?this.Y.ck:qr},function(a){this.Xd();var b=this.Y.ck;b!==a&&(z.Nn("Link.fromEndSegmentDirection","2.0"),u&&z.Ca(a,E,H,"fromEndSegmentDirection"),this.Y.ck=a,this.i("fromEndSegmentDirection",b,a),this.gc())});
z.defineProperty(H,{ku:"fromShortLength"},function(){return null!==this.Y?this.Y.ek:NaN},function(a){this.Xd();var b=this.Y.ek;b!==a&&(u&&z.h(a,"number",H,"fromShortLength"),this.Y.ek=a,this.i("fromShortLength",b,a),this.gc())});z.defineProperty(H,{Hb:"toSpot"},function(){return null!==this.Y?this.Y.Ek:Rc},function(a){this.Xd();var b=this.Y.Ek;b.O(a)||(u&&z.l(a,R,H,"toSpot"),a=a.V(),this.Y.Ek=a,this.i("toSpot",b,a),this.gc())});
z.defineProperty(H,{Bm:"toEndSegmentLength"},function(){return null!==this.Y?this.Y.Ck:NaN},function(a){this.Xd();var b=this.Y.Ck;b!==a&&(u&&z.h(a,"number",H,"toEndSegmentLength"),0>a&&z.wa(a,">= 0",H,"toEndSegmentLength"),this.Y.Ck=a,this.i("toEndSegmentLength",b,a),this.gc())});
z.defineProperty(H,{bv:"toEndSegmentDirection"},function(){return null!==this.Y?this.Y.Bk:qr},function(a){this.Xd();var b=this.Y.Bk;b!==a&&(z.Nn("Link.toEndSegmentDirection","2.0"),u&&z.Ca(a,E,H,"toEndSegmentDirection"),this.Y.Bk=a,this.i("toEndSegmentDirection",b,a),this.gc())});z.defineProperty(H,{cv:"toShortLength"},function(){return null!==this.Y?this.Y.Dk:NaN},function(a){this.Xd();var b=this.Y.Dk;b!==a&&(u&&z.h(a,"number",H,"toShortLength"),this.Y.Dk=a,this.i("toShortLength",b,a),this.gc())});
function pn(a){var b=a.aa,c=a.ea;null!==b?null!==c?Kr(a,b.BI(c)):Kr(a,null):Kr(a,null)}function Kr(a,b){var c=a.ql;if(c!==b){null!==c&&kr(c,a);a.ql=b;null!==b&&lr(b,a);var d=a.IE;if(null!==d){var e=!0,g=a.g;null!==g&&(e=g.ab,g.ab=!0);d(a,c,b);null!==g&&(g.ab=e)}!a.kh||a.YD!==c&&a.ZD!==c||a.gc()}}H.prototype.pm=function(){var a=this.Qa;null!==a&&this.aa!==a&&this.ea!==a&&a.px&&D.prototype.pm.call(this)};
H.prototype.getOtherNode=H.prototype.JA=function(a){u&&z.l(a,E,H,"getOtherNode:node");var b=this.aa;return a===b?this.ea:b};H.prototype.getOtherPort=function(a){u&&z.l(a,O,H,"getOtherPort:port");var b=this.gd;return a===b?this.Nd:b};z.w(H,{NL:"isLabeledLink"},function(){return null===this.af?!1:0<this.af.count});z.w(H,{Kf:"labelNodes"},function(){return null===this.af?Na:this.af.j});function yr(a,b){null===a.af&&(a.af=new K(E));a.af.add(b);a.K()}
H.prototype.ou=function(a){D.prototype.ou.call(this,a);Lr(this)&&oj(this,this.Z);a||(a=this.yg,null!==a&&wr(a,this,this.gd),a=this.Og,null!==a&&wr(a,this,this.Nd),Jr(this))};H.prototype.pu=function(a){D.prototype.pu.call(this,a);Lr(this)&&oj(this,this.Z);a||(a=this.yg,null!==a&&xr(a,this,this.gd),a=this.Og,null!==a&&xr(a,this,this.Nd),Ir(this))};
H.prototype.Mn=function(){this.kh=!0;if(null!==this.af){var a=this.g;if(null!==a)for(var b=this.af.copy().j;b.next();)a.remove(b.value)}b=this.data;null!==b&&(a=this.g,null!==a&&(a=a.ia,a instanceof X?a.py(b):a instanceof Cg&&a.Hi(b,void 0)))};
H.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.ia;if(c instanceof X){var d=c.mm(a);this.aa=d=b.Re(d);d=c.nm(a);this.ea=d=b.Re(d);a=c.Rk(a);if(0<a.length||0<this.Kf.count){if(1===a.length&&1===this.Kf.count){var d=a[0],e=this.Kf.first();if(c.Cb(e.data)===d)return}var d=(new K).Uc(a),g=new K;this.Kf.each(function(a){null!==a.data&&(a=c.Cb(a.data),void 0!==a&&g.add(a))});a=g.copy();a.oy(d);d=d.copy();d.oy(g);if(0<a.count||0<d.count){var h=
this;a.each(function(a){a=b.Re(a);null!==a&&a.Cc===h&&(a.Cc=null)});d.each(function(a){a=b.Re(a);null!==a&&a.Cc!==h&&(a.Cc=h)})}}}}}};H.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;D.prototype.move.call(this,a);this.um(c,b);for(a=this.Kf;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};
z.defineProperty(H,{WJ:"relinkableFrom"},function(){return 0!==(this.ec&1)},function(a){var b=0!==(this.ec&1);b!==a&&(u&&z.h(a,"boolean",H,"relinkableFrom"),this.ec^=1,this.i("relinkableFrom",b,a),this.pe())});z.defineProperty(H,{XJ:"relinkableTo"},function(){return 0!==(this.ec&2)},function(a){var b=0!==(this.ec&2);b!==a&&(u&&z.h(a,"boolean",H,"relinkableTo"),this.ec^=2,this.i("relinkableTo",b,a),this.pe())});
H.prototype.canRelinkFrom=function(){if(!this.WJ)return!1;var a=this.layer;if(null===a)return!0;if(!a.Cn)return!1;a=a.g;return null===a||a.Cn?!0:!1};H.prototype.canRelinkTo=function(){if(!this.XJ)return!1;var a=this.layer;if(null===a)return!0;if(!a.Cn)return!1;a=a.g;return null===a||a.Cn?!0:!1};z.defineProperty(H,{Ru:"resegmentable"},function(){return 0!==(this.ec&4)},function(a){var b=0!==(this.ec&4);b!==a&&(u&&z.h(a,"boolean",H,"resegmentable"),this.ec^=4,this.i("resegmentable",b,a),this.pe())});
z.defineProperty(H,{Xc:"isTreeLink"},function(){return 0!==(this.ec&8)},function(a){var b=0!==(this.ec&8);b!==a&&(u&&z.h(a,"boolean",H,"isTreeLink"),this.ec^=8,this.i("isTreeLink",b,a),null!==this.aa&&Bn(this.aa),null!==this.ea&&Bn(this.ea))});z.w(H,{path:"path"},function(){var a=this.Wd();return a instanceof Y?a:null});
z.w(H,{mo:"routeBounds"},function(){this.uo();var a=new w;var b=Infinity,c=Infinity,d=this.ua;if(0===d)a.m(NaN,NaN,0,0);else{if(1===d)d=this.n(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.m(d.x,d.y,0,0);else if(2===d){var e=this.n(0),g=this.n(1),b=Math.min(e.x,g.x),c=Math.min(e.y,g.y);a.m(e.x,e.y,0,0);a.Ki(g)}else if(this.computeCurve()===Dj&&3<=d&&!this.tc)if(e=this.n(0),b=e.x,c=e.y,a.m(b,c,0,0),3===d)d=this.n(1),b=Math.min(d.x,b),c=Math.min(d.y,c),g=this.n(2),b=Math.min(g.x,b),c=Math.min(g.y,c),xe(e.x,
e.y,d.x,d.y,d.x,d.y,g.x,g.y,.5,a);else for(var h=3;h<d;h+=3){var k=this.n(h-2);h+3>=d&&(h=d-1);var l=this.n(h-1),g=this.n(h);xe(e.x,e.y,k.x,k.y,l.x,l.y,g.x,g.y,.5,a);b=Math.min(g.x,b);c=Math.min(g.y,c);e=g}else for(e=this.n(0),g=this.n(1),b=Math.min(e.x,g.x),c=Math.min(e.y,g.y),a.m(e.x,e.y,0,0),a.Ki(g),h=2;h<d;h++)e=this.n(h),b=Math.min(e.x,b),c=Math.min(e.y,c),a.Ki(e);this.Zz.m(b-a.x,c-a.y)}return this.Cw=a});z.w(H,{WF:"midPoint"},function(){this.uo();return this.computeMidPoint(new M)});
H.prototype.computeMidPoint=function(a){var b=this.ua;if(0===b)return a.assign(he),a;if(1===b)return a.assign(this.n(0)),a;if(2===b){var c=this.n(0),d=this.n(1);a.m((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===Dj&&3<=b&&!this.tc){if(3===b)return this.n(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=this.n(e),d=this.n(e+1),g=this.n(e+2),e=this.n(e+3),b=d.x,h=d.y,d=g.x,k=g.y,g=(b+d)/2,l=(h+k)/2,h=((c.y+h)/2+l)/2,k=(l+(k+e.y)/2)/2;a.x=(((c.x+b)/2+g)/2+(g+(d+e.x)/2)/2)/2;a.y=(h+k)/2}else a.assign(this.n(e));
return a}e=0;g=z.tb();for(h=0;h<b-1;h++)c=0,c=this.n(h),d=this.n(h+1),Db(c.x,d.x)?(c=d.y-c.y,0>c&&(c=-c)):Db(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Ef(d)),g.push(c),e+=c;for(d=h=c=0;c<e/2&&h<b;){d=g[h];if(c+d>e/2)break;c+=d;h++}z.Ba(g);b=this.n(h);g=this.n(h+1);b.x===g.x?b.y>g.y?a.m(b.x,b.y-(e/2-c)):a.m(b.x,b.y+(e/2-c)):b.y===g.y?b.x>g.x?a.m(b.x-(e/2-c),b.y):a.m(b.x+(e/2-c),b.y):(c=(e/2-c)/d,a.m(b.x+c*(g.x-b.x),b.y+c*(g.y-b.y)));return a};z.w(H,{VF:"midAngle"},function(){this.uo();return this.computeMidAngle()});
H.prototype.computeMidAngle=function(){var a=this.ua;if(2>a)return NaN;if(this.computeCurve()===Dj&&4<=a&&!this.tc){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),b=this.n(c),d=this.n(c+1),a=this.n(c+2),c=this.n(c+3),e=d.x,d=d.y,g=a.x,a=a.y,h=(e+g)/2,k=(d+a)/2;return zb(((b.x+e)/2+h)/2,((b.y+d)/2+k)/2,(h+(g+c.x)/2)/2,(k+(a+c.y)/2)/2)}if(0<c&&c+1<a)return b=this.n(c-1),d=this.n(c+1),b.Lc(d)}c=a/2|0;if(0===a%2)return b=this.n(c-1),d=this.n(c),4<=a&&b.Vc(d)&&(b=this.n(c-2),a=this.n(c+1),
c=b.Ef(d),e=d.Ef(a),!(c>e+10))?e>c+10?d.Lc(a):b.Lc(a):b.Lc(d);b=this.n(c-1);d=this.n(c);a=this.n(c+1);c=b.Ef(d);e=d.Ef(a);return c>e+10?b.Lc(d):e>c+10?d.Lc(a):b.Lc(a)};
z.defineProperty(H,{points:"points"},function(){return this.dd},function(a){var b=this.dd;if(b!==a){var c=null;if(Array.isArray(a)){var d=0===a.length%2;if(d)for(var e=0;e<a.length;e++)if("number"!==typeof a[e]||isNaN(a[e])){d=!1;break}if(d)for(c=new J(M),d=0;d<a.length/2;d++)e=(new M(a[2*d],a[2*d+1])).freeze(),c.add(e);else{for(var g=!0,d=0;d<a.length;d++)if(e=a[d],!z.Xa(e)||"number"!==typeof e.x||isNaN(e.x)||"number"!==typeof e.y||isNaN(e.y)){g=!1;break}if(g)for(c=new J(M),d=0;d<a.length;d++)e=
a[d],c.add((new M(e.x,e.y)).freeze());else z.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+a)}}else if(a instanceof J)for(c=a.copy(),a=c.j;a.next();)a.value.freeze();else z.k("Link.points value is not an instance of List or Array: "+a);c.freeze();this.dd=c;this.Se();this.K();Mr(this);a=this.g;null!==a&&(a.Zn||a.sa.lb||a.$x.add(this),a.Ya.yc&&(this.Fp=c));this.i("points",b,c)}});z.w(H,{ua:"pointsCount"},function(){return this.dd.count});
H.prototype.getPoint=H.prototype.n=function(a){return this.dd.o[a]};H.prototype.setPoint=H.prototype.dh=function(a,b){u&&(z.l(b,M,H,"setPoint"),b.F()||z.k("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.bh(a,b)};
H.prototype.setPointAt=H.prototype.ja=function(a,b,c){u&&(z.p(b,H,"setPointAt:x"),z.p(c,H,"setPointAt:y"));null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.bh(a,new M(b,c))};H.prototype.insertPoint=function(a,b){u&&(z.l(b,M,H,"insertPoint"),b.F()||z.k("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.Yd(a,b)};
H.prototype.insertPointAt=H.prototype.B=function(a,b,c){u&&(z.p(b,H,"insertPointAt:x"),z.p(c,H,"insertPointAt:y"));null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.Yd(a,new M(b,c))};H.prototype.addPoint=H.prototype.zi=function(a){u&&(z.l(a,M,H,"addPoint"),a.F()||z.k("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.add(a)};
H.prototype.addPointAt=H.prototype.Ul=function(a,b){u&&(z.p(a,H,"insertPointAt:x"),z.p(b,H,"insertPointAt:y"));null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.add(new M(a,b))};H.prototype.removePoint=H.prototype.kG=function(a){null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.md(a)};
H.prototype.clearPoints=H.prototype.$p=function(){null===this.cf&&z.k("Call Link.startRoute before modifying the points of the route.");this.dd.clear()};H.prototype.movePoints=H.prototype.um=function(a,b){for(var c=new J(M),d=this.dd.j;d.next();){var e=d.value;c.add((new M(e.x+a,e.y+b)).freeze())}c.freeze();d=this.dd;this.dd=c;this.K();Mr(this);e=this.g;null!==e&&e.Ya.yc&&(this.Fp=c);this.i("points",d,c)};H.prototype.startRoute=H.prototype.xm=function(){null===this.cf&&(this.cf=this.dd,this.dd=this.dd.copy())};
H.prototype.commitRoute=H.prototype.yj=function(){if(null!==this.cf){for(var a=this.cf,b=this.dd,c=Infinity,d=Infinity,e=a.o,g=e.length,h=0;h<g;h++)var k=e[h],c=Math.min(k.x,c),d=Math.min(k.y,d);for(var l=Infinity,m=Infinity,n=b.o,p=n.length,h=0;h<p;h++)k=n[h],l=Math.min(k.x,l),m=Math.min(k.y,m),k.freeze();b.freeze();if(p===g)for(h=0;h<p;h++){if(g=e[h],k=n[h],g.x-c!==k.x-l||g.y-d!==k.y-m){this.K();this.Se();break}}else this.K(),this.Se();this.cf=null;c=this.g;null!==c&&c.Ya.yc&&(this.Fp=b);Mr(this);
this.i("points",a,b)}};H.prototype.rollbackRoute=H.prototype.aK=function(){null!==this.cf&&(this.dd=this.cf,this.cf=null)};function Mr(a){0===a.dd.count?a.kh=!1:(a.kh=!0,a.dq=a.n(0),a.eq=a.n(a.ua-1),Nr(a,!1))}H.prototype.invalidateRoute=H.prototype.gc=function(){if(!this.Sj){var a=this.g;a&&(a.$x.contains(this)||a.sa.lb||a.Ya.jJ&&!a.Ya.wf)||(a=this.path,null!==a&&(this.kh=!1,this.K(),a.K()))}};
z.defineProperty(H,{kh:null},function(){return 0!==(this.ec&16)},function(a){0!==(this.ec&16)!==a&&(this.ec^=16)});z.defineProperty(H,{Sj:"suspendsRouting"},function(){return 0!==(this.ec&32)},function(a){0!==(this.ec&32)!==a&&(this.ec^=32)});z.defineProperty(H,{nA:null},function(){return 0!==(this.ec&64)},function(a){0!==(this.ec&64)!==a&&(this.ec^=64)});z.defineProperty(H,{dq:"defaultFromPoint"},function(){return this.AC},function(a){this.AC=a.copy()});
z.defineProperty(H,{eq:"defaultToPoint"},function(){return this.GC},function(a){this.GC=a.copy()});H.prototype.updateRoute=H.prototype.uo=function(){if(!this.kh&&!this.nA){var a=!0;try{this.nA=!0,this.xm(),a=this.computePoints()}finally{this.nA=!1,a?this.yj():this.aK()}}};
H.prototype.computePoints=function(){var a=this.g;if(null===a)return!1;var b=this.aa,c=null;null===b?(a.ln||(a.Dw=new Y,a.Dw.Da=Sd,a.Dw.mb=0,a.ln=new E,a.ln.add(a.Dw),a.ln.kf()),this.dq&&(a.ln.position=a.ln.location=this.dq,a.ln.kf(),b=a.ln,c=a.Dw)):c=this.gd;if(null!==c&&!b.isVisible()){var d=b.findVisibleNode();null!==d&&d!==b?(b=d,c=d.im("")):b=d}this.YD=b;if(null===b||!b.location.F())return!1;for(;!(null===c||c.Z.F()&&c.Jj());)c=c.Q;if(null===c)return!1;var e=this.ea,g=null;null===e?(a.mn||(a.Ew=
new Y,a.Ew.Da=Sd,a.Ew.mb=0,a.mn=new E,a.mn.add(a.Ew),a.mn.kf()),this.eq&&(a.mn.position=a.mn.location=this.eq,a.mn.kf(),e=a.mn,g=a.Ew)):g=this.Nd;null===g||e.isVisible()||(a=e.findVisibleNode(),null!==a&&a!==e?(e=a,g=a.im("")):e=a);this.ZD=e;if(null===e||!e.location.F())return!1;for(;!(null===g||g.Z.F()&&g.Jj());)g=g.Q;if(null===g)return!1;var h=this.ua,d=Or(this,c),a=Pr(this,g),k=d===gc,l=a===gc,m=c===g&&null!==c,n=this.tc,p=this.hf===Dj;this.Yi=m&&!n?p=!0:!1;var q=this.Ot===nj||m;if(!n&&!m&&k&&
l){if(k=!1,!q&&3<=h&&(q=this.getLinkPoint(b,c,d,!0,!1,e,g),l=this.getLinkPoint(e,g,a,!1,!1,b,c),k=this.adjustPoints(0,q,h-1,l))&&(q=this.getLinkPoint(b,c,d,!0,!1,e,g),l=this.getLinkPoint(e,g,a,!1,!1,b,c),this.adjustPoints(0,q,h-1,l)),!k)if(this.$p(),p){var h=this.getLinkPoint(b,c,d,!0,!1,e,g),q=this.getLinkPoint(e,g,a,!1,!1,b,c),k=q.x-h.x,l=q.y-h.y,m=this.computeCurviness(),p=n=0,r=h.x+k/3,s=h.y+l/3,v=r,t=s;Q(l,0)?t=0<k?t-m:t+m:(n=-k/l,p=Math.sqrt(m*m/(n*n+1)),0>m&&(p=-p),v=(0>l?-1:1)*p+r,t=n*(v-
r)+s);var r=h.x+2*k/3,s=h.y+2*l/3,x=r,y=s;Q(l,0)?y=0<k?y-m:y+m:(x=(0>l?-1:1)*p+r,y=n*(x-r)+s);this.$p();this.zi(h);this.Ul(v,t);this.Ul(x,y);this.zi(q);this.dh(0,this.getLinkPoint(b,c,d,!0,!1,e,g));this.dh(3,this.getLinkPoint(e,g,a,!1,!1,b,c))}else d=this.getLinkPoint(b,c,d,!0,!1,e,g),a=this.getLinkPoint(e,g,a,!1,!1,b,c),this.hasCurviness()?(q=a.x-d.x,e=a.y-d.y,g=this.computeCurviness(),b=d.x+q/2,c=d.y+e/2,h=b,k=c,Q(e,0)?k=0<q?k-g:k+g:(q=-q/e,h=Math.sqrt(g*g/(q*q+1)),0>g&&(h=-h),h=(0>e?-1:1)*h+b,
k=q*(h-b)+c),this.zi(d),this.Ul(h,k)):this.zi(d),this.zi(a)}else{p=this.Di;q&&(n&&p||m)&&this.$p();var B=m?this.computeCurviness():0,p=this.getLinkPoint(b,c,d,!0,n,e,g),r=v=s=0;if(n||!k||m)if(t=this.computeEndSegmentLength(b,c,d,!0),r=this.getLinkDirection(b,c,p,d,!0,n,e,g),m&&(k||d.O(a)||!n&&1===d.x+a.x&&1===d.y+a.y)&&(r-=n?90:30,0>B&&(r-=180)),0>r?r+=360:360<=r&&(r-=360),m&&(t+=Math.abs(B)*(n?1:2)),0===r?s=t:90===r?v=t:180===r?s=-t:270===r?v=-t:(s=t*Math.cos(r*Math.PI/180),v=t*Math.sin(r*Math.PI/
180)),d.$d()&&m){var A=c.cb(mc,z.P()),N=z.Fb(A.x+1E3*s,A.y+1E3*v);this.getLinkPointFromPoint(b,c,A,N,!0,p);z.A(A);z.A(N)}var t=this.getLinkPoint(e,g,a,!1,n,b,c),G=y=x=0;if(n||!l||m)A=this.computeEndSegmentLength(e,g,a,!1),G=this.getLinkDirection(e,g,t,a,!1,n,b,c),m&&(l||d.O(a)||!n&&1===d.x+a.x&&1===d.y+a.y)&&(G+=n?0:30,0>B&&(G+=180)),0>G?G+=360:360<=G&&(G-=360),m&&(A+=Math.abs(B)*(n?1:2)),0===G?x=A:90===G?y=A:180===G?x=-A:270===G?y=-A:(x=A*Math.cos(G*Math.PI/180),y=A*Math.sin(G*Math.PI/180)),a.$d()&&
m&&(A=g.cb(mc,z.P()),N=z.Fb(A.x+1E3*x,A.y+1E3*y),this.getLinkPointFromPoint(e,g,A,N,!1,t),z.A(A),z.A(N));a=p;if(n||!k||m)a=new M(p.x+s,p.y+v);d=t;if(n||!l||m)d=new M(t.x+x,t.y+y);!q&&!n&&k&&3<h&&this.adjustPoints(0,p,h-2,d)?this.dh(h-1,t):!q&&!n&&l&&3<h&&this.adjustPoints(1,a,h-1,t)?this.dh(0,p):!q&&(n?6<=h:4<h)&&this.adjustPoints(1,a,h-2,d)?(this.dh(0,p),this.dh(h-1,t)):(this.$p(),this.zi(p),(n||!k||m)&&this.zi(a),n&&this.addOrthoPoints(a,r,d,G,b,e),(n||!l||m)&&this.zi(d),this.zi(t))}return!0};
function Qr(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
H.prototype.getLinkPointFromPoint=function(a,b,c,d,e,g){void 0===g&&(g=new M);if(null===a||null===b)return g.assign(c),g;a.isVisible()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port));var h=e=0,k=0,l=0;a=null;e=b.Q;null===e||e.jh()||(e=e.Q);if(null===e)e=d.x,h=d.y,k=c.x,l=c.y;else{a=e.Gh;e=1/(a.m11*a.m22-a.m12*a.m21);var k=a.m22*e,l=-a.m12*e,m=-a.m21*e,n=a.m11*e,p=e*(a.m21*a.dy-a.m22*a.dx),q=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*k+d.y*m+p;h=d.x*l+d.y*n+q;k=c.x*k+c.y*m+p;l=c.x*l+c.y*n+q}b.Tn(e,h,k,l,
g);null!==a&&g.transform(a);return g};function Rr(a,b){var c=b.Vs;null===c&&(c=new Sr,c.port=b,c.Yc=b.ba,b.Vs=c);return Tr(c,a)}
H.prototype.getLinkPoint=function(a,b,c,d,e,g,h,k){void 0===k&&(k=new M);if(c.jd())return b.cb(c,k),k;if(c.Gj()){var l=Rr(this,b);if(null!==l){k.assign(l.xq);if(e&&this.ty===Hr){var m=Rr(this,h);if(null!==m&&l.Kn<m.Kn){var l=z.P(),m=z.P(),n=new w(b.cb(hc,l),b.cb(qc,m)),p=this.computeSpot(!d);a=this.getLinkPoint(g,h,p,!d,e,a,b,m);(c.Fj(sc)||c.Fj(xc))&&a.y>=n.y&&a.y<=n.y+n.height?k.y=a.y:(c.Fj(rc)||c.Fj(yc))&&a.x>=n.x&&a.x<=n.x+n.width&&(k.x=a.x);z.A(l);z.A(m)}}return k}}c=b.cb(mc,z.P());l=g=null;this.ua>
(e?6:2)?(l=d?this.n(1):this.n(this.ua-2),e&&(l=Qr(c,l.copy()))):(g=z.P(),l=h.cb(mc,g),e&&(l=Qr(c,l)),z.A(g));this.getLinkPointFromPoint(a,b,c,l,d,k);z.A(c);return k};
H.prototype.getLinkDirection=function(a,b,c,d,e,g,h,k){a:if(d.jd())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.Gj()){var l=Rr(this,b);if(null!==l)switch(l.Le){case z.xd:c=270;break a;case z.ad:c=180;break a;default:case z.od:c=0;break a;case z.nd:c=90;break a}}var l=b.cb(mc,z.P()),m=null,n=null;this.ua>(g?6:2)?(n=e?this.n(1):this.n(this.ua-2),n=g?Qr(l,n.copy()):c):(m=z.P(),n=k.cb(mc,m),z.A(m));c=0;c=Math.abs(n.x-l.x)>Math.abs(n.y-
l.y)?n.x>=l.x?0:180:n.y>=l.y?90:270;z.A(l)}d.$d()&&h.Ei(a)&&(c+=180,360<=c&&(c-=360));a=qr;a=e?this.ju:this.bv;a===qr&&(a=e?b.ju:b.bv);switch(a){case rr:b=b.Rn();c+=b;360<=c&&(c-=360);break;case qr:case xo:b=b.Rn();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};
H.prototype.computeEndSegmentLength=function(a,b,c,d){if(null!==b&&c.Gj()&&(a=Rr(this,b),null!==a))return a.zx;a=NaN;a=d?this.lm:this.Bm;null!==b&&isNaN(a)&&(a=d?b.lm:b.Bm);isNaN(a)&&(a=10);return a};H.prototype.computeSpot=function(a){return a?Or(this,this.gd):Pr(this,this.Nd)};function Or(a,b){if(null===b)return mc;var c=a.Gb;c.hd()&&null!==b&&(c=b.Gb);return c===Rc?gc:c}function Pr(a,b){if(null===b)return mc;var c=a.Hb;c.hd()&&null!==b&&(c=b.Hb);return c===Rc?gc:c}
H.prototype.computeOtherPoint=function(a,b){var c=b.cb(mc),d;d=b.Vs;d=null!==d?Tr(d,this):null;null!==d&&(c=d.xq);return c};H.prototype.computeShortLength=function(a){if(a){if(a=this.ku,isNaN(a)){var b=this.gd;null!==b&&(a=b.ku)}}else a=this.cv,isNaN(a)&&(b=this.Nd,null!==b&&(a=b.cv));return isNaN(a)?0:a};
H.prototype.Pk=function(a,b,c,d,e,g){if(!1===this.qg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=g;void 0===g&&(h=z.Pf(),h.reset());h.multiply(this.transform);if(this.Hn(a,h))return Zp(this,b,c,e),void 0===g&&z.Ie(h),!0;if(this.Vg(a,h)){var k=!1;if(!this.Yn)for(var l=this.va.o,m=l.length;m--;){var n=l[m];if(n.visible||n===this.cc){var p=n.Z,q=this.Ja;if(!(p.x>q.width||p.y>q.height||0>p.x+p.width||0>p.y+p.height)){p=z.Pf();p.set(h);if(n instanceof I)k=n.Pk(a,b,c,d,e,p);else if(this.path===
n){var k=n,r=a,s=d,q=p;if(!1===k.qg)k=!1;else if(q.multiply(k.transform),s)b:{var v=r,t=q;if(k.Hn(v,t))k=!0;else{if(void 0===t&&(t=k.transform,v.Lk(k.Z))){k=!0;break b}var q=v.left,r=v.right,s=v.top,v=v.bottom,x=z.P(),y=z.P(),B=z.P(),A=z.Pf();A.set(t);A.fB(k.transform);A.Mx();y.x=r;y.y=s;y.transform(A);x.x=q;x.y=s;x.transform(A);t=!1;lq(k,x,y,B)?t=!0:(x.x=r,x.y=v,x.transform(A),lq(k,x,y,B)?t=!0:(y.x=q,y.y=v,y.transform(A),lq(k,x,y,B)?t=!0:(x.x=q,x.y=s,x.transform(A),lq(k,x,y,B)&&(t=!0))));z.Ie(A);
z.A(x);z.A(y);z.A(B);k=t}}else k=k.Hn(r,q)}else k=Do(n,a,d,p);k&&(null!==b&&(n=b(n)),n&&(null===c||c(n))&&e.add(n));z.Ie(p)}}}void 0===g&&z.Ie(h);return k||null!==this.background||null!==this.Xl}void 0===g&&z.Ie(h);return!1};z.w(H,{tc:"isOrthogonal"},function(){return 2===(this.kn.value&2)});z.w(H,{Di:"isAvoiding"},function(){return 4===(this.kn.value&4)});H.prototype.computeCurve=function(){if(null===this.Yi){var a=this.gd,b=this.tc;this.Yi=null!==a&&a===this.Nd&&!b}return this.Yi?Dj:this.hf};
H.prototype.computeCorner=function(){if(this.hf===Dj)return 0;var a=this.sA;if(isNaN(a)||0>a)a=10;return a};H.prototype.findMidLabel=function(){for(var a=this.path,b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d];if(e!==a&&!e.If&&(-Infinity===e.Ue||isNaN(e.Ue)))return e}for(a=this.Kf;a.next();)if(b=a.value,-Infinity===b.Ue||isNaN(b.Ue))return b;return null};
H.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var a;a=Math.max(14,this.computeThickness());var b=this.gd,c=this.Nd;if(null!==b&&null!==c){var d=this.findMidLabel();if(null!==d){var e=d.Ja,g=d.margin,h=isNaN(e.width)?30:e.width*d.scale+g.left+g.right,e=isNaN(e.height)?14:e.height*d.scale+g.top+g.bottom,d=d.Pq;d===oq||d===Iq||d===Hq?a=Math.max(a,e):d===Rp||d===Sp||d===Pp||d===Qp?a=Math.max(a,h):(b=b.cb(mc).Lc(c.cb(mc))/180*Math.PI,a=Math.max(a,Math.abs(Math.sin(b)*h)+Math.abs(Math.cos(b)*
e)+1));this.hf===Dj&&(a*=1.333)}}return a};H.prototype.arrangeBundledLinks=function(a,b){if(b)for(var c=0;c<a.length;c++)a[c].gc()};H.prototype.computeCurviness=function(){var a=this.ux;if(isNaN(a)){var a=16,b=this.Mi;if(null!==b){for(var c=z.tb(),d=0,e=b.links,g=0;g<e.length;g++){var h=e[g],h=h.computeSpacing();c.push(h);d+=h}d=-d/2;for(g=0;g<e.length;g++){h=e[g];if(h===this){a=d+c[g]/2;break}d+=c[g]}b.Fq===this.aa&&(a=-a);z.Ba(c)}}return a};
H.prototype.computeThickness=function(){if(!this.isVisible())return 0;var a=this.path;return null!==a?Math.max(a.mb,1):1};H.prototype.hasCurviness=function(){return!isNaN(this.ux)||null!==this.Mi};
H.prototype.adjustPoints=function(a,b,c,d){var e=this.Ot;if(this.tc){if(e===Fr)return!1;e===Gr&&(e=Er)}switch(e){case Fr:var g=this.n(a),h=this.n(c);if(!g.Vc(b)||!h.Vc(d)){var e=g.x,g=g.y,k=h.x-e,l=h.y-g,m=Math.sqrt(k*k+l*l);if(!Db(m,0)){var n=0;Db(k,0)?n=0>l?-Math.PI/2:Math.PI/2:(n=Math.atan(l/Math.abs(k)),0>k&&(n=Math.PI-n));var h=b.x,p=b.y,l=d.x-h,q=d.y-p,r=Math.sqrt(l*l+q*q),k=0;Db(l,0)?k=0>q?-Math.PI/2:Math.PI/2:(k=Math.atan(q/Math.abs(l)),0>l&&(k=Math.PI-k));m=r/m;n=k-n;this.dh(a,b);for(a+=
1;a<c;a++)b=this.n(a),k=b.x-e,l=b.y-g,b=Math.sqrt(k*k+l*l),Db(b,0)||(q=0,Db(k,0)?q=0>l?-Math.PI/2:Math.PI/2:(q=Math.atan(l/Math.abs(k)),0>k&&(q=Math.PI-q)),k=q+n,b*=m,this.ja(a,h+b*Math.cos(k),p+b*Math.sin(k)));this.dh(c,d)}}return!0;case Gr:g=this.n(a);p=this.n(c);if(!g.Vc(b)||!p.Vc(d)){var e=g.x,g=g.y,h=p.x,p=p.y,m=(h-e)*(h-e)+(p-g)*(p-g),k=b.x,n=b.y,l=d.x,q=d.y,r=0,s=1;0!==l-k?(r=(q-n)/(l-k),s=Math.sqrt(1+1/(r*r))):r=9E9;this.dh(a,b);for(a+=1;a<c;a++){b=this.n(a);var v=b.x,t=b.y,x=.5;0!==m&&(x=
((e-v)*(e-h)+(g-t)*(g-p))/m);var y=e+x*(h-e),B=g+x*(p-g);b=Math.sqrt((v-y)*(v-y)+(t-B)*(t-B));t<r*(v-y)+B&&(b=-b);0<r&&(b=-b);v=k+x*(l-k);x=n+x*(q-n);0!==r?(b=v+b/s,this.ja(a,b,x-(b-v)/r)):this.ja(a,v,x+b)}this.dh(c,d)}return!0;case Er:a:{if(this.tc){h=this.n(a);p=this.n(a+1);e=this.n(a+2);m=p.x;k=p.y;Q(h.y,p.y)?Q(p.x,e.x)?k=b.y:Q(p.y,e.y)&&(m=b.x):Q(h.x,p.x)&&(Q(p.y,e.y)?m=b.x:Q(p.x,e.x)&&(k=b.y));g=this.g;if(this.Di&&null!==g&&(h=ja(g,!0,this.Qa,null),!h.tm(Math.min(m,e.x),Math.min(k,e.y),Math.abs(m-
e.x),Math.abs(k-e.y)))){c=!1;break a}this.ja(a+1,m,k);h=this.n(c);p=this.n(c-1);e=this.n(c-2);m=p.x;k=p.y;Q(h.y,p.y)?Q(p.x,e.x)?k=d.y:Q(p.y,e.y)&&(m=d.x):Q(h.x,p.x)&&(Q(p.y,e.y)?m=d.x:Q(p.x,e.x)&&(k=d.y));if(this.Di&&null!==g&&(h=ja(g,!0,this.Qa,null),!h.tm(Math.min(m,e.x),Math.min(k,e.y),Math.abs(m-e.x),Math.abs(k-e.y)))){c=!1;break a}this.ja(c-1,m,k)}this.dh(a,b);this.dh(c,d);c=!0}return c;default:return!1}};
H.prototype.addOrthoPoints=function(a,b,c,d,e,g){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var h=e.Z.copy(),k=g.Z.copy();if(h.F()&&k.F()){h.fg(8,8);k.fg(8,8);h.Ki(a);k.Ki(c);var l,m;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&k.right>a.x||90===d&&c.y>a.y&&k.right>a.x)l=new M(c.x,a.y),m=new M(c.x,(a.y+c.y)/2),180===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x<k.left?this.computeMidOrthoPosition(a.x,
k.left,!1):a.x<k.right&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.right,m.x=l.x,m.y=c.y):0===d&&a.x<k.left&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new M(a.x,c.y);m=new M((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)180===d&&(k.Oa(a)||h.Oa(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,
k.bottom),!0):c.y>a.y&&(180===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x>=h.left&&c.x<=a.x||a.x<=k.right&&a.x>=c.x){if(90===d||270===d)l=new M(Math.max((a.x+c.x)/2,a.x),a.y),m=new M(l.x,c.y)}else l.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,0===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&k.left<a.x||
90===d&&c.y>a.y&&k.left<a.x)l=new M(c.x,a.y),m=new M(c.x,(a.y+c.y)/2),0===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x>k.right?this.computeMidOrthoPosition(a.x,k.right,!1):a.x>k.left&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.left,m.x=l.x,m.y=c.y):180===d&&a.x>k.right&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new M(a.x,c.y);m=new M((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)0===d&&(k.Oa(a)||h.Oa(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,k.bottom),!0):c.y>a.y&&(0===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x<=h.right&&c.x>=a.x||a.x>=k.left&&a.x<=c.x){if(90===d||270===d)l=new M(Math.min((a.x+c.x)/2,a.x),a.y),m=new M(l.x,c.y)}else l.y=270===
d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,180===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&k.bottom>a.y||0===d&&c.x>a.x&&k.bottom>a.y)l=new M(a.x,c.y),m=new M((a.x+c.x)/2,c.y),270===d?(l.y=this.computeMidOrthoPosition(a.y,c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(l.y=a.y<k.top?this.computeMidOrthoPosition(a.y,k.top,!0):a.y<k.bottom&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?
this.computeMidOrthoPosition(a.y,c.y,!0):k.bottom,m.x=c.x,m.y=l.y):90===d&&a.y<k.top&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new M(c.x,a.y);m=new M(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<h.left||180===d&&c.x>h.right)270===d&&(k.Oa(a)||h.Oa(c))?l.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(270===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,
Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y>=h.top&&c.y<=a.y||a.y<=k.bottom&&a.y>=c.y){if(0===d||180===d)l=new M(a.x,Math.max((a.y+c.y)/2,a.y)),m=new M(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,90===d?h.right:Math.max(h.right,k.right)),m.x=l.x,m.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&k.top<a.y||0===d&&c.x>a.x&&k.top<a.y)l=new M(a.x,c.y),m=new M((a.x+c.x)/2,c.y),90===d?(l.y=this.computeMidOrthoPosition(a.y,
c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(l.y=a.y>k.bottom?this.computeMidOrthoPosition(a.y,k.bottom,!0):a.y>k.top&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?this.computeMidOrthoPosition(a.y,c.y,!0):k.top,m.x=c.x,m.y=l.y):270===d&&a.y>k.bottom&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new M(c.x,a.y);m=new M(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<h.left||180===d&&c.x>h.right)90===d&&(k.Oa(a)||h.Oa(c))?l.x=this.computeMidOrthoPosition(a.x,
c.x,!1):c.x<a.x&&(90===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(90===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y<=h.bottom&&c.y>=a.y||a.y>=k.top&&a.y<=c.y){if(0===d||180===d)l=new M(a.x,Math.min((a.y+c.y)/2,a.y)),m=new M(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,270===d?h.right:Math.max(h.right,
k.right)),m.x=l.x,m.y=c.y}var n=l,p=m;if(this.Di){var q=this.g,r;(r=null===q)||(q.Ya.wf?r=!1:(r=q.fb,r=r instanceof Ph?!r.Tw||r.cJ:!0),r=!r);if(r||h.Oa(c)&&!g.Ei(e)||k.Oa(a)&&!e.Ei(g)||e===g||this.layer.Wc)a=!1;else if(e=ja(q,!0,this.Qa,null),e.tm(Math.min(a.x,n.x),Math.min(a.y,n.y),Math.abs(a.x-n.x),Math.abs(a.y-n.y))&&e.tm(Math.min(n.x,p.x),Math.min(n.y,p.y),Math.abs(n.x-p.x),Math.abs(n.y-p.y))&&e.tm(Math.min(p.x,c.x),Math.min(p.y,c.y),Math.abs(p.x-c.x),Math.abs(p.y-c.y)))a=!1;else if(h=h.copy().Wh(k),
h.fg(2*e.Zp,2*e.Xp),Ur(e,a,b,c,d,h),k=Vr(e,c.x,c.y),e.abort||999999!==k||(Fn(e),k=e.IG,h.fg(e.Zp*k,e.Xp*k),Ur(e,a,b,c,d,h),k=Vr(e,c.x,c.y)),e.abort||999999!==k||(Fn(e),k=e.QF,h.fg(e.Zp*k,e.Xp*k),Ur(e,a,b,c,d,h),k=Vr(e,c.x,c.y)),!e.abort&&999999===k&&e.cH&&(Fn(e),Ur(e,a,b,c,d,e.sb),k=Vr(e,c.x,c.y)),!e.abort&&999999>k&&0!==Vr(e,c.x,c.y)){Wr(this,e,c.x,c.y,d,!0);d=this.n(2);if(4>this.ua)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.ja(2,d.x,d.y),this.B(3,d.x,d.y);else if(c=this.n(3),0===b||
180===b)Q(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.ja(2,b,a.y),this.ja(3,b,c.y)):Q(d.y,c.y)?(Math.abs(a.y-d.y)<=e.Xp/2&&(this.ja(2,d.x,a.y),this.ja(3,c.x,a.y)),this.B(2,d.x,a.y)):this.ja(2,a.x,d.y);else if(90===b||270===b)Q(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.ja(2,a.x,b),this.ja(3,c.x,b)):Q(d.x,c.x)?(Math.abs(a.x-d.x)<=e.Zp/2&&(this.ja(2,a.x,d.y),this.ja(3,a.x,c.y)),this.B(2,a.x,d.y)):this.ja(2,d.x,a.y);a=!0}else a=!1}else a=!1;a||(this.zi(l),this.zi(m))}};
H.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};function Th(a){if(null===a.g||!a.Di)return!1;var b=a.points.o,c=b.length;if(4>c)return!1;a=ja(a.g,!0,a.Qa,null);for(var d=1;d<c-2;d++){var e=b[d],g=b[d+1];if(!a.tm(Math.min(e.x,g.x),Math.min(e.y,g.y),Math.abs(e.x-g.x),Math.abs(e.y-g.y)))return!0}return!1}
function Wr(a,b,c,d,e,g){var h=b.Zp,k=b.Xp,l=Vr(b,c,d),m=c,n=d;for(0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k;1<l&&Vr(b,m,n)===l-1;)c=m,d=n,0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k,l-=1;if(g){if(1<l)if(180===e||0===e)c=Math.floor(c/h)*h+h/2;else if(90===e||270===e)d=Math.floor(d/k)*k+k/2}else c=Math.floor(c/h)*h+h/2,d=Math.floor(d/k)*k+k/2;1<l&&(g=e,m=c,n=d,0===e?(g=90,n+=k):90===e?(g=180,m-=h):180===e?(g=270,n-=k):270===e&&(g=0,m+=h),Vr(b,m,n)===l-1?Wr(a,b,m,n,g,!1):(m=c,n=d,0===e?(g=270,n-=k):90===
e?(g=0,m+=h):180===e?(g=90,n+=k):270===e&&(g=180,m-=h),Vr(b,m,n)===l-1&&Wr(a,b,m,n,g,!1)));a.Ul(c,d)}H.prototype.findClosestSegment=function(a){u&&z.l(a,M,H,"findClosestSegment:p");var b=a.x;a=a.y;for(var c=this.n(0),d=this.n(1),e=xb(b,a,c.x,c.y,d.x,d.y),g=0,h=1;h<this.ua-1;h++){var c=this.n(h+1),k=xb(b,a,d.x,d.y,c.x,c.y),d=c;k<e&&(g=h,e=k)}return g};H.prototype.Se=function(){this.nb=null};z.w(H,{Ff:"geometry"},function(){null===this.nb&&(this.uo(),this.nb=this.makeGeometry());return this.nb});
H.prototype.fo=function(a){if(!a){if(!1===this.kh)return;a=this.Wd();if(null!==this.nb&&(null===a||null!==a.Ff))return}this.nb=this.makeGeometry();a=this.path;if(null!==a){a.nb=this.nb;for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d];e!==a&&e.If&&e instanceof Y&&(e.nb=this.nb)}}};
H.prototype.makeGeometry=function(){var a=this.ua;if(2>a)return new Ve(hf);var b=!1,c=this.g;null!==c&&Lr(this)&&c.sl.contains(this)&&null!==this.Cw&&(b=!0);var d=c=0,e=this.n(0).copy(),g=e.copy(),c=this.dd.o,h=this.computeCurve();if(h===Dj&&3<=a&&!Db(this.Uq,0))if(3===a)var k=this.n(1),c=Math.min(e.x,k.x),d=Math.min(e.y,k.y),k=this.n(2),c=Math.min(c,k.x),d=Math.min(d,k.y);else{if(this.tc)for(k=0;k<a;k++)d=c[k],g.x=Math.min(d.x,g.x),g.y=Math.min(d.y,g.y);else for(k=3;k<a;k+=3)k+3>=a&&(k=a-1),c=this.n(k),
g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);c=g.x;d=g.y}else{for(k=0;k<a;k++)d=c[k],g.x=Math.min(d.x,g.x),g.y=Math.min(d.y,g.y);c=g.x;d=g.y}c-=this.Zz.x;d-=this.Zz.y;e.x-=c;e.y-=d;if(2!==a||Lr(this)){var l=z.v();0!==this.computeShortLength(!0)&&(e=Xr(this,e,!0,g));S(l,e.x,e.y,!1,!1);if(h===Dj&&3<=a&&!Db(this.Uq,0))if(3===a)k=this.n(1),a=k.x-c,b=k.y-d,k=this.n(2).copy(),k.x-=c,k.y-=d,0!==this.computeShortLength(!1)&&(k=Xr(this,k,!1,g)),U(l,a,b,a,b,k.x,k.y);else if(this.tc){for(var g=new M(c,d),e=this.n(1).copy(),
h=new M(c,d),a=new M(c,d),b=this.n(0),m=null,n=this.Uq/3,k=1;k<this.ua-1;k++){var m=this.n(k),p=b,q=m,r=this.n(Yr(this,m,k,!1));if(!Db(p.x,q.x)||!Db(q.x,r.x))if(!Db(p.y,q.y)||!Db(q.y,r.y)){var s=n,v=h,t=a;isNaN(s)&&(s=this.Uq/3);var x=p.x,p=p.y,y=q.x,q=q.y,B=r.x,r=r.y,A=s*Zr(x,p,y,q),s=s*Zr(y,q,B,r);Db(p,q)&&Db(y,B)&&(y>x?r>q?(v.x=y-A,v.y=q-A,t.x=y+s,t.y=q+s):(v.x=y-A,v.y=q+A,t.x=y+s,t.y=q-s):r>q?(v.x=y+A,v.y=q-A,t.x=y-s,t.y=q+s):(v.x=y+A,v.y=q+A,t.x=y-s,t.y=q-s));Db(x,y)&&Db(q,r)&&(q>p?(B>y?(v.x=
y-A,v.y=q-A,t.x=y+s):(v.x=y+A,v.y=q-A,t.x=y-s),t.y=q+s):(B>y?(v.x=y-A,v.y=q+A,t.x=y+s):(v.x=y+A,v.y=q+A,t.x=y-s),t.y=q-s));if(Db(x,y)&&Db(y,B)||Db(p,q)&&Db(q,r))x=.5*(x+B),p=.5*(p+r),v.x=x,v.y=p,t.x=x,t.y=p;1===k?(e.x=.5*(b.x+m.x),e.y=.5*(b.y+m.y)):2===k&&Db(b.x,this.n(0).x)&&Db(b.y,this.n(0).y)&&(e.x=.5*(b.x+m.x),e.y=.5*(b.y+m.y));U(l,e.x-c,e.y-d,h.x-c,h.y-d,m.x-c,m.y-d);g.set(h);e.set(a);b=m}}k=b.x;b=b.y;g=this.n(this.ua-1);0!==this.computeShortLength(!1)&&(g=Xr(this,g.copy(),!1,Dd));k=.5*(k+g.x);
b=.5*(b+g.y);U(l,a.x-c,a.y-d,k-c,b-d,g.x-c,g.y-d)}else for(k=3;k<a;k+=3)b=this.n(k-2),k+3>=a&&(k=a-1),g=this.n(k-1),e=this.n(k),k===a-1&&0!==this.computeShortLength(!1)&&(e=Xr(this,e.copy(),!1,Dd)),U(l,b.x-c,b.y-d,g.x-c,g.y-d,e.x-c,e.y-d);else{g=z.P();g.assign(this.n(0));for(k=1;k<a;){k=Yr(this,g,k,1<k);v=this.n(k);if(k>=a-1){g!==v&&(0!==this.computeShortLength(!1)&&(v=Xr(this,v.copy(),!1,Dd)),$r(this,l,-c,-d,g,v,b));break}k=Yr(this,v,k+1,k<a-3);e=l;h=-c;m=-d;n=g;t=this.n(k);x=g;p=b;Q(n.y,v.y)&&Q(v.x,
t.x)?(s=this.computeCorner(),s=Math.min(s,Math.abs(v.x-n.x)/2),s=y=Math.min(s,Math.abs(t.y-v.y)/2),Q(s,0)?($r(this,e,h,m,n,v,p),x.assign(v)):(q=v.x,B=v.y,r=q,A=B,q=v.x>n.x?v.x-s:v.x+s,A=t.y>v.y?v.y+y:v.y-y,$r(this,e,h,m,n,new M(q,B),p),pf(e,v.x+h,v.y+m,r+h,A+m),x.m(r,A))):Q(n.x,v.x)&&Q(v.y,t.y)?(s=this.computeCorner(),y=Math.min(s,Math.abs(v.y-n.y)/2),y=s=Math.min(y,Math.abs(t.x-v.x)/2),Q(s,0)?($r(this,e,h,m,n,v,p),x.assign(v)):(q=v.x,A=B=v.y,B=v.y>n.y?v.y-y:v.y+y,r=t.x>v.x?v.x+s:v.x-s,$r(this,e,
h,m,n,new M(q,B),p),pf(e,v.x+h,v.y+m,r+h,A+m),x.m(r,A))):($r(this,e,h,m,n,v,p),x.assign(v))}z.A(g)}c=l.q;z.u(l)}else l=this.n(1).copy(),l.x-=c,l.y-=d,0!==this.computeShortLength(!0)&&(e=Xr(this,e,!0,g)),0!==this.computeShortLength(!1)&&(l=Xr(this,l,!1,g)),c=new Ve(hf),c.na=e.x,c.la=e.y,c.G=l.x,c.H=l.y;return c};
function Zr(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Db(a,0)?b:Db(b,0)?a:Math.sqrt(a*a+b*b)}
function Xr(a,b,c,d){var e=a.ua;if(2>e)return b;if(c){var g=a.n(1);c=g.x-d.x;d=g.y-d.y;g=Zr(b.x,b.y,c,d);if(0===g)return b;e=2===e?.5*g:g;a=a.computeShortLength(!0);a>e&&(a=e);c=a*(c-b.x)/g;a=a*(d-b.y)/g;b.x+=c;b.y+=a}else{g=a.n(e-2);c=g.x-d.x;d=g.y-d.y;g=Zr(b.x,b.y,c,d);if(0===g)return b;e=2===e?.5*g:g;a=a.computeShortLength(!1);a>e&&(a=e);c=a*(b.x-c)/g;a=a*(b.y-d)/g;b.x-=c;b.y-=a}return b}
function Yr(a,b,c,d){for(var e=a.ua,g=b;Db(b.x,g.x)&&Db(b.y,g.y);){if(c>=e)return e-1;g=a.n(c++)}if(!Db(b.x,g.x)&&!Db(b.y,g.y))return c-1;for(var h=g;Db(b.x,g.x)&&Db(g.x,h.x)&&(!d||(b.y>=g.y?g.y>=h.y:g.y<=h.y))||Db(b.y,g.y)&&Db(g.y,h.y)&&(!d||(b.x>=g.x?g.x>=h.x:g.x<=h.x));){if(c>=e)return e-1;h=a.n(c++)}return c-2}
function $r(a,b,c,d,e,g,h){if(!h&&Lr(a)){h=[];var k=0;a.isVisible()&&(k=as(a,e,g,h));var l=e.x,l=e.y;if(0<k)if(Q(e.y,g.y))if(e.x<g.x)for(var m=0;m<k;){var n=Math.max(e.x,Math.min(h[m++]-5,g.x-10));b.lineTo(n+c,g.y+d);for(var l=n+c,p=Math.min(n+10,g.x);m<k;){var q=h[m];if(q<p+10)m++,p=Math.min(q+5,g.x);else break}q=(n+p)/2+c;q=g.y-10+d;n=p+c;p=g.y+d;a.hf===mj?S(b,n,p,!1,!1):U(b,l,q,n,q,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.x,Math.max(h[m--]+5,g.x+10));b.lineTo(n+c,g.y+d);l=n+c;for(p=Math.max(n-10,
g.x);0<=m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,g.x);else break;q=g.y-10+d;n=p+c;p=g.y+d;a.hf===mj?S(b,n,p,!1,!1):U(b,l,q,n,q,n,p)}else if(Q(e.x,g.x))if(e.y<g.y)for(m=0;m<k;){n=Math.max(e.y,Math.min(h[m++]-5,g.y-10));b.lineTo(g.x+c,n+d);l=n+d;for(p=Math.min(n+10,g.y);m<k;)if(q=h[m],q<p+10)m++,p=Math.min(q+5,g.y);else break;q=g.x-10+c;n=g.x+c;p+=d;a.hf===mj?S(b,n,p,!1,!1):U(b,q,l,q,p,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.y,Math.max(h[m--]+5,g.y+10));b.lineTo(g.x+c,n+d);l=n+d;for(p=Math.max(n-10,g.y);0<=
m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,g.y);else break;q=g.x-10+c;n=g.x+c;p+=d;a.hf===mj?S(b,n,p,!1,!1):U(b,q,l,q,p,n,p)}}b.lineTo(g.x+c,g.y+d)}
function as(a,b,c,d){var e=a.g;if(null===e||b.O(c))return 0;for(e=e.ao;e.next();){var g=e.value;if(null!==g&&g.visible)for(var g=g.pb.o,h=g.length,k=0;k<h;k++){var l=g[k];if(l instanceof H){if(l===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(l.isVisible()&&Lr(l)){var m=l.mo;m.F()&&a.mo.Vg(m)&&!a.usesSamePort(l)&&(m=l.path,null!==m&&m.Jj()&&bs(b,c,d,l))}}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function bs(a,b,c,d){for(var e=Q(a.y,b.y),g=d.ua,h=d.n(0),k=z.P(),l=1;l<g;l++){var m=d.n(l);if(l<g-1){var n=d.n(l+1);if(h.y===m.y&&m.y===n.y){if(m.x>h.x&&n.x>m.x||m.x<h.x&&n.x<m.x)m=n,l++}else h.x===m.x&&m.x===n.x&&(m.y>h.y&&n.y>m.y||m.y<h.y&&n.y<m.y)&&(m=n,l++)}a:{var n=k,p=a.x,q=a.y,r=b.x,s=b.y,v=h.x,h=h.y,t=m.x,x=m.y;if(!Q(p,r)){if(Q(q,s)&&Q(v,t)&&Math.min(p,r)<v&&Math.max(p,r)>v&&Math.min(h,x)<q&&Math.max(h,x)>q&&!Q(h,x)){n.x=v;n.y=q;n=!0;break a}}else if(!Q(q,s)&&Q(h,x)&&Math.min(q,s)<h&&Math.max(q,
s)>h&&Math.min(v,t)<p&&Math.max(v,t)>p&&!Q(v,t)){n.x=p;n.y=h;n=!0;break a}n.x=0;n.y=0;n=!1}n&&(e?c.push(k.x):c.push(k.y));h=m}z.A(k)}z.w(H,{fu:"firstPickIndex"},function(){var a;2>=this.ua?a=0:((a=this.tc)||(a=this.computeSpot(!0)!==gc),a=a?1:0);return a});z.w(H,{Xx:"lastPickIndex"},function(){var a=this.ua;if(0===a)a=0;else if(2>=a)a-=1;else{var b;(b=this.tc)||(b=this.computeSpot(!1)!==gc);a=b?a-2:a-1}return a});function Lr(a){a=a.hf;return a===lj||a===mj}
function Nr(a,b){if(b||Lr(a)){var c=a.g;null===c||c.sl.contains(a)||null===a.Cw||c.sl.add(a,a.Cw)}}function oj(a,b){var c=a.layer;if(null!==c&&c.visible&&!c.Wc){var d=c.g;if(null!==d)for(var e=!1,d=d.ao;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=!0,h=!1,g=g.pb.o,k=g.length,l=0;l<k;l++){var m=g[l];m instanceof H&&(m===a?h=!0:h&&cs(a,m,b))}else if(e)for(g=g.pb.o,k=g.length,l=0;l<k;l++)m=g[l],m instanceof H&&cs(a,m,b)}}}
function cs(a,b,c){if(null!==b&&null!==b.nb&&Lr(b)){var d=b.mo;d.F()&&(a.mo.Vg(d)||c.Vg(d))&&(a.usesSamePort(b)||b.Se())}}H.prototype.usesSamePort=function(a){var b=this.ua,c=a.ua;if(0<b&&0<c){var d=this.n(0),e=a.n(0);if(d.Vc(e))return!0;b=this.n(b-1);a=a.n(c-1);if(b.Vc(a)||d.Vc(a)||b.Vc(e))return!0}else if(this.aa===a.aa||this.ea===a.ea||this.aa===a.ea||this.ea===a.aa)return!0;return!1};
H.prototype.isVisible=function(){if(!D.prototype.isVisible.call(this))return!1;var a=this.Qa,b=!0,c=this.g;null!==c&&(b=c.ae);var d=this.aa;if(null!==d){if(this.Xc&&b&&!d.ud)return!1;if(d===a)return!0;for(c=d;null!==c;){if(c.Cc===this)return!0;c=c.Qa}c=d.findVisibleNode();if(null===c||c===a)return!1}d=this.ea;if(null!==d){if(this.Xc&&!b&&!d.ud)return!1;if(d===a)return!0;for(c=d;null!==c;){if(c.Cc===this)return!0;c=c.Qa}b=d.findVisibleNode();if(null===b||b===a)return!1}return!0};
H.prototype.Kd=function(a){D.prototype.Kd.call(this,a);null!==this.Mi&&this.Mi.sq();if(null!==this.af)for(var b=this.af.j;b.next();)b.value.Kd(a)};z.defineProperty(H,{Ot:"adjusting"},function(){return this.dr},function(a){var b=this.dr;b!==a&&(u&&z.Ca(a,H,H,"adjusting"),this.dr=a,this.i("adjusting",b,a))});z.defineProperty(H,{sA:"corner"},function(){return this.vr},function(a){var b=this.vr;b!==a&&(u&&z.h(a,"number",H,"corner"),this.vr=a,this.Se(),this.i("corner",b,a))});
z.defineProperty(H,{hf:"curve"},function(){return this.yr},function(a){var b=this.yr;b!==a&&(u&&z.Ca(a,H,H,"curve"),this.yr=a,this.gc(),this.Se(),Nr(this,b===mj||b===lj||a===mj||a===lj),this.i("curve",b,a))});z.defineProperty(H,{ux:"curviness"},function(){return this.zr},function(a){var b=this.zr;b!==a&&(u&&z.h(a,"number",H,"curviness"),this.zr=a,this.gc(),this.Se(),this.i("curviness",b,a))});
z.defineProperty(H,{ty:"routing"},function(){return this.kn},function(a){var b=this.kn;b!==a&&(u&&z.Ca(a,H,H,"routing"),this.kn=a,this.Yi=null,this.gc(),Nr(this,2===(b.value&2)||2===(a.value&2)),this.i("routing",b,a))});z.defineProperty(H,{Uq:"smoothness"},function(){return this.st},function(a){var b=this.st;b!==a&&(u&&z.h(a,"number",H,"smoothness"),this.st=a,this.Se(),this.i("smoothness",b,a))});
function Jr(a){var b=a.yg;if(null!==b){var c=a.Og;if(null!==c){var d=a.ci;a=a.xi;for(var e=null,g=null,h=b.xc.o,k=h.length,l=0;l<k;l++){var m=h[l];if(m.yg===b&&m.ci===d&&m.Og===c&&m.xi===a||m.yg===c&&m.ci===a&&m.Og===b&&m.xi===d)null===g?g=m:(null===e&&(e=[],e.push(g)),e.push(m))}if(null!==e){g=ur(b,c,d,a);null===g&&(g=new Dl,g.Fq=b,g.jy=d,g.Hu=c,g.ky=a,tr(b,g),tr(c,g));g.links=e;for(l=0;l<e.length;l++)m=e[l],m.Mi=g;g.sq()}}}}
function Ir(a){var b=a.Mi;null!==b&&(a.Mi=null,a=b.links.indexOf(a),0<=a&&(z.Rg(b.links,a),b.sq()))}function Dl(){z.wc(this);this.$v=!1;this.ky=this.Hu=this.jy=this.Fq=null;this.links=[]}Dl.prototype.sq=function(){if(!this.$v){var a=this.links;0<a.length&&(a=a[0].g,null!==a&&a.YC.add(this))}this.$v=!0};
Dl.prototype.QB=function(){if(this.$v){this.$v=!1;var a=this.links;if(0<a.length){var b=a[0],c=b.g;b.arrangeBundledLinks(a,null===c||c.Zn);1===a.length&&(b.Mi=null,a.length=0)}0===a.length&&(a=this.Fq,null!==this&&null!==a.Xh&&a.Xh.remove(this),a=this.Hu,null!==this&&null!==a.Xh&&a.Xh.remove(this))}};z.me(Dl,{Fq:!0,jy:!0,Hu:!0,ky:!0,links:!0,spacing:!0});
function Dn(){z.wc(this);this.GB=this.group=null;this.rq=!0;this.abort=!1;this.Xf=this.Wf=1;this.ws=this.vs=-1;this.Od=this.de=8;this.zd=null;this.cH=!1;this.IG=22;this.QF=111}z.me(Dn,{group:!0,GB:!0,rq:!0,abort:!0,cH:!0,IG:!0,QF:!0});
Dn.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.Wf=Math.floor((a.x-this.de)/this.de)*this.de;this.Xf=Math.floor((b-this.Od)/this.Od)*this.Od;this.vs=Math.ceil((c+2*this.de)/this.de)*this.de;this.ws=Math.ceil((d+2*this.Od)/this.Od)*this.Od;a=1+(Math.ceil((this.vs-this.Wf)/this.de)|0);b=1+(Math.ceil((this.ws-this.Xf)/this.Od)|0);if(null===this.zd||this.yn<a-1||this.zn<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],g=0;g<=b;g++)e[g]=0;c[d]=e}this.zd=
c;this.yn=a-1;this.zn=b-1}if(null!==this.zd)for(a=0;a<=this.yn;a++)for(b=0;b<=this.zn;b++)this.zd[a][b]=999999}};z.w(Dn,{sb:null},function(){return new w(this.Wf,this.Xf,this.vs-this.Wf,this.ws-this.Xf)});z.defineProperty(Dn,{Zp:null},function(){return this.de},function(a){0<a&&a!==this.de&&(this.de=a,this.initialize(this.sb))});z.defineProperty(Dn,{Xp:null},function(){return this.Od},function(a){0<a&&a!==this.Od&&(this.Od=a,this.initialize(this.sb))});
function ds(a,b,c){return a.Wf<=b&&b<=a.vs&&a.Xf<=c&&c<=a.ws}function Vr(a,b,c){if(!ds(a,b,c))return 0;b-=a.Wf;b/=a.de;c-=a.Xf;c/=a.Od;return a.zd[b|0][c|0]}function Gn(a,b,c){ds(a,b,c)&&(b-=a.Wf,b/=a.de,c-=a.Xf,c/=a.Od,a.zd[b|0][c|0]=0)}function Fn(a){if(null!==a.zd)for(var b=0;b<=a.yn;b++)for(var c=0;c<=a.zn;c++)1<=a.zd[b][c]&&(a.zd[b][c]|=999999)}
Dn.prototype.tm=function(a,b,c,d){if(a>this.vs||a+c<this.Wf||b>this.ws||b+d<this.Xf)return!0;a=(a-this.Wf)/this.de|0;b=(b-this.Xf)/this.Od|0;c=Math.max(0,c)/this.de+1|0;var e=Math.max(0,d)/this.Od+1|0;0>a&&(c+=a,a=0);0>b&&(e+=b,b=0);if(0>c||0>e)return!0;d=Math.min(a+c-1,this.yn)|0;for(c=Math.min(b+e-1,this.zn)|0;a<=d;a++)for(e=b;e<=c;e++)if(0===this.zd[a][e])return!1;return!0};
function es(a,b,c,d,e,g,h,k,l){if(!(b<g||b>h||c<k||c>l)){var m,n;m=b|0;n=c|0;var p=a.zd[m][n];if(1<=p&&999999>p)for(e?n+=d:m+=d,p+=1;g<=m&&m<=h&&k<=n&&n<=l&&!(p>=a.zd[m][n]);)a.zd[m][n]=p,p+=1,e?n+=d:m+=d;m=e?n:m;if(e)if(0<d)for(c+=d;c<m;c+=d)es(a,b,c,1,!e,g,h,k,l),es(a,b,c,-1,!e,g,h,k,l);else for(c+=d;c>m;c+=d)es(a,b,c,1,!e,g,h,k,l),es(a,b,c,-1,!e,g,h,k,l);else if(0<d)for(b+=d;b<m;b+=d)es(a,b,c,1,!e,g,h,k,l),es(a,b,c,-1,!e,g,h,k,l);else for(b+=d;b>m;b+=d)es(a,b,c,1,!e,g,h,k,l),es(a,b,c,-1,!e,g,h,
k,l)}}function fs(a,b,c,d,e,g,h,k,l){b|=0;c|=0;var m=0,n=1;for(a.zd[b][c]=n;0===m&&b>g&&b<h&&c>k&&c<l;)n+=1,a.zd[b][c]=n,e?c+=d:b+=d,m=a.zd[b][c]}function gs(a,b,c,d,e,g,h,k,l){b|=0;c|=0;var m=0;for(a.zd[b][c]=999999;0===m&&b>g&&b<h&&c>k&&c<l;)a.zd[b][c]=999999,e?c+=d:b+=d,m=a.zd[b][c]}
function Ur(a,b,c,d,e,g){if(null!==a.zd){a.abort=!1;var h=b.x,k=b.y;if(ds(a,h,k)&&(h-=a.Wf,h/=a.de,k-=a.Xf,k/=a.Od,b=d.x,d=d.y,ds(a,b,d)))if(b-=a.Wf,b/=a.de,d-=a.Xf,d/=a.Od,1>=Math.abs(h-b)&&1>=Math.abs(k-d))a.abort=!0;else{var l=g.x,m=g.y,n=g.x+g.width,p=g.y+g.height,l=l-a.Wf,l=l/a.de,m=m-a.Xf,m=m/a.Od,n=n-a.Wf,n=n/a.de,p=p-a.Xf,p=p/a.Od;g=Math.max(0,Math.min(a.yn,l|0));n=Math.min(a.yn,Math.max(0,n|0));m=Math.max(0,Math.min(a.zn,m|0));p=Math.min(a.zn,Math.max(0,p|0));h|=0;k|=0;b|=0;d|=0;l=90===c||
270===c;fs(a,h,k,0===c||90===c?1:-1,l,g,n,m,p);fs(a,h,k,1,!l,g,n,m,p);fs(a,h,k,-1,!l,g,n,m,p);gs(a,b,d,0===e||90===e?1:-1,90===e||270===e,g,n,m,p);gs(a,b,d,1,!(90===e||270===e),g,n,m,p);gs(a,b,d,-1,!(90===e||270===e),g,n,m,p);a.abort||(es(a,h,k,1,!1,g,n,m,p),es(a,h,k,-1,!1,g,n,m,p),es(a,h,k,1,!0,g,n,m,p),es(a,h,k,-1,!0,g,n,m,p))}}}function Sr(){z.wc(this);this.port=this.Yc=null;this.lg=[];this.Eq=!1}z.me(Sr,{Yc:!0,port:!0,lg:!0,Eq:!0});
Sr.prototype.toString=function(){for(var a=this.lg,b=this.Yc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];null!==d&&(b+="\n  "+d.toString())}return b};
function hs(a,b,c,d){b=b.offsetY;switch(b){case z.nd:return 90;case z.ad:return 180;case z.xd:return 270;case z.od:return 0}switch(b){case z.nd|z.xd:return 180<c?270:90;case z.ad|z.od:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case z.ad|z.xd:return c>a&&c<=180+a?180:270;case z.xd|z.od:return c>180-a&&c<=360-a?270:0;case z.od|z.nd:return c>a&&c<=180+a?90:0;case z.nd|z.ad:return c>180-a&&c<=360-a?180:90;case z.ad|z.xd|z.od:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case z.xd|z.od|z.nd:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case z.od|z.nd|z.ad:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case z.nd|z.ad|z.xd:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(z.ad|z.xd|z.od|z.nd)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}Sr.prototype.sq=function(){this.lg.length=0};
function Tr(a,b){var c=a.lg;if(0===c.length){a:if(!a.Eq){c=a.Eq;a.Eq=!0;var d,e=null,g=a.Yc,g=g instanceof F?g:null;if(null===g||g.Ke)d=a.Yc.dF(a.port.vd);else{if(!g.Z.F()){a.Eq=c;break a}e=g;d=e.cF()}var h=a.lg.length=0,k=a.port.cb(hc,z.P()),l=a.port.cb(qc,z.P()),g=z.fh(k.x,k.y,0,0);g.Ki(l);z.A(k);z.A(l);k=z.Fb(g.x+g.width/2,g.y+g.height/2);for(d=d.j;d.next();)if(l=d.value,l.isVisible()){var m=l.gd===a.port||l.aa.Ei(e),n=l.computeSpot(m);if(n.Gj()&&(m=m?l.Nd:l.gd,null!==m)){var p=m.ba;if(null!==
p){var m=l.computeOtherPoint(p,m),p=k.Lc(m),n=hs(g,n,p,l.tc),q=0;0===n?(q=z.od,180<p&&(p-=360)):q=90===n?z.nd:180===n?z.ad:z.xd;n=a.lg[h];void 0===n?(n=new is(l,p,q),a.lg[h]=n):(n.link=l,n.angle=p,n.Le=q);n.hy.set(m);h++}}}z.A(k);a.lg.sort(Sr.prototype.LJ);e=a.lg.length;k=-1;for(h=d=0;h<e;h++)n=a.lg[h],void 0!==n&&(n.Le!==k&&(k=n.Le,d=0),n.pq=d,d++);k=-1;d=0;for(h=e-1;0<=h;h--)n=a.lg[h],void 0!==n&&(n.Le!==k&&(k=n.Le,d=n.pq+1),n.Kn=d);h=a.lg;m=a.port;e=a.Yc.TJ;k=z.P();d=z.P();l=z.P();n=z.P();m.cb(hc,
k);m.cb(jc,d);m.cb(qc,l);m.cb(oc,n);var r=q=p=m=0;if(e===sr)for(var s=0;s<h.length;s++){var v=h[s];if(null!==v){var t=v.link.computeThickness();switch(v.Le){case z.nd:q+=t;break;case z.ad:r+=t;break;case z.xd:m+=t;break;default:case z.od:p+=t}}}for(var x=0,y=0,B=1,s=0;s<h.length;s++)if(v=h[s],null!==v){var A,N;if(x!==v.Le){x=v.Le;switch(x){case z.nd:A=l;N=n;break;case z.ad:A=n;N=k;break;case z.xd:A=k;N=d;break;default:case z.od:A=d,N=l}var G=N.x-A.x;N=N.y-A.y;switch(x){case z.nd:q>Math.abs(G)?(B=
Math.abs(G)/q,q=Math.abs(G)):B=1;break;case z.ad:r>Math.abs(N)?(B=Math.abs(N)/r,r=Math.abs(N)):B=1;break;case z.xd:m>Math.abs(G)?(B=Math.abs(G)/m,m=Math.abs(G)):B=1;break;default:case z.od:p>Math.abs(N)?(B=Math.abs(N)/p,p=Math.abs(N)):B=1}y=0}var T=v.xq;if(e===sr){t=v.link.computeThickness();t*=B;T.set(A);switch(x){case z.nd:T.x=A.x+G/2+q/2-y-t/2;break;case z.ad:T.y=A.y+N/2+r/2-y-t/2;break;case z.xd:T.x=A.x+G/2-m/2+y+t/2;break;default:case z.od:T.y=A.y+N/2-p/2+y+t/2}y+=t}else t=.5,e===pr&&(t=(v.pq+
1)/(v.Kn+1)),T.x=A.x+G*t,T.y=A.y+N*t}z.A(k);z.A(d);z.A(l);z.A(n);A=a.lg;for(G=0;G<A.length;G++)N=A[G],null!==N&&(N.zx=a.computeEndSegmentLength(N));a.Eq=c;z.Mb(g)}c=a.lg}for(g=0;g<c.length;g++)if(A=c[g],null!==A&&A.link===b)return A;return null}Sr.prototype.LJ=function(a,b){return a===b?0:null===a?-1:null===b?1:a.Le<b.Le?-1:a.Le>b.Le?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
Sr.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.Yc,this.port,gc,b.gd===this.port),d=a.pq;if(0>d)return c;var e=a.Kn;if(1>=e||!b.tc)return c;var b=a.hy,g=a.xq;if(a.Le===z.ad||a.Le===z.nd)d=e-1-d;return((a=a.Le===z.ad||a.Le===z.od)?b.y<g.y:b.x<g.x)?c+8*d:(a?b.y===g.y:b.x===g.x)?c:c+8*(e-1-d)};function is(a,b,c){this.link=a;this.angle=b;this.Le=c;this.hy=new M;this.Kn=this.pq=0;this.xq=new M;this.zx=0}
z.me(is,{link:!0,angle:!0,Le:!0,hy:!0,pq:!0,Kn:!0,xq:!0,zx:!0});is.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Le.toString()+":"+this.pq.toString()+"/"+this.Kn.toString()+" "+this.xq.toString()+" "+this.zx.toString()+" "+this.hy.toString()};function wo(){this.Ek=this.fk=Rc;this.Ck=this.dk=NaN;this.Bk=this.ck=qr;this.Dk=this.ek=NaN;this.Dt=this.Rr=null;this.Et=this.Sr=Infinity}
wo.prototype.copy=function(){var a=new wo;a.fk=this.fk.V();a.Ek=this.Ek.V();a.dk=this.dk;a.Ck=this.Ck;a.ck=this.ck;a.Bk=this.Bk;a.ek=this.ek;a.Dk=this.Dk;a.Rr=this.Rr;a.Dt=this.Dt;a.Sr=this.Sr;a.Et=this.Et;return a};function F(a){0===arguments.length?E.call(this,Yj):E.call(this,a);this.Ha|=4608;this.ys=new K(D);this.cn=new K(F);this.Qb=this.wt=this.Il=this.zs=this.xs=null;this.ve=new ch;this.ve.group=this}z.Ta(F,E);z.ka("Group",F);
F.prototype.cloneProtected=function(a){E.prototype.cloneProtected.call(this,a);this.Ha&=-32769;a.xs=this.xs;a.zs=this.zs;a.Il=this.Il;a.wt=this.wt;var b=a.du(function(a){return a instanceof Sj});a.Qb=b instanceof Sj?b:null;null!==this.ve?(a.ve=this.ve.copy(),a.ve.group=a):(null!==a.ve&&(a.ve.group=null),a.ve=null)};F.prototype.Bi=function(a){E.prototype.Bi.call(this,a);var b=a.lq();for(a=a.Oc;a.next();){var c=a.value;c.K();c.N(8);c.Vt();if(c instanceof E)c.gg(b);else if(c instanceof H)for(c=c.Kf;c.next();)c.value.gg(b)}};
F.prototype.lo=function(a,b,c,d,e,g,h){if(a===sg&&"elements"===b)if(e instanceof Sj){var k=e;null===this.Qb?this.Qb=k:this.Qb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else e instanceof I&&(k=e.du(function(a){return a instanceof Sj}),k instanceof Sj&&(null===this.Qb?this.Qb=k:this.Qb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else a===tg&&"elements"===b&&null!==this.Qb&&(d===this.Qb?this.Qb=null:d instanceof I&&this.Qb.rm(d)&&
(this.Qb=null));E.prototype.lo.call(this,a,b,c,d,e,g,h)};F.prototype.wj=function(a,b,c,d){this.Hl=this.Qb;I.prototype.wj.call(this,a,b,c,d)};F.prototype.sm=function(){if(!E.prototype.sm.call(this))return!1;for(var a=this.Oc;a.next();){var b=a.value;if(b instanceof E){if(b.isVisible()&&Dm(b))return!1}else if(b instanceof H&&b.isVisible()&&Dm(b)&&b.aa!==this&&b.ea!==this)return!1}return!0};z.w(F,{placeholder:"placeholder"},function(){return this.Qb});
z.defineProperty(F,{dI:"computesBoundsAfterDrag"},function(){return 0!==(this.Ha&2048)},function(a){var b=0!==(this.Ha&2048);b!==a&&(z.h(a,"boolean",F,"computesBoundsAfterDrag"),this.Ha^=2048,this.i("computesBoundsAfterDrag",b,a))});z.defineProperty(F,{px:"computesBoundsIncludingLinks"},function(){return 0!==(this.Ha&4096)},function(a){z.h(a,"boolean",F,"computesBoundsIncludingLinks");var b=0!==(this.Ha&4096);b!==a&&(this.Ha^=4096,this.i("computesBoundsIncludingLinks",b,a))});
z.defineProperty(F,{eI:"computesBoundsIncludingLocation"},function(){return 0!==(this.Ha&8192)},function(a){z.h(a,"boolean",F,"computesBoundsIncludingLocation");var b=0!==(this.Ha&8192);b!==a&&(this.Ha^=8192,this.i("computesBoundsIncludingLocation",b,a))});z.defineProperty(F,{TI:"handlesDragDropForMembers"},function(){return 0!==(this.Ha&16384)},function(a){z.h(a,"boolean",F,"handlesDragDropForMembers");var b=0!==(this.Ha&16384);b!==a&&(this.Ha^=16384,this.i("handlesDragDropForMembers",b,a))});
z.w(F,{Oc:"memberParts"},function(){return this.ys.j});function lr(a,b){if(a.ys.add(b)){b instanceof F&&a.cn.add(b);var c=a.CJ;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.ab,e.ab=!0);c(a,b);null!==e&&(e.ab=d)}a.isVisible()&&a.Ke||b.Kd(!1)}b instanceof H&&!a.px||(c=a.Qb,null===c&&(c=a),c.K())}
function kr(a,b){if(a.ys.remove(b)){b instanceof F&&a.cn.remove(b);var c=a.DJ;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.ab,e.ab=!0);c(a,b);null!==e&&(e.ab=d)}a.isVisible()&&a.Ke||b.Kd(!0)}b instanceof H&&!a.px||(c=a.Qb,null===c&&(c=a),c.K())}F.prototype.Mn=function(){if(0<this.ys.count){var a=this.g;if(null!==a)for(var b=this.ys.copy().j;b.next();)a.remove(b.value)}E.prototype.Mn.call(this)};
z.defineProperty(F,{Wb:"layout"},function(){return this.ve},function(a){var b=this.ve;b!==a&&(null!==a&&z.l(a,ch,F,"layout"),null!==b&&(b.g=null,b.group=null),this.ve=a,null!==a&&(a.g=this.g,a.group=this),this.i("layout",b,a))});z.defineProperty(F,{CJ:"memberAdded"},function(){return this.xs},function(a){var b=this.xs;b!==a&&(null!==a&&z.h(a,"function",F,"memberAdded"),this.xs=a,this.i("memberAdded",b,a))});
z.defineProperty(F,{DJ:"memberRemoved"},function(){return this.zs},function(a){var b=this.zs;b!==a&&(null!==a&&z.h(a,"function",F,"memberRemoved"),this.zs=a,this.i("memberRemoved",b,a))});z.defineProperty(F,{aB:"memberValidation"},function(){return this.Il},function(a){var b=this.Il;b!==a&&(null!==a&&z.h(a,"function",F,"memberValidation"),this.Il=a,this.i("memberValidation",b,a))});
F.prototype.canAddMembers=function(a){var b=this.g;if(null===b)return!1;b=b.xb;for(a=Rh(a).j;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0};F.prototype.addMembers=function(a,b){var c=this.g;if(null===c)return!1;for(var c=c.xb,d=!0,e=Rh(a).j;e.next();){var g=e.value;!b||c.isValidMember(this,g)?g.Qa=this:d=!1}return d};
z.defineProperty(F,{CK:"ungroupable"},function(){return 0!==(this.Ha&256)},function(a){var b=0!==(this.Ha&256);b!==a&&(z.h(a,"boolean",F,"ungroupable"),this.Ha^=256,this.i("ungroupable",b,a))});F.prototype.canUngroup=function(){if(!this.CK)return!1;var a=this.layer;if(null!==a&&!a.kx)return!1;a=a.g;return null===a||a.kx?!0:!1};
F.prototype.gg=function(a){void 0===a&&(a=null);var b=0!==(this.Ha&65536);E.prototype.gg.call(this,a);if(!b)for(b=this.cF();b.next();){var c=b.value;if(null===a||!a.contains(c)){var d=c.aa;null!==d&&d!==this&&d.Ei(this)&&!d.isVisible()?c.gc():(d=c.ea,null!==d&&d!==this&&d.Ei(this)&&!d.isVisible()&&c.gc())}}};
F.prototype.findExternalLinksConnected=F.prototype.cF=function(){var a=this.lq();a.add(this);for(var b=new K(H),c=a.j;c.next();){var d=c.value;if(d instanceof E)for(d=d.Jd;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.j};F.prototype.findExternalNodesConnected=function(){var a=this.lq();a.add(this);for(var b=new K(E),c=a.j;c.next();){var d=c.value;if(d instanceof E)for(d=d.Jd;d.next();){var e=d.value,g=e.aa;a.contains(g)&&g!==this||b.add(g);e=e.ea;a.contains(e)&&e!==this||b.add(e)}}return b.j};
F.prototype.findContainingGroupChain=function(){function a(b,d){null!==b&&(d.add(b),a(b.Qa,d))}var b=new K(D);a(this,b);return b};F.prototype.findSubGraphParts=F.prototype.lq=function(){var a=new K(D);Lh(a,this,!0,0,!0);a.remove(this);return a};F.prototype.Kd=function(a){E.prototype.Kd.call(this,a);for(var b=this.Oc;b.next();)b.value.Kd(a)};F.prototype.collapseSubGraph=F.prototype.collapseSubGraph=function(){var a=this.g;if(null!==a&&!a.Nh){a.Nh=!0;var b=this.lq();js(this,b,a.Ya,this);a.Nh=!1}};
function js(a,b,c,d){for(var e=a.Oc;e.next();){var g=e.value;g.Kd(!1);if(g instanceof F){var h=g;h.Ke&&(h.SB=h.Ke,js(h,b,c,d))}if(g instanceof E)g.gg(b),ll(c,g,d);else if(g instanceof H)for(g=g.Kf;g.next();)g.value.gg(b)}a.Ke=!1}F.prototype.expandSubGraph=F.prototype.expandSubGraph=function(){var a=this.g;if(null!==a&&!a.Nh){a.Nh=!0;var b=this.lq();ks(this,b,a.Ya,this);a.Nh=!1}};
function ks(a,b,c,d){for(var e=a.Oc;e.next();){var g=e.value;g.Kd(!0);if(g instanceof F){var h=g;h.SB&&(h.SB=!1,ks(h,b,c,d))}if(g instanceof E)g.gg(b),kl(c,g,d);else if(g instanceof H)for(g=g.Kf;g.next();)g.value.gg(b)}a.Ke=!0}
z.defineProperty(F,{Ke:"isSubGraphExpanded"},function(){return 0!==(this.Ha&512)},function(a){var b=0!==(this.Ha&512);if(b!==a){z.h(a,"boolean",F,"isSubGraphExpanded");this.Ha^=512;var c=this.g;this.i("isSubGraphExpanded",b,a);b=this.rK;if(null!==b){var d=!0;null!==c&&(d=c.ab,c.ab=!0);b(this);null!==c&&(c.ab=d)}null!==c&&c.sa.lb?null!==this.Qb&&this.Qb.K():a?this.expandSubGraph():this.collapseSubGraph()}});
z.defineProperty(F,{SB:"wasSubGraphExpanded"},function(){return 0!==(this.Ha&1024)},function(a){var b=0!==(this.Ha&1024);b!==a&&(z.h(a,"boolean",F,"wasSubGraphExpanded"),this.Ha^=1024,this.i("wasSubGraphExpanded",b,a))});z.defineProperty(F,{rK:"subGraphExpandedChanged"},function(){return this.wt},function(a){var b=this.wt;b!==a&&(null!==a&&z.h(a,"function",F,"subGraphExpandedChanged"),this.wt=a,this.i("subGraphExpandedChanged",b,a))});
F.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);var c=a.x-c,b=a.y-b,d=z.Fb(c,b);E.prototype.move.call(this,a);for(a=this.lq().j;a.next();){var e=a.value;if(!(e instanceof H||e instanceof E&&e.xf)){var g=e.position,h=e.location;g.F()?(d.x=g.x+c,d.y=g.y+b,e.position=d):h.F()&&(d.x=h.x+c,d.y=h.y+b,e.location=d)}}for(a.reset();a.next();)e=a.value,e instanceof H&&(g=e.position,d.x=g.x+c,d.y=g.y+b,e.move(d));z.A(d)};
function Sj(){O.call(this);this.sf=Nd;this.gt=new w(NaN,NaN,NaN,NaN)}z.Ta(Sj,O);z.ka("Placeholder",Sj);Sj.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.sf=this.sf.V();a.gt=this.gt.copy()};Sj.prototype.Kk=function(a){if(null===this.background&&null===this.Xl)return!1;var b=this.Ja;return Sb(0,0,b.width,b.height,a.x,a.y)};
Sj.prototype.zq=function(){var a=this.ba;null!==a&&(a instanceof F||a instanceof ea)||z.k("Placeholder is not inside a Group or Adornment.");if(a instanceof F){var b=this.computeBorder(this.gt),c=this.Tc;Ab(c,b.width||0,b.height||0);Bo(this,0,0,c.width,c.height);for(var c=a.Oc,d=!1;c.next();)if(c.value.isVisible()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new M,c.oo(b,a.yf),a.location=new M(c.x,c.y))}else{var b=this.Da,c=this.Tc,d=this.padding,e=d.left+d.right,g=d.top+d.bottom;if(b.F())Ab(c,b.width+
e||0,b.height+g||0),Bo(this,-d.left,-d.top,c.width,c.height);else{var h=a.Ab,k=h.cb(hc,z.P()),b=z.fh(k.x,k.y,0,0);b.Ki(h.cb(qc,k));b.Ki(h.cb(jc,k));b.Ki(h.cb(oc,k));a.fj.m(b.x,b.y);Ab(c,b.width+e||0,b.height+g||0);Bo(this,-d.left,-d.top,c.width,c.height);z.A(k);z.Mb(b)}}};Sj.prototype.wj=function(a,b,c,d){var e=this.Z;e.x=a;e.y=b;e.width=c;e.height=d};
Sj.prototype.computeBorder=function(a){var b=this.ba;if(b instanceof F){var c=b;if(c.dI&&this.gt.F()){var d=c.g;if(null!==d&&(d=d.fb,d instanceof Ph&&!d.Kr&&null!==d.fc&&!d.fc.contains(c)))return a.assign(this.gt),a}}var c=z.Of(),d=this.computeMemberBounds(c),e=this.padding;a.m(d.x-e.left,d.y-e.top,Math.max(d.width+e.left+e.right,0),Math.max(d.height+e.top+e.bottom,0));z.Mb(c);b instanceof F&&(c=b,c.eI&&c.location.F()&&a.Ki(c.location));return a};
Sj.prototype.computeMemberBounds=function(a){if(!(this.ba instanceof F))return a.m(0,0,0,0),a;for(var b=this.ba,c=Infinity,d=Infinity,e=-Infinity,g=-Infinity,h=b.Oc;h.next();){var k=h.value;if(k.isVisible()){if(k instanceof H){var l=k;if(!b.px)continue;if(Cm(l))continue;if(l.aa===b||l.ea===b)continue}k=k.Z;k.left<c&&(c=k.left);k.top<d&&(d=k.top);k.right>e&&(e=k.right);k.bottom>g&&(g=k.bottom)}}isFinite(c)&&isFinite(d)?a.m(c,d,e-c,g-d):(b=b.location,c=this.padding,a.m(b.x+c.left,b.y+c.top,0,0));return a};
z.defineProperty(F,{io:null},function(){return 0!==(this.Ha&32768)},function(a){0!==(this.Ha&32768)!==a&&(this.Ha^=32768)});z.defineProperty(Sj,{padding:"padding"},function(){return this.sf},function(a){"number"===typeof a?a=new Kb(a):z.l(a,Kb,Sj,"padding");var b=this.sf;b.O(a)||(this.sf=a=a.V(),this.i("padding",b,a))});
function ch(){0<arguments.length&&z.wd(ch);z.wc(this);this.yz=this.ca=null;this.kk=this.es=!0;this.ks=!1;this.hr=(new M(0,0)).freeze();this.gs=this.hs=!0;this.JC="";this.lp=!1;this.Nz=null}z.ka("Layout",ch);ch.prototype.cloneProtected=function(a){a.es=this.es;a.kk=this.kk;a.ks=this.ks;a.hr.assign(this.hr);a.hs=this.hs;a.gs=this.gs;a.JC=this.JC;this.kk||(a.lp=!0)};ch.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};ch.prototype.pc=function(a){z.Tj(this,a)};
ch.prototype.toString=function(){var a=z.uf(Object.getPrototypeOf(this)),a=a+"(";null!==this.group&&(a+=" in "+this.group);null!==this.g&&(a+=" for "+this.g);return a+")"};z.defineProperty(ch,{g:"diagram"},function(){return this.ca},function(a){null!==a&&z.l(a,C,ch,"diagram");this.ca=a});z.defineProperty(ch,{group:"group"},function(){return this.yz},function(a){this.yz!==a&&(null!==a&&z.l(a,F,ch,"group"),this.yz=a,null!==a&&(this.ca=a.g))});
z.defineProperty(ch,{hJ:"isOngoing"},function(){return this.es},function(a){this.es!==a&&(z.h(a,"boolean",ch,"isOngoing"),this.es=a)});z.defineProperty(ch,{KF:"isInitial"},function(){return this.kk},function(a){z.h(a,"boolean",ch,"isInitial");this.kk=a;a||(this.lp=!0)});z.defineProperty(ch,{Vx:"isViewportSized"},function(){return this.ks},function(a){this.ks!==a&&(z.h(a,"boolean",ch,"isViewportSized"),(this.ks=a)&&this.N())});
z.defineProperty(ch,{wu:"isRouting"},function(){return this.hs},function(a){this.hs!==a&&(z.h(a,"boolean",ch,"isRouting"),this.hs=a)});z.defineProperty(ch,{MF:"isRealtime"},function(){return this.gs},function(a){this.gs!==a&&(z.h(a,"boolean",ch,"isRealtime"),this.gs=a)});z.defineProperty(ch,{Jf:"isValidLayout"},function(){return this.lp},function(a){this.lp!==a&&(z.h(a,"boolean",ch,"isValidLayout"),this.lp=a,a||(a=this.g,null!==a&&(a.sv=!0)))});
ch.prototype.invalidateLayout=ch.prototype.N=function(){if(this.lp){var a=this.g;if(null!==a&&!a.sa.lb){var b=a.Ya;!b.kp&&(b.wf&&b.Ii(),this.hJ&&a.Zn||this.KF&&!a.Zn)&&(this.Jf=!1,a.Te())}}};z.defineProperty(ch,{network:"network"},function(){return this.Nz},function(a){var b=this.Nz;b!==a&&(null!==a&&z.l(a,ya,ch,"network"),null!==b&&(b.Wb=null),this.Nz=a,null!==a&&(a.Wb=this))});ch.prototype.createNetwork=function(){return new ya};
ch.prototype.makeNetwork=function(a){var b=this.createNetwork();b.Wb=this;a instanceof C?(b.Hk(a.og,!0),b.Hk(a.links,!0)):a instanceof F?b.Hk(a.Oc):b.Hk(a.j);return b};ch.prototype.updateParts=function(){var a=this.g;if(null===a&&null!==this.network)for(var b=this.network.vertexes.j;b.next();){var c=b.value.Yc;if(null!==c&&(a=c.g,null!==a))break}this.Jf=!0;try{null!==a&&a.$b("Layout"),this.commitLayout()}finally{null!==a&&a.Vd("Layout")}};
ch.prototype.commitLayout=function(){for(var a=this.network.vertexes.j;a.next();)a.value.commit();if(this.wu)for(a=this.network.edges.j;a.next();)a.value.commit()};
ch.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new K(D);a instanceof C?(ls(this,b,a.og,!0,this.io,!0,!1,!0),ls(this,b,a.Gi,!0,this.io,!0,!1,!0)):a instanceof F?ls(this,b,a.Oc,!1,this.io,!0,!1,!0):b.Uc(a.j);var c=b.count;if(0<c){a=this.g;null!==a&&a.$b("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Ce.x,e=d,g=this.Ce.y,h=0,k=0,b=b.j;b.next();){var l=b.value;l.kf();var m=l.Ea,n=m.width,
m=m.height;l.moveTo(e,g);l.io=!1;e+=Math.max(n,50)+20;k=Math.max(k,Math.max(m,50));h>=c-1?(h=0,e=d,g+=k+20,k=0):h++}null!==a&&a.Vd("Layout")}this.Jf=!0};ch.prototype.io=function(a){return!a.location.F()||a instanceof F&&a.io?!0:!1};
function ls(a,b,c,d,e,g,h,k){for(c=c.j;c.next();){var l=c.value;d&&!l.vq||null!==e&&!e(l)||!l.canLayout()||(g&&l instanceof E?l.xf||(l instanceof F?null===l.Wb?ls(a,b,l.Oc,!1,e,g,h,k):(ms(l),b.add(l)):(ms(l),b.add(l))):h&&l instanceof H?b.add(l):!k||!l.qe()||l instanceof E||(ms(l),b.add(l)))}}function ms(a){var b=a.Z;(0===b.width||0===b.height||isNaN(b.width)||isNaN(b.height))&&a.kf()}
ch.prototype.collectParts=ch.prototype.YH=function(a){var b=new K(D);a instanceof C?(ls(this,b,a.og,!0,null,!0,!0,!0),ls(this,b,a.links,!0,null,!0,!0,!0),ls(this,b,a.Gi,!0,null,!0,!0,!0)):a instanceof F?ls(this,b,a.Oc,!1,null,!0,!0,!0):ls(this,b,a.j,!1,null,!0,!0,!0);return b};z.defineProperty(ch,{Ce:"arrangementOrigin"},function(){return this.hr},function(a){z.l(a,M,ch,"arrangementOrigin");this.hr.O(a)||(this.hr.assign(a),this.N())});
ch.prototype.initialOrigin=function(a){var b=this.group;if(null!==b){var c=b.position.copy();(isNaN(c.x)||isNaN(c.y))&&c.set(a);b=b.placeholder;null!==b&&(c=b.cb(hc),(isNaN(c.x)||isNaN(c.y))&&c.set(a),c.x+=b.padding.left,c.y+=b.padding.top);return c}return a};function ya(){z.wc(this);this.ve=null;this.clear()}z.ka("LayoutNetwork",ya);
ya.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.j;a.next();){var b=a.value;b.clear();b.network=null}if(this.edges)for(a=this.edges.j;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new K(za);this.edges=new K(Aa);this.jB=new oa(E,za);this.WA=new oa(H,Aa)};
ya.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutNetwork"+(null!==this.Wb?"("+this.Wb.toString()+")":"");if(0>=a)return b;b+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count;if(1<a){for(var c=this.vertexes.j;c.next();)b+="\n    "+c.value.toString(a-1);for(c=this.edges.j;c.next();)b+="\n    "+c.value.toString(a-1)}return b};z.defineProperty(ya,{Wb:"layout"},function(){return this.ve},function(a){u&&null!==a&&z.l(a,ch,ya,"layout");this.ve=a});ya.prototype.createVertex=function(){return new za};
ya.prototype.createEdge=function(){return new Aa};
ya.prototype.addParts=ya.prototype.Hk=function(a,b,c){if(null!==a){void 0===b&&(b=!1);z.h(b,"boolean",ya,"addParts:toplevelonly");void 0===c&&(c=null);null===c&&(c=function(a){if(a instanceof E)return!a.xf;if(a instanceof H){var b=a.aa;if(null===b||b.xf)return!1;a=a.ea;return null===a||a.xf?!1:!0}return!1});for(a=a.j;a.next();){var d=a.value;if(d instanceof E&&(!b||d.vq)&&d.canLayout()&&c(d))if(d instanceof F&&null===d.Wb)this.Hk(d.Oc,!1);else if(null===this.Qn(d)){var e=this.createVertex();e.Yc=
d;this.Vl(e)}}for(a.reset();a.next();)if(d=a.value,d instanceof H&&(!b||d.vq)&&d.canLayout()&&c(d)&&null===this.Bx(d)){var g=d.aa,e=d.ea;null!==g&&null!==e&&g!==e&&(g=this.findGroupVertex(g),e=this.findGroupVertex(e),null!==g&&null!==e&&this.yq(g,e,d))}}};ya.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;a=this.Qn(b);if(null!==a)return a;for(b=b.Qa;null!==b;){a=this.Qn(b);if(null!==a)return a;b=b.Qa}return null};
ya.prototype.addVertex=ya.prototype.Vl=function(a){if(null!==a){u&&z.l(a,za,ya,"addVertex:vertex");this.vertexes.add(a);var b=a.Yc;null!==b&&this.jB.add(b,a);a.network=this}};ya.prototype.addNode=ya.prototype.Nt=function(a){if(null===a)return null;u&&z.l(a,E,ya,"addNode:node");var b=this.Qn(a);null===b&&(b=this.createVertex(),b.Yc=a,this.Vl(b));return b};
ya.prototype.deleteVertex=ya.prototype.TE=function(a){if(null!==a&&(u&&z.l(a,za,ya,"deleteVertex:vertex"),ns(this,a))){for(var b=a.of,c=b.count-1;0<=c;c--){var d=b.fa(c);this.fq(d)}b=a.jf;for(c=b.count-1;0<=c;c--)d=b.fa(c),this.fq(d)}};function ns(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);c&&(a.jB.remove(b.Yc),b.network=null);return c}ya.prototype.deleteNode=function(a){null!==a&&(u&&z.l(a,E,ya,"deleteNode:node"),a=this.Qn(a),null!==a&&this.TE(a))};
ya.prototype.findVertex=ya.prototype.Qn=function(a){if(null===a)return null;u&&z.l(a,E,ya,"findVertex:node");return this.jB.qa(a)};ya.prototype.addEdge=ya.prototype.Up=function(a){if(null!==a){u&&z.l(a,Aa,ya,"addEdge:edge");this.edges.add(a);var b=a.link;null!==b&&null===this.Bx(b)&&this.WA.add(b,a);b=a.toVertex;null!==b&&b.vE(a);b=a.fromVertex;null!==b&&b.tE(a);a.network=this}};
ya.prototype.addLink=function(a){if(null===a)return null;u&&z.l(a,H,ya,"addLink:link");var b=a.aa,c=a.ea,d=this.Bx(a);null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.Nt(b)),null!==c&&(d.toVertex=this.Nt(c)),this.Up(d)):(d.fromVertex=null!==b?this.Nt(b):null,d.toVertex=null!==c?this.Nt(c):null);return d};ya.prototype.deleteEdge=ya.prototype.fq=function(a){if(null!==a){u&&z.l(a,Aa,ya,"deleteEdge:edge");var b=a.toVertex;null!==b&&b.SE(a);b=a.fromVertex;null!==b&&b.RE(a);os(this,a)}};
function os(a,b){null!==b&&a.edges.remove(b)&&(a.WA.remove(b.link),b.network=null)}ya.prototype.deleteLink=function(a){null!==a&&(u&&z.l(a,H,ya,"deleteLink:link"),a=this.Bx(a),null!==a&&this.fq(a))};ya.prototype.findEdge=ya.prototype.Bx=function(a){if(null===a)return null;u&&z.l(a,H,ya,"findEdge:link");return this.WA.qa(a)};
ya.prototype.linkVertexes=ya.prototype.yq=function(a,b,c){if(null===a||null===b)return null;u&&(z.l(a,za,ya,"linkVertexes:fromVertex"),z.l(b,za,ya,"linkVertexes:toVertex"),null!==c&&z.l(c,H,ya,"linkVertexes:link"));if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.Up(d);return d}return null};
ya.prototype.reverseEdge=ya.prototype.sy=function(a){if(null!==a){u&&z.l(a,Aa,ya,"reverseEdge:edge");var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.RE(a),c.SE(a),a.sy(),b.vE(a),c.tE(a))}};ya.prototype.deleteSelfEdges=ya.prototype.wx=function(){for(var a=z.tb(),b=this.edges.j;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.fq(a[c]);z.Ba(a)};
ya.prototype.deleteArtificialVertexes=function(){for(var a=z.tb(),b=this.vertexes.j;b.next();){var c=b.value;null===c.Yc&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.TE(a[b]);c=z.tb();for(b=this.edges.j;b.next();){var d=b.value;null===d.link&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.fq(c[b]);z.Ba(a);z.Ba(c)};function ps(a){for(var b=z.tb(),c=a.edges.j;c.next();){var d=c.value;null!==d.fromVertex&&null!==d.toVertex||b.push(d)}c=b.length;for(d=0;d<c;d++)a.fq(b[d]);z.Ba(b)}
ya.prototype.splitIntoSubNetworks=ya.prototype.qK=function(){this.deleteArtificialVertexes();ps(this);this.wx();for(var a=new J(ya),b=!0;b;)for(var b=!1,c=this.vertexes.j;c.next();){var d=c.value;if(0<d.of.count||0<d.jf.count){b=this.Wb.createNetwork();a.add(b);qs(this,b,d);b=!0;break}}a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function qs(a,b,c){if(null!==c&&c.network!==b){ns(a,c);b.Vl(c);for(var d=c.vc;d.next();){var e=d.value;e.network!==b&&(os(a,e),b.Up(e),qs(a,b,e.fromVertex))}for(d=c.sc;d.next();)c=d.value,c.network!==b&&(os(a,c),b.Up(c),qs(a,b,c.toVertex))}}ya.prototype.findAllParts=function(){for(var a=new K(D),b=this.vertexes.j;b.next();)a.add(b.value.Yc);for(b=this.edges.j;b.next();)a.add(b.value.link);return a};
function za(){z.wc(this);this.network=null;this.R=(new w(0,0,10,10)).freeze();this.W=(new M(5,5)).freeze();this.clear()}z.ka("LayoutVertex",za);za.prototype.clear=function(){this.Qd=this.ge=null;this.of=new J(Aa);this.jf=new J(Aa)};
za.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutVertex#"+z.Hd(this);if(0<a&&(b+=null!==this.Yc?"("+this.Yc.toString()+")":"",1<a)){a="";for(var c=!0,d=this.of.j;d.next();){var e=d.value;c?c=!1:a+=",";a+=e.toString(0)}e="";c=!0;for(d=this.jf.j;d.next();){var g=d.value;c?c=!1:e+=",";e+=g.toString(0)}b+=" sources: "+a+" destinations: "+e}return b};
z.defineProperty(za,{data:"data"},function(){return this.ge},function(a){this.ge=a;if(null!==a){var b=a.bounds;a=b.x;var c=b.y,d=b.width,b=b.height;this.W.m(d/2,b/2);this.R.m(a,c,d,b)}});
z.defineProperty(za,{Yc:"node"},function(){return this.Qd},function(a){if(this.Qd!==a){u&&null!==a&&z.l(a,E,za,"node");this.Qd=a;a.kf();var b=a.Z,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.R.m(c,d,e,b);if(!(a instanceof F)&&(a=a.cc.cb(mc),a.F())){this.W.m(a.x-c,a.y-d);return}this.W.m(e/2,b/2)}});z.defineProperty(za,{sb:"bounds"},function(){return this.R},function(a){this.R.O(a)||(u&&z.l(a,w,za,"bounds"),this.R.assign(a))});
z.defineProperty(za,{focus:"focus"},function(){return this.W},function(a){this.W.O(a)||(u&&z.l(a,M,za,"focus"),this.W.assign(a))});z.defineProperty(za,{oa:"centerX"},function(){return this.R.x+this.W.x},function(a){var b=this.R;b.x+this.W.x!==a&&(u&&z.p(a,za,"centerX"),b.Za(),b.x=a-this.W.x,b.freeze())});z.defineProperty(za,{xa:"centerY"},function(){return this.R.y+this.W.y},function(a){var b=this.R;b.y+this.W.y!==a&&(u&&z.p(a,za,"centerY"),b.Za(),b.y=a-this.W.y,b.freeze())});
z.defineProperty(za,{hu:"focusX"},function(){return this.W.x},function(a){var b=this.W;b.x!==a&&(b.Za(),b.x=a,b.freeze())});z.defineProperty(za,{iu:"focusY"},function(){return this.W.y},function(a){var b=this.W;b.y!==a&&(b.Za(),b.y=a,b.freeze())});z.defineProperty(za,{x:"x"},function(){return this.R.x},function(a){var b=this.R;b.x!==a&&(b.Za(),b.x=a,b.freeze())});z.defineProperty(za,{y:"y"},function(){return this.R.y},function(a){var b=this.R;b.y!==a&&(b.Za(),b.y=a,b.freeze())});
z.defineProperty(za,{width:"width"},function(){return this.R.width},function(a){var b=this.R;b.width!==a&&(b.Za(),b.width=a,b.freeze())});z.defineProperty(za,{height:"height"},function(){return this.R.height},function(a){var b=this.R;b.height!==a&&(b.Za(),b.height=a,b.freeze())});
za.prototype.commit=function(){var a=this.ge;if(null!==a){var b=this.sb,c=a.bounds;z.Xa(c)?(c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height):a.bounds=b.copy()}else if(a=this.Yc,null!==a){b=this.sb;if(!(a instanceof F)){var c=a.Z,d=a.cc.cb(mc);if(c.F()&&d.F()){a.moveTo(b.x+this.hu-(d.x-c.x),b.y+this.iu-(d.y-c.y));return}}a.moveTo(b.x,b.y)}};za.prototype.addSourceEdge=za.prototype.vE=function(a){null!==a&&(u&&z.l(a,Aa,za,"addSourceEdge:edge"),this.of.contains(a)||this.of.add(a))};
za.prototype.deleteSourceEdge=za.prototype.SE=function(a){null!==a&&(u&&z.l(a,Aa,za,"deleteSourceEdge:edge"),this.of.remove(a))};za.prototype.addDestinationEdge=za.prototype.tE=function(a){null!==a&&(u&&z.l(a,Aa,za,"addDestinationEdge:edge"),this.jf.contains(a)||this.jf.add(a))};za.prototype.deleteDestinationEdge=za.prototype.RE=function(a){null!==a&&(u&&z.l(a,Aa,za,"deleteDestinationEdge:edge"),this.jf.remove(a))};
z.w(za,{pK:"sourceVertexes"},function(){for(var a=new K(za),b=this.vc;b.next();)a.add(b.value.fromVertex);return a.j});z.w(za,{pI:"destinationVertexes"},function(){for(var a=new K(za),b=this.sc;b.next();)a.add(b.value.toVertex);return a.j});z.w(za,{vertexes:"vertexes"},function(){for(var a=new K(za),b=this.vc;b.next();)a.add(b.value.fromVertex);for(b=this.sc;b.next();)a.add(b.value.toVertex);return a.j});z.w(za,{vc:"sourceEdges"},function(){return this.of.j});z.w(za,{sc:"destinationEdges"},function(){return this.jf.j});
z.w(za,{edges:"edges"},function(){for(var a=new J(Aa),b=this.vc;b.next();)a.add(b.value);for(b=this.sc;b.next();)a.add(b.value);return a.j});z.w(za,{AI:"edgesCount"},function(){return this.of.count+this.jf.count});var rs;za.standardComparer=rs=function(a,b){u&&z.l(a,za,za,"standardComparer:m");u&&z.l(b,za,za,"standardComparer:n");var c=a.Qd,d=b.Qd;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:null!==d?-1:0};
za.smartComparer=function(a,b){u&&z.l(a,za,za,"smartComparer:m");u&&z.l(b,za,za,"smartComparer:n");if(null!==a){if(null!==b){var c=a.Qd,d=b.Qd;if(null!==c){if(null!==d){for(var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var g=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(g)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;
if(0!==g-h)return g-h}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0};function Aa(){z.wc(this);this.network=null;this.clear()}z.ka("LayoutEdge",Aa);Aa.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null};
Aa.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutEdge#"+z.Hd(this);0<a&&(b+=null!==this.link?"("+this.link.toString()+")":"",1<a&&(b+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null")));return b};Aa.prototype.sy=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};Aa.prototype.commit=function(){};
Aa.prototype.getOtherVertex=Aa.prototype.KI=function(a){u&&z.l(a,za,Aa,"getOtherVertex:v");return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null};function On(){0<arguments.length&&z.wd(On);ch.call(this);this.Vx=!0;this.It=this.Jt=NaN;this.Yj=(new Fa(NaN,NaN)).freeze();this.ri=(new Fa(10,10)).freeze();this.te=ss;this.yd=ts;this.qi=us;this.Zh=vs}z.Ta(On,ch);z.ka("GridLayout",On);
On.prototype.cloneProtected=function(a){ch.prototype.cloneProtected.call(this,a);a.Jt=this.Jt;a.It=this.It;a.Yj.assign(this.Yj);a.ri.assign(this.ri);a.te=this.te;a.yd=this.yd;a.qi=this.qi;a.Zh=this.Zh};On.prototype.pc=function(a){a.Pe===On?a===us||a===ws||a===xs||a===ys?this.sorting=a:a===ts||a===zs?this.ag=a:a===ss||a===As?this.alignment=a:z.k("Unknown enum value: "+a):ch.prototype.pc.call(this,a)};
On.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.Ce=this.initialOrigin(this.Ce);var b=this.g;a=this.YH(a);for(var c=a.copy().j;c.next();){var d=c.value;if(d instanceof H){var e=d;if(null!==e.aa||null!==e.ea){a.remove(e);continue}}d.kf();if(d instanceof F)for(d=d.Oc;d.next();)a.remove(d.value)}e=a.nc();if(0!==e.length){switch(this.sorting){case ys:e.reverse();break;case us:e.sort(this.comparer);
break;case ws:e.sort(this.comparer),e.reverse()}var g=this.GK;isNaN(g)&&(g=0);var h=this.fH,h=isNaN(h)&&null!==b?Math.max(b.yb.width-b.padding.left-b.padding.right,0):Math.max(this.fH,0);0>=g&&0>=h&&(g=1);a=this.spacing.width;isFinite(a)||(a=0);c=this.spacing.height;isFinite(c)||(c=0);null!==b&&b.$b("Layout");d=[];switch(this.alignment){case As:var k=a,l=c,m=Math.max(this.Yp.width,1);if(!isFinite(m))for(var n=m=0;n<e.length;n++)var p=e[n],q=p.Ea,m=Math.max(m,q.width);var m=Math.max(m+k,1),r=Math.max(this.Yp.height,
1);if(!isFinite(r))for(n=r=0;n<e.length;n++)p=e[n],q=p.Ea,r=Math.max(r,q.height);for(var r=Math.max(r+l,1),s=this.ag,v=this.Ce.x,t=v,x=this.Ce.y,y=0,B=0,n=0;n<e.length;n++){var p=e[n],q=p.Ea,A=Math.ceil((q.width+k)/m)*m,N=Math.ceil((q.height+l)/r)*r,G=0;switch(s){case zs:G=Math.abs(t-q.width);break;default:G=t+q.width}if(0<g&&y>g-1||0<h&&0<y&&G>h)d.push(new w(0,x,h+k,B)),y=0,t=v,x+=B,B=0;B=Math.max(B,N);N=0;switch(s){case zs:N=-q.width;break;default:N=0}p.moveTo(t+N,x);switch(s){case zs:t-=A;break;
default:t+=A}y++}d.push(new w(0,x,h+k,B));break;case ss:k=g;l=a;m=c;n=Math.max(this.Yp.width,1);p=x=A=0;q=z.P();for(g=0;g<e.length;g++)r=e[g],s=r.Ea,v=dr(r,r.cc,r.yf,q),A=Math.max(A,v.x),x=Math.max(x,s.width-v.x),p=Math.max(p,v.y);t=this.ag;switch(t){case zs:A+=l;break;default:x+=l}var n=isFinite(n)?Math.max(n+l,1):Math.max(A+x,1),T=x=this.Ce.x,y=this.Ce.y,B=0;h>=A&&(h-=A);for(var A=N=0,G=Math.max(this.Yp.height,1),fa=p=0,W=!0,P=z.P(),g=0;g<e.length;g++){r=e[g];s=r.Ea;v=dr(r,r.cc,r.yf,q);if(0<B)switch(t){case zs:T=
(T-x-(s.width-v.x))/n;T=Db(Math.round(T),T)?Math.round(T):Math.floor(T);T=T*n+x;break;default:T=(T-x+v.x)/n,T=Db(Math.round(T),T)?Math.round(T):Math.ceil(T),T=T*n+x}else switch(t){case zs:N=T+v.x+s.width;break;default:N=T-v.x}var aa=0;switch(t){case zs:aa=-(T+v.x)+N;break;default:aa=T+s.width-v.x-N}if(0<k&&B>k-1||0<h&&0<B&&aa>h){d.push(new w(0,W?y-p:y,h+l,fa+p+m));for(T=0;T<B&&g!==B;T++){var aa=e[g-B+T],Oa=dr(aa,aa.cc,aa.yf,P);aa.moveTo(aa.position.x,aa.position.y+p-Oa.y)}fa+=m;y=W?y+fa:y+(fa+p);
B=fa=p=0;T=x;W=!1}T===x&&(A=t===zs?Math.max(A,s.width-v.x):Math.min(A,-v.x));p=Math.max(p,v.y);fa=Math.max(fa,s.height-v.y);isFinite(G)&&(fa=Math.max(fa,Math.max(s.height,G)-v.y));W?r.moveTo(T-v.x,y-v.y):r.moveTo(T-v.x,y);switch(t){case zs:T-=v.x+l;break;default:T+=s.width-v.x+l}B++}d.push(new w(0,y,h+l,(W?fa:fa+p)+m));for(T=0;T<B&&g!==B;T++)aa=e[g-B+T],Oa=dr(aa,aa.cc,aa.yf,q),aa.moveTo(aa.position.x,aa.position.y+p-Oa.y);z.A(q);z.A(P);if(t===zs)for(g=0;g<d.length;g++)e=d[g],e.width+=A,e.x-=A;else for(g=
0;g<d.length;g++)e=d[g],e.x>A&&(e.width+=e.x-A,e.x=A)}for(k=g=h=e=0;k<d.length;k++)l=d[k],e=Math.min(e,l.x),h=Math.min(h,l.y),g=Math.max(g,l.x+l.width);this.ag===zs?this.commitLayers(d,new M(e+a/2-(g+e),h-c/2)):this.commitLayers(d,new M(e-a/2,h-c/2));null!==b&&b.Vd("Layout");this.Jf=!0}};On.prototype.commitLayers=function(){};
z.defineProperty(On,{fH:"wrappingWidth"},function(){return this.Jt},function(a){this.Jt!==a&&(z.h(a,"number",On,"wrappingWidth"),0<a||isNaN(a))&&(this.Jt=a,this.Vx=isNaN(a),this.N())});z.defineProperty(On,{GK:"wrappingColumn"},function(){return this.It},function(a){this.It!==a&&(z.h(a,"number",On,"wrappingColumn"),0<a||isNaN(a))&&(this.It=a,this.N())});z.defineProperty(On,{Yp:"cellSize"},function(){return this.Yj},function(a){z.l(a,Fa,On,"cellSize");this.Yj.O(a)||(this.Yj.assign(a),this.N())});
z.defineProperty(On,{spacing:"spacing"},function(){return this.ri},function(a){z.l(a,Fa,On,"spacing");this.ri.O(a)||(this.ri.assign(a),this.N())});z.defineProperty(On,{alignment:"alignment"},function(){return this.te},function(a){this.te!==a&&(z.Ca(a,On,On,"alignment"),a===ss||a===As)&&(this.te=a,this.N())});z.defineProperty(On,{ag:"arrangement"},function(){return this.yd},function(a){this.yd!==a&&(z.Ca(a,On,On,"arrangement"),a===ts||a===zs)&&(this.yd=a,this.N())});
z.defineProperty(On,{sorting:"sorting"},function(){return this.qi},function(a){this.qi!==a&&(z.Ca(a,On,On,"sorting"),a===xs||a===ys||a===us||a===ws)&&(this.qi=a,this.N())});z.defineProperty(On,{comparer:"comparer"},function(){return this.Zh},function(a){this.Zh!==a&&(z.h(a,"function",On,"comparer"),this.Zh=a,this.N())});var vs;On.standardComparer=vs=function(a,b){u&&z.l(a,D,On,"standardComparer:a");u&&z.l(b,D,On,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
On.smartComparer=function(a,b){u&&z.l(a,D,On,"standardComparer:a");u&&z.l(b,D,On,"standardComparer:b");if(null!==a){if(null!==b){for(var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var g=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(g)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;
if(0!==g-h)return g-h}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==b?-1:0};var As;On.Position=As=z.s(On,"Position",0);var ss;On.Location=ss=z.s(On,"Location",1);var ts;On.LeftToRight=ts=z.s(On,"LeftToRight",2);var zs;On.RightToLeft=zs=z.s(On,"RightToLeft",3);var xs;On.Forward=xs=z.s(On,"Forward",4);var ys;On.Reverse=ys=z.s(On,"Reverse",5);var us;On.Ascending=us=z.s(On,"Ascending",6);var ws;On.Descending=ws=z.s(On,"Descending",7);
function Bs(){0<arguments.length&&z.wd(Bs);ch.call(this);this.oz=this.Vo=this.he=0;this.Lr=360;this.nz=Cs;this.tl=0;this.RC=Cs;this.zv=this.Qg=this.hE=0;this.Zw=new Ds;this.Bv=this.fn=0;this.vH=600;this.Xs=NaN;this.jr=1;this.vt=0;this.yt=360;this.yd=Cs;this.ga=Es;this.qi=Fs;this.Zh=rs;this.ri=6;this.Ms=Gs}z.Ta(Bs,ch);z.ka("CircularLayout",Bs);
Bs.prototype.cloneProtected=function(a){ch.prototype.cloneProtected.call(this,a);a.Xs=this.Xs;a.jr=this.jr;a.vt=this.vt;a.yt=this.yt;a.yd=this.yd;a.ga=this.ga;a.qi=this.qi;a.Zh=this.Zh;a.ri=this.ri;a.Ms=this.Ms};Bs.prototype.pc=function(a){if(a.Pe===Bs)if(a===Hs||a===Is||a===Js||a===Ks||a===Fs)this.sorting=a;else if(a===Ls||a===Ms||a===Es||a===Ns)this.direction=a;else if(a===Os||a===Ps||a===Cs||a===Qs)this.ag=a;else{if(a===Rs||a===Gs)this.by=a}else ch.prototype.pc.call(this,a)};
Bs.prototype.createNetwork=function(){return new Ss};
Bs.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.first(),a.oa=0,a.xa=0);else{var b=new J(Ts);b.Uc(a.j);a=new J(Ts);var c=new J(Ts),d;d=this.sort(b);var e=this.nz,g=this.RC,h=this.he,k=this.Vo,l=this.oz,m=this.Lr,b=this.tl,n=this.hE,p=this.Qg,q=this.zv,e=this.ag,g=this.by,h=this.UJ;if(!isFinite(h)||
0>=h)h=NaN;k=this.RH;if(!isFinite(k)||0>=k)k=1;l=this.Me;isFinite(l)||(l=0);m=this.Bf;if(!isFinite(m)||360<m||1>m)m=360;b=this.spacing;isFinite(b)||(b=NaN);e===Qs&&g===Rs?e=Cs:e===Qs&&g!==Rs&&(g=Rs,e=this.ag);if((this.direction===Ls||this.direction===Ms)&&this.sorting!==Fs){for(var r=0;!(r>=d.length);r+=2){a.add(d.fa(r));if(r+1>=d.length)break;c.add(d.fa(r+1))}this.direction===Ls?(this.ag===Qs&&a.reverse(),d=new J(Ts),d.Uc(a),d.Uc(c)):(this.ag===Qs&&c.reverse(),d=new J(Ts),d.Uc(c),d.Uc(a))}for(var s=
d.length,v=n=0,r=0;r<d.length;r++){var p=l+m*v*(this.direction===Es?1:-1)/s,t=d.fa(r).diameter;isNaN(t)&&(t=Us(d.fa(r),p));360>m&&(0===r||r===d.length-1)&&(t/=2);n+=t;v++}if(isNaN(h)||e===Qs){isNaN(b)&&(b=6);if(e!==Cs&&e!==Qs){t=-Infinity;for(r=0;r<s;r++){var q=d.fa(r),x=d.fa(r===s-1?0:r+1);isNaN(q.diameter)&&Us(q,0);isNaN(x.diameter)&&Us(x,0);t=Math.max(t,(q.diameter+x.diameter)/2)}q=t+b;e===Os?(p=2*Math.PI/s,h=(t+b)/p):h=Vs(this,q*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180)}else h=Vs(this,n+(360<=
m?s:s-1)*(e!==Qs?b:1.6*b),k,l*Math.PI/180,m*Math.PI/180);p=h*k}else if(p=h*k,v=Ws(this,h,p,l*Math.PI/180,m*Math.PI/180),isNaN(b)){if(e===Cs||e===Qs)b=(v-n)/(360<=m?s:s-1)}else if(e===Cs||e===Qs)r=(v-n)/(360<=m?s:s-1),r<b?(h=Vs(this,n+b*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180),p=h*k):b=r;else{t=-Infinity;for(r=0;r<s;r++)q=d.fa(r),x=d.fa(r===s-1?0:r+1),isNaN(q.diameter)&&Us(q,0),isNaN(x.diameter)&&Us(x,0),t=Math.max(t,(q.diameter+x.diameter)/2);q=t+b;r=Vs(this,q*(360<=m?s:s-1),k,l*Math.PI/180,
m*Math.PI/180);r>h?(h=r,p=h*k):q=v/(360<=m?s:s-1)}this.nz=e;this.RC=g;this.he=h;this.Vo=k;this.oz=l;this.Lr=m;this.tl=b;this.hE=n;this.Qg=p;this.zv=q;b=d;d=this.nz;e=this.he;g=this.oz;k=this.Lr;l=this.tl;m=this.Qg;n=this.zv;if(this.direction!==Ls&&this.direction!==Ms||d!==Qs)if(this.direction===Ls||this.direction===Ms){h=0;switch(d){case Ps:h=180*Xs(this,e,m,g,n)/Math.PI;break;case Cs:n=b=0;h=a.first();null!==h&&(b=Us(h,Math.PI/2));h=c.first();null!==h&&(n=Us(h,Math.PI/2));h=180*Xs(this,e,m,g,l+(b+
n)/2)/Math.PI;break;case Os:h=k/b.length}if(this.direction===Ls){switch(d){case Ps:Ys(this,a,g,Ns);break;case Cs:Zs(this,a,g,Ns);break;case Os:$s(this,a,k/2,g,Ns)}switch(d){case Ps:Ys(this,c,g+h,Es);break;case Cs:Zs(this,c,g+h,Es);break;case Os:$s(this,c,k/2,g+h,Es)}}else{switch(d){case Ps:Ys(this,c,g,Ns);break;case Cs:Zs(this,c,g,Ns);break;case Os:$s(this,c,k/2,g,Ns)}switch(d){case Ps:Ys(this,a,g+h,Es);break;case Cs:Zs(this,a,g+h,Es);break;case Os:$s(this,a,k/2,g+h,Es)}}}else switch(d){case Ps:Ys(this,
b,g,this.direction);break;case Cs:Zs(this,b,g,this.direction);break;case Os:$s(this,b,k,g,this.direction);break;case Qs:at(this,b,k,g,this.direction)}else at(this,b,k,g-k/2,Es)}this.updateParts();this.network=null;this.Jf=!0};
function $s(a,b,c,d,e){var g=a.Lr,h=a.he;a=a.Qg;d=d*Math.PI/180;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=d+(e===Es?l*c/(360<=g?k:k-1):-(l*c)/k),n=b.fa(l),p=h*Math.tan(m)/a,p=Math.sqrt((h*h+a*a*p*p)/(1+p*p));n.oa=p*Math.cos(m);n.xa=p*Math.sin(m);n.actualAngle=180*m/Math.PI}}
function Zs(a,b,c,d){var e=a.he,g=a.Qg,h=a.tl;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.fa(l),n=b.fa(l===k-1?0:l+1),p=g*Math.sin(c);m.oa=e*Math.cos(c);m.xa=p;m.actualAngle=180*c/Math.PI;isNaN(m.diameter)&&Us(m,0);isNaN(n.diameter)&&Us(n,0);m=Xs(a,e,g,d===Es?c:-c,(m.diameter+n.diameter)/2+h);c+=d===Es?m:-m}}
function Ys(a,b,c,d){var e=a.he,g=a.Qg,h=a.zv;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.fa(l);m.oa=e*Math.cos(c);m.xa=g*Math.sin(c);m.actualAngle=180*c/Math.PI;m=Xs(a,e,g,d===Es?c:-c,h);c+=d===Es?m:-m}}function at(a,b,c,d,e){var g=a.Bv,g=a.Lr;a.fn=0;a.Zw=new Ds;if(360>c){for(g=d+(e===Es?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.Bv=g;bt(a,b,c,d,e)}else ct(a,b,c,d,e);a.Zw.commit(b)}
function ct(a,b,c,d,e){var g=a.he,h=a.tl,k=a.Vo,l=g*Math.cos(d*Math.PI/180),m=a.Qg*Math.sin(d*Math.PI/180),n=b.nc();if(3===n.length)n[0].oa=g,n[0].xa=0,n[1].oa=n[0].oa-n[0].width/2-n[1].width/2-h,n[1].y=n[0].y,n[2].oa=(n[0].oa+n[1].oa)/2,n[2].y=n[0].y-n[2].height-h;else if(4===n.length)n[0].oa=g,n[0].xa=0,n[2].oa=-n[0].oa,n[2].xa=n[0].xa,n[1].oa=0,n[1].y=Math.min(n[0].y,n[2].y)-n[1].height-h,n[3].oa=0,n[3].y=Math.max(n[0].y+n[0].height+h,n[2].y+n[2].height+h);else{for(var g=z.P(),p=0;p<n.length;p++){n[p].oa=
l;n[p].xa=m;if(p>=n.length-1)break;dt(a,l,m,n,p,e,g)||et(a,l,m,n,p,e,g);l=g.x;m=g.y}z.A(g);a.fn++;if(!(23<a.fn)){var l=n[0].oa,m=n[0].xa,g=n[n.length-1].oa,p=n[n.length-1].xa,q=Math.abs(l-g)-((n[0].width+n[n.length-1].width)/2+h),r=Math.abs(m-p)-((n[0].height+n[n.length-1].height)/2+h),h=0;1>Math.abs(r)?Math.abs(l-g)<(n[0].width+n[n.length-1].width)/2&&(h=0):h=0<r?r:1>Math.abs(q)?0:q;q=!1;q=Math.abs(g)>Math.abs(p)?0<g!==m>p:0<p!==l<g;if(q=e===Es?q:!q)h=-Math.abs(h),h=Math.min(h,-n[n.length-1].width),
h=Math.min(h,-n[n.length-1].height);a.Zw.compare(h,n);1<Math.abs(h)&&(a.he=8>a.fn?a.he-h/(2*Math.PI):5>n.length&&10<h?a.he/2:a.he-(0<h?1.7:-2.3),a.Qg=a.he*k,ct(a,b,c,d,e))}}}
function bt(a,b,c,d,e){for(var g=a.he,h=a.Qg,k=a.Vo,l=g*Math.cos(d*Math.PI/180),m=h*Math.sin(d*Math.PI/180),n=z.P(),p=b.nc(),q=0;q<p.length;q++){p[q].oa=l;p[q].xa=m;if(q>=p.length-1)break;dt(a,l,m,p,q,e,n)||et(a,l,m,p,q,e,n);l=n.x;m=n.y}z.A(n);a.fn++;if(!(23<a.fn)){l=Math.atan2(m,l);l=e===Es?a.Bv-l:l-a.Bv;l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI;g=l*(g+h)/2;h=a.Zw;if(Math.abs(g)<Math.abs(h.mq))for(h.mq=g,h.wo=[],h.Yq=[],l=0;l<p.length;l++)h.wo[l]=p[l].sb.x,h.Yq[l]=p[l].sb.y;1<Math.abs(g)&&
(a.he=8>a.fn?a.he-g/(2*Math.PI):a.he-(0<g?1.7:-2.3),a.Qg=a.he*k,bt(a,b,c,d,e))}}function dt(a,b,c,d,e,g,h){var k=a.he,l=a.Qg,m=0,n=0;a=(d[e].width+d[e+1].width)/2+a.tl;var p=!1;if(0<=c!==(g===Es)){if(m=b+a,m>k){m=b-a;if(m<-k)return h.x=m,h.y=n,!1;p=!0}}else if(m=b-a,m<-k){m=b+a;if(m>k)return h.x=m,h.y=n,!1;p=!0}n=Math.sqrt(1-Math.min(1,m*m/(k*k)))*l;0>c!==p&&(n=-n);if(Math.abs(c-n)>(d[e].height+d[e+1].height)/2)return h.x=m,h.y=n,!1;h.x=m;h.y=n;return!0}
function et(a,b,c,d,e,g,h){var k=a.he,l=a.Qg,m=0,n=0;a=(d[e].height+d[e+1].height)/2+a.tl;d=!1;if(0<=b!==(g===Es)){if(n=c-a,n<-l){n=c+a;if(n>l){h.x=m;h.y=n;return}d=!0}}else if(n=c+a,n>l){n=c-a;if(n<-l){h.x=m;h.y=n;return}d=!0}m=Math.sqrt(1-Math.min(1,n*n/(l*l)))*k;0>b!==d&&(m=-m);h.x=m;h.y=n}Bs.prototype.commitLayout=function(){this.commitNodes();this.wu&&this.commitLinks()};
Bs.prototype.commitNodes=function(){for(var a=this.GH,b=this.network.vertexes.j;b.next();){var c=b.value;c.x+=a.x;c.y+=a.y;c.commit()}};Bs.prototype.commitLinks=function(){for(var a=this.network.edges.j;a.next();)a.value.commit()};
function Ws(a,b,c,d,e){var g=a.vH;if(.001>Math.abs(a.Vo-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;for(var h=0,k=0,k=void 0!==d&&void 0!==e?e/(g+1):Math.PI/(2*(g+1)),l=0,m=0;m<=g;m++)l=void 0!==d&&void 0!==e?d+m*e/g:m*Math.PI/(2*g),l=Math.sin(l),h+=Math.sqrt(1-a*a*l*l)*k;return void 0!==d&&void 0!==e?(b>c?b:c)*h:4*(b>c?b:c)*h}function Vs(a,b,c,d,e){var g=0,g=void 0!==d&&void 0!==e?Ws(a,1,c,d,e):Ws(a,1,c);return b/g}
function Xs(a,b,c,d,e){if(.001>Math.abs(a.Vo-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,h=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var k=0;;k++){var l=Math.sin(d+k*a),h=h+(b>c?b:c)*Math.sqrt(1-g*g*l*l)*a;if(h>=e)return k*a}}
Bs.prototype.sort=function(a){switch(this.sorting){case Js:break;case Ks:a.reverse();break;case Hs:a.sort(this.comparer);break;case Is:a.sort(this.comparer);a.reverse();break;case Fs:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new J(Ts),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var h=0;h<a.length;h++){var k=a.fa(h).AI;k>e&&(e=k,g=h)}else for(h=0;h<a.length;h++)k=b[h],k>e&&(e=k,g=h);d.add(a.fa(g));b[g]=-1;g=a.fa(g);e=0;for(h=g.vc;h.next();)e=a.indexOf(h.value.fromVertex),0>e||0<=b[e]&&
b[e]++;for(g=g.sc;g.next();)e=a.indexOf(g.value.toVertex),0>e||0<=b[e]&&b[e]++}a=[];for(b=0;b<d.length;b++){h=d.fa(b);a[b]=[];for(var l=0,c=h.sc;c.next();)l=d.indexOf(c.value.toVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(c=h.vc;c.next();)l=d.indexOf(c.value.fromVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}h=[];for(b=0;b<a.length;b++)h[b]=0;for(var c=[],k=[],m=[],e=[],g=new J(Ts),n=0,b=0;b<a.length;b++){var p=a[b].length;if(1===p)e.push(b);else if(0===p)g.add(d.fa(b));else{if(0===n)c.push(b);
else{for(var q=Infinity,r=Infinity,s=-1,v=[],p=0;p<c.length;p++)0>a[c[p]].indexOf(c[p===c.length-1?0:p+1])&&v.push(p===c.length-1?0:p+1);if(0===v.length)for(p=0;p<c.length;p++)v.push(p);for(p=0;p<v.length;p++){var t=v[p],x,l=a[b];x=k;for(var y=m,B=h,A=t,N=c,G=0,T=0;T<x.length;T++){var fa=B[x[T]],W=B[y[T]],P=0,aa=0;fa<W?(P=fa,aa=W):(P=W,aa=fa);if(P<A&&A<=aa)for(fa=0;fa<l.length;fa++)W=l[fa],0>N.indexOf(W)||P<B[W]&&B[W]<aa||P===B[W]||aa===B[W]||G++;else for(fa=0;fa<l.length;fa++)W=l[fa],0>N.indexOf(W)||
P<B[W]&&B[W]<aa&&P!==B[W]&&aa!==B[W]&&G++}x=G;for(B=y=0;B<a[b].length;B++)l=c.indexOf(a[b][B]),0<=l&&(l=Math.abs(t-(l>=t?l+1:l)),y+=l<c.length+1-l?l:c.length+1-l);for(B=0;B<k.length;B++)l=h[k[B]],A=h[m[B]],l>=t&&l++,A>=t&&A++,l>A&&(N=A,A=l,l=N),A-l<(c.length+2)/2===(l<t&&t<=A)&&y++;if(x<q||x===q&&y<r)q=x,r=y,s=t}c.splice(s,0,b);for(p=0;p<c.length;p++)h[c[p]]=p;for(p=0;p<a[b].length;p++)q=a[b][p],0<=c.indexOf(q)&&(k.push(b),m.push(q))}n++}}k=!1;for(m=c.length;;){k=!0;for(h=0;h<e.length;h++)if(b=e[h],
n=a[b][0],l=c.indexOf(n),0<=l){for(r=p=0;r<a[n].length;r++)q=a[n][r],q=c.indexOf(q),0>q||q===l||(s=q>l?q-l:l-q,p+=q<l!==s>m-s?1:-1);c.splice(0>p?l:l+1,0,b);e.splice(h,1);h--}else k=!1;if(k)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],g.add(d.fa(l));return g;default:z.k("Invalid sorting type.")}return a};z.defineProperty(Bs,{UJ:"radius"},function(){return this.Xs},function(a){this.Xs!==a&&(z.h(a,"number",Bs,"radius"),0<a||isNaN(a))&&(this.Xs=a,this.N())});
z.defineProperty(Bs,{RH:"aspectRatio"},function(){return this.jr},function(a){this.jr!==a&&(z.h(a,"number",Bs,"aspectRatio"),0<a&&(this.jr=a,this.N()))});z.defineProperty(Bs,{Me:"startAngle"},function(){return this.vt},function(a){this.vt!==a&&(z.h(a,"number",Bs,"startAngle"),this.vt=a,this.N())});z.defineProperty(Bs,{Bf:"sweepAngle"},function(){return this.yt},function(a){this.yt!==a&&(z.h(a,"number",Bs,"sweepAngle"),this.yt=0<a&&360>=a?a:360,this.N())});
z.defineProperty(Bs,{ag:"arrangement"},function(){return this.yd},function(a){this.yd!==a&&(z.Ca(a,Bs,Bs,"arrangement"),a===Qs||a===Cs||a===Ps||a===Os)&&(this.yd=a,this.N())});z.defineProperty(Bs,{direction:"direction"},function(){return this.ga},function(a){this.ga!==a&&(z.Ca(a,Bs,Bs,"direction"),a===Es||a===Ns||a===Ls||a===Ms)&&(this.ga=a,this.N())});
z.defineProperty(Bs,{sorting:"sorting"},function(){return this.qi},function(a){this.qi!==a&&(z.Ca(a,Bs,Bs,"sorting"),a===Js||a===Ks||a===Hs||Is||a===Fs)&&(this.qi=a,this.N())});z.defineProperty(Bs,{comparer:"comparer"},function(){return this.Zh},function(a){this.Zh!==a&&(z.h(a,"function",Bs,"comparer"),this.Zh=a,this.N())});z.defineProperty(Bs,{spacing:"spacing"},function(){return this.ri},function(a){this.ri!==a&&(z.h(a,"number",Bs,"spacing"),this.ri=a,this.N())});
z.defineProperty(Bs,{by:"nodeDiameterFormula"},function(){return this.Ms},function(a){this.Ms!==a&&(z.Ca(a,Bs,Bs,"nodeDiameterFormula"),a===Gs||a===Rs)&&(this.Ms=a,this.N())});z.w(Bs,{HH:"actualXRadius"},function(){return this.he});z.w(Bs,{IH:"actualYRadius"},function(){return this.Qg});z.w(Bs,{JK:"actualSpacing"},function(){return this.tl});z.w(Bs,{GH:"actualCenter"},function(){return isNaN(this.Ce.x)||isNaN(this.Ce.y)?new M(0,0):new M(this.Ce.x+this.HH,this.Ce.y+this.IH)});var Cs;
Bs.ConstantSpacing=Cs=z.s(Bs,"ConstantSpacing",0);var Ps;Bs.ConstantDistance=Ps=z.s(Bs,"ConstantDistance",1);var Os;Bs.ConstantAngle=Os=z.s(Bs,"ConstantAngle",2);var Qs;Bs.Packed=Qs=z.s(Bs,"Packed",3);var Es;Bs.Clockwise=Es=z.s(Bs,"Clockwise",4);var Ns;Bs.Counterclockwise=Ns=z.s(Bs,"Counterclockwise",5);var Ls;Bs.BidirectionalLeft=Ls=z.s(Bs,"BidirectionalLeft",6);var Ms;Bs.BidirectionalRight=Ms=z.s(Bs,"BidirectionalRight",7);var Js;Bs.Forwards=Js=z.s(Bs,"Forwards",8);var Ks;
Bs.Reverse=Ks=z.s(Bs,"Reverse",9);var Hs;Bs.Ascending=Hs=z.s(Bs,"Ascending",10);var Is;Bs.Descending=Is=z.s(Bs,"Descending",11);var Fs;Bs.Optimized=Fs=z.s(Bs,"Optimized",12);var Gs;Bs.Pythagorean=Gs=z.s(Bs,"Pythagorean",13);var Rs;Bs.Circular=Rs=z.s(Bs,"Circular",14);function Ds(){this.mq=-Infinity;this.Yq=this.wo=null}
Ds.prototype.compare=function(a,b){if(0<a&&0>this.mq||Math.abs(a)<Math.abs(this.mq)&&!(0>a&&0<this.mq)){this.mq=a;this.wo=[];this.Yq=[];for(var c=0;c<b.length;c++)this.wo[c]=b[c].sb.x,this.Yq[c]=b[c].sb.y}};Ds.prototype.commit=function(a){if(null!==this.wo&&null!==this.Yq)for(var b=0;b<this.wo.length;b++){var c=a.fa(b);c.x=this.wo[b];c.y=this.Yq[b]}};function Ss(){ya.call(this)}z.Ta(Ss,ya);z.ka("CircularNetwork",Ss);Ss.prototype.createVertex=function(){return new Ts};Ss.prototype.createEdge=function(){return new ft};
function Ts(){za.call(this);this.actualAngle=this.diameter=NaN}z.Ta(Ts,za);z.ka("CircularVertex",Ts);
function Us(a,b){var c=a.network;if(null===c)return NaN;c=c.Wb;if(null===c)return NaN;if(c.ag===Qs)if(c.by===Rs)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.by===Rs?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function ft(){Aa.call(this)}z.Ta(ft,Aa);z.ka("CircularEdge",ft);
function gt(){0<arguments.length&&z.wd(gt);ch.call(this);this.Pg=null;this.ms=0;this.sg=(new Fa(100,100)).freeze();this.ir=!1;this.pi=!0;this.Yh=!1;this.vp=100;this.Pr=1;this.di=1E3;this.Ys=Math;this.Ro=.05;this.Qo=50;this.Oo=150;this.Po=0;this.Dr=10;this.Cr=5}z.Ta(gt,ch);z.ka("ForceDirectedLayout",gt);
gt.prototype.cloneProtected=function(a){ch.prototype.cloneProtected.call(this,a);a.sg.assign(this.sg);a.ir=this.ir;a.pi=this.pi;a.Yh=this.Yh;a.vp=this.vp;a.Pr=this.Pr;a.di=this.di;a.Ys=this.Ys;a.Ro=this.Ro;a.Qo=this.Qo;a.Oo=this.Oo;a.Po=this.Po;a.Dr=this.Dr;a.Cr=this.Cr};gt.prototype.createNetwork=function(){return new ht};
gt.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.$A;if(0<this.network.vertexes.count){this.network.wx();for(var b=this.network.vertexes.j;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.j;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);
this.iA();this.ms=0;if(this.needsClusterLayout()){b=this.network;for(c=b.qK().j;c.next();){this.network=c.value;for(var d=this.network.vertexes.j;d.next();){var e=d.value;e.pg=e.vertexes.count;e.Yk=1;e.Gn=null;e.Uh=null}ot(this,0,a)}this.network=b;c.reset();u&&z.l(b,ht,gt,"arrangeConnectedGraphs:singletons");for(var d=this.AE,g=c.count,h=!0,k=e=0,l=z.tb(),m=0;m<g+b.vertexes.count+2;m++)l[m]=null;g=0;c.reset();for(var n=z.Of();c.next();)if(m=c.value,this.Jh(m,n),h)h=!1,e=n.x+n.width/2,k=n.y+n.height/
2,l[0]=new M(n.x+n.width+d.width,n.y),l[1]=new M(n.x,n.y+n.height+d.height),g=2;else{var p=Wt(l,g,e,k,n.width,n.height,d),q=l[p],r=new M(q.x+n.width+d.width,q.y),s=new M(q.x,q.y+n.height+d.height);p+1<g&&l.splice(p+1,0,null);l[p]=r;l[p+1]=s;g++;p=q.x-n.x;q=q.y-n.y;for(m=m.vertexes.j;m.next();)r=m.value,r.oa+=p,r.xa+=q}z.Mb(n);for(m=b.vertexes.j;m.next();)h=m.value,n=h.sb,2>g?(e=n.x+n.width/2,k=n.y+n.height/2,l[0]=new M(n.x+n.width+d.width,n.y),l[1]=new M(n.x,n.y+n.height+d.height),g=2):(p=Wt(l,g,
e,k,n.width,n.height,d),q=l[p],r=new M(q.x+n.width+d.width,q.y),s=new M(q.x,q.y+n.height+d.height),p+1<g&&l.splice(p+1,0,null),l[p]=r,l[p+1]=s,g++,h.oa=q.x+h.width/2,h.xa=q.y+h.height/2);z.Ba(l);for(c.reset();c.next();){d=c.value;for(e=d.vertexes.j;e.next();)b.Vl(e.value);for(d=d.edges.j;d.next();)b.Up(d.value)}}Xt(this,a);this.updateParts()}this.vp=a;this.network=null;this.Jf=!0};
gt.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var a=0,b=0,c=this.network.vertexes.first().sb,d=this.network.vertexes.j;d.next();){if(d.value.sb.Vg(c)&&(a++,2<a))return!0;if(10<b)break;b++}return!1};gt.prototype.Jh=function(a,b){for(var c=!0,d=a.vertexes.j;d.next();){var e=d.value;c?(c=!1,b.set(e.sb)):b.Wh(e.sb)}return b};
function Yt(a,b,c){u&&(z.p(b,gt,"computeClusterLayoutIterations:level"),z.p(c,gt,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10)}
function ot(a,b,c){u&&(z.p(b,gt,"layoutClusters:level"),z.p(c,gt,"layoutClusters:maxiter"));if(Zt(a,b)){var d=a.di;a.di*=1+1/(b+1);var e=$t(a,b),g=Math.max(0,Yt(a,b,c));a.$A+=g;ot(a,b+1,c);Xt(a,g);au(a,e,b);c=a.Pg;null===c?c=new J(bu):c.clear();c.Uc(e.vertexes);c.sort(function(a,b){return null===a||null===b||a===b?0:b.pg-a.pg});for(e=c.j;e.next();)cu(a,e.value,b);a.di=d}}
function Zt(a,b){u&&z.p(b,gt,"hasClusters:level");if(10<b||3>a.network.vertexes.count)return!1;null===a.Pg?a.Pg=new J(bu):a.Pg.clear();a.Pg.Uc(a.network.vertexes);var c=a.Pg;c.sort(function(a,b){return null===a||null===b||a===b?0:b.pg-a.pg});for(var d=c.count-1;0<=d&&1>=c.fa(d).pg;)d--;return 1<c.count-d}
function $t(a,b){u&&z.p(b,gt,"pushSubNetwork:level");for(var c=a.network,d=new ht,e=a.Pg.j;e.next();){var g=e.value;if(1<g.pg){d.Vl(g);var h=new du;h.Iy=g.pg;h.Jy=g.width;h.Hy=g.height;h.WB=g.W.x;h.XB=g.W.y;null===g.Uh&&(g.Uh=new J(du));g.Uh.add(h);g.tB=g.Uh.count-1}else break}for(var k=c.edges.j;k.next();)if(e=k.value,e.fromVertex.network===d&&e.toVertex.network===d)d.Up(e);else if(e.fromVertex.network===d){var l=e.fromVertex.Gn;null===l&&(l=new J(bu),e.fromVertex.Gn=l);l.add(e.toVertex);e.fromVertex.pg--;
e.fromVertex.Yk+=e.toVertex.Yk}else e.toVertex.network===d&&(l=e.toVertex.Gn,null===l&&(l=new J(bu),e.toVertex.Gn=l),l.add(e.fromVertex),e.toVertex.pg--,e.toVertex.Yk+=e.fromVertex.Yk);for(e=d.edges.j;e.next();)g=e.value,g.length*=Math.max(1,pe((g.fromVertex.Yk+g.toVertex.Yk)/(4*b+1)));for(e=d.vertexes.j;e.next();)if(g=e.value,l=g.Gn,null!==l&&0<l.count&&(h=g.Uh.fa(g.Uh.count-1),h=h.Iy-g.pg,!(0>=h))){for(var m=0,n=0,p=l.count-h;p<l.count;p++){for(var q=l.fa(p),r=null,k=q.edges.j;k.next();){var s=
k.value;if(s.KI(q)===g){r=s;break}}null!==r&&(n+=r.length,m+=q.width*q.height)}l=g.oa;k=g.xa;p=g.width;q=g.height;r=g.W;s=p*q;1>s&&(s=1);m=pe((m+s+n*n*4/(h*h))/s);h=(m-1)*p/2;m=(m-1)*q/2;g.sb=new w(l-r.x-h,k-r.y-m,p+2*h,q+2*m);g.focus=new M(r.x+h,r.y+m)}a.network=d;return c}
function au(a,b,c){u&&(z.l(b,ht,gt,"popNetwork:oldnet"),z.p(c,gt,"popNetwork:level"));for(c=a.network.vertexes.j;c.next();){var d=c.value;d.network=b;if(null!==d.Uh){var e=d.Uh.fa(d.tB);d.pg=e.Iy;var g=e.WB,h=e.XB;d.sb=new w(d.oa-g,d.xa-h,e.Jy,e.Hy);d.focus=new M(g,h);d.tB--}}for(c=a.network.edges.j;c.next();)c.value.network=b;a.network=b}
function cu(a,b,c){u&&(z.l(b,bu,gt,"surroundNode:oldnet"),z.p(c,gt,"surroundNode:level"));var d=b.Gn;if(null!==d&&0!==d.count){c=b.oa;var e=b.xa,g=b.width,h=b.height;null!==b.Uh&&0<b.Uh.count&&(h=b.Uh.fa(0),g=h.Jy,h=h.Hy);for(var g=pe(g*g+h*h)/2,k=!1,l=h=0,m=0,n=b.vertexes.j;n.next();){var p=n.value;1>=p.pg?l++:(k=!0,m++,h+=Math.atan2(b.xa-p.xa,b.oa-p.oa))}if(0!==l)for(0<m&&(h/=m),m=b=0,b=k?2*Math.PI/(l+1):2*Math.PI/l,0===l%2&&(m=b/2),1<d.count&&d.sort(function(a,b){return null===a||null===b||a===
b?0:b.width*b.height-a.width*a.height}),k=0===l%2?0:1,d=d.j;d.next();)if(l=d.value,!(1<l.pg||a.isFixed(l))){n=null;for(p=l.edges.j;p.next();){n=p.value;break}var p=l.width,q=l.height,p=pe(p*p+q*q)/2,n=g+n.length+p,p=h+(b*(k/2>>1)+m)*(0===k%2?1:-1);l.oa=c+n*Math.cos(p);l.xa=e+n*Math.sin(p);k++}}}
function Wt(a,b,c,d,e,g,h){var k=9E19,l=-1,m=0;a:for(;m<b;m++){var n=a[m],p=n.x-c,q=n.y-d,p=p*p+q*q;if(p<k){for(q=m-1;0<=q;q--)if(a[q].y>n.y&&a[q].x-n.x<e+h.width)continue a;for(q=m+1;q<b;q++)if(a[q].x>n.x&&a[q].y-n.y<g+h.height)continue a;l=m;k=p}}return l}gt.prototype.iA=function(){if(this.comments)for(var a=this.network.vertexes.j;a.next();)this.addComments(a.value)};
gt.prototype.addComments=function(a){var b=a.Yc;if(null!==b)for(b=b.eF();b.next();){var c=b.value;if("Comment"===c.rc&&c.isVisible()){var d=this.network.Qn(c);null===d&&(d=this.network.Nt(c));d.charge=this.lI;for(var c=null,e=d.sc;e.next();){var g=e.value;if(g.toVertex===a){c=g;break}}if(null===c)for(e=d.vc;e.next();)if(g=e.value,g.fromVertex===a){c=g;break}null===c&&(c=this.network.yq(a,d,null));c.length=this.mI}}};
function eu(a,b){u&&(z.l(a,bu,gt,"getNodeDistance:vertexA"),z.l(b,bu,gt,"getNodeDistance:vertexB"));var c=a.R,d=c.x,e=c.y,g=c.width,c=c.height,h=b.R,k=h.x,l=h.y,m=h.width,h=h.height;return d+g<k?e>l+h?(d=d+g-k,e=e-l-h,pe(d*d+e*e)):e+c<l?(d=d+g-k,e=e+c-l,pe(d*d+e*e)):k-(d+g):d>k+m?e>l+h?(d=d-k-m,e=e-l-h,pe(d*d+e*e)):e+c<l?(d=d-k-m,e=e+c-l,pe(d*d+e*e)):d-(k+m):e>l+h?e-(l+h):e+c<l?l-(e+c):.1}
function Xt(a,b){u&&z.p(b,gt,"performIterations:num");a.Pg=null;for(var c=a.ms+b;a.ms<c&&(a.ms++,fu(a)););a.Pg=null}
function fu(a){null===a.Pg&&(a.Pg=new J(bu),a.Pg.Uc(a.network.vertexes));var b=a.Pg.o;if(0>=b.length)return!1;var c=b[0];c.forceX=0;c.forceY=0;for(var d=c.oa,e=d,g=c.xa,h=g,c=1;c<b.length;c++){var k=b[c];k.forceX=0;k.forceY=0;var l=k.oa,k=k.xa,d=Math.min(d,l),e=Math.max(e,l),g=Math.min(g,k),h=Math.max(h,k)}(g=e-d>h-g)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.oa-b.oa}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.xa-b.xa});for(var h=a.di,m=0,n=0,p=0,c=0;c<b.length;c++){var k=
b[c],l=k.R,q=k.W,d=l.x+q.x,l=l.y+q.y,n=k.charge*a.electricalFieldX(d,l),p=k.charge*a.electricalFieldY(d,l),n=n+k.mass*a.gravitationalFieldX(d,l),p=p+k.mass*a.gravitationalFieldY(d,l);k.forceX+=n;k.forceY+=p;for(q=c+1;q<b.length;q++)if(e=b[q],e!==k){var r=e.R,n=e.W,p=r.x+n.x,r=r.y+n.y;if(d-p>h||p-d>h){if(g)break}else if(l-r>h||r-l>h){if(!g)break}else{var s=eu(k,e);1>s?(n=a.my,null===n&&(a.my=n=new Ka(0)),m=n.random(),s=n.random(),d>p?(n=Math.abs(e.R.right-k.R.x),n=(1+n)*m):d<p?(n=Math.abs(e.R.x-k.R.right),
n=-(1+n)*m):(n=Math.max(e.width,k.width),n=(1+n)*m-n/2),l>r?(p=Math.abs(e.R.bottom-k.R.y),p=(1+p)*s):d<p?(p=Math.abs(e.R.y-k.R.bottom),p=-(1+p)*s):(p=Math.max(e.height,k.height),p=(1+p)*s-p/2)):(m=-(k.charge*e.charge)/(s*s),n=(p-d)/s*m,p=(r-l)/s*m);k.forceX+=n;k.forceY+=p;e.forceX-=n;e.forceY-=p}}}for(c=a.network.edges.j;c.next();)g=c.value,k=g.fromVertex,e=g.toVertex,l=k.R,q=k.W,d=l.x+q.x,l=l.y+q.y,r=e.R,n=e.W,p=r.x+n.x,r=r.y+n.y,s=eu(k,e),1>s?(n=a.my,null===n&&(a.my=n=new Ka(0)),m=n.random(),s=
n.random(),n=(d>p?1:-1)*(1+(e.width>k.width)?e.width:k.width)*m,p=(l>r?1:-1)*(1+(e.height>k.height)?e.height:k.height)*s):(m=g.stiffness*(s-g.length),n=(p-d)/s*m,p=(r-l)/s*m),k.forceX+=n,k.forceY+=p,e.forceX-=n,e.forceY-=p;c=0;d=Math.max(a.di/20,50);for(e=0;e<b.length;e++)k=b[e],a.isFixed(k)?a.moveFixedVertex(k):(g=k.forceX,h=k.forceY,g<-d?g=-d:g>d&&(g=d),h<-d?h=-d:h>d&&(h=d),k.oa+=g,k.xa+=h,c=Math.max(c,g*g+h*h));return c>a.bF*a.bF}gt.prototype.moveFixedVertex=function(){};
gt.prototype.commitLayout=function(){this.AB();this.commitNodes();this.wu&&this.commitLinks()};gt.prototype.AB=function(){if(this.Sq)for(var a=this.network.edges.j;a.next();){var b=a.value.link;null!==b&&(b.Gb=Rc,b.Hb=Rc)}};gt.prototype.commitNodes=function(){var a=0,b=0;if(this.QH){var c=z.Of();this.Jh(this.network,c);b=this.Ce;a=b.x-c.x;b=b.y-c.y;z.Mb(c)}for(var c=z.Of(),d=this.network.vertexes.j;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.sb),c.x+=a,c.y+=b,e.sb=c;e.commit()}z.Mb(c)};
gt.prototype.commitLinks=function(){for(var a=this.network.edges.j;a.next();)a.value.commit()};gt.prototype.springStiffness=function(a){a=a.stiffness;return isNaN(a)?this.Ro:a};gt.prototype.springLength=function(a){a=a.length;return isNaN(a)?this.Qo:a};gt.prototype.electricalCharge=function(a){a=a.charge;return isNaN(a)?this.Oo:a};gt.prototype.electricalFieldX=function(){return 0};gt.prototype.electricalFieldY=function(){return 0};
gt.prototype.gravitationalMass=function(a){a=a.mass;return isNaN(a)?this.Po:a};gt.prototype.gravitationalFieldX=function(){return 0};gt.prototype.gravitationalFieldY=function(){return 0};gt.prototype.isFixed=function(a){return a.isFixed};z.w(gt,{lL:"currentIteration"},function(){return this.ms});z.defineProperty(gt,{AE:"arrangementSpacing"},function(){return this.sg},function(a){z.l(a,Fa,gt,"arrangementSpacing");this.sg.O(a)||(this.sg.assign(a),this.N())});
z.defineProperty(gt,{QH:"arrangesToOrigin"},function(){return this.ir},function(a){this.ir!==a&&(z.h(a,"boolean",gt,"arrangesToOrigin"),this.ir=a,this.N())});z.defineProperty(gt,{Sq:"setsPortSpots"},function(){return this.pi},function(a){this.pi!==a&&(z.h(a,"boolean",gt,"setsPortSpots"),this.pi=a,this.N())});z.defineProperty(gt,{comments:"comments"},function(){return this.Yh},function(a){this.Yh!==a&&(z.h(a,"boolean",gt,"comments"),this.Yh=a,this.N())});
z.defineProperty(gt,{$A:"maxIterations"},function(){return this.vp},function(a){this.vp!==a&&(z.h(a,"number",gt,"maxIterations"),0<=a&&(this.vp=a,this.N()))});z.defineProperty(gt,{bF:"epsilonDistance"},function(){return this.Pr},function(a){this.Pr!==a&&(z.h(a,"number",gt,"epsilonDistance"),0<a&&(this.Pr=a,this.N()))});z.defineProperty(gt,{JL:"infinityDistance"},function(){return this.di},function(a){this.di!==a&&(z.h(a,"number",gt,"infinityDistance"),1<a&&(this.di=a,this.N()))});
z.defineProperty(gt,{my:"randomNumberGenerator"},function(){return this.Ys},function(a){this.Ys!==a&&(null!==a&&"function"!==typeof a.random&&z.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+a),this.Ys=a)});z.defineProperty(gt,{xL:"defaultSpringStiffness"},function(){return this.Ro},function(a){this.Ro!==a&&(z.h(a,"number",gt,"defaultSpringStiffness"),this.Ro=a,this.N())});
z.defineProperty(gt,{wL:"defaultSpringLength"},function(){return this.Qo},function(a){this.Qo!==a&&(z.h(a,"number",gt,"defaultSpringLength"),this.Qo=a,this.N())});z.defineProperty(gt,{qL:"defaultElectricalCharge"},function(){return this.Oo},function(a){this.Oo!==a&&(z.h(a,"number",gt,"defaultElectricalCharge"),this.Oo=a,this.N())});z.defineProperty(gt,{rL:"defaultGravitationalMass"},function(){return this.Po},function(a){this.Po!==a&&(z.h(a,"number",gt,"defaultGravitationalMass"),this.Po=a,this.N())});
z.defineProperty(gt,{mI:"defaultCommentSpringLength"},function(){return this.Dr},function(a){this.Dr!==a&&(z.h(a,"number",gt,"defaultCommentSpringLength"),this.Dr=a,this.N())});z.defineProperty(gt,{lI:"defaultCommentElectricalCharge"},function(){return this.Cr},function(a){this.Cr!==a&&(z.h(a,"number",gt,"defaultCommentElectricalCharge"),this.Cr=a,this.N())});function du(){this.XB=this.WB=this.Hy=this.Jy=this.Iy=0}function ht(){ya.call(this)}z.Ta(ht,ya);z.ka("ForceDirectedNetwork",ht);
ht.prototype.createVertex=function(){return new bu};ht.prototype.createEdge=function(){return new gu};function bu(){za.call(this);this.isFixed=!1;this.mass=this.charge=NaN;this.Yk=this.pg=this.forceY=this.forceX=0;this.Uh=this.Gn=null;this.tB=0}z.Ta(bu,za);z.ka("ForceDirectedVertex",bu);function gu(){Aa.call(this);this.length=this.stiffness=NaN}z.Ta(gu,Aa);z.ka("ForceDirectedEdge",gu);
function hu(){0<arguments.length&&z.wd(hu);ch.call(this);this.fe=this.Xm=25;this.ga=0;this.No=iu;this.qp=ju;this.fp=ku;this.Vm=4;this.zo=lu;this.mj=mu;this.pi=!0;this.rs=4;this.Pb=this.iw=this.zb=-1;this.Vf=this.As=0;this.Vb=this.Tf=this.Uf=this.Fg=this.ue=null;this.Is=0;this.Hs=this.bn=null;this.Hg=0;this.Js=null;this.fC=new M;this.wh=[];this.wh.length=100}z.Ta(hu,ch);z.ka("LayeredDigraphLayout",hu);
hu.prototype.cloneProtected=function(a){ch.prototype.cloneProtected.call(this,a);a.Xm=this.Xm;a.fe=this.fe;a.ga=this.ga;a.No=this.No;a.qp=this.qp;a.fp=this.fp;a.Vm=this.Vm;a.zo=this.zo;a.mj=this.mj;a.pi=this.pi;a.rs=this.rs};hu.prototype.pc=function(a){a.Pe===hu?0===a.name.indexOf("Aggressive")?this.OH=a:0===a.name.indexOf("Cycle")?this.kI=a:0===a.name.indexOf("Init")?this.bJ=a:0===a.name.indexOf("Layer")?this.oJ=a:z.k("Unknown enum value: "+a):ch.prototype.pc.call(this,a)};
hu.prototype.createNetwork=function(){return new nu};
hu.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.Ce=this.initialOrigin(this.Ce);this.iw=-1;this.Vf=this.As=0;this.Js=this.Hs=this.bn=null;for(a=0;a<this.wh.length;a++)this.wh[a]=null;if(0<this.network.vertexes.count){this.network.wx();for(a=this.network.edges.j;a.next();)a.value.rev=!1;switch(this.No){default:case ou:var b=0,c=this.network.vertexes.count-
1;a=[];a.length=c+1;for(var d=this.network.vertexes.j;d.next();)d.value.valid=!0;for(;null!==pu(this.network);){for(d=qu(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=qu(this.network);for(d=ru(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=ru(this.network);for(var d=null,e=0,g=this.network.vertexes.j;g.next();){var h=g.value;if(h.valid){for(var k=0,l=h.sc;l.next();)l.value.toVertex.valid&&k++;for(var l=0,m=h.vc;m.next();)m.value.fromVertex.valid&&l++;if(null===d||e<k-l)d=h,e=k-l}}null!==d&&(a[b]=
d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.j;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.sy(b),b.rev=!0);break;case iu:for(b=this.network.vertexes.j;b.next();)a=b.value,a.gq=-1,a.finish=-1;for(a=this.network.edges.j;a.next();)a.value.forest=!1;this.Is=0;for(b.reset();b.next();)c=b.value,0===c.vc.count&&su(this,c);for(b.reset();b.next();)c=b.value,-1===c.gq&&su(this,c);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,
d=c.finish,e=b.toVertex,g=e.finish,e.gq<c.gq&&d<g&&(this.network.sy(b),b.rev=!0))}for(a=this.network.vertexes.j;a.next();)a.value.layer=-1;this.zb=-1;this.assignLayers();for(a.reset();a.next();)this.zb=Math.max(this.zb,a.value.layer);a=[];for(c=this.network.edges.j;c.next();)b=c.value,b.valid=!1,a.push(b);for(c=0;c<a.length;c++)if(b=a[c],!b.valid&&(null!==b.fromVertex.Qd&&null!==b.toVertex.Qd||b.fromVertex.layer!==b.toVertex.layer)){l=h=k=g=0;e=b.fromVertex;d=b.toVertex;if(null!==b.link){k=b.link;
if(null===k)continue;var n=e.Qd,g=d.Qd;if(null===n||null===g)continue;var p=k.aa,h=k.ea,q=k.gd,l=k.Nd;b.rev&&(k=p,m=q,p=h,q=l,h=k,l=m);var r=e.W,k=b.toVertex.W,s=b.rev?d.R:e.R,m=z.P();s.F()?(dr(p,q,mc,m),m.F()||m.assign(r)):m.assign(r);n!==p&&s.F()&&p.isVisible()&&(n=e.R,n.F()&&(m.x+=s.x-n.x,m.y+=s.y-n.y));p=b.rev?e.R:d.R;n=z.P();p.F()?(dr(h,l,mc,n),n.F()||n.assign(k)):n.assign(k);g!==h&&p.F()&&h.isVisible()&&(g=d.R,g.F()&&(n.x+=p.x-g.x,n.y+=p.y-g.y));90===this.ga||270===this.ga?(g=Math.round((m.x-
r.x)/this.fe),h=m.x,k=Math.round((n.x-k.x)/this.fe),l=n.x):(g=Math.round((m.y-r.y)/this.fe),h=m.y,k=Math.round((n.y-k.y)/this.fe),l=n.y);z.A(m);z.A(n);b.portFromColOffset=g;b.portFromPos=h;b.portToColOffset=k;b.portToPos=l}else b.portFromColOffset=0,b.portFromPos=0,b.portToColOffset=0,b.portToPos=0;m=e.layer;r=d.layer;a:if(n=b,p=0,s=n.link,null!==s){var v=s.gd,t=s.Nd;if(null!==v&&null!==t){var x=s.aa,q=s.ea;if(null!==x&&null!==q){var y=v.Gb,B=t.Hb;this.Sq||(s.Gb.hd()||(y=s.Gb),s.Hb.hd()||(B=s.Hb));
var A=s.tc,N=tu(this,!0);if(y.hd()||y===gc)y=N;var G=tu(this,!1);if(B.hd()||B===gc)B=G;if(y.Gj()&&y.Fj(G)&&B.Gj()&&B.Fj(N)){p=0;break a}N=s.getLinkPoint(x,v,y,!0,A,q,t,z.P());y=s.getLinkDirection(x,v,N,y,!0,A,q,t);z.A(N);y===uu(this,n,!0)?p+=1:this.Sq&&null!==x&&1===x.ports.count&&n.rev&&(p+=1);y=s.getLinkPoint(q,t,B,!1,A,x,v,z.P());s=s.getLinkDirection(q,t,y,B,!1,A,x,v);z.A(y);s===uu(this,n,!1)?p+=2:this.Sq&&null!==q&&1===q.ports.count&&n.rev&&(p+=2)}}}n=1===p||3===p?!0:!1;if(p=2===p||3===p?!0:!1)q=
this.network.createVertex(),q.Qd=null,q.Dn=1,q.layer=m,q.near=e,this.network.Vl(q),e=this.network.yq(e,q,b.link),e.valid=!1,e.rev=b.rev,e.portFromColOffset=g,e.portToColOffset=0,e.portFromPos=h,e.portToPos=0,e=q;s=1;n&&s--;if(m-r>s&&0<m){b.valid=!1;q=this.network.createVertex();q.Qd=null;q.Dn=2;q.layer=m-1;this.network.Vl(q);e=this.network.yq(e,q,b.link);e.valid=!0;e.rev=b.rev;e.portFromColOffset=p?0:g;e.portToColOffset=0;e.portFromPos=p?0:h;e.portToPos=0;e=q;for(m--;m-r>s&&0<m;)q=this.network.createVertex(),
q.Qd=null,q.Dn=3,q.layer=m-1,this.network.Vl(q),e=this.network.yq(e,q,b.link),e.valid=!0,e.rev=b.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=q,m--;e=this.network.yq(q,d,b.link);e.valid=!n;n&&(q.near=d);e.rev=b.rev;e.portFromColOffset=0;e.portToColOffset=k;e.portFromPos=0;e.portToPos=l}else b.valid=!0}b=this.ue=[];for(c=0;c<=this.zb;c++)b[c]=0;for(a=this.network.vertexes.j;a.next();)c=a.value,c.index=-1;this.initializeIndices();this.iw=-1;for(c=this.Vf=this.As=0;c<=
this.zb;c++)b[c]>b[this.Vf]&&(this.iw=b[c]-1,this.Vf=c),b[c]<b[this.As]&&(this.As=c);this.Js=[];for(c=0;c<b.length;c++)this.Js[c]=[];for(a.reset();a.next();)b=a.value,c=this.Js[b.layer],c[b.index]=b;this.Pb=-1;for(a=0;a<=this.zb;a++){b=vu(this,a);c=0;d=this.ue[a];for(e=0;e<d;e++)g=b[e],c+=this.nodeMinColumnSpace(g,!0),g.column=c,c+=1,c+=this.nodeMinColumnSpace(g,!1);this.Pb=Math.max(this.Pb,c-1);wu(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=null;this.Jf=
!0};hu.prototype.linkMinLength=function(){return 1};function xu(a){var b=a.fromVertex.Qd;a=a.toVertex.Qd;return null===b&&null===a?8:null===b||null===a?4:1}hu.prototype.nodeMinLayerSpace=function(a,b){return null===a.Qd?0:90===this.ga||270===this.ga?b?a.W.y+10:a.R.height-a.W.y+10:b?a.W.x+10:a.R.width-a.W.x+10};
hu.prototype.nodeMinColumnSpace=function(a,b){if(null===a.Qd)return 0;var c=b?a.hB:a.gB;if(null!==c)return c;c=this.ga;return 90===c||270===c?b?a.hB=a.W.x/this.fe+1|0:a.gB=(a.R.width-a.W.x)/this.fe+1|0:b?a.hB=a.W.y/this.fe+1|0:a.gB=(a.R.height-a.W.y)/this.fe+1|0};function yu(a){null===a.bn&&(a.bn=[]);for(var b=0,c=a.network.vertexes.j;c.next();){var d=c.value;a.bn[b]=d.layer;b++;a.bn[b]=d.column;b++;a.bn[b]=d.index;b++}return a.bn}
function zu(a,b){for(var c=0,d=a.network.vertexes.j;d.next();){var e=d.value;e.layer=b[c];c++;e.column=b[c];c++;e.index=b[c];c++}}
function Au(a,b,c){u&&(z.p(b,hu,"crossingMatrix:unfixedLayer"),z.p(c,hu,"crossingMatrix:direction"));var d=vu(a,b),e=a.ue[b];if(null===a.Hs||a.Hs.length<e*e)a.Hs=[];for(var g=a.Hs,h=0;h<e;h++){var k=0,l=d[h],m=l.near,n=0;if(null!==m&&m.layer===l.layer)if(n=m.index,n>h)for(var p=h+1;p<n;p++)l=d[p],l.near===m&&l.Dn===m.Dn||k++;else for(p=h-1;p>n;p--)l=d[p],l.near===m&&l.Dn===m.Dn||k++;var m=0,q,r=q=p=l=0,s,v=0,t=0;s=0;var x;if(0<=c)for(n=d[h].of,m=0;m<n.count;m++)if(q=n.o[m],q.valid&&q.fromVertex.layer!==
b)for(l=q.fromVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=n.o[r],s.valid&&s.fromVertex.layer!==b&&(v=s.fromVertex.index,t=s.portToPos,s=s.portFromPos,p<t&&(l>v||l===v&&q>s)&&k++,t<p&&(v>l||v===l&&s>q)&&k++);if(0>=c)for(n=d[h].jf,m=0;m<n.count;m++)if(q=n.o[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=n.o[r],s.valid&&s.toVertex.layer!==b&&(v=s.toVertex.index,t=s.portToPos,s=s.portFromPos,q<s&&(l>v||l===v&&p>t)&&k++,
s<q&&(v>l||v===l&&t>p)&&k++);g[h*e+h]=k;for(n=h+1;n<e;n++){var y=0,B=0;if(0<=c)for(k=d[h].of,x=d[n].of,m=0;m<k.count;m++)if(q=k.o[m],q.valid&&q.fromVertex.layer!==b)for(l=q.fromVertex.index,q=q.portFromPos,r=0;r<x.count;r++)s=x.o[r],s.valid&&s.fromVertex.layer!==b&&(v=s.fromVertex.index,s=s.portFromPos,(l<v||l===v&&q<s)&&B++,(v<l||v===l&&s<q)&&y++);if(0>=c)for(k=d[h].jf,x=d[n].jf,m=0;m<k.count;m++)if(q=k.o[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,r=0;r<x.count;r++)s=x.o[r],
s.valid&&s.toVertex.layer!==b&&(v=s.toVertex.index,t=s.portToPos,(l<v||l===v&&p<t)&&B++,(v<l||v===l&&t<p)&&y++);g[h*e+n]=y;g[n*e+h]=B}}wu(a,b,d);return g}hu.prototype.countCrossings=function(){for(var a=0,b=0;b<=this.zb;b++)for(var c=Au(this,b,1),d=this.ue[b],e=0;e<d;e++)for(var g=e;g<d;g++)a+=c[e*d+g];return a};
function Bu(a){for(var b=0,c=0;c<=a.zb;c++){for(var d=a,e=c,g=vu(d,e),h=d.ue[e],k=0,l=0;l<h;l++){var m=null,m=g[l].jf,n,p=0,q=0;if(null!==m)for(var r=0;r<m.count;r++)n=m.o[r],n.valid&&n.toVertex.layer!==e&&(p=n.fromVertex.column+n.portFromColOffset,q=n.toVertex.column+n.portToColOffset,k+=(Math.abs(p-q)+1)*xu(n))}wu(d,e,g);b+=k}return b}
hu.prototype.normalize=function(){var a=Infinity;this.Pb=-1;for(var b=this.network.vertexes.j;b.next();){var c=b.value,a=Math.min(a,c.column-this.nodeMinColumnSpace(c,!0));this.Pb=Math.max(this.Pb,c.column+this.nodeMinColumnSpace(c,!1))}for(b.reset();b.next();)b.value.column-=a;this.Pb-=a};
function Cu(a,b,c){u&&(z.p(b,hu,"barycenters:unfixedLayer"),z.p(c,hu,"barycenters:direction"));for(var d=vu(a,b),e=a.ue[b],g=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.of);var m=null;0<=c&&(m=k.jf);var n=0,p=0,q=k.near;null!==q&&q.layer===k.layer&&(n+=q.column-1,p++);if(null!==l)for(q=0;q<l.count;q++){var k=l.o[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(n+=r.column,p++)}if(null!==m)for(l=0;l<m.count;l++)k=m.o[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(n+=q.column,p++);g[h]=0===p?-1:n/
p}wu(a,b,d);return g}
function Du(a,b,c){u&&(z.p(b,hu,"medians:unfixedLayer"),z.p(c,hu,"medians:direction"));for(var d=vu(a,b),e=a.ue[b],g=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.of);var m=null;0<=c&&(m=k.jf);var n=0,p=[],q=k.near;null!==q&&q.layer===k.layer&&(p[n]=q.column-1,n++);if(null!==l)for(q=0;q<l.count;q++){var k=l.o[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(p[n]=r.column+k.portFromColOffset,n++)}if(null!==m)for(l=0;l<m.count;l++)k=m.o[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(p[n]=q.column+k.portToColOffset,
n++);0===n?g[h]=-1:(p.sort(function(a,b){return a-b}),m=n>>1,g[h]=n&1?p[m]:p[m-1]+p[m]>>1)}wu(a,b,d);return g}function Eu(a,b,c,d,e,g){if(b.component===d){b.component=c;var h=0,k=0;if(e)for(var l=b.sc;l.next();){var k=l.value,m=k.toVertex,h=b.layer-m.layer,k=a.linkMinLength(k);h===k&&Eu(a,m,c,d,e,g)}if(g)for(l=b.vc;l.next();)k=l.value,m=k.fromVertex,h=m.layer-b.layer,k=a.linkMinLength(k),h===k&&Eu(a,m,c,d,e,g)}}
function Fu(a,b,c,d,e,g){if(b.component===d){b.component=c;if(e)for(var h=b.sc;h.next();)Fu(a,h.value.toVertex,c,d,e,g);if(g)for(b=b.vc;b.next();)Fu(a,b.value.fromVertex,c,d,e,g)}}function pu(a){for(a=a.vertexes.j;a.next();){var b=a.value;if(b.valid)return b}return null}function qu(a){for(a=a.vertexes.j;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.sc;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}}return null}
function ru(a){for(a=a.vertexes.j;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.vc;d.next();)if(d.value.fromVertex.valid){c=!1;break}if(c)return b}}return null}function su(a,b){b.gq=a.Is;a.Is++;for(var c=b.sc;c.next();){var d=c.value,e=d.toVertex;-1===e.gq&&(d.forest=!0,su(a,e))}b.finish=a.Is;a.Is++}
hu.prototype.assignLayers=function(){switch(this.qp){case Gu:Hu(this);break;case Iu:for(var a=0,b=this.network.vertexes.j;b.next();)a=Ju(this,b.value),this.zb=Math.max(a,this.zb);for(b.reset();b.next();)a=b.value,a.layer=this.zb-a.layer;break;default:case ju:Hu(this);for(b=this.network.vertexes.j;b.next();)b.value.valid=!1;for(b.reset();b.next();)a=b.value,0===a.vc.count&&Ku(this,a);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.zb=-1;for(b.reset();b.next();){var c=b.value;c.layer-=
a;this.zb=Math.max(this.zb,c.layer)}}};function Hu(a){for(var b=a.network.vertexes.j;b.next();){var c=Lu(a,b.value);a.zb=Math.max(c,a.zb)}}function Lu(a,b){var c=0;if(-1===b.layer){for(var d=b.sc;d.next();)var e=d.value,g=e.toVertex,e=a.linkMinLength(e),c=Math.max(c,Lu(a,g)+e);b.layer=c}else c=b.layer;return c}function Ju(a,b){var c=0;if(-1===b.layer){for(var d=b.vc;d.next();)var e=d.value,g=e.fromVertex,e=a.linkMinLength(e),c=Math.max(c,Ju(a,g)+e);b.layer=c}else c=b.layer;return c}
function Ku(a,b){if(!b.valid){b.valid=!0;for(var c=b.sc;c.next();)Ku(a,c.value.toVertex);for(c=a.network.vertexes.j;c.next();)c.value.component=-1;for(var d=b.of.o,e=d.length,g=0;g<e;g++){var h=d[g],k=a.linkMinLength(h);h.fromVertex.layer-h.toVertex.layer>k&&Eu(a,h.fromVertex,0,-1,!0,!1)}for(Eu(a,b,1,-1,!0,!0);0!==b.component;){for(var k=0,d=Infinity,l=0,m=null,n=a.network.vertexes.j;n.next();){var p=n.value;if(1===p.component){for(var q=0,r=!1,s=p.of.o,e=s.length,g=0;g<e;g++){var h=s[g],v=h.fromVertex,
q=q+1;1!==v.component&&(k+=1,v=v.layer-p.layer,h=a.linkMinLength(h),d=Math.min(d,v-h))}h=p.jf.o;e=h.length;for(g=0;g<e;g++)s=h[g].toVertex,q-=1,1!==s.component?k-=1:r=!0;(null===m||q<l)&&!r&&(m=p,l=q)}}if(0<k){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else m.component=0}for(c=a.network.vertexes.j;c.next();)c.value.component=-1;for(Eu(a,b,1,-1,!0,!1);0!==b.component;){g=0;e=Infinity;d=0;k=null;for(l=a.network.vertexes.j;l.next();)if(m=l.value,1===m.component){n=
0;p=!1;h=m.of.o;q=h.length;for(r=0;r<q;r++)s=h[r].fromVertex,n+=1,1!==s.component?g+=1:p=!0;h=m.jf.o;q=h.length;for(r=0;r<q;r++)s=h[r],v=s.toVertex,n-=1,1!==v.component&&(g-=1,v=m.layer-v.layer,s=a.linkMinLength(s),e=Math.min(e,v-s));(null===k||n>d)&&!p&&(k=m,d=n)}if(0>g){for(c.reset();c.next();)g=c.value,1===g.component&&(g.layer-=e);b.component=0}else k.component=0}}}
function uu(a,b,c){return 90===a.ga?c&&!b.rev||!c&&b.rev?270:90:180===a.ga?c&&!b.rev||!c&&b.rev?0:180:270===a.ga?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
hu.prototype.initializeIndices=function(){switch(this.fp){default:case Mu:for(var a=this.network.vertexes.j;a.next();){var b=a.value,c=b.layer;b.index=this.ue[c];this.ue[c]++}break;case ku:a=this.network.vertexes.j;for(b=this.zb;0<=b;b--)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Nu(this,c);break;case Ou:for(a=this.network.vertexes.j,b=0;b<=this.zb;b++)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Pu(this,c)}};
function Nu(a,b){var c=b.layer;b.index=a.ue[c];a.ue[c]++;for(var c=b.jf.nc(),d=!0;d;)for(var d=!1,e=0;e<c.length-1;e++){var g=c[e],h=c[e+1];g.portFromColOffset>h.portFromColOffset&&(d=!0,c[e]=h,c[e+1]=g)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Nu(a,d))}
function Pu(a,b){var c=b.layer;b.index=a.ue[c];a.ue[c]++;for(var c=b.of.nc(),d=!0,e=0;d;)for(d=!1,e=0;e<c.length-1;e++){var g=c[e],h=c[e+1];g.portToColOffset>h.portToColOffset&&(d=!0,c[e]=h,c[e+1]=g)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Pu(a,d))}
hu.prototype.reduceCrossings=function(){for(var a=this.countCrossings(),b=yu(this),c=0,d=0,e=0,c=0;c<this.Vm;c++){for(d=0;d<=this.zb;d++)Qu(this,d,1),Ru(this,d,1);e=this.countCrossings();e<a&&(a=e,b=yu(this));for(d=this.zb;0<=d;d--)Qu(this,d,-1),Ru(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=yu(this))}zu(this,b);for(c=0;c<this.Vm;c++){for(d=0;d<=this.zb;d++)Qu(this,d,0),Ru(this,d,0);e=this.countCrossings();e<a&&(a=e,b=yu(this));for(d=this.zb;0<=d;d--)Qu(this,d,0),Ru(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=yu(this))}zu(this,b);var g=!1,h=c=0,k=0,d=0;switch(this.zo){case Su:break;case Tu:for(k=a+1;(d=this.countCrossings())<k;)for(k=d,c=this.zb;0<=c;c--)for(h=0;h<=c;h++){for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=Ru(this,d,-1)||g;e=this.countCrossings();e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=Ru(this,d,1)||g;e=this.countCrossings();e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=Ru(this,d,1)||g;e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,
d=h;d<=c;d++)g=Ru(this,d,-1)||g;e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=Ru(this,d,0)||g;e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=Ru(this,d,0)||g;e>=a?zu(this,b):(a=e,b=yu(this))}break;default:case lu:for(c=this.zb,h=0,k=a+1;(d=this.countCrossings())<k;){k=d;for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=Ru(this,d,-1)||g;e=this.countCrossings();e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=Ru(this,d,1)||g;e=this.countCrossings();
e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=Ru(this,d,1)||g;e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=Ru(this,d,-1)||g;e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=Ru(this,d,0)||g;e>=a?zu(this,b):(a=e,b=yu(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=Ru(this,d,0)||g;e>=a?zu(this,b):(a=e,b=yu(this))}}zu(this,b)};
function Qu(a,b,c){u&&(z.p(b,hu,"medianBarycenterCrossingReduction:unfixedLayer"),z.p(c,hu,"medianBarycenterCrossingReduction:direction"));var d=0,e=vu(a,b),g=a.ue[b],h=Du(a,b,c);c=Cu(a,b,c);for(d=0;d<g;d++)-1===c[d]&&(c[d]=e[d].column),-1===h[d]&&(h[d]=e[d].column);for(var k=!0,l;k;)for(k=!1,d=0;d<g-1;d++)if(h[d+1]<h[d]||h[d+1]===h[d]&&c[d+1]<c[d])k=!0,l=h[d],h[d]=h[d+1],h[d+1]=l,l=c[d],c[d]=c[d+1],c[d+1]=l,l=e[d],e[d]=e[d+1],e[d+1]=l;for(d=h=0;d<g;d++)l=e[d],l.index=d,h+=a.nodeMinColumnSpace(l,
!0),l.column=h,h+=1,h+=a.nodeMinColumnSpace(l,!1);wu(a,b,e)}
function Ru(a,b,c){var d=vu(a,b),e=a.ue[b];c=Au(a,b,c);var g=0,h;h=[];for(g=0;g<e;g++)h[g]=-1;var k;k=[];for(g=0;g<e;g++)k[g]=-1;for(var l=!1,m=!0;m;)for(m=!1,g=0;g<e-1;g++){var n=c[d[g].index*e+d[g+1].index],p=c[d[g+1].index*e+d[g].index],q=0,r=0,s=d[g].column,v=d[g+1].column,t=a.nodeMinColumnSpace(d[g],!0),x=a.nodeMinColumnSpace(d[g],!1),y=a.nodeMinColumnSpace(d[g+1],!0),B=a.nodeMinColumnSpace(d[g+1],!1),t=s-t+y,x=v-x+B,y=y=0,A=d[g].vc.j;for(A.reset();A.next();)if(B=A.value,B.valid&&B.fromVertex.layer===
b){B=B.fromVertex;for(y=0;d[y]!==B;)y++;y<g&&(q+=2*(g-y),r+=2*(g+1-y));y===g+1&&(q+=1);y>g+1&&(q+=4*(y-g),r+=4*(y-(g+1)))}A=d[g].sc.j;for(A.reset();A.next();)if(B=A.value,B.valid&&B.toVertex.layer===b){B=B.toVertex;for(y=0;d[y]!==B;)y++;y===g+1&&(r+=1)}A=d[g+1].vc.j;for(A.reset();A.next();)if(B=A.value,B.valid&&B.fromVertex.layer===b){B=B.fromVertex;for(y=0;d[y]!==B;)y++;y<g&&(q+=2*(g+1-y),r+=2*(g-y));y===g&&(r+=1);y>g+1&&(q+=4*(y-(g+1)),r+=4*(y-g))}A=d[g+1].sc.j;for(A.reset();A.next();)if(B=A.value,
B.valid&&B.toVertex.layer===b){B=B.toVertex;for(y=0;d[y]!==B;)y++;y===g&&(q+=1)}var y=B=0,A=h[d[g].index],N=k[d[g].index],G=h[d[g+1].index],T=k[d[g+1].index];-1!==A&&(B+=Math.abs(A-s),y+=Math.abs(A-x));-1!==N&&(B+=Math.abs(N-s),y+=Math.abs(N-x));-1!==G&&(B+=Math.abs(G-v),y+=Math.abs(G-t));-1!==T&&(B+=Math.abs(T-v),y+=Math.abs(T-t));if(r<q-.5||r===q&&p<n-.5||r===q&&p===n&&y<B-.5)m=l=!0,d[g].column=x,d[g+1].column=t,n=d[g],d[g]=d[g+1],d[g+1]=n}for(g=0;g<e;g++)d[g].index=g;wu(a,b,d);return l}
hu.prototype.straightenAndPack=function(){var a=0,b=!1,c=0!==(this.mj&Uu),a=this.mj===mu;1E3<this.network.edges.count&&!a&&(c=!1);if(c){b=[];for(a=a=0;a<=this.zb;a++)b[a]=0;for(var d=0,e=this.network.vertexes.j;e.next();){var g=e.value,a=g.layer,d=g.column,g=this.nodeMinColumnSpace(g,!1);b[a]=Math.max(b[a],d+g)}for(e.reset();e.next();)g=e.value,a=g.layer,d=g.column,g.column=(8*(this.Pb-b[a])>>1)+8*d;this.Pb*=8}if(0!==(this.mj&Vu))for(b=!0;b;){b=!1;for(a=this.Vf+1;a<=this.zb;a++)b=Wu(this,a,1)||b;
for(a=this.Vf-1;0<=a;a--)b=Wu(this,a,-1)||b;b=Wu(this,this.Vf,0)||b}if(0!==(this.mj&Xu)){for(a=this.Vf+1;a<=this.zb;a++)Yu(this,a,1);for(a=this.Vf-1;0<=a;a--)Yu(this,a,-1);Yu(this,this.Vf,0)}c&&(Zu(this,-1),Zu(this,1));if(0!==(this.mj&Vu))for(b=!0;b;){b=!1;b=Wu(this,this.Vf,0)||b;for(a=this.Vf+1;a<=this.zb;a++)b=Wu(this,a,0)||b;for(a=this.Vf-1;0<=a;a--)b=Wu(this,a,0)||b}};
function Wu(a,b,c){u&&(z.p(b,hu,"bendStraighten:unfixedLayer"),z.p(c,hu,"bendStraighten:direction"));for(var d=!1;$u(a,b,c);)d=!0;return d}
function $u(a,b,c){u&&(z.p(b,hu,"shiftbendStraighten:unfixedLayer"),z.p(c,hu,"shiftbendStraighten:direction"));var d=0,e=vu(a,b),g=a.ue[b],h=Cu(a,b,-1);if(0<c)for(d=0;d<g;d++)h[d]=-1;var k=Cu(a,b,1);if(0>c)for(d=0;d<g;d++)k[d]=-1;for(var l=!1,m=!0;m;)for(m=!1,d=0;d<g;d++){var n=e[d].column,p=a.nodeMinColumnSpace(e[d],!0),q=a.nodeMinColumnSpace(e[d],!1),r=0,r=0>d-1||n-e[d-1].column-1>p+a.nodeMinColumnSpace(e[d-1],!1)?n-1:n,p=0,p=d+1>=g||e[d+1].column-n-1>q+a.nodeMinColumnSpace(e[d+1],!0)?n+1:n,s=q=
0,v=0,t=0,x=0,y=0;if(0>=c)for(var B=e[d].vc.j;B.next();){var A=B.value;A.valid&&A.fromVertex.layer!==b&&(t=xu(A),x=A.portFromColOffset,y=A.portToColOffset,A=A.fromVertex.column,q+=(Math.abs(n+y-(A+x))+1)*t,s+=(Math.abs(r+y-(A+x))+1)*t,v+=(Math.abs(p+y-(A+x))+1)*t)}if(0<=c)for(B=e[d].sc.j;B.next();)A=B.value,A.valid&&A.toVertex.layer!==b&&(t=xu(A),x=A.portFromColOffset,y=A.portToColOffset,A=A.toVertex.column,q+=(Math.abs(n+x-(A+y))+1)*t,s+=(Math.abs(r+x-(A+y))+1)*t,v+=(Math.abs(p+x-(A+y))+1)*t);y=
x=t=0;B=h[e[d].index];A=k[e[d].index];-1!==B&&(t+=Math.abs(B-n),x+=Math.abs(B-r),y+=Math.abs(B-p));-1!==A&&(t+=Math.abs(A-n),x+=Math.abs(A-r),y+=Math.abs(A-p));if(s<q||s===q&&x<t)m=l=!0,e[d].column=r;else if(v<q||v===q&&y<t)m=l=!0,e[d].column=p}wu(a,b,e);a.normalize();return l}
function Yu(a,b,c){u&&(z.p(b,hu,"medianStraighten:unfixedLayer"),z.p(c,hu,"medianStraighten:direction"));var d=0,e=vu(a,b),g=a.ue[b],h=Du(a,b,c);c=[];for(d=0;d<g;d++)c[d]=h[d];for(h=!0;h;)for(h=!1,d=0;d<g;d++){var k=e[d].column,l=a.nodeMinColumnSpace(e[d],!0),m=a.nodeMinColumnSpace(e[d],!1),n=0,p=0,q=0,q=p=0;-1===c[d]?0===d&&d===g-1?n=k:0===d?(p=e[d+1].column,n=p-k===m+a.nodeMinColumnSpace(e[d+1],!0)?k-1:k):d===g-1?(q=e[d-1].column,n=k-q===l+a.nodeMinColumnSpace(e[d-1],!1)?k+1:k):(q=e[d-1].column,
q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,n=(q+p)/2|0):0===d&&d===g-1?n=c[d]:0===d?(p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,n=Math.min(c[d],p)):d===g-1?(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,n=Math.max(c[d],q)):(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,q<c[d]&&c[d]<p?n=c[d]:q>=c[d]?n=q:p<=c[d]&&(n=p));n!==k&&(h=!0,e[d].column=n)}wu(a,b,e);a.normalize()}
function av(a,b){u&&(z.p(b,hu,"packAux:column"),z.p(1,hu,"packAux:direction"));for(var c=!0,d=a.network.vertexes.j;d.next();){var e=d.value,g=a.nodeMinColumnSpace(e,!0),h=a.nodeMinColumnSpace(e,!1);if(e.column-g<=b&&e.column+h>=b){c=!1;break}}e=!1;if(c)for(d.reset();d.next();)c=d.value,c.column>b&&(c.column-=1,e=!0);return e}
function bv(a,b){u&&(z.p(b,hu,"tightPackAux:column"),z.p(1,hu,"tightPackAux:direction"));for(var c=b,c=b+1,d=0,e=[],g=[],d=0;d<=a.zb;d++)e[d]=!1,g[d]=!1;for(var h=a.network.vertexes.j;h.next();){var d=h.value,k=d.column-a.nodeMinColumnSpace(d,!0),l=d.column+a.nodeMinColumnSpace(d,!1);k<=b&&l>=b&&(e[d.layer]=!0);k<=c&&l>=c&&(g[d.layer]=!0)}k=!0;c=!1;for(d=0;d<=a.zb;d++)k=k&&!(e[d]&&g[d]);if(k)for(h.reset();h.next();)e=h.value,e.column>b&&(e.column-=1,c=!0);return c}
function Zu(a,b){u&&z.p(b,hu,"componentPack:direction");for(var c=0;c<=a.Pb;c++)for(;av(a,c););a.normalize();for(c=0;c<a.Pb;c++)for(;bv(a,c););a.normalize();var c=0,d,e=0,g=0,h=0;if(0<b)for(c=0;c<=a.Pb;c++)for(d=yu(a),e=Bu(a),g=e+1;e<g;)g=e,cv(a,c,1),h=Bu(a),h>e?zu(a,d):h<e&&(e=h,d=yu(a));if(0>b)for(c=a.Pb;0<=c;c--)for(d=yu(a),e=Bu(a),g=e+1;e<g;)g=e,cv(a,c,-1),h=Bu(a),h>e?zu(a,d):h<e&&(e=h,d=yu(a));a.normalize()}
function cv(a,b,c){a.Hg=0;for(var d=a.network.vertexes.j;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();){var e=d.value;e.column-a.nodeMinColumnSpace(e,!0)<=b&&(e.component=a.Hg)}if(0>c)for(d.reset();d.next();)e=d.value,e.column+a.nodeMinColumnSpace(e,!1)>=b&&(e.component=a.Hg);a.Hg++;for(d.reset();d.next();)b=d.value,-1===b.component&&(Fu(a,b,a.Hg,-1,!0,!0),a.Hg++);var g=0;b=[];for(g=0;g<a.Hg*a.Hg;g++)b[g]=!1;e=[];for(g=0;g<(a.zb+1)*(a.Pb+1);g++)e[g]=-1;for(d.reset();d.next();)for(var g=
d.value,h=g.layer,k=Math.max(0,g.column-a.nodeMinColumnSpace(g,!0)),l=Math.min(a.Pb,g.column+a.nodeMinColumnSpace(g,!1));k<=l;k++)e[h*(a.Pb+1)+k]=g.component;for(g=0;g<=a.zb;g++){if(0<c)for(k=0;k<a.Pb;k++)-1!==e[g*(a.Pb+1)+k]&&-1!==e[g*(a.Pb+1)+k+1]&&e[g*(a.Pb+1)+k]!==e[g*(a.Pb+1)+k+1]&&(b[e[g*(a.Pb+1)+k]*a.Hg+e[g*(a.Pb+1)+k+1]]=!0);if(0>c)for(k=a.Pb;0<k;k--)-1!==e[g*(a.Pb+1)+k]&&-1!==e[g*(a.Pb+1)+k-1]&&e[g*(a.Pb+1)+k]!==e[g*(a.Pb+1)+k-1]&&(b[e[g*(a.Pb+1)+k]*a.Hg+e[g*(a.Pb+1)+k-1]]=!0)}e=[];for(g=
0;g<a.Hg;g++)e[g]=!0;h=new J("number");h.add(0);for(l=0;0!==h.count;)if(l=h.o[h.count-1],h.md(h.count-1),e[l])for(e[l]=!1,g=0;g<a.Hg;g++)b[l*a.Hg+g]&&h.Yd(0,g);if(0<c)for(d.reset();d.next();)a=d.value,e[a.component]&&(a.column-=1);if(0>c)for(d.reset();d.next();)c=d.value,e[c.component]&&(c.column+=1)}
hu.prototype.commitLayout=function(){if(this.Sq)for(var a=tu(this,!0),b=tu(this,!1),c=this.network.edges.j;c.next();){var d=c.value.link;null!==d&&(d.Gb=a,d.Hb=b)}this.commitNodes();this.mA();this.wu&&this.commitLinks()};function tu(a,b){return 270===a.ga?b?$c:cd:90===a.ga?b?cd:$c:180===a.ga?b?ad:bd:b?bd:ad}
hu.prototype.commitNodes=function(){this.Fg=[];this.Uf=[];this.Tf=[];this.Vb=[];for(var a=0;a<=this.zb;a++)this.Fg[a]=0,this.Uf[a]=0,this.Tf[a]=0,this.Vb[a]=0;for(a=this.network.vertexes.j;a.next();){var b=a.value,c=b.layer;this.Fg[c]=Math.max(this.Fg[c],this.nodeMinLayerSpace(b,!0));this.Uf[c]=Math.max(this.Uf[c],this.nodeMinLayerSpace(b,!1))}for(var b=0,d=this.Xm,c=0;c<=this.zb;c++){var e=d;0>=this.Fg[c]+this.Uf[c]&&(e=0);0<c&&(b+=e/2);90===this.ga||0===this.ga?(b+=this.Uf[c],this.Tf[c]=b,b+=this.Fg[c]):
(b+=this.Fg[c],this.Tf[c]=b,b+=this.Uf[c]);c<this.zb&&(b+=e/2);this.Vb[c]=b}d=b;b=this.Ce;for(c=0;c<=this.zb;c++)270===this.ga?this.Tf[c]=b.y+this.Tf[c]:90===this.ga?(this.Tf[c]=b.y+d-this.Tf[c],this.Vb[c]=d-this.Vb[c]):180===this.ga?this.Tf[c]=b.x+this.Tf[c]:(this.Tf[c]=b.x+d-this.Tf[c],this.Vb[c]=d-this.Vb[c]);a.reset();for(d=e=Infinity;a.next();){var c=a.value,g=c.layer,h=c.column|0,k=0,l=0;270===this.ga||90===this.ga?(k=b.x+this.fe*h,l=this.Tf[g]):(k=this.Tf[g],l=b.y+this.fe*h);c.oa=k;c.xa=l;
e=Math.min(c.x,e);d=Math.min(c.y,d)}e=b.x-e;b=b.y-d;this.fC=new M(e,b);for(a.reset();a.next();)c=a.value,c.x+=e,c.y+=b,c.commit()};
hu.prototype.mA=function(){for(var a=0,b=this.Xm,c=0;c<=this.zb;c++)a+=this.Fg[c],a+=this.Uf[c];for(var a=a+this.zb*b,b=[],c=this.fe*this.Pb,d=this.xJ;0<=d;d--)270===this.ga?0===d?b.push(new w(0,0,c,Math.abs(this.Vb[0]))):b.push(new w(0,this.Vb[d-1],c,Math.abs(this.Vb[d-1]-this.Vb[d]))):90===this.ga?0===d?b.push(new w(0,this.Vb[0],c,Math.abs(this.Vb[0]-a))):b.push(new w(0,this.Vb[d],c,Math.abs(this.Vb[d-1]-this.Vb[d]))):180===this.ga?0===d?b.push(new w(0,0,Math.abs(this.Vb[0]),c)):b.push(new w(this.Vb[d-
1],0,Math.abs(this.Vb[d-1]-this.Vb[d]),c)):0===d?b.push(new w(this.Vb[0],0,Math.abs(this.Vb[0]-a),c)):b.push(new w(this.Vb[d],0,Math.abs(this.Vb[d-1]-this.Vb[d]),c));this.commitLayers(b,this.fC)};hu.prototype.commitLayers=function(){};
hu.prototype.commitLinks=function(){for(var a=this.network.edges.j,b;a.next();)b=a.value.link,null!==b&&(b.xm(),b.$p(),b.yj());for(a.reset();a.next();)b=a.value.link,null!==b&&b.uo();for(a.reset();a.next();){var c=a.value;b=c.link;if(null!==b){b.xm();var d=b,e=d.aa,g=d.ea,h=d.gd,k=d.Nd;if(c.valid){if(b.hf===Dj&&4===b.ua){if(c.rev)var l=e,e=g,g=l,m=h,h=k,k=m;if(c.fromVertex.column===c.toVertex.column){var n=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,g,k),p=b.getLinkPoint(g,k,b.computeSpot(!1),!1,!1,
e,h);n.F()||n.set(e.Z.$l);p.F()||p.set(g.Z.$l);b.$p();b.Ul(n.x,n.y);b.Ul((2*n.x+p.x)/3,(2*n.y+p.y)/3);b.Ul((n.x+2*p.x)/3,(n.y+2*p.y)/3);b.Ul(p.x,p.y)}else{var q=!1,r=!1;null!==h&&b.computeSpot(!0)===gc&&(q=!0);null!==k&&b.computeSpot(!1)===gc&&(r=!0);if(q||r){var s=b.n(0).x,v=b.n(0).y,t=b.n(1).x,x=b.n(1).y,y=b.n(2).x,B=b.n(2).y,A=b.n(3).x,N=b.n(3).y;if(q){90===this.ga||270===this.ga?(t=s,x=(v+N)/2):(t=(s+A)/2,x=v);b.ja(1,t,x);var G=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,g,k);G.F()||G.set(e.Z.$l);
b.ja(0,G.x,G.y)}r&&(90===this.ga||270===this.ga?(y=A,B=(v+N)/2):(y=(s+A)/2,B=N),b.ja(2,y,B),G=b.getLinkPoint(g,k,b.computeSpot(!1),!1,!1,e,h),G.F()||G.set(g.Z.$l),b.ja(3,G.x,G.y))}}}b.yj()}else if(c.fromVertex.layer===c.toVertex.layer)b.yj();else{var T=!1,fa=!1,W=0,P=b.fu+1;if(b.tc)fa=!0,W=b.ua,4<W&&b.points.removeRange(2,W-3);else if(b.hf===Dj)T=!0,W=b.ua,4<W&&b.points.removeRange(2,W-3),P=2;else{var W=b.ua,aa=b.computeSpot(!0)===gc,Oa=b.computeSpot(!1)===gc;2<W&&aa&&Oa?b.points.removeRange(1,W-
2):3<W&&aa&&!Oa?b.points.removeRange(1,W-3):3<W&&!aa&&Oa?b.points.removeRange(2,W-2):4<W&&!aa&&!Oa&&b.points.removeRange(2,W-3)}var sa=c.fromVertex,Ma=c.toVertex,va,Pa;if(c.rev){for(var xa=0;null!==Ma&&sa!==Ma;){Pa=va=null;for(var Ic=Ma.vc.j;Ic.next();){var tc=Ic.value;if(tc.link===c.link&&(va=tc.fromVertex,Pa=tc.toVertex,null===va.Qd))break}if(va!==sa)if(db=b.n(P-1).x,vb=b.n(P-1).y,qa=va.oa,ra=va.xa,fa)180===this.ga||0===this.ga?2===P?(b.B(P++,db,vb),b.B(P++,db,ra)):(re=null!==Pa?Pa.xa:vb,re!==ra&&
(jb=this.Vb[va.layer-1],b.B(P++,jb,vb),b.B(P++,jb,ra))):2===P?(b.B(P++,db,vb),b.B(P++,qa,vb)):(fd=null!==Pa?Pa.oa:db,fd!==qa&&(jb=this.Vb[va.layer-1],b.B(P++,db,jb),b.B(P++,qa,jb)));else if(2===P)if(bb=Math.max(10,this.Fg[Ma.layer]),Ya=Math.max(10,this.Uf[Ma.layer]),T)180===this.ga?qa<=Ma.R.x?(xa=Ma.R.x,b.B(P++,xa-bb,ra),b.B(P++,xa,ra),b.B(P++,xa+Ya,ra)):(b.B(P++,qa-bb,ra),b.B(P++,qa,ra),b.B(P++,qa+Ya,ra)):90===this.ga?ra>=Ma.R.bottom?(xa=Ma.R.y+Ma.R.height,b.B(P++,qa,xa+Ya),b.B(P++,qa,xa),b.B(P++,
qa,xa-bb)):(b.B(P++,qa,ra+Ya),b.B(P++,qa,ra),b.B(P++,qa,ra-bb)):270===this.ga?ra<=Ma.R.y?(xa=Ma.R.y,b.B(P++,qa,xa-bb),b.B(P++,qa,xa),b.B(P++,qa,xa+Ya)):(b.B(P++,qa,ra-bb),b.B(P++,qa,ra),b.B(P++,qa,ra+Ya)):0===this.ga&&(qa>=Ma.R.right?(xa=Ma.R.x+Ma.R.width,b.B(P++,xa+Ya,ra),b.B(P++,xa,ra),b.B(P++,xa-bb,ra)):(b.B(P++,qa+Ya,ra),b.B(P++,qa,ra),b.B(P++,qa-bb,ra)));else{b.B(P++,db,vb);var Fd=0;if(180===this.ga||0===this.ga){if(180===this.ga?qa>=Ma.R.right:qa<=Ma.R.x)Fd=(0===this.ga?-bb:Ya)/2;b.B(P++,db+
Fd,ra)}else{if(270===this.ga?ra>=Ma.R.bottom:ra<=Ma.R.y)Fd=(90===this.ga?-bb:Ya)/2;b.B(P++,qa,vb+Fd)}b.B(P++,qa,ra)}else bb=Math.max(10,this.Fg[va.layer]),Ya=Math.max(10,this.Uf[va.layer]),180===this.ga?(T&&b.B(P++,qa-bb,ra),b.B(P++,qa,ra),T&&b.B(P++,qa+Ya,ra)):90===this.ga?(T&&b.B(P++,qa,ra+Ya),b.B(P++,qa,ra),T&&b.B(P++,qa,ra-bb)):270===this.ga?(T&&b.B(P++,qa,ra-bb),b.B(P++,qa,ra),T&&b.B(P++,qa,ra+Ya)):(T&&b.B(P++,qa+Ya,ra),b.B(P++,qa,ra),T&&b.B(P++,qa-bb,ra));Ma=va}if(null===k||b.computeSpot(!1)!==
gc||fa)if(db=b.n(P-1).x,vb=b.n(P-1).y,qa=b.n(P).x,ra=b.n(P).y,fa){var uf=this.Uf[sa.layer],ac=0;180===this.ga||0===this.ga?(ac=vb,ac>=sa.R.y&&ac<=sa.R.bottom&&(180===this.ga?qa>=sa.R.x:qa<=sa.R.right)&&(xa=sa.oa+(180===this.ga?-uf:uf),ac=ac<sa.R.y+sa.R.height/2?sa.R.y-this.fe/2:sa.R.bottom+this.fe/2,b.B(P++,xa,vb),b.B(P++,xa,ac)),b.B(P++,qa,ac)):(ac=db,ac>=sa.R.x&&ac<=sa.R.right&&(270===this.ga?ra>=sa.R.y:ra<=sa.R.bottom)&&(xa=sa.xa+(270===this.ga?-uf:uf),ac=ac<sa.R.x+sa.R.width/2?sa.R.x-this.fe/
2:sa.R.right+this.fe/2,b.B(P++,db,xa),b.B(P++,ac,xa)),b.B(P++,ac,ra));b.B(P++,qa,ra)}else if(T)bb=Math.max(10,this.Fg[sa.layer]),Ya=Math.max(10,this.Uf[sa.layer]),180===this.ga&&qa>=sa.R.x?(xa=sa.R.x+sa.R.width,b.ja(P-2,xa,vb),b.ja(P-1,xa+Ya,vb)):90===this.ga&&ra<=sa.R.bottom?(xa=sa.R.y,b.ja(P-2,db,xa),b.ja(P-1,db,xa-bb)):270===this.ga&&ra>=sa.R.y?(xa=sa.R.y+sa.R.height,b.ja(P-2,db,xa),b.ja(P-1,db,xa+Ya)):0===this.ga&&qa<=sa.R.right&&(xa=sa.R.x,b.ja(P-2,xa,vb),b.ja(P-1,xa-bb,vb));else{bb=Math.max(10,
this.Fg[sa.layer]);Ya=Math.max(10,this.Uf[sa.layer]);Fd=0;if(180===this.ga||0===this.ga){if(180===this.ga?qa<=sa.R.x:qa>=sa.R.right)Fd=(0===this.ga?Ya:-bb)/2;b.B(P++,qa+Fd,vb)}else{if(270===this.ga?ra<=sa.R.y:ra>=sa.R.bottom)Fd=(90===this.ga?Ya:-bb)/2;b.B(P++,db,ra+Fd)}b.B(P++,qa,ra)}}else{for(;null!==sa&&sa!==Ma;){Pa=va=null;for(var Gg=sa.sc.j;Gg.next();){var Hg=Gg.value;if(Hg.link===c.link&&(va=Hg.toVertex,Pa=Hg.fromVertex,null!==Pa.Qd&&(Pa=null),null===va.Qd))break}var db=0,vb=0,qa=0,ra=0,jb=0,
bb=0,Ya=0;if(va!==Ma)if(db=b.n(P-1).x,vb=b.n(P-1).y,qa=va.oa,ra=va.xa,fa)if(180===this.ga||0===this.ga){var re=null!==Pa?Pa.xa:vb;re!==ra&&(jb=this.Vb[va.layer],2===P&&(jb=0===this.ga?Math.max(jb,db):Math.min(jb,db)),b.B(P++,jb,vb),b.B(P++,jb,ra))}else{var fd=null!==Pa?Pa.oa:db;fd!==qa&&(jb=this.Vb[va.layer],2===P&&(jb=90===this.ga?Math.max(jb,vb):Math.min(jb,vb)),b.B(P++,db,jb),b.B(P++,qa,jb))}else bb=Math.max(10,this.Fg[va.layer]),Ya=Math.max(10,this.Uf[va.layer]),180===this.ga?(b.B(P++,qa+Ya,ra),
T&&b.B(P++,qa,ra),b.B(P++,qa-bb,ra)):90===this.ga?(b.B(P++,qa,ra-bb),T&&b.B(P++,qa,ra),b.B(P++,qa,ra+Ya)):270===this.ga?(b.B(P++,qa,ra+Ya),T&&b.B(P++,qa,ra),b.B(P++,qa,ra-bb)):(b.B(P++,qa-bb,ra),T&&b.B(P++,qa,ra),b.B(P++,qa+Ya,ra));sa=va}fa&&(db=b.n(P-1).x,vb=b.n(P-1).y,qa=b.n(P).x,ra=b.n(P).y,180===this.ga||0===this.ga?vb!==ra&&(jb=0===this.ga?Math.min(Math.max((qa+db)/2,this.Vb[Ma.layer]),qa):Math.max(Math.min((qa+db)/2,this.Vb[Ma.layer]),qa),b.B(P++,jb,vb),b.B(P++,jb,ra)):db!==qa&&(jb=90===this.ga?
Math.min(Math.max((ra+vb)/2,this.Vb[Ma.layer]),ra):Math.max(Math.min((ra+vb)/2,this.Vb[Ma.layer]),ra),b.B(P++,db,jb),b.B(P++,qa,jb)))}if(null!==d&&T){if(null!==h){if(b.computeSpot(!0)===gc){var Jc=b.n(0),se=b.n(2);Jc.O(se)||b.ja(1,(Jc.x+se.x)/2,(Jc.y+se.y)/2)}G=b.getLinkPoint(e,h,gc,!0,!1,g,k);G.F()||G.set(e.Z.$l);b.ja(0,G.x,G.y)}null!==k&&(b.computeSpot(!1)===gc&&(Jc=b.n(b.ua-1),se=b.n(b.ua-3),Jc.O(se)||b.ja(b.ua-2,(Jc.x+se.x)/2,(Jc.y+se.y)/2)),G=b.getLinkPoint(g,k,gc,!1,!1,e,h),G.F()||G.set(g.Z.$l),
b.ja(b.ua-1,G.x,G.y))}b.yj();c.commit()}}}for(var te=new J(H),cg=this.network.edges.j;cg.next();){var vf=cg.value.link;null!==vf&&vf.tc&&!te.contains(vf)&&te.add(vf)}if(0<te.count)if(90===this.ga||270===this.ga){for(var sj=0,pb=new J(dv),bc,gd,ai=te.j;ai.next();){var Mb=ai.value;if(null!==Mb&&Mb.tc)for(var qb=2;qb<Mb.ua-3;qb++)if(bc=Mb.n(qb),gd=Mb.n(qb+1),ev(bc.y,gd.y)&&!ev(bc.x,gd.x)){var eb=new dv;eb.layer=Math.floor(bc.y/2);var wf=Mb.n(0),xf=Mb.n(Mb.ua-1);eb.first=wf.x*wf.x+wf.y;eb.re=xf.x*xf.x+
xf.y;eb.ff=Math.min(bc.x,gd.x);eb.De=Math.max(bc.x,gd.x);eb.index=qb;eb.link=Mb;if(qb+2<Mb.ua){var Ig=Mb.n(qb-1),hd=Mb.n(qb+2),Tb=0;Ig.y<bc.y?Tb=hd.y<bc.y?3:bc.x<gd.x?2:1:Ig.y>bc.y&&(Tb=hd.y>bc.y?0:gd.x<bc.x?2:1);eb.Ji=Tb}pb.add(eb)}}if(1<pb.count){pb.sort(this.zG);for(var id=0;id<pb.count;){for(var Ye=pb.o[id].layer,Cb=id+1;Cb<pb.count&&pb.o[Cb].layer===Ye;)Cb++;if(1<Cb-id)for(var fb=id;fb<Cb;){for(var Gd=pb.o[fb].De,rb=id+1;rb<Cb&&pb.o[rb].ff<Gd;)Gd=Math.max(Gd,pb.o[rb].De),rb++;var Hd=rb-fb;if(1<
Hd){pb.Vq(this.uy,fb,fb+Hd);for(var He=1,ab=pb.o[fb].re,qb=fb;qb<rb;qb++){var Ta=pb.o[qb];Ta.re!==ab&&(He++,ab=Ta.re)}pb.Vq(this.yG,fb,fb+Hd);for(var Ra=1,ab=pb.o[fb].first,qb=fb;qb<rb;qb++)Ta=pb.o[qb],Ta.first!==ab&&(Ra++,ab=Ta.first);var cc=!0,dg=Ra;He<Ra?(cc=!1,dg=He,ab=pb.o[fb].re,pb.Vq(this.uy,fb,fb+Hd)):ab=pb.o[fb].first;for(var eg=0,qb=fb;qb<rb;qb++){Ta=pb.o[qb];(cc?Ta.first:Ta.re)!==ab&&(eg++,ab=cc?Ta.first:Ta.re);Mb=Ta.link;bc=Mb.n(Ta.index);gd=Mb.n(Ta.index+1);var fg=this.SF*(eg-(dg-1)/
2);if(!Mb.Di||fv(bc.x,bc.y+fg,gd.x,gd.y+fg))sj++,Mb.xm(),Mb.ja(Ta.index,bc.x,bc.y+fg),Mb.ja(Ta.index+1,gd.x,gd.y+fg),Mb.yj()}}fb=rb}id=Cb}}}else{for(var bi=0,Gb=new J(dv),Ub,Wb,Ze=te.j;Ze.next();){var Nb=Ze.value;if(null!==Nb&&Nb.tc)for(var Ob=2;Ob<Nb.ua-3;Ob++)if(Ub=Nb.n(Ob),Wb=Nb.n(Ob+1),ev(Ub.x,Wb.x)&&!ev(Ub.y,Wb.y)){var Id=new dv;Id.layer=Math.floor(Ub.x/2);var Hb=Nb.n(0),uc=Nb.n(Nb.ua-1);Id.first=Hb.x+Hb.y*Hb.y;Id.re=uc.x+uc.y*uc.y;Id.ff=Math.min(Ub.y,Wb.y);Id.De=Math.max(Ub.y,Wb.y);Id.index=
Ob;Id.link=Nb;if(Ob+2<Nb.ua){var ci=Nb.n(Ob-1),di=Nb.n(Ob+2),rd=0;ci.x<Ub.x?rd=di.x<Ub.x?3:Ub.y<Wb.y?2:1:ci.x>Ub.x&&(rd=di.x>Ub.x?0:Wb.y<Ub.y?2:1);Id.Ji=rd}Gb.add(Id)}}if(1<Gb.count){Gb.sort(this.zG);for(var $e=0;$e<Gb.count;){for(var gg=Gb.o[$e].layer,jd=$e+1;jd<Gb.count&&Gb.o[jd].layer===gg;)jd++;if(1<jd-$e)for(var Ib=$e;Ib<jd;){for(var sd=Gb.o[Ib].De,dc=$e+1;dc<jd&&Gb.o[dc].ff<sd;)sd=Math.max(sd,Gb.o[dc].De),dc++;var Xb=dc-Ib;if(1<Xb){Gb.Vq(this.uy,Ib,Ib+Xb);for(var yf=1,Wc=Gb.o[Ib].re,Ob=Ib;Ob<
dc;Ob++){var Ua=Gb.o[Ob];Ua.re!==Wc&&(yf++,Wc=Ua.re)}Gb.Vq(this.yG,Ib,Ib+Xb);for(var Ie=1,Wc=Gb.o[Ib].first,Ob=Ib;Ob<dc;Ob++)Ua=Gb.o[Ob],Ua.first!==Wc&&(Ie++,Wc=Ua.first);var ei=!0,Xc=Ie;yf<Ie?(ei=!1,Xc=yf,Wc=Gb.o[Ib].re,Gb.Vq(this.uy,Ib,Ib+Xb)):Wc=Gb.o[Ib].first;for(var xh=0,Ob=Ib;Ob<dc;Ob++){Ua=Gb.o[Ob];(ei?Ua.first:Ua.re)!==Wc&&(xh++,Wc=ei?Ua.first:Ua.re);Nb=Ua.link;Ub=Nb.n(Ua.index);Wb=Nb.n(Ua.index+1);var Kc=this.SF*(xh-(Xc-1)/2);if(!Nb.Di||fv(Ub.x+Kc,Ub.y,Wb.x+Kc,Wb.y))bi++,Nb.xm(),Nb.ja(Ua.index,
Ub.x+Kc,Ub.y),Nb.ja(Ua.index+1,Wb.x+Kc,Wb.y),Nb.yj()}}Ib=dc}$e=jd}}}};hu.prototype.zG=function(a,b){return a instanceof dv&&b instanceof dv&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.ff<b.ff?-1:a.ff>b.ff?1:a.De<b.De?-1:a.De>b.De?1:0:0};hu.prototype.yG=function(a,b){return a instanceof dv&&b instanceof dv&&a!==b?a.first<b.first?-1:a.first>b.first||a.Ji<b.Ji?1:a.Ji>b.Ji||a.ff<b.ff?-1:a.ff>b.ff?1:a.De<b.De?-1:a.De>b.De?1:0:0};
hu.prototype.uy=function(a,b){return a instanceof dv&&b instanceof dv&&a!==b?a.re<b.re?-1:a.re>b.re||a.Ji<b.Ji?1:a.Ji>b.Ji||a.ff<b.ff?-1:a.ff>b.ff?1:a.De<b.De?-1:a.De>b.De?1:0:0};function ev(a,b){u&&(z.p(a,hu,"isApprox:a"),z.p(b,hu,"isApprox:b"));var c=a-b;return-1<c&&1>c}function fv(a,b,c,d){u&&(z.p(a,hu,"isUnoccupied2:px"),z.p(b,hu,"isUnoccupied2:py"),z.p(c,hu,"isUnoccupied2:qx"),z.p(d,hu,"isUnoccupied2:qy"));return!0}
function vu(a,b){var c,d=a.ue[b];if(d>=a.wh.length){c=[];for(var e=0;e<a.wh.length;e++)c[e]=a.wh[e];a.wh=c}void 0===a.wh[d]||null===a.wh[d]?c=[]:(c=a.wh[d],a.wh[d]=null);d=a.Js[b];for(e=0;e<d.length;e++){var g=d[e];c[g.index]=g}return c}function wu(a,b,c){a.wh[a.ue[b]]=c}z.defineProperty(hu,{layerSpacing:"layerSpacing"},function(){return this.Xm},function(a){this.Xm!==a&&(z.h(a,"number",hu,"layerSpacing"),0<=a&&(this.Xm=a,this.N()))});
z.defineProperty(hu,{iL:"columnSpacing"},function(){return this.fe},function(a){this.fe!==a&&(z.h(a,"number",hu,"columnSpacing"),0<a&&(this.fe=a,this.N()))});z.defineProperty(hu,{direction:"direction"},function(){return this.ga},function(a){this.ga!==a&&(z.h(a,"number",hu,"direction"),0===a||90===a||180===a||270===a?(this.ga=a,this.N()):z.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))});
z.defineProperty(hu,{angle:"angle"},function(){return this.direction},function(a){this.direction=a});z.defineProperty(hu,{kI:"cycleRemoveOption"},function(){return this.No},function(a){this.No!==a&&(z.Ca(a,hu,hu,"cycleRemoveOption"),a===ou||a===iu)&&(this.No=a,this.N())});z.defineProperty(hu,{oJ:"layeringOption"},function(){return this.qp},function(a){this.qp!==a&&(z.Ca(a,hu,hu,"layeringOption"),a===ju||a===Gu||a===Iu)&&(this.qp=a,this.N())});
z.defineProperty(hu,{bJ:"initializeOption"},function(){return this.fp},function(a){this.fp!==a&&(z.Ca(a,hu,hu,"initializeOption"),a===ku||a===Ou||a===Mu)&&(this.fp=a,this.N())});z.defineProperty(hu,{SL:"iterations"},function(){return this.Vm},function(a){this.Vm!==a&&(z.p(a,nu,"iterations"),0<=a&&(this.Vm=a,this.N()))});z.defineProperty(hu,{OH:"aggressiveOption"},function(){return this.zo},function(a){this.zo!==a&&(z.Ca(a,hu,hu,"aggressiveOption"),a===Su||a===lu||a===Tu)&&(this.zo=a,this.N())});
z.defineProperty(hu,{lM:"packOption"},function(){return this.mj},function(a){this.mj!==a&&(z.h(a,"number",hu,"packOption"),0<=a&&8>a&&(this.mj=a,this.N()))});z.defineProperty(hu,{Sq:"setsPortSpots"},function(){return this.pi},function(a){this.pi!==a&&(z.h(a,"boolean",hu,"setsPortSpots"),this.pi=a,this.N())});z.defineProperty(hu,{SF:"linkSpacing"},function(){return this.rs},function(a){this.rs!==a&&(z.h(a,"number",hu,"linkSpacing"),0<=a&&(this.rs=a,this.N()))});z.w(hu,{xJ:"maxLayer"},function(){return this.zb});
z.w(hu,{XL:"maxIndex"},function(){return this.iw});z.w(hu,{WL:"maxColumn"},function(){return this.Pb});z.w(hu,{bM:"minIndexLayer"},function(){return this.As});z.w(hu,{YL:"maxIndexLayer"},function(){return this.Vf});var iu;hu.CycleDepthFirst=iu=z.s(hu,"CycleDepthFirst",0);var ou;hu.CycleGreedy=ou=z.s(hu,"CycleGreedy",1);var ju;hu.LayerOptimalLinkLength=ju=z.s(hu,"LayerOptimalLinkLength",0);var Gu;hu.LayerLongestPathSink=Gu=z.s(hu,"LayerLongestPathSink",1);var Iu;
hu.LayerLongestPathSource=Iu=z.s(hu,"LayerLongestPathSource",2);var ku;hu.InitDepthFirstOut=ku=z.s(hu,"InitDepthFirstOut",0);var Ou;hu.InitDepthFirstIn=Ou=z.s(hu,"InitDepthFirstIn",1);var Mu;hu.InitNaive=Mu=z.s(hu,"InitNaive",2);var Su;hu.AggressiveNone=Su=z.s(hu,"AggressiveNone",0);var lu;hu.AggressiveLess=lu=z.s(hu,"AggressiveLess",1);var Tu;hu.AggressiveMore=Tu=z.s(hu,"AggressiveMore",2);hu.PackNone=0;var Uu;hu.PackExpand=Uu=1;var Vu;hu.PackStraighten=Vu=2;var Xu;hu.PackMedian=Xu=4;var mu;
hu.PackAll=mu=7;function dv(){this.index=this.De=this.ff=this.re=this.first=this.layer=0;this.link=null;this.Ji=0}z.me(dv,{layer:!0,first:!0,re:!0,ff:!0,De:!0,index:!0,link:!0,Ji:!0});function nu(){ya.call(this)}z.Ta(nu,ya);z.ka("LayeredDigraphNetwork",nu);nu.prototype.createVertex=function(){return new gv};nu.prototype.createEdge=function(){return new hv};
function gv(){za.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=null;this.valid=!1;this.finish=this.gq=NaN;this.Dn=0;this.gB=this.hB=null}z.Ta(gv,za);z.ka("LayeredDigraphVertex",gv);function hv(){Aa.call(this);this.forest=this.rev=this.valid=!1;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}z.Ta(hv,Aa);z.ka("LayeredDigraphEdge",hv);
function Z(){0<arguments.length&&z.wd(Z);ch.call(this);this.Ed=new K(Object);this.Ss=iv;this.Sf=jv;this.Ht=kv;this.gw=lv;this.dC=null;this.Yh=!0;this.yd=mv;this.sg=(new Fa(10,10)).freeze();this.za=new nv;this.Aa=new nv;this.Xz=[]}z.Ta(Z,ch);z.ka("TreeLayout",Z);Z.prototype.cloneProtected=function(a){ch.prototype.cloneProtected.call(this,a);a.Ss=this.Ss;a.Ht=this.Ht;a.gw=this.gw;a.Yh=this.Yh;a.yd=this.yd;a.sg.assign(this.sg);a.za.copyInheritedPropertiesFrom(this.za);a.Aa.copyInheritedPropertiesFrom(this.Aa)};
Z.prototype.pc=function(a){a.Pe===Z?0===a.name.indexOf("Alignment")?this.alignment=a:0===a.name.indexOf("Arrangement")?this.ag=a:0===a.name.indexOf("Compaction")?this.compaction=a:0===a.name.indexOf("Path")?this.path=a:0===a.name.indexOf("Sorting")?this.sorting=a:0===a.name.indexOf("Style")?this.BK=a:z.k("Unknown enum value: "+a):ch.prototype.pc.call(this,a)};Z.prototype.createNetwork=function(){return new ov};
Z.prototype.makeNetwork=function(a){function b(a){if(a instanceof E)return!a.xf&&"Comment"!==a.rc;if(a instanceof H){var b=a.aa;if(null===b||b.xf||"Comment"===b.rc)return!1;a=a.ea;return null===a||a.xf||"Comment"===a.rc?!1:!0}return!1}var c=this.createNetwork();c.Wb=this;a instanceof C?(c.Hk(a.og,!0,b),c.Hk(a.links,!0,b)):a instanceof F?c.Hk(a.Oc,!1,b):c.Hk(a.j,!1,b);return c};
Z.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.ag!==pv&&(this.Ce=this.initialOrigin(this.Ce));var b=this.g;null===b&&a instanceof C&&(b=a);this.Sf=this.path===iv&&null!==b?b.ae?jv:qv:this.path===iv?jv:this.path;if(0<this.network.vertexes.count){this.network.wx();for(a=this.network.vertexes.j;a.next();)b=a.value,b.initialized=!1,b.level=
0,b.parent=null,b.children=[];if(0<this.Ed.count){a=new K(nv);for(b=this.Ed.j;b.next();){var c=b.value;c instanceof E?(c=this.network.Qn(c),null!==c&&a.add(c)):c instanceof nv&&a.add(c)}this.Ed=a}0===this.Ed.count&&this.findRoots();for(a=this.Ed.copy().j;a.next();)b=a.value,b.initialized||(b.initialized=!0,rv(this,b));b=this.network.vertexes;for(a=null;a=sv(b),0<a.count;)b=tv(this,a),null!==b&&this.Ed.add(b),b.initialized=!0,rv(this,b),b=a;for(a=this.Ed.j;a.next();)b=a.value,b instanceof nv&&uv(this,
b);for(a=this.Ed.j;a.next();)b=a.value,b instanceof nv&&vv(this,b);for(a=this.Ed.j;a.next();)b=a.value,b instanceof nv&&wv(this,b);this.iA();if(this.UA===xv){c=[];for(a=this.network.vertexes.j;a.next();){var d=a.value,b=d.parent;null===b&&(b=d);var b=0===b.angle||180===b.angle,e=c[d.level];void 0===e&&(e=0);c[d.level]=Math.max(e,b?d.width:d.height)}for(d=0;d<c.length;d++)void 0===c[d]&&(c[d]=0);this.dC=c;for(a=this.network.vertexes.j;a.next();)d=a.value,b=d.parent,null===b&&(b=d),0===b.angle||180===
b.angle?(180===b.angle&&(d.hu+=c[d.level]-d.width),d.width=c[d.level]):(270===b.angle&&(d.iu+=c[d.level]-d.height),d.height=c[d.level])}else if(this.UA===yv)for(a=this.network.vertexes.j;a.next();){c=a.value;b=0===c.angle||180===c.angle;e=-1;for(d=0;d<c.children.length;d++)var g=c.children[d],e=Math.max(e,b?g.width:g.height);if(0<=e)for(d=0;d<c.children.length;d++)g=c.children[d],b?(180===c.angle&&(g.hu+=e-g.width),g.width=e):(270===c.angle&&(g.iu+=e-g.height),g.height=e)}for(a=this.Ed.j;a.next();)b=
a.value,b instanceof nv&&this.layoutTree(b);this.arrangeTrees();this.updateParts()}this.network=null;this.Ed=new K(Object);this.Jf=!0};function sv(a){var b=new K;for(a=a.j;a.next();){var c=a.value;c.initialized||b.add(c)}return b}
Z.prototype.findRoots=function(){for(var a=this.network.vertexes.j;a.next();){var b=a.value;switch(this.Sf){case jv:0===b.vc.count&&this.Ed.add(b);break;case qv:0===b.sc.count&&this.Ed.add(b);break;default:z.k("Unhandled path value "+this.Sf.toString())}}0===this.Ed.count&&(a=tv(this,this.network.vertexes),null!==a&&this.Ed.add(a))};
function tv(a,b){for(var c=999999,d=null,e=b.j;e.next();){var g=e.value;switch(a.Sf){case jv:g.vc.count<c&&(c=g.vc.count,d=g);break;case qv:g.sc.count<c&&(c=g.sc.count,d=g);break;default:z.k("Unhandled path value "+a.Sf.toString())}}return d}
function rv(a,b){if(null!==b){u&&z.l(b,nv,Z,"walkTree:v");switch(a.Sf){case jv:if(0<b.sc.count){for(var c=new J(nv),d=b.pI;d.next();){var e=d.value;zv(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.nc())}break;case qv:if(0<b.vc.count){c=new J(nv);for(d=b.pK;d.next();)e=d.value,zv(a,b,e)&&c.add(e);0<c.count&&(b.children=c.nc())}break;default:z.k("Unhandled path value"+a.Sf.toString())}c=b.children;d=c.length;for(e=0;e<d;e++){var g=c[e];g.initialized=!0;g.level=b.level+1;g.parent=b;a.Ed.remove(g)}for(e=
0;e<d;e++)g=c[e],rv(a,g)}}function zv(a,b,c){u&&z.l(b,nv,Z,"walkOK:v");u&&z.l(c,nv,Z,"walkOK:c");if(c.initialized){var d;if(null===b)d=!1;else{u&&z.l(c,nv,Z,"isAncestor:a");u&&z.l(b,nv,Z,"isAncestor:b");for(d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}
Z.prototype.removeChild=function(a,b){if(null!==a&&null!==b){u&&z.l(a,nv,Z,"removeChild:p");u&&z.l(b,nv,Z,"removeChild:c");for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),g=0,e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.children=d}}};
function uv(a,b){if(null!==b){u&&z.l(b,nv,Z,"initializeTree:v");a.initializeTreeVertexValues(b);b.alignment===Av&&a.sortTreeVertexChildren(b);for(var c=0,d=b.Fn,e=0,g=b.children,h=g.length,k=0;k<h;k++){var l=g[k];uv(a,l);c+=l.descendantCount+1;d=Math.max(d,l.maxChildrenCount);e=Math.max(e,l.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function Bv(a,b){u&&z.l(b,nv,Z,"mom:v");switch(a.Ht){default:case kv:return null!==b.parent?b.parent:a.za;case Cv:return null===b.parent?a.za:null===b.parent.parent?a.Aa:b.parent;case Dv:return null!==b.parent?null!==b.parent.parent?b.parent.parent:a.Aa:a.za;case Ev:var c=!0;if(0===b.Fn)c=!1;else for(var d=b.children,e=d.length,g=0;g<e;g++)if(0<d[g].Fn){c=!1;break}return c&&null!==b.parent?a.Aa:null!==b.parent?b.parent:a.za}}
Z.prototype.initializeTreeVertexValues=function(a){u&&z.l(a,nv,Z,"initializeTreeVertexValues:v");var b=Bv(this,a);a.copyInheritedPropertiesFrom(b);if(null!==a.parent&&a.parent.alignment===Av){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=!0};
function vv(a,b){if(null!==b){u&&z.l(b,nv,Z,"assignTree:v");a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)vv(a,c[e])}}Z.prototype.assignTreeVertexValues=function(){};function wv(a,b){if(null!==b){u&&z.l(b,nv,Z,"sortTree:v");b.alignment!==Av&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)wv(a,c[e])}}
Z.prototype.sortTreeVertexChildren=function(a){u&&z.l(a,nv,Z,"sortTreeVertexChildren:v");switch(a.sorting){case Fv:break;case Gv:a.children.reverse();break;case Hv:a.children.sort(a.comparer);break;case Iv:a.children.sort(a.comparer);a.children.reverse();break;default:z.k("Unhandled sorting value "+a.sorting.toString())}};Z.prototype.iA=function(){if(this.comments)for(var a=this.network.vertexes.j;a.next();)this.addComments(a.value)};
Z.prototype.addComments=function(a){u&&z.l(a,nv,Z,"addComments:v");var b=a.angle,c=a.parent,d=0,e=Jv,e=!1;null!==c&&(d=c.angle,e=c.alignment,e=Kv(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Fn,g=0,h=0,k=0,l=a.commentSpacing;if(null!==a.Yc)for(var m=a.Yc.eF();m.next();){var n=m.value;"Comment"===n.rc&&n.canLayout()&&(null===a.comments&&(a.comments=[]),a.comments.push(n),n.kf(),n=n.Ea,b&&!c||!e&&!d&&c||e&&d&&c?(g=Math.max(g,n.width),h+=n.height+Math.abs(k)):(g+=n.width+Math.abs(k),h=Math.max(h,
n.height)),k=l)}null!==a.comments&&(b&&!c||!e&&!d&&c||e&&d&&c?(g+=Math.abs(a.commentMargin),h=Math.max(0,h-a.height)):(h+=Math.abs(a.commentMargin),g=Math.max(0,g-a.width)),e=z.fh(0,0,a.R.width+g,a.R.height+h),a.sb=e,z.Mb(e))};function Kv(a){return a===Lv||a===Av||a===Mv||a===Nv}function Ov(a){return a===Lv||a===Av}
function Pv(a){u&&z.l(a,nv,Z,"isLeftSideBus:v");var b=a.parent;if(null!==b){var c=b.alignment;if(Kv(c)){if(Ov(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Mv)return!0}}return!1}
Z.prototype.layoutComments=function(a){u&&z.l(a,nv,Z,"layoutComments:v");if(null!==a.comments){var b=a.Yc.Ea,c=a.parent,d=a.angle,e=0,g=Jv,g=!1;null!==c&&(e=c.angle,g=c.alignment,g=Kv(g));for(var c=90===d||270===d,d=90===e||270===e,h=0===a.Fn,k=Pv(a),l=0,m=a.comments,n=m.length,p=z.P(),q=0;q<n;q++){var r=m[q],s=r.Ea;if(c&&!h||!g&&!d&&h||g&&d&&h){if(135<e&&!g||d&&k)if(0<=a.commentMargin)for(p.m(a.R.x-a.commentMargin-s.width,a.R.y+l),r.move(p),r=r.Ug();r.next();){var v=r.value;v.Gb=ad;v.Hb=bd}else for(p.m(a.R.x+
2*a.W.x-a.commentMargin,a.R.y+l),r.move(p),r=r.Ug();r.next();)v=r.value,v.Gb=bd,v.Hb=ad;else if(0<=a.commentMargin)for(p.m(a.R.x+2*a.W.x+a.commentMargin,a.R.y+l),r.move(p),r=r.Ug();r.next();)v=r.value,v.Gb=bd,v.Hb=ad;else for(p.m(a.R.x+a.commentMargin-s.width,a.R.y+l),r.move(p),r=r.Ug();r.next();)v=r.value,v.Gb=ad,v.Hb=bd;l=0<=a.commentSpacing?l+(s.height+a.commentSpacing):l+(a.commentSpacing-s.height)}else{if(135<e&&!g||!d&&k)if(0<=a.commentMargin)for(p.m(a.R.x+l,a.R.y-a.commentMargin-s.height),
r.move(p),r=r.Ug();r.next();)v=r.value,v.Gb=$c,v.Hb=cd;else for(p.m(a.R.x+l,a.R.y+2*a.W.y-a.commentMargin),r.move(p),r=r.Ug();r.next();)v=r.value,v.Gb=cd,v.Hb=$c;else if(0<=a.commentMargin)for(p.m(a.R.x+l,a.R.y+2*a.W.y+a.commentMargin),r.move(p),r=r.Ug();r.next();)v=r.value,v.Gb=cd,v.Hb=$c;else for(p.m(a.R.x+l,a.R.y+a.commentMargin-s.height),r.move(p),r=r.Ug();r.next();)v=r.value,v.Gb=$c,v.Hb=cd;l=0<=a.commentSpacing?l+(s.width+a.commentSpacing):l+(a.commentSpacing-s.width)}}z.A(p);b=l-a.commentSpacing-
(c?b.height:b.width);if(this.Sf===jv)for(e=a.sc;e.next();)a=e.value.link,null===a||a.Di||(a.lm=0<b?b:NaN);else for(e=a.vc;e.next();)a=e.value.link,null===a||a.Di||(a.Bm=0<b?b:NaN)}};
Z.prototype.layoutTree=function(a){if(null!==a){u&&z.l(a,nv,Z,"layoutTree:v");for(var b=a.children,c=b.length,d=0;d<c;d++)this.layoutTree(b[d]);switch(a.compaction){case Qv:Rv(this,a);break;case Sv:if(a.alignment===Av)Rv(this,a);else if(u&&z.l(a,nv,Z,"layoutTreeBlock:v"),0===a.Fn){var d=a.parent,b=!1,c=0,e=Jv;null!==d&&(c=d.angle,e=d.alignment,b=Kv(e));d=Pv(a);a.ta.m(0,0);a.rb.m(a.width,a.height);null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.Wa.m(0,0):180===c&&!b||(90===c||270===
c)&&d?a.Wa.m(a.width-2*a.W.x,0):a.Wa.m(0,a.height-2*a.W.y);a.yu=null;a.Su=null}else{for(var g=Tv(a),b=90===g||270===g,h=0,k=a.children,l=k.length,m=0;m<l;m++)var n=k[m],h=Math.max(h,b?n.rb.width:n.rb.height);var p=a.alignment,d=p===Uv,q=p===Vv,r=Kv(p),s=Math.max(0,a.breadthLimit),c=Wv(a),v=a.nodeSpacing,t=Xv(a),x=a.rowSpacing,y=0;if(d||q||a.Mq||a.Nq&&1===a.maxGenerationCount)y=Math.max(0,a.rowIndent);var d=a.width,e=a.height,B=0,A=0,N=0,G=null,T=null,fa=0,W=0,P=0,aa=0,Oa=0,sa=0,Ma=0,va=0,n=0;r&&!Ov(p)&&
135<g&&k.reverse();if(Ov(p))if(1<l)for(m=0;m<l;m++)0===m%2&&m!==l-1?va=Math.max(va,b?k[m].rb.width:k[m].rb.height):0!==m%2&&(n=Math.max(n,b?k[m].rb.width:k[m].rb.height));else 1===l&&(va=b?k[0].rb.width:k[0].rb.height);if(r){switch(p){case Lv:W=135>g?Yv(a,k,va,B,A):Zv(a,k,va,B,A);va=W.x;B=W.width;A=W.height;break;case Mv:for(m=0;m<l;m++){var n=k[m],Pa=n.rb,G=0===sa?0:x;b?(n.ta.m(h-Pa.width,aa+G),B=Math.max(B,Pa.width),A=Math.max(A,aa+G+Pa.height),aa+=G+Pa.height):(n.ta.m(P+G,h-Pa.height),B=Math.max(B,
P+G+Pa.width),A=Math.max(A,Pa.height),P+=G+Pa.width);sa++}break;case Nv:for(m=0;m<l;m++)n=k[m],Pa=n.rb,G=0===sa?0:x,b?(n.ta.m(v/2+a.W.x,aa+G),B=Math.max(B,Pa.width),A=Math.max(A,aa+G+Pa.height),aa+=G+Pa.height):(n.ta.m(P+G,v/2+a.W.y),B=Math.max(B,P+G+Pa.width),A=Math.max(A,Pa.height),P+=G+Pa.width),sa++}G=Ew(this,2);T=Ew(this,2);b?(G[0].m(0,0),G[1].m(0,A),T[0].m(B,0)):(G[0].m(0,0),G[1].m(B,0),T[0].m(0,A));T[1].m(B,A)}else for(m=0;m<l;m++){n=k[m];Pa=n.rb;if(b){0<s&&0<sa&&P+v+Pa.width>s&&(P<h&&Fw(a,
p,h-P,0,Ma,m-1),Oa++,sa=0,Ma=m,N=A,P=0,aa=135<g?-A-x:A+x);Gw(this,n,0,aa);var xa=0;if(0===sa){if(G=n.yu,T=n.Su,fa=Pa.width,W=Pa.height,null===G||null===T||g!==Tv(n))G=Ew(this,2),T=Ew(this,2),G[0].m(0,0),G[1].m(0,W),T[0].m(fa,0),T[1].m(fa,W)}else{var Ic=z.tb(),W=Hw(this,a,n,G,T,fa,W,Ic),xa=W.x,G=Ic[0],T=Ic[1],fa=W.width,W=W.height;z.Ba(Ic);P<Pa.width&&0>xa&&(Iw(a,-xa,0,Ma,m-1),Jw(G,-xa,0),Jw(T,-xa,0),xa=0)}n.ta.m(xa,aa);B=Math.max(B,fa);A=Math.max(A,N+(0===Oa?0:x)+Pa.height);P=fa}else{0<s&&0<sa&&aa+
v+Pa.height>s&&(aa<h&&Fw(a,p,0,h-aa,Ma,m-1),Oa++,sa=0,Ma=m,N=B,aa=0,P=135<g?-B-x:B+x);Gw(this,n,P,0);xa=0;if(0===sa){if(G=n.yu,T=n.Su,fa=Pa.width,W=Pa.height,null===G||null===T||g!==Tv(n))G=Ew(this,2),T=Ew(this,2),G[0].m(0,0),G[1].m(fa,0),T[0].m(0,W),T[1].m(fa,W)}else Ic=z.tb(),W=Hw(this,a,n,G,T,fa,W,Ic),xa=W.x,G=Ic[0],T=Ic[1],fa=W.width,W=W.height,z.Ba(Ic),aa<Pa.height&&0>xa&&(Iw(a,0,-xa,Ma,m-1),Jw(G,0,-xa),Jw(T,0,-xa),xa=0);n.ta.m(P,xa);A=Math.max(A,W);B=Math.max(B,N+(0===Oa?0:x)+Pa.width);aa=W}sa++}0<
Oa&&(b?(A+=Math.max(0,c),P<B&&Fw(a,p,B-P,0,Ma,l-1),0<y&&(q||Iw(a,y,0,0,l-1),B+=y)):(B+=Math.max(0,c),aa<A&&Fw(a,p,0,A-aa,Ma,l-1),0<y&&(q||Iw(a,0,y,0,l-1),A+=y)));q=h=0;switch(p){case Kw:b?h+=B/2-a.W.x-t/2:q+=A/2-a.W.y-t/2;break;case Jv:0<Oa?b?h+=B/2-a.W.x-t/2:q+=A/2-a.W.y-t/2:b?(m=k[0].ta.x+k[0].Wa.x,va=k[l-1].ta.x+k[l-1].Wa.x+2*k[l-1].W.x,h+=m+(va-m)/2-a.W.x-t/2):(m=k[0].ta.y+k[0].Wa.y,va=k[l-1].ta.y+k[l-1].Wa.y+2*k[l-1].W.y,q+=m+(va-m)/2-a.W.y-t/2);break;case Uv:b?(h-=t,B+=t):(q-=t,A+=t);break;
case Vv:b?(h+=B-a.width+t,B+=t):(q+=A-a.height+t,A+=t);break;case Lv:b?h=1<l?h+(va+v/2-a.W.x):h+(k[0].W.x-a.W.x+k[0].Wa.x):q=1<l?q+(va+v/2-a.W.y):q+(k[0].W.y-a.W.y+k[0].Wa.y);break;case Mv:b?h+=B+v/2-a.W.x:q+=A+v/2-a.W.y;break;case Nv:break;default:z.k("Unhandled alignment value "+p.toString())}for(m=0;m<l;m++)n=k[m],b?n.ta.m(n.ta.x+n.Wa.x-h,n.ta.y+(135<g?(r?-A:-n.rb.height)+n.Wa.y-c:e+c+n.Wa.y)):n.ta.m(n.ta.x+(135<g?(r?-B:-n.rb.width)+n.Wa.x-c:d+c+n.Wa.x),n.ta.y+n.Wa.y-q);l=k=0;r?b?(B=Lw(a,B,h),
0>h&&(h=0),135<g&&(q+=A+c),A+=e+c,p===Nv&&(k+=v/2+a.W.x),l+=e+c):(135<g&&(h+=B+c),B+=d+c,A=Mw(a,A,q),0>q&&(q=0),p===Nv&&(l+=v/2+a.W.y),k+=d+c):b?(null===a.comments?d>B&&(p=Nw(p,d-B,0),k=p.x,l=p.y,B=d,h=0):B=Lw(a,B,h),0>h&&(k-=h,h=0),135<g&&(q+=A+c),A=Math.max(Math.max(A,e),A+e+c),l+=e+c):(135<g&&(h+=B+c),B=Math.max(Math.max(B,d),B+d+c),null===a.comments?e>A&&(p=Nw(p,0,e-A),k=p.x,l=p.y,A=e,q=0):A=Mw(a,A,q),0>q&&(l-=q,q=0),k+=d+c);if(0<Oa)g=Ew(this,4),p=Ew(this,4),b?(g[2].m(0,e+c),g[3].m(g[2].x,A),
p[2].m(B,g[2].y),p[3].m(p[2].x,g[3].y)):(g[2].m(d+c,0),g[3].m(B,g[2].y),p[2].m(g[2].x,A),p[3].m(g[3].x,p[2].y));else{g=Ew(this,G.length+2);p=Ew(this,T.length+2);for(m=0;m<G.length;m++)r=G[m],g[m+2].m(r.x+k,r.y+l);for(m=0;m<T.length;m++)r=T[m],p[m+2].m(r.x+k,r.y+l)}b?(g[0].m(h,0),g[1].m(g[0].x,e),g[2].y<g[1].y&&(g[2].x>g[0].x?g[2].assign(g[1]):g[1].assign(g[2])),g[3].y<g[2].y&&(g[3].x>g[0].x?g[3].assign(g[2]):g[2].assign(g[3])),p[0].m(h+d,0),p[1].m(p[0].x,e),p[2].y<p[1].y&&(p[2].x<p[0].x?p[2].assign(p[1]):
p[1].assign(p[2])),p[3].y<p[2].y&&(p[3].x<p[0].x?p[3].assign(p[2]):p[2].assign(p[3])),g[2].y-=c/2,p[2].y-=c/2):(g[0].m(0,q),g[1].m(d,g[0].y),g[2].x<g[1].x&&(g[2].y>g[0].y?g[2].assign(g[1]):g[1].assign(g[2])),g[3].x<g[2].x&&(g[3].y>g[0].y?g[3].assign(g[2]):g[2].assign(g[3])),p[0].m(0,q+e),p[1].m(d,p[0].y),p[2].x<p[1].x&&(p[2].y<p[0].y?p[2].assign(p[1]):p[1].assign(p[2])),p[3].x<p[2].x&&(p[3].y<p[0].y?p[3].assign(p[2]):p[2].assign(p[3])),g[2].x-=c/2,p[2].x-=c/2);Ow(this,G);Ow(this,T);a.yu=g;a.Su=p;
a.Wa.m(h,q);a.rb.m(B,A)}break;default:z.k("Unhandled compaction value "+a.compaction.toString())}}};
function Rv(a,b){u&&z.l(b,nv,Z,"layoutTreeNone:v");if(0===b.Fn){var c=!1,d=0,e=Jv;null!==b.parent&&(d=b.parent.angle,e=b.parent.alignment,c=Kv(e));e=Pv(b);b.ta.m(0,0);b.rb.m(b.width,b.height);null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!e?b.Wa.m(0,0):180===d&&!c||(90===d||270===d)&&e?b.Wa.m(b.width-2*b.W.x,0):b.Wa.m(0,b.height-2*b.W.y)}else{for(var c=Tv(b),d=90===c||270===c,g=0,e=b.children,h=e.length,k=0;k<h;k++)var l=e[k],g=Math.max(g,d?l.rb.width:l.rb.height);var m=b.alignment,n=
m===Uv,p=m===Vv,q=Kv(m),r=Math.max(0,b.breadthLimit),s=Wv(b),v=b.nodeSpacing,t=Xv(b),x=n||p?0:t/2,y=b.rowSpacing,B=0;if(n||p||b.Mq||b.Nq&&1===b.maxGenerationCount)B=Math.max(0,b.rowIndent);var n=b.width,A=b.height,N=0,G=0,T=0,fa=0,W=0,P=0,aa=0,Oa=0,sa=0,Ma=0;q&&!Ov(m)&&135<c&&e.reverse();if(Ov(m))if(1<h)for(k=0;k<h;k++){var l=e[k],va=l.rb;0===k%2&&k!==h-1?sa=Math.max(sa,(d?va.width:va.height)+Pw(l)-v):0!==k%2&&(Ma=Math.max(Ma,(d?va.width:va.height)+Pw(l)-v))}else 1===h&&(sa=d?e[0].rb.width:e[0].rb.height);
if(q)switch(m){case Lv:case Av:G=135>c?Yv(b,e,sa,N,G):Zv(b,e,sa,N,G);sa=G.x;N=G.width;G=G.height;break;case Mv:for(k=0;k<h;k++)l=e[k],va=l.rb,r=0===aa?0:y,d?(l.ta.m(g-va.width,W+r),N=Math.max(N,va.width),G=Math.max(G,W+r+va.height),W+=r+va.height):(l.ta.m(fa+r,g-va.height),N=Math.max(N,fa+r+va.width),G=Math.max(G,va.height),fa+=r+va.width),aa++;break;case Nv:for(g=0;g<h;g++)l=e[g],va=l.rb,r=0===aa?0:y,d?(l.ta.m(v/2+b.W.x,W+r),N=Math.max(N,va.width),G=Math.max(G,W+r+va.height),W+=r+va.height):(l.ta.m(fa+
r,v/2+b.W.y),N=Math.max(N,fa+r+va.width),G=Math.max(G,va.height),fa+=r+va.width),aa++}else for(k=0;k<h;k++)l=e[k],va=l.rb,d?(0<r&&0<aa&&fa+v+va.width>r&&(fa<g&&Fw(b,m,g-fa,0,Oa,k-1),P++,aa=0,Oa=k,T=G,fa=0,W=135<c?-G-y:G+y),Ma=0===aa?x:v,Gw(a,l,0,W),l.ta.m(fa+Ma,W),N=Math.max(N,fa+Ma+va.width),G=Math.max(G,T+(0===P?0:y)+va.height),fa+=Ma+va.width):(0<r&&0<aa&&W+v+va.height>r&&(W<g&&Fw(b,m,0,g-W,Oa,k-1),P++,aa=0,Oa=k,T=N,W=0,fa=135<c?-N-y:N+y),Ma=0===aa?x:v,Gw(a,l,fa,0),l.ta.m(fa,W+Ma),G=Math.max(G,
W+Ma+va.height),N=Math.max(N,T+(0===P?0:y)+va.width),W+=Ma+va.height),aa++;0<P&&(d?(G+=Math.max(0,s),fa<N&&Fw(b,m,N-fa,0,Oa,h-1),0<B&&(p||Iw(b,B,0,0,h-1),N+=B)):(N+=Math.max(0,s),W<G&&Fw(b,m,0,G-W,Oa,h-1),0<B&&(p||Iw(b,0,B,0,h-1),G+=B)));B=p=0;switch(m){case Kw:d?p+=N/2-b.W.x-t/2:B+=G/2-b.W.y-t/2;break;case Jv:0<P?d?p+=N/2-b.W.x-t/2:B+=G/2-b.W.y-t/2:d?(m=e[0].ta.x+e[0].Wa.x,v=e[h-1].ta.x+e[h-1].Wa.x+2*e[h-1].W.x,p+=m+(v-m)/2-b.W.x-t/2):(m=e[0].ta.y+e[0].Wa.y,v=e[h-1].ta.y+e[h-1].Wa.y+2*e[h-1].W.y,
B+=m+(v-m)/2-b.W.y-t/2);break;case Uv:d?(p-=t,N+=t):(B-=t,G+=t);break;case Vv:d?(p+=N-b.width+t,N+=t):(B+=G-b.height+t,G+=t);break;case Lv:case Av:d?p=1<h?p+(sa+v/2-b.W.x):p+(e[0].W.x-b.W.x+e[0].Wa.x):B=1<h?B+(sa+v/2-b.W.y):B+(e[0].W.y-b.W.y+e[0].Wa.y);break;case Mv:d?p+=N+v/2-b.W.x:B+=G+v/2-b.W.y;break;case Nv:break;default:z.k("Unhandled alignment value "+m.toString())}for(k=0;k<h;k++)l=e[k],d?l.ta.m(l.ta.x+l.Wa.x-p,l.ta.y+(135<c?(q?-G:-l.rb.height)+l.Wa.y-s:A+s+l.Wa.y)):l.ta.m(l.ta.x+(135<c?(q?
-N:-l.rb.width)+l.Wa.x-s:n+s+l.Wa.x),l.ta.y+l.Wa.y-B);d?(N=Lw(b,N,p),0>p&&(p=0),135<c&&(B+=G+s),G+=A+s):(135<c&&(p+=N+s),N+=n+s,G=Mw(b,G,B),0>B&&(B=0));b.Wa.m(p,B);b.rb.m(N,G)}}
function Yv(a,b,c,d,e){u&&z.l(a,nv,Z,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return new w(c,0,d,e);if(1===g){var h=b[0];d=h.rb.width;e=h.rb.height;return new w(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=90===Tv(a),n=0,p=0,q=0,r=0;r<g;r++)if(!(0!==r%2||1<g&&r===g-1)){var h=b[r],s=h.rb,v=0===n?0:l;if(m){var t=Pw(h)-k;h.ta.m(c-(s.width+t),q+v);d=Math.max(d,s.width+t);e=Math.max(e,q+v+s.height);q+=v+s.height}else t=Pw(h)-k,h.ta.m(p+v,c-(s.height+t)),e=Math.max(e,s.height+t),d=Math.max(d,
p+v+s.width),p+=v+s.width;n++}var n=0,x=p,y=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<g;r++)0!==r%2&&(h=b[r],s=h.rb,v=0===n?0:l,m?(t=Pw(h)-k,h.ta.m(p+t,q+v),d=Math.max(d,p+s.width+t),e=Math.max(e,q+v+s.height),q+=v+s.height):(t=Pw(h)-k,h.ta.m(p+v,q+t),d=Math.max(d,p+v+s.width),e=Math.max(e,q+s.height+t),p+=v+s.width),n++);1<g&&1===g%2&&(h=b[g-1],s=h.rb,b=Qw(h,m?Math.max(Math.abs(y),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.ta.m(c+k/2-h.W.x-h.Wa.x,e+b),m=c+k/2-h.W.x-h.Wa.x,d=Math.max(d,m+s.width),
0>m&&(d-=m),e=Math.max(e,Math.max(y,q)+b+s.height),0>h.ta.x&&(c=Rw(a,h.ta.x,!1,c,k))):(h.ta.m(d+b,c+k/2-h.W.y-h.Wa.y),d=Math.max(d,Math.max(x,p)+b+s.width),m=c+k/2-h.W.y-h.Wa.y,e=Math.max(e,m+s.height),0>m&&(e-=m),0>h.ta.y&&(c=Rw(a,h.ta.y,!0,c,k))));return new w(c,0,d,e)}
function Zv(a,b,c,d,e){u&&z.l(a,nv,Z,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return new w(c,0,d,e);if(1===g){var h=b[0];d=h.rb.width;e=h.rb.height;return new w(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=270===Tv(a),n=0,p=0,q=0,r=0;r<g;r++)if(!(0!==r%2||1<g&&r===g-1)){var h=b[r],s=h.rb,v=0===n?0:l;if(m){var t=Pw(h)-k,q=q-(v+s.height);h.ta.m(c-(s.width+t),q);d=Math.max(d,s.width+t);e=Math.max(e,Math.abs(q))}else t=Pw(h)-k,p-=v+s.width,h.ta.m(p,c-(s.height+t)),e=Math.max(e,s.height+
t),d=Math.max(d,Math.abs(p));n++}var n=0,x=p,y=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<g;r++)0!==r%2&&(h=b[r],s=h.rb,v=0===n?0:l,m?(t=Pw(h)-k,q-=v+s.height,h.ta.m(p+t,q),d=Math.max(d,p+s.width+t),e=Math.max(e,Math.abs(q))):(t=Pw(h)-k,p-=v+s.width,h.ta.m(p,q+t),e=Math.max(e,q+s.height+t),d=Math.max(d,Math.abs(p))),n++);1<g&&1===g%2&&(h=b[g-1],s=h.rb,l=Qw(h,m?Math.max(Math.abs(y),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.ta.m(c+k/2-h.W.x-h.Wa.x,-e-s.height-l),p=c+k/2-h.W.x-h.Wa.x,d=Math.max(d,
p+s.width),0>p&&(d-=p),e=Math.max(e,Math.abs(Math.min(y,q))+l+s.height),0>h.ta.x&&(c=Rw(a,h.ta.x,!1,c,k))):(h.ta.m(-d-s.width-l,c+k/2-h.W.y-h.Wa.y),d=Math.max(d,Math.abs(Math.min(x,p))+l+s.width),p=c+k/2-h.W.y-h.Wa.y,e=Math.max(e,p+s.height),0>p&&(e-=p),0>h.ta.y&&(c=Rw(a,h.ta.y,!0,c,k))));for(r=0;r<g;r++)h=b[r],m?h.ta.m(h.ta.x,h.ta.y+e):h.ta.m(h.ta.x+d,h.ta.y);return new w(c,0,d,e)}function Pw(a){u&&z.l(a,nv,Z,"fixRelativePostions:child");return null===a.parent?0:a.parent.nodeSpacing}
function Qw(a){u&&z.l(a,nv,Z,"fixRelativePostions:lastchild");return null===a.parent?0:a.parent.rowSpacing}function Rw(a,b,c,d,e){u&&z.l(a,nv,Z,"fixRelativePostions:v");a=a.children;for(var g=a.length,h=0;h<g;h++)c?a[h].ta.m(a[h].ta.x,a[h].ta.y-b):a[h].ta.m(a[h].ta.x-b,a[h].ta.y);b=a[g-1];return Math.max(d,c?b.Wa.y+b.W.y-e/2:b.Wa.x+b.W.x-e/2)}
function Lw(a,b,c){u&&z.l(a,nv,Z,"calculateSubwidth:v");switch(a.alignment){case Jv:case Kw:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Uv:return a.width>b?a.width:b;case Vv:return 2*a.W.x>b?a.width:b+a.width-2*a.W.x;case Lv:case Av:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Mv:return a.width-a.W.x+a.nodeSpacing/2+b;case Nv:return Math.max(a.width,a.W.x+a.nodeSpacing/2+b);default:return b}}
function Mw(a,b,c){u&&z.l(a,nv,Z,"calculateSubheight:v");switch(a.alignment){case Jv:case Kw:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Uv:return a.height>b?a.height:b;case Vv:return 2*a.W.y>b?a.height:b+a.height-2*a.W.y;case Lv:case Av:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Mv:return a.height-a.W.y+a.nodeSpacing/2+b;case Nv:return Math.max(a.height,a.W.y+a.nodeSpacing/2+b);default:return b}}
function Nw(a,b,c){u&&z.l(a,Ca,Z,"alignOffset:align");switch(a){case Kw:b/=2;c/=2;break;case Jv:b/=2;c/=2;break;case Uv:c=b=0;break;case Vv:break;default:z.k("Unhandled alignment value "+a.toString())}return new M(b,c)}function Fw(a,b,c,d,e,g){u&&z.l(a,nv,Z,"shiftRelPosAlign:v");u&&z.l(b,Ca,Z,"shiftRelPosAlign:align");b=Nw(b,c,d);Iw(a,b.x,b.y,e,g)}function Iw(a,b,c,d,e){u&&z.l(a,nv,Z,"shiftRelPos:v");if(0!==b||0!==c)for(a=a.children;d<=e;d++){var g=a[d].ta;g.x+=b;g.y+=c}}
function Gw(a,b,c,d){u&&(z.l(b,nv,Z,"recordMidPoints:v"),z.h(c,"number",Z,"recordMidPoints:x"),z.h(d,"number",Z,"recordMidPoints:y"));var e=b.parent;switch(a.Sf){case jv:for(a=b.vc;a.next();)b=a.value,b.fromVertex===e&&b.Zs.m(c,d);break;case qv:for(a=b.sc;a.next();)b=a.value,b.toVertex===e&&b.Zs.m(c,d);break;default:z.k("Unhandled path value "+a.Sf.toString())}}function Jw(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function Hw(a,b,c,d,e,g,h,k){u&&z.l(b,nv,Z,"mergeFringes:parent");u&&z.l(c,nv,Z,"mergeFringes:child");var l=Tv(b),m=90===l||270===l,n=b.nodeSpacing;b=d;var p=e;d=g;e=h;var q=c.yu,r=c.Su;h=c.rb;var s=m?Math.max(e,h.height):Math.max(d,h.width);if(null===q||l!==Tv(c))q=Ew(a,2),r=Ew(a,2),m?(q[0].m(0,0),q[1].m(0,h.height),r[0].m(h.width,0),r[1].m(r[0].x,q[1].y)):(q[0].m(0,0),q[1].m(h.width,0),r[0].m(0,h.height),r[1].m(q[1].x,r[0].y));if(m){c=d;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=
l=0;l<p.length&&m<q.length;){e=p[l];var v=q[m];g=v.x;var t=v.y;g+=c;var x=e;l+1<p.length&&(x=p[l+1]);var y=v,v=y.x,y=y.y;m+1<q.length&&(y=q[m+1],v=y.x,y=y.y,v+=c);var B=d;e.y===t?B=g-e.x:e.y>t&&e.y<y?B=g+(e.y-t)/(y-t)*(v-g)-e.x:t>e.y&&t<x.y&&(B=g-(e.x+(t-e.y)/(x.y-e.y)*(x.x-e.x)));B<d&&(d=B);x.y<=e.y?l++:y<=t?m++:(x.y<=y&&l++,y<=x.y&&m++)}c-=d;c+=n;l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=Ew(a,b.length+l.length);for(d=g=e=0;g<l.length&&l[g].y<b[0].y;)t=l[g++],n[d++].m(t.x+
m,t.y);for(;e<b.length;)t=b[e++],n[d++].m(t.x,t.y);for(e=b[b.length-1].y;g<l.length&&l[g].y<=e;)g++;for(;g<l.length&&l[g].y>e;)t=l[g++],n[d++].m(t.x+m,t.y);l=Ew(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);Ow(a,n);d=l}g=r;t=c;if(null===p||2>p.length||null===g||2>g.length)e=null;else{n=Ew(a,p.length+g.length);for(m=x=l=0;l<p.length&&p[l].y<g[0].y;)e=p[l++],n[m++].m(e.x,e.y);for(;x<g.length;)e=g[x++],n[m++].m(e.x+t,e.y);for(g=g[g.length-1].y;l<p.length&&p[l].y<=g;)l++;for(;l<p.length&&p[l].y>g;)e=p[l++],
n[m++].m(e.x,e.y);e=Ew(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);Ow(a,n)}g=Math.max(0,c)+h.width;h=s}else{c=e;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=l=0;l<p.length&&m<q.length;)e=p[l],v=q[m],g=v.x,t=v.y,t+=c,x=e,l+1<p.length&&(x=p[l+1]),y=v,v=y.x,y=y.y,m+1<q.length&&(y=q[m+1],v=y.x,y=y.y,y+=c),B=d,e.x===g?B=t-e.y:e.x>g&&e.x<v?B=t+(e.x-g)/(v-g)*(y-t)-e.y:g>e.x&&g<x.x&&(B=t-(e.y+(g-e.x)/(x.x-e.x)*(x.y-e.y))),B<d&&(d=B),x.x<=e.x?l++:v<=g?m++:(x.x<=v&&l++,v<=x.x&&m++);c-=d;c+=n;
l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=Ew(a,b.length+l.length);for(d=g=e=0;g<l.length&&l[g].x<b[0].x;)t=l[g++],n[d++].m(t.x,t.y+m);for(;e<b.length;)t=b[e++],n[d++].m(t.x,t.y);for(e=b[b.length-1].x;g<l.length&&l[g].x<=e;)g++;for(;g<l.length&&l[g].x>e;)t=l[g++],n[d++].m(t.x,t.y+m);l=Ew(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);Ow(a,n);d=l}g=r;t=c;if(null===p||2>p.length||null===g||2>g.length)e=null;else{n=Ew(a,p.length+g.length);for(m=x=l=0;l<p.length&&p[l].x<g[0].x;)e=p[l++],
n[m++].m(e.x,e.y);for(;x<g.length;)e=g[x++],n[m++].m(e.x,e.y+t);for(g=g[g.length-1].x;l<p.length&&p[l].x<=g;)l++;for(;l<p.length&&p[l].x>g;)e=p[l++],n[m++].m(e.x,e.y);e=Ew(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);Ow(a,n)}g=s;h=Math.max(0,c)+h.height}Ow(a,b);Ow(a,q);Ow(a,p);Ow(a,r);k[0]=d;k[1]=e;return new w(c,0,g,h)}function Ew(a,b){var c=a.Xz[b];if(void 0!==c&&(c=c.pop(),void 0!==c))return c;for(var c=[],d=0;d<b;d++)c[d]=new M;return c}
function Ow(a,b){var c=b.length,d=a.Xz[c];void 0===d&&(d=[],a.Xz[c]=d);d.push(b)}
Z.prototype.arrangeTrees=function(){if(this.yd===pv)for(var a=this.Ed.j;a.next();){var b=a.value;if(b instanceof nv){var c=b.Yc;if(null!==c){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);Sw(this,b,c,d)}}}else{c=[];for(a=this.Ed.j;a.next();)b=a.value,b instanceof nv&&c.push(b);switch(this.sorting){case Fv:break;case Gv:c.reverse();break;case Hv:c.sort(this.comparer);break;case Iv:c.sort(this.comparer);c.reverse();break;default:z.k("Unhandled sorting value "+this.sorting.toString())}b=
this.Ce;a=b.x;b=b.y;for(d=0;d<c.length;d++){var e=c[d];Sw(this,e,a+e.Wa.x,b+e.Wa.y);switch(this.yd){case mv:b+=e.rb.height+this.sg.height;break;case Tw:a+=e.rb.width+this.sg.width;break;default:z.k("Unhandled arrangement value "+this.yd.toString())}}}};function Sw(a,b,c,d){if(null!==b){u&&z.l(b,nv,Z,"assignAbsolutePositions:v");b.x=c;b.y=d;b=b.children;for(var e=b.length,g=0;g<e;g++){var h=b[g];Sw(a,h,c+h.ta.x,d+h.ta.y)}}}
Z.prototype.commitLayout=function(){this.AB();this.commitNodes();this.mA();this.wu&&this.commitLinks()};Z.prototype.commitNodes=function(){for(var a=this.network.vertexes.j;a.next();)a.value.commit();for(a.reset();a.next();)this.layoutComments(a.value)};
Z.prototype.mA=function(){if(this.UA===xv){for(var a=this.dC,b=[],c=null,d=this.network.vertexes.j;d.next();){var e=d.value;null===c?c=e.sb.copy():c.Wh(e.sb);var g=b[e.level],g=void 0===g?Wv(e):Math.max(g,Wv(e));b[e.level]=g}for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);90===this.angle||270===this.angle?(c.fg(this.nodeSpacing/2,this.layerSpacing),e=new M(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.fg(this.layerSpacing,this.nodeSpacing/2),e=new M(-this.layerSpacing/2,-this.nodeSpacing/2));var g=
[],c=90===this.angle||270===this.angle?c.width:c.height,h=0;if(180===this.angle||270===this.angle)for(d=0;d<a.length;d++)h+=a[d]+b[d];for(d=0;d<a.length;d++){var k=a[d]+b[d];270===this.angle?(h-=k,g.push(new w(0,h,c,k))):90===this.angle?(g.push(new w(0,h,c,k)),h+=k):180===this.angle?(h-=k,g.push(new w(h,0,k,c))):(g.push(new w(h,0,k,c)),h+=k)}this.commitLayers(g,e)}};Z.prototype.commitLayers=function(){};Z.prototype.commitLinks=function(){for(var a=this.network.edges.j;a.next();)a.value.commit()};
Z.prototype.AB=function(){for(var a=this.Ed.j;a.next();){var b=a.value;b instanceof nv&&Uw(this,b)}};function Uw(a,b){if(null!==b){u&&z.l(b,nv,Z,"setPortSpotsTree:v");a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)Uw(a,c[e])}}
Z.prototype.setPortSpots=function(a){u&&z.l(a,nv,Z,"setPortSpots:v");var b=a.alignment;if(Kv(b)){u&&z.l(a,nv,Z,"setPortSpotsBus:v");u&&z.l(b,Ca,Z,"setPortSpots:align");var c=this.Sf===jv,d=Tv(a),e;switch(d){case 0:e=bd;break;case 90:e=cd;break;case 180:e=ad;break;default:e=$c}var g=a.children,h=g.length;switch(b){case Lv:case Av:for(b=0;b<h;b++){var k=g[b],k=(c?k.vc:k.sc).first();if(null!==k&&(k=k.link,null!==k)){var l=90===d||270===d?ad:$c;if(1===h||b===h-1&&1===h%2)switch(d){case 0:l=ad;break;case 90:l=
$c;break;case 180:l=bd;break;default:l=cd}else 0===b%2&&(l=90===d||270===d?bd:cd);c?(a.setsPortSpot&&(k.Gb=e),a.setsChildPortSpot&&(k.Hb=l)):(a.setsPortSpot&&(k.Gb=l),a.setsChildPortSpot&&(k.Hb=e))}}break;case Mv:l=90===d||270===d?bd:cd;for(d=c?a.sc:a.vc;d.next();)k=d.value.link,null!==k&&(c?(a.setsPortSpot&&(k.Gb=e),a.setsChildPortSpot&&(k.Hb=l)):(a.setsPortSpot&&(k.Gb=l),a.setsChildPortSpot&&(k.Hb=e)));break;case Nv:for(l=90===d||270===d?ad:$c,d=c?a.sc:a.vc;d.next();)k=d.value.link,null!==k&&(c?
(a.setsPortSpot&&(k.Gb=e),a.setsChildPortSpot&&(k.Hb=l)):(a.setsPortSpot&&(k.Gb=l),a.setsChildPortSpot&&(k.Hb=e)))}}else if(c=Tv(a),this.Sf===jv)for(e=a.sc;e.next();){if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.hd())switch(c){case 0:d.Gb=bd;break;case 90:d.Gb=cd;break;case 180:d.Gb=ad;break;default:d.Gb=$c}else d.Gb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.hd())switch(c){case 0:d.Hb=ad;break;case 90:d.Hb=$c;break;case 180:d.Hb=bd;break;default:d.Hb=cd}else d.Hb=a.childPortSpot}}else for(e=
a.vc;e.next();)if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.hd())switch(c){case 0:d.Hb=bd;break;case 90:d.Hb=cd;break;case 180:d.Hb=ad;break;default:d.Hb=$c}else d.Hb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.hd())switch(c){case 0:d.Gb=ad;break;case 90:d.Gb=$c;break;case 180:d.Gb=bd;break;default:d.Gb=cd}else d.Gb=a.childPortSpot}};function Tv(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function Wv(a){u&&z.l(a,nv,Z,"computeLayerSpacing:v");var b=Tv(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width);return c}function Xv(a){u&&z.l(a,nv,Z,"computeNodeIndent:v");var b=Tv(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
z.defineProperty(Z,{vM:"roots"},function(){return this.Ed},function(a){this.Ed!==a&&(z.l(a,K,Z,"roots"),this.Ed=a,this.N())});z.defineProperty(Z,{path:"path"},function(){return this.Ss},function(a){this.Ss!==a&&(z.Ca(a,Z,Z,"path"),this.Ss=a,this.N())});z.defineProperty(Z,{BK:"treeStyle"},function(){return this.Ht},function(a){this.yd!==a&&(z.Ca(a,Z,Z,"treeStyle"),a===kv||a===Dv||a===Ev||a===Cv)&&(this.Ht=a,this.N())});
z.defineProperty(Z,{UA:"layerStyle"},function(){return this.gw},function(a){this.yd!==a&&(z.Ca(a,Z,Z,"layerStyle"),a===lv||a===yv||a===xv)&&(this.gw=a,this.N())});z.defineProperty(Z,{comments:"comments"},function(){return this.Yh},function(a){this.Yh!==a&&(z.h(a,"boolean",Z,"comments"),this.Yh=a,this.N())});z.defineProperty(Z,{ag:"arrangement"},function(){return this.yd},function(a){this.yd!==a&&(z.Ca(a,Z,Z,"arrangement"),a===mv||a===Tw||a===pv)&&(this.yd=a,this.N())});
z.defineProperty(Z,{AE:"arrangementSpacing"},function(){return this.sg},function(a){z.l(a,Fa,Z,"arrangementSpacing");this.sg.O(a)||(this.sg.assign(a),this.N())});z.defineProperty(Z,{uM:"rootDefaults"},function(){return this.za},function(a){this.za!==a&&(z.l(a,nv,Z,"rootDefaults"),this.za=a,this.N())});z.defineProperty(Z,{TK:"alternateDefaults"},function(){return this.Aa},function(a){this.Aa!==a&&(z.l(a,nv,Z,"alternateDefaults"),this.Aa=a,this.N())});
z.defineProperty(Z,{sorting:"sorting"},function(){return this.za.sorting},function(a){this.za.sorting!==a&&(z.Ca(a,Z,Z,"sorting"),a===Fv||a===Gv||a===Hv||Iv)&&(this.za.sorting=a,this.N())});z.defineProperty(Z,{comparer:"comparer"},function(){return this.za.comparer},function(a){this.za.comparer!==a&&(z.h(a,"function",Z,"comparer"),this.za.comparer=a,this.N())});
z.defineProperty(Z,{angle:"angle"},function(){return this.za.angle},function(a){this.za.angle!==a&&(z.h(a,"number",Z,"angle"),0===a||90===a||180===a||270===a?(this.za.angle=a,this.N()):z.k("TreeLayout.angle must be 0, 90, 180, or 270"))});z.defineProperty(Z,{alignment:"alignment"},function(){return this.za.alignment},function(a){this.za.alignment!==a&&(z.Ca(a,Z,Z,"alignment"),this.za.alignment=a,this.N())});
z.defineProperty(Z,{nodeIndent:"nodeIndent"},function(){return this.za.nodeIndent},function(a){this.za.nodeIndent!==a&&(z.h(a,"number",Z,"nodeIndent"),0<=a&&(this.za.nodeIndent=a,this.N()))});z.defineProperty(Z,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.za.nodeIndentPastParent},function(a){this.za.nodeIndentPastParent!==a&&(z.h(a,"number",Z,"nodeIndentPastParent"),0<=a&&1>=a&&(this.za.nodeIndentPastParent=a,this.N()))});
z.defineProperty(Z,{nodeSpacing:"nodeSpacing"},function(){return this.za.nodeSpacing},function(a){this.za.nodeSpacing!==a&&(z.h(a,"number",Z,"nodeSpacing"),this.za.nodeSpacing=a,this.N())});z.defineProperty(Z,{layerSpacing:"layerSpacing"},function(){return this.za.layerSpacing},function(a){this.za.layerSpacing!==a&&(z.h(a,"number",Z,"layerSpacing"),this.za.layerSpacing=a,this.N())});
z.defineProperty(Z,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.za.layerSpacingParentOverlap},function(a){this.za.layerSpacingParentOverlap!==a&&(z.h(a,"number",Z,"layerSpacingParentOverlap"),0<=a&&1>=a&&(this.za.layerSpacingParentOverlap=a,this.N()))});z.defineProperty(Z,{compaction:"compaction"},function(){return this.za.compaction},function(a){this.za.compaction!==a&&(z.Ca(a,Z,Z,"compaction"),a===Qv||a===Sv)&&(this.za.compaction=a,this.N())});
z.defineProperty(Z,{breadthLimit:"breadthLimit"},function(){return this.za.breadthLimit},function(a){this.za.breadthLimit!==a&&(z.h(a,"number",Z,"breadthLimit"),0<=a&&(this.za.breadthLimit=a,this.N()))});z.defineProperty(Z,{rowSpacing:"rowSpacing"},function(){return this.za.rowSpacing},function(a){this.za.rowSpacing!==a&&(z.h(a,"number",Z,"rowSpacing"),this.za.rowSpacing=a,this.N())});
z.defineProperty(Z,{rowIndent:"rowIndent"},function(){return this.za.rowIndent},function(a){this.za.rowIndent!==a&&(z.h(a,"number",Z,"rowIndent"),0<=a&&(this.za.rowIndent=a,this.N()))});z.defineProperty(Z,{commentSpacing:"commentSpacing"},function(){return this.za.commentSpacing},function(a){this.za.commentSpacing!==a&&(z.h(a,"number",Z,"commentSpacing"),this.za.commentSpacing=a,this.N())});
z.defineProperty(Z,{commentMargin:"commentMargin"},function(){return this.za.commentMargin},function(a){this.za.commentMargin!==a&&(z.h(a,"number",Z,"commentMargin"),this.za.commentMargin=a,this.N())});z.defineProperty(Z,{setsPortSpot:"setsPortSpot"},function(){return this.za.setsPortSpot},function(a){this.za.setsPortSpot!==a&&(z.h(a,"boolean",Z,"setsPortSpot"),this.za.setsPortSpot=a,this.N())});
z.defineProperty(Z,{portSpot:"portSpot"},function(){return this.za.portSpot},function(a){z.l(a,R,Z,"portSpot");this.za.portSpot.O(a)||(this.za.portSpot=a,this.N())});z.defineProperty(Z,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.za.setsChildPortSpot},function(a){this.za.setsChildPortSpot!==a&&(z.h(a,"boolean",Z,"setsChildPortSpot"),this.za.setsChildPortSpot=a,this.N())});
z.defineProperty(Z,{childPortSpot:"childPortSpot"},function(){return this.za.childPortSpot},function(a){z.l(a,R,Z,"childPortSpot");this.za.childPortSpot.O(a)||(this.za.childPortSpot=a,this.N())});z.defineProperty(Z,{dL:"alternateSorting"},function(){return this.Aa.sorting},function(a){this.Aa.sorting!==a&&(z.Ca(a,Z,Z,"alternateSorting"),a===Fv||a===Gv||a===Hv||Iv)&&(this.Aa.sorting=a,this.N())});
z.defineProperty(Z,{SK:"alternateComparer"},function(){return this.Aa.comparer},function(a){this.Aa.comparer!==a&&(z.h(a,"function",Z,"alternateComparer"),this.Aa.comparer=a,this.N())});z.defineProperty(Z,{MK:"alternateAngle"},function(){return this.Aa.angle},function(a){this.Aa.angle!==a&&(z.h(a,"number",Z,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.Aa.angle=a,this.N())});
z.defineProperty(Z,{LK:"alternateAlignment"},function(){return this.Aa.alignment},function(a){this.Aa.alignment!==a&&(z.Ca(a,Z,Z,"alternateAlignment"),this.Aa.alignment=a,this.N())});z.defineProperty(Z,{WK:"alternateNodeIndent"},function(){return this.Aa.nodeIndent},function(a){this.Aa.nodeIndent!==a&&(z.h(a,"number",Z,"alternateNodeIndent"),0<=a&&(this.Aa.nodeIndent=a,this.N()))});
z.defineProperty(Z,{XK:"alternateNodeIndentPastParent"},function(){return this.Aa.nodeIndentPastParent},function(a){this.Aa.nodeIndentPastParent!==a&&(z.h(a,"number",Z,"alternateNodeIndentPastParent"),0<=a&&1>=a&&(this.Aa.nodeIndentPastParent=a,this.N()))});z.defineProperty(Z,{YK:"alternateNodeSpacing"},function(){return this.Aa.nodeSpacing},function(a){this.Aa.nodeSpacing!==a&&(z.h(a,"number",Z,"alternateNodeSpacing"),this.Aa.nodeSpacing=a,this.N())});
z.defineProperty(Z,{UK:"alternateLayerSpacing"},function(){return this.Aa.layerSpacing},function(a){this.Aa.layerSpacing!==a&&(z.h(a,"number",Z,"alternateLayerSpacing"),this.Aa.layerSpacing=a,this.N())});z.defineProperty(Z,{VK:"alternateLayerSpacingParentOverlap"},function(){return this.Aa.layerSpacingParentOverlap},function(a){this.Aa.layerSpacingParentOverlap!==a&&(z.h(a,"number",Z,"alternateLayerSpacingParentOverlap"),0<=a&&1>=a&&(this.Aa.layerSpacingParentOverlap=a,this.N()))});
z.defineProperty(Z,{RK:"alternateCompaction"},function(){return this.Aa.compaction},function(a){this.Aa.compaction!==a&&(z.Ca(a,Z,Z,"alternateCompaction"),a===Qv||a===Sv)&&(this.Aa.compaction=a,this.N())});z.defineProperty(Z,{NK:"alternateBreadthLimit"},function(){return this.Aa.breadthLimit},function(a){this.Aa.breadthLimit!==a&&(z.h(a,"number",Z,"alternateBreadthLimit"),0<=a&&(this.Aa.breadthLimit=a,this.N()))});
z.defineProperty(Z,{aL:"alternateRowSpacing"},function(){return this.Aa.rowSpacing},function(a){this.Aa.rowSpacing!==a&&(z.h(a,"number",Z,"alternateRowSpacing"),this.Aa.rowSpacing=a,this.N())});z.defineProperty(Z,{$K:"alternateRowIndent"},function(){return this.Aa.rowIndent},function(a){this.Aa.rowIndent!==a&&(z.h(a,"number",Z,"alternateRowIndent"),0<=a&&(this.Aa.rowIndent=a,this.N()))});
z.defineProperty(Z,{QK:"alternateCommentSpacing"},function(){return this.Aa.commentSpacing},function(a){this.Aa.commentSpacing!==a&&(z.h(a,"number",Z,"alternateCommentSpacing"),this.Aa.commentSpacing=a,this.N())});z.defineProperty(Z,{PK:"alternateCommentMargin"},function(){return this.Aa.commentMargin},function(a){this.Aa.commentMargin!==a&&(z.h(a,"number",Z,"alternateCommentMargin"),this.Aa.commentMargin=a,this.N())});
z.defineProperty(Z,{cL:"alternateSetsPortSpot"},function(){return this.Aa.setsPortSpot},function(a){this.Aa.setsPortSpot!==a&&(z.h(a,"boolean",Z,"alternateSetsPortSpot"),this.Aa.setsPortSpot=a,this.N())});z.defineProperty(Z,{ZK:"alternatePortSpot"},function(){return this.Aa.portSpot},function(a){z.l(a,R,Z,"alternatePortSpot");this.Aa.portSpot.O(a)||(this.Aa.portSpot=a,this.N())});
z.defineProperty(Z,{bL:"alternateSetsChildPortSpot"},function(){return this.Aa.setsChildPortSpot},function(a){this.Aa.setsChildPortSpot!==a&&(z.h(a,"boolean",Z,"alternateSetsChildPortSpot"),this.Aa.setsChildPortSpot=a,this.N())});z.defineProperty(Z,{OK:"alternateChildPortSpot"},function(){return this.Aa.childPortSpot},function(a){z.l(a,R,Z,"alternateChildPortSpot");this.Aa.childPortSpot.O(a)||(this.Aa.childPortSpot=a,this.N())});var iv;Z.PathDefault=iv=z.s(Z,"PathDefault",-1);var jv;
Z.PathDestination=jv=z.s(Z,"PathDestination",0);var qv;Z.PathSource=qv=z.s(Z,"PathSource",1);var Fv;Z.SortingForwards=Fv=z.s(Z,"SortingForwards",10);var Gv;Z.SortingReverse=Gv=z.s(Z,"SortingReverse",11);var Hv;Z.SortingAscending=Hv=z.s(Z,"SortingAscending",12);var Iv;Z.SortingDescending=Iv=z.s(Z,"SortingDescending",13);var Kw;Z.AlignmentCenterSubtrees=Kw=z.s(Z,"AlignmentCenterSubtrees",20);var Jv;Z.AlignmentCenterChildren=Jv=z.s(Z,"AlignmentCenterChildren",21);var Uv;
Z.AlignmentStart=Uv=z.s(Z,"AlignmentStart",22);var Vv;Z.AlignmentEnd=Vv=z.s(Z,"AlignmentEnd",23);var Lv;Z.AlignmentBus=Lv=z.s(Z,"AlignmentBus",24);var Av;Z.AlignmentBusBranching=Av=z.s(Z,"AlignmentBusBranching",25);var Mv;Z.AlignmentTopLeftBus=Mv=z.s(Z,"AlignmentTopLeftBus",26);var Nv;Z.AlignmentBottomRightBus=Nv=z.s(Z,"AlignmentBottomRightBus",27);var Qv;Z.CompactionNone=Qv=z.s(Z,"CompactionNone",30);var Sv;Z.CompactionBlock=Sv=z.s(Z,"CompactionBlock",31);var kv;
Z.StyleLayered=kv=z.s(Z,"StyleLayered",40);var Ev;Z.StyleLastParents=Ev=z.s(Z,"StyleLastParents",41);var Dv;Z.StyleAlternating=Dv=z.s(Z,"StyleAlternating",42);var Cv;Z.StyleRootOnly=Cv=z.s(Z,"StyleRootOnly",43);var mv;Z.ArrangementVertical=mv=z.s(Z,"ArrangementVertical",50);var Tw;Z.ArrangementHorizontal=Tw=z.s(Z,"ArrangementHorizontal",51);var pv;Z.ArrangementFixedRoots=pv=z.s(Z,"ArrangementFixedRoots",52);var lv;Z.LayerIndividual=lv=z.s(Z,"LayerIndividual",60);var yv;
Z.LayerSiblings=yv=z.s(Z,"LayerSiblings",61);var xv;Z.LayerUniform=xv=z.s(Z,"LayerUniform",62);function ov(){ya.call(this)}z.Ta(ov,ya);z.ka("TreeNetwork",ov);ov.prototype.createVertex=function(){return new nv};ov.prototype.createEdge=function(){return new Vw};
function nv(){za.call(this);this.initialized=!1;this.parent=null;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=null;this.ta=new M(0,0);this.rb=new Fa(0,0);this.Wa=new M(0,0);this.Nq=this.Mq=this.eK=!1;this.Su=this.yu=null;this.sorting=Fv;this.comparer=rs;this.angle=0;this.alignment=Jv;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=Sv;this.breadthLimit=
0;this.rowSpacing=25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=!0;this.portSpot=Rc;this.setsChildPortSpot=!0;this.childPortSpot=Rc}z.Ta(nv,za);z.ka("TreeVertex",nv);
nv.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};z.w(nv,{Fn:"childrenCount"},function(){return this.children.length});z.defineProperty(nv,{tM:"relativePosition"},function(){return this.ta},function(a){this.ta.set(a)});z.defineProperty(nv,{FM:"subtreeSize"},function(){return this.rb},function(a){this.rb.set(a)});
z.defineProperty(nv,{EM:"subtreeOffset"},function(){return this.Wa},function(a){this.Wa.set(a)});function Vw(){Aa.call(this);this.Zs=new M(0,0)}z.Ta(Vw,Aa);z.ka("TreeEdge",Vw);
Vw.prototype.commit=function(){var a=this.link;if(null!==a&&!a.Di){var b=this.network.Wb,c=null,d=null;switch(b.Sf){case jv:c=this.fromVertex;d=this.toVertex;break;case qv:c=this.toVertex;d=this.fromVertex;break;default:z.k("Unhandled path value "+b.Sf.toString())}if(null!==c&&null!==d)if(b=this.Zs,0!==b.x||0!==b.y||c.eK){var d=c.sb,e=Tv(c),g=Wv(c),h=c.rowSpacing;a.uo();var k=a.hf===Dj,l=a.tc,m=0,n,p;a.xm();if(l||k){for(m=2;4<a.ua;)a.kG(2);n=a.n(1);p=a.n(2)}else{for(m=1;3<a.ua;)a.kG(1);n=a.n(0);p=
a.n(a.ua-1)}var q=a.n(a.ua-1),r=0;0===e?(c.alignment===Vv?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-Xv(c))))):c.alignment===Uv?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+Xv(c))))):r=c.Mq||c.Nq&&1===c.maxGenerationCount?d.top-c.Wa.y+b.y:d.y+d.height/2+b.y,k?(a.B(m,n.x,r),m++,a.B(m,d.right+g,r),m++,a.B(m,d.right+g+(b.x-h)/3,r),m++,a.B(m,d.right+g+2*(b.x-h)/3,r),m++,a.B(m,d.right+g+(b.x-h),r),m++,a.B(m,p.x,r)):(l&&(a.B(m,d.right+g/2,n.y),
m++),a.B(m,d.right+g/2,r),m++,a.B(m,d.right+g+b.x-(l?h/2:h),r),m++,l&&a.B(m,a.n(m-1).x,p.y))):90===e?(c.alignment===Vv?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-Xv(c))))):c.alignment===Uv?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+Xv(c))))):r=c.Mq||c.Nq&&1===c.maxGenerationCount?d.left-c.Wa.x+b.x:d.x+d.width/2+b.x,k?(a.B(m,r,n.y),m++,a.B(m,r,d.bottom+g),m++,a.B(m,r,d.bottom+g+(b.y-h)/3),m++,a.B(m,r,d.bottom+g+2*(b.y-h)/3),m++,a.B(m,r,d.bottom+
g+(b.y-h)),m++,a.B(m,r,p.y)):(l&&(a.B(m,n.x,d.bottom+g/2),m++),a.B(m,r,d.bottom+g/2),m++,a.B(m,r,d.bottom+g+b.y-(l?h/2:h)),m++,l&&a.B(m,p.x,a.n(m-1).y))):180===e?(c.alignment===Vv?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-Xv(c))))):c.alignment===Uv?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+Xv(c))))):r=c.Mq||c.Nq&&1===c.maxGenerationCount?d.top-c.Wa.y+b.y:d.y+d.height/2+b.y,k?(a.B(m,n.x,r),m++,a.B(m,d.left-g,r),m++,a.B(m,d.left-g+(b.x+
h)/3,r),m++,a.B(m,d.left-g+2*(b.x+h)/3,r),m++,a.B(m,d.left-g+(b.x+h),r),m++,a.B(m,p.x,r)):(l&&(a.B(m,d.left-g/2,n.y),m++),a.B(m,d.left-g/2,r),m++,a.B(m,d.left-g+b.x+(l?h/2:h),r),m++,l&&a.B(m,a.n(m-1).x,p.y))):270===e?(c.alignment===Vv?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-Xv(c))))):c.alignment===Uv?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+Xv(c))))):r=c.Mq||c.Nq&&1===c.maxGenerationCount?d.left-c.Wa.x+b.x:d.x+d.width/2+b.x,k?(a.B(m,
r,n.y),m++,a.B(m,r,d.top-g),m++,a.B(m,r,d.top-g+(b.y+h)/3),m++,a.B(m,r,d.top-g+2*(b.y+h)/3),m++,a.B(m,r,d.top-g+(b.y+h)),m++,a.B(m,r,p.y)):(l&&(a.B(m,n.x,d.top-g/2),m++),a.B(m,r,d.top-g/2),m++,a.B(m,r,d.top-g+b.y+(l?h/2:h)),m++,l&&a.B(m,p.x,a.n(m-1).y))):z.k("Invalid angle "+e);a.yj()}else e=c,g=d,u&&z.l(e,nv,Vw,"adjustRouteForAngleChange:parent"),u&&z.l(g,nv,Vw,"adjustRouteForAngleChange:child"),a=this.link,c=Tv(e),c!==Tv(g)&&(b=Wv(e),d=e.sb,e=g.sb,0===c&&e.left-d.right<b+1||90===c&&e.top-d.bottom<
b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1||(a.uo(),e=a.hf===Dj,g=a.tc,h=Kv(this.fromVertex.alignment),a.xm(),0===c?(c=d.right+b/2,e?4===a.ua&&(b=a.n(3).y,a.ja(1,c-20,a.n(1).y),a.B(2,c-20,b),a.B(3,c,b),a.B(4,c+20,b),a.ja(5,a.n(5).x,b)):g?h?a.ja(3,a.n(2).x,a.n(4).y):6===a.ua&&(a.ja(2,c,a.n(2).y),a.ja(3,c,a.n(3).y)):4===a.ua?a.B(2,c,a.n(2).y):3===a.ua?a.ja(1,c,a.n(2).y):2===a.ua&&a.B(1,c,a.n(1).y)):90===c?(b=d.bottom+b/2,e?4===a.ua&&(c=a.n(3).x,a.ja(1,a.n(1).x,b-20),a.B(2,c,b-20),
a.B(3,c,b),a.B(4,c,b+20),a.ja(5,c,a.n(5).y)):g?h?a.ja(3,a.n(2).x,a.n(4).y):6===a.ua&&(a.ja(2,a.n(2).x,b),a.ja(3,a.n(3).x,b)):4===a.ua?a.B(2,a.n(2).x,b):3===a.ua?a.ja(1,a.n(2).x,b):2===a.ua&&a.B(1,a.n(1).x,b)):180===c?(c=d.left-b/2,e?4===a.ua&&(b=a.n(3).y,a.ja(1,c+20,a.n(1).y),a.B(2,c+20,b),a.B(3,c,b),a.B(4,c-20,b),a.ja(5,a.n(5).x,b)):g?h?a.ja(3,a.n(2).x,a.n(4).y):6===a.ua&&(a.ja(2,c,a.n(2).y),a.ja(3,c,a.n(3).y)):4===a.ua?a.B(2,c,a.n(2).y):3===a.ua?a.ja(1,c,a.n(2).y):2===a.ua&&a.B(1,c,a.n(1).y)):270===
c&&(b=d.top-b/2,e?4===a.ua&&(c=a.n(3).x,a.ja(1,a.n(1).x,b+20),a.B(2,c,b+20),a.B(3,c,b),a.B(4,c,b-20),a.ja(5,c,a.n(5).y)):g?h?a.ja(3,a.n(2).x,a.n(4).y):6===a.ua&&(a.ja(2,a.n(2).x,b),a.ja(3,a.n(3).x,b)):4===a.ua?a.B(2,a.n(2).x,b):3===a.ua?a.ja(1,a.n(2).x,b):2===a.ua&&a.B(1,a.n(1).x,b)),a.yj()))}};z.defineProperty(Vw,{sM:"relativePoint"},function(){return this.Zs},function(a){this.Zs.set(a)});function Ww(){O.call(this);this.Ze=null}z.Ta(Ww,O);
Ww.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.element=this.Ze.cloneNode(!0)};Ww.prototype.toString=function(){return"HTMLHost("+this.Ze.toString()+")#"+z.Hd(this)};
Ww.prototype.Ok=function(a,b){var c=this.Ze;if(null!==c){var d=this.cb(mc);d.x-=this.Z.width/2;d.y-=this.Z.height/2;d.x-=this.Z.x;d.y-=this.Z.y;var d=b.MB(d),e=b.Aj;null===e||e.contains(c)||e.appendChild(c);e=this.transform;c.style.transform="matrix("+e.m11+","+e.m12+","+e.m21+","+e.m22+","+e.dx+","+e.dy+")";c.style.transformOrigin="0 0";e=d.y;c.style.left=d.x+"px";c.style.top=e+"px"}};
Ww.prototype.zq=function(a,b,c,d){var e=this.Da;isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);var e=this.mf,g=this.ig;c=Math.max(c,g.width);d=Math.max(d,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);c=this.Ze;null!==c&&(b=c.getBoundingClientRect(),a=b.width,b=b.height);Ab(this.Tc,a,b);Bo(this,0,0,a,b)};Ww.prototype.wj=function(a,b,c,d){Go(this,a,b,c,d)};z.w(Ww,{Ja:"naturalBounds"},function(){return this.Tc});
z.defineProperty(Ww,{element:"element"},function(){return this.Ze},function(a){var b=this.Ze;b!==a&&(a instanceof Element||z.k("HTMLHost.element must be an instance of Element."),this.Ze=a,a.className="HTMLHost",this.i("element",b,a),this.ra())});ca.version="1.7.3";window&&(window.module&&"object"===typeof window.module&&"object"===typeof window.module.exports?window.module.exports=ca:window.define&&"function"===typeof window.define&&window.define.amd?(window.go=ca,window.define(ca)):window.go=ca);
"undefined"!==typeof module&&"object"===typeof module.exports&&(module.exports=ca); })(window);
